{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { ref, computed } from 'vue';\nimport { InboxIcon, PencilSquareIcon } from '@heroicons/vue/24/outline';\nimport { showToast } from '@/components/ToastMessage';\n\n// 消息类型标签\n\nexport default {\n  __name: 'MyMessages',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const messageTabs = [{\n      key: 'all',\n      label: '全部消息',\n      unread: 5\n    }, {\n      key: 'system',\n      label: '系统通知',\n      unread: 2\n    }, {\n      key: 'private',\n      label: '私信',\n      unread: 3\n    }];\n    const currentMessageTab = ref('all');\n    const loading = ref(false);\n    const hasMore = ref(true);\n\n    // 模拟消息数据\n    const messages = ref([{\n      id: 1,\n      sender: '系统通知',\n      avatar: 'https://picsum.photos/32/32?random=1',\n      content: '欢迎加入飞鸟社区！',\n      time: '刚刚',\n      unread: true,\n      type: 'system'\n    }, {\n      id: 2,\n      sender: '张三',\n      avatar: 'https://picsum.photos/32/32?random=2',\n      content: '你好，我看了你的文章很受启发',\n      time: '10分钟前',\n      unread: true,\n      type: 'private'\n    }\n    // 添加更多消息...\n    ]);\n\n    // 根据当前标签筛选消息\n    const currentMessages = computed(() => {\n      if (currentMessageTab.value === 'all') {\n        return messages.value;\n      }\n      return messages.value.filter(msg => msg.type === currentMessageTab.value);\n    });\n\n    // 处理消息点击\n    const handleMessageClick = message => {\n      // 标记消息为已读\n      message.unread = false;\n      // TODO: 打开消息详情\n      showToast('消息功能开发中...', 'info');\n    };\n\n    // 加载更多消息\n    const loadMore = async () => {\n      if (loading.value) return;\n      loading.value = true;\n      try {\n        // TODO: 调用API加载更多消息\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        // 模拟加载完成\n        hasMore.value = false;\n      } catch (error) {\n        showToast('加载失败，请重试', 'error');\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 打开新消息对话框\n    const openNewMessage = () => {\n      showToast('新消息功能开发中...', 'info');\n    };\n    const __returned__ = {\n      messageTabs,\n      currentMessageTab,\n      loading,\n      hasMore,\n      messages,\n      currentMessages,\n      handleMessageClick,\n      loadMore,\n      openNewMessage,\n      ref,\n      computed,\n      get InboxIcon() {\n        return InboxIcon;\n      },\n      get PencilSquareIcon() {\n        return PencilSquareIcon;\n      },\n      get showToast() {\n        return showToast;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","InboxIcon","PencilSquareIcon","showToast","messageTabs","key","label","unread","currentMessageTab","loading","hasMore","messages","id","sender","avatar","content","time","type","currentMessages","value","filter","msg","handleMessageClick","message","loadMore","Promise","resolve","setTimeout","error","openNewMessage"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/MyMessages.vue"],"sourcesContent":["<template>\n  <div class=\"messages-container\">\n    <!-- 消息类型切换 -->\n    <div class=\"bg-white rounded-lg shadow mb-4\">\n      <div class=\"flex border-b\">\n        <button\n          v-for=\"tab in messageTabs\"\n          :key=\"tab.key\"\n          @click=\"currentMessageTab = tab.key\"\n          class=\"flex-1 px-4 py-3 text-sm font-medium relative\"\n          :class=\"[\n            currentMessageTab === tab.key\n              ? 'text-blue-600'\n              : 'text-gray-500 hover:text-gray-700'\n          ]\"\n        >\n          {{ tab.label }}\n          <span \n            v-if=\"tab.unread\" \n            class=\"absolute top-2 right-2 bg-red-500 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1\"\n          >\n            {{ tab.unread }}\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 消息列表 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <!-- 空状态 -->\n      <div v-if=\"!currentMessages.length\" class=\"p-8 text-center\">\n        <div class=\"w-16 h-16 mx-auto mb-4\">\n          <InboxIcon class=\"w-full h-full text-gray-400\" />\n        </div>\n        <p class=\"text-gray-500\">暂无消息</p>\n      </div>\n\n      <!-- 消息列表 -->\n      <div v-else class=\"divide-y divide-gray-100\">\n        <div \n          v-for=\"message in currentMessages\" \n          :key=\"message.id\"\n          class=\"p-4 hover:bg-gray-50 transition-colors cursor-pointer\"\n          :class=\"{ 'bg-blue-50': message.unread }\"\n          @click=\"handleMessageClick(message)\"\n        >\n          <div class=\"flex items-start space-x-3\">\n            <img \n              :src=\"message.avatar\" \n              :alt=\"message.sender\"\n              class=\"w-10 h-10 rounded-full flex-shrink-0\"\n            />\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center justify-between\">\n                <p class=\"text-sm font-medium text-gray-900\">{{ message.sender }}</p>\n                <span class=\"text-xs text-gray-500\">{{ message.time }}</span>\n              </div>\n              <p class=\"text-sm text-gray-500 truncate mt-1\">{{ message.content }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 加载更多 -->\n      <div \n        v-if=\"currentMessages.length && hasMore\" \n        class=\"p-4 text-center border-t\"\n      >\n        <button \n          @click=\"loadMore\"\n          class=\"text-sm text-blue-600 hover:text-blue-700\"\n          :disabled=\"loading\"\n        >\n          {{ loading ? '加载中...' : '加载更多' }}\n        </button>\n      </div>\n    </div>\n\n    <!-- 新消息按钮 -->\n    <button\n      class=\"fixed right-4 bottom-20 lg:bottom-4 bg-blue-600 text-white rounded-full p-3 shadow-lg hover:bg-blue-700 transition-colors\"\n      @click=\"openNewMessage\"\n    >\n      <PencilSquareIcon class=\"w-6 h-6\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { InboxIcon, PencilSquareIcon } from '@heroicons/vue/24/outline'\nimport { showToast } from '@/components/ToastMessage'\n\n// 消息类型标签\nconst messageTabs = [\n  { key: 'all', label: '全部消息', unread: 5 },\n  { key: 'system', label: '系统通知', unread: 2 },\n  { key: 'private', label: '私信', unread: 3 }\n]\n\nconst currentMessageTab = ref('all')\nconst loading = ref(false)\nconst hasMore = ref(true)\n\n// 模拟消息数据\nconst messages = ref([\n  {\n    id: 1,\n    sender: '系统通知',\n    avatar: 'https://picsum.photos/32/32?random=1',\n    content: '欢迎加入飞鸟社区！',\n    time: '刚刚',\n    unread: true,\n    type: 'system'\n  },\n  {\n    id: 2,\n    sender: '张三',\n    avatar: 'https://picsum.photos/32/32?random=2',\n    content: '你好，我看了你的文章很受启发',\n    time: '10分钟前',\n    unread: true,\n    type: 'private'\n  },\n  // 添加更多消息...\n])\n\n// 根据当前标签筛选消息\nconst currentMessages = computed(() => {\n  if (currentMessageTab.value === 'all') {\n    return messages.value\n  }\n  return messages.value.filter(msg => msg.type === currentMessageTab.value)\n})\n\n// 处理消息点击\nconst handleMessageClick = (message) => {\n  // 标记消息为已读\n  message.unread = false\n  // TODO: 打开消息详情\n  showToast('消息功能开发中...', 'info')\n}\n\n// 加载更多消息\nconst loadMore = async () => {\n  if (loading.value) return\n  loading.value = true\n  try {\n    // TODO: 调用API加载更多消息\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    // 模拟加载完成\n    hasMore.value = false\n  } catch (error) {\n    showToast('加载失败，请重试', 'error')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 打开新消息对话框\nconst openNewMessage = () => {\n  showToast('新消息功能开发中...', 'info')\n}\n</script>\n\n<style scoped>\n.messages-container {\n  min-height: calc(100vh - 64px - 56px); /* 减去头部和底部导航的高度 */\n  padding-bottom: 80px; /* 为新消息按钮预留空间 */\n}\n\n@media (min-width: 1024px) {\n  .messages-container {\n    min-height: calc(100vh - 64px);\n    padding-bottom: 60px;\n  }\n}\n</style> "],"mappings":";;AAyFA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,SAASC,SAAS,EAAEC,gBAAgB,QAAQ,2BAA0B;AACtE,SAASC,SAAS,QAAQ,2BAA0B;;AAEpD;;;;;;;;IACA,MAAMC,WAAW,GAAG,CAClB;MAAEC,GAAG,EAAE,KAAK;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE;IAAE,CAAC,EACxC;MAAEF,GAAG,EAAE,QAAQ;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE;IAAE,CAAC,EAC3C;MAAEF,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAE,EAC3C;IAEA,MAAMC,iBAAiB,GAAGT,GAAG,CAAC,KAAK;IACnC,MAAMU,OAAO,GAAGV,GAAG,CAAC,KAAK;IACzB,MAAMW,OAAO,GAAGX,GAAG,CAAC,IAAI;;IAExB;IACA,MAAMY,QAAQ,GAAGZ,GAAG,CAAC,CACnB;MACEa,EAAE,EAAE,CAAC;MACLC,MAAM,EAAE,MAAM;MACdC,MAAM,EAAE,sCAAsC;MAC9CC,OAAO,EAAE,WAAW;MACpBC,IAAI,EAAE,IAAI;MACVT,MAAM,EAAE,IAAI;MACZU,IAAI,EAAE;IACR,CAAC,EACD;MACEL,EAAE,EAAE,CAAC;MACLC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,sCAAsC;MAC9CC,OAAO,EAAE,gBAAgB;MACzBC,IAAI,EAAE,OAAO;MACbT,MAAM,EAAE,IAAI;MACZU,IAAI,EAAE;IACR;IACA;IAAA,CACD;;IAED;IACA,MAAMC,eAAe,GAAGlB,QAAQ,CAAC,MAAM;MACrC,IAAIQ,iBAAiB,CAACW,KAAK,KAAK,KAAK,EAAE;QACrC,OAAOR,QAAQ,CAACQ,KAAI;MACtB;MACA,OAAOR,QAAQ,CAACQ,KAAK,CAACC,MAAM,CAACC,GAAG,IAAIA,GAAG,CAACJ,IAAI,KAAKT,iBAAiB,CAACW,KAAK;IAC1E,CAAC;;IAED;IACA,MAAMG,kBAAkB,GAAIC,OAAO,IAAK;MACtC;MACAA,OAAO,CAAChB,MAAM,GAAG,KAAI;MACrB;MACAJ,SAAS,CAAC,YAAY,EAAE,MAAM;IAChC;;IAEA;IACA,MAAMqB,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAIf,OAAO,CAACU,KAAK,EAAE;MACnBV,OAAO,CAACU,KAAK,GAAG,IAAG;MACnB,IAAI;QACF;QACA,MAAM,IAAIM,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC;QACtD;QACAhB,OAAO,CAACS,KAAK,GAAG,KAAI;MACtB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdzB,SAAS,CAAC,UAAU,EAAE,OAAO;MAC/B,CAAC,SAAS;QACRM,OAAO,CAACU,KAAK,GAAG,KAAI;MACtB;IACF;;IAEA;IACA,MAAMU,cAAc,GAAGA,CAAA,KAAM;MAC3B1B,SAAS,CAAC,aAAa,EAAE,MAAM;IACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}