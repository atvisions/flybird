{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createBlock as _createBlock, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"toolbar-panel\"\n};\nconst _hoisted_2 = {\n  class: \"panel-tabs\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  class: \"tab-text\"\n};\nconst _hoisted_5 = {\n  class: \"panel-content\"\n};\nconst _hoisted_6 = {\n  class: \"panel-section\"\n};\nconst _hoisted_7 = {\n  class: \"component-blocks\"\n};\nconst _hoisted_8 = [\"onDragstart\"];\nconst _hoisted_9 = {\n  class: \"block-title\"\n};\nconst _hoisted_10 = {\n  class: \"panel-section\"\n};\nconst _hoisted_11 = {\n  class: \"component-blocks\"\n};\nconst _hoisted_12 = [\"onDragstart\"];\nconst _hoisted_13 = {\n  class: \"block-title\"\n};\nconst _hoisted_14 = {\n  class: \"panel-section\"\n};\nconst _hoisted_15 = {\n  class: \"empty-tip\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.tabs, tab => {\n    return _createElementVNode(\"div\", {\n      key: tab.code,\n      class: _normalizeClass([\"tab-item\", {\n        active: $setup.activeTab === tab.code\n      }]),\n      onClick: $event => $setup.activeTab = tab.code\n    }, [_createVNode(_component_v_icon, {\n      size: \"20\",\n      class: \"mb-1\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(tab.icon), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createElementVNode(\"span\", _hoisted_4, _toDisplayString(tab.text), 1 /* TEXT */)], 10 /* CLASS, PROPS */, _hoisted_3);\n  }), 64 /* STABLE_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" 布局面板 \"), _withDirectives(_createElementVNode(\"div\", _hoisted_6, [$setup.loading ? (_openBlock(), _createBlock(_component_v_progress_linear, {\n    key: 0,\n    indeterminate: \"\",\n    color: \"primary\"\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.layoutComponents, component => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: component.id,\n      class: \"component-block\",\n      draggable: \"true\",\n      \"data-group\": \"layouts\",\n      onDragstart: $event => $setup.handleDragStart($event, component)\n    }, [_createVNode(_component_v_icon, {\n      size: \"18\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(component.icon), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createElementVNode(\"div\", _hoisted_9, _toDisplayString(component.name), 1 /* TEXT */)], 40 /* PROPS, NEED_HYDRATION */, _hoisted_8);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), [[_vShow, $setup.activeTab === 'layout']]), _createCommentVNode(\" 组件面板 \"), _withDirectives(_createElementVNode(\"div\", _hoisted_10, [$setup.loading ? (_openBlock(), _createBlock(_component_v_progress_linear, {\n    key: 0,\n    indeterminate: \"\",\n    color: \"primary\"\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.basicComponents, component => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: component.id,\n      class: \"component-block\",\n      draggable: \"true\",\n      \"data-group\": 'resume',\n      onDragstart: $event => $setup.handleDragStart($event, component)\n    }, [_createVNode(_component_v_icon, {\n      size: \"18\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(component.icon), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createElementVNode(\"div\", _hoisted_13, _toDisplayString(component.name), 1 /* TEXT */)], 40 /* PROPS, NEED_HYDRATION */, _hoisted_12);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), [[_vShow, $setup.activeTab === 'component']]), _createCommentVNode(\" 文件面板 \"), _withDirectives(_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_v_icon, null, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"mdi-file\")])),\n    _: 1 /* STABLE */\n  }), _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"暂无文件\", -1 /* HOISTED */))])], 512 /* NEED_PATCH */), [[_vShow, $setup.activeTab === 'file']])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$setup","tabs","tab","key","code","_normalizeClass","active","activeTab","onClick","$event","_createVNode","_component_v_icon","size","default","_withCtx","_createTextVNode","_toDisplayString","icon","_","_hoisted_4","text","_hoisted_3","_hoisted_5","_createCommentVNode","_hoisted_6","loading","_createBlock","_component_v_progress_linear","indeterminate","color","_hoisted_7","layoutComponents","component","id","draggable","onDragstart","handleDragStart","_hoisted_9","name","_hoisted_8","_hoisted_10","_hoisted_11","basicComponents","_hoisted_13","_hoisted_12","_hoisted_14","_hoisted_15","_cache"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/ToolbarPanel.vue"],"sourcesContent":["<template>\n  <div class=\"toolbar-panel\">\n    <div class=\"panel-tabs\">\n      <div \n        v-for=\"tab in tabs\" \n        :key=\"tab.code\"\n        class=\"tab-item\"\n        :class=\"{ active: activeTab === tab.code }\"\n        @click=\"activeTab = tab.code\"\n      >\n        <v-icon size=\"20\" class=\"mb-1\">{{ tab.icon }}</v-icon>\n        <span class=\"tab-text\">{{ tab.text }}</span>\n      </div>\n    </div>\n\n    <div class=\"panel-content\">\n      <!-- 布局面板 -->\n      <div v-show=\"activeTab === 'layout'\" class=\"panel-section\">\n        <v-progress-linear\n          v-if=\"loading\"\n          indeterminate\n          color=\"primary\"\n        ></v-progress-linear>\n        <div class=\"component-blocks\">\n          <div\n            v-for=\"component in layoutComponents\"\n            :key=\"component.id\"\n            class=\"component-block\"\n            draggable=\"true\"\n            data-group=\"layouts\"\n            @dragstart=\"handleDragStart($event, component)\"\n          >\n            <v-icon size=\"18\">{{ component.icon }}</v-icon>\n            <div class=\"block-title\">{{ component.name }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 组件面板 -->\n      <div v-show=\"activeTab === 'component'\" class=\"panel-section\">\n        <v-progress-linear\n          v-if=\"loading\"\n          indeterminate\n          color=\"primary\"\n        ></v-progress-linear>\n        <div class=\"component-blocks\">\n          <div\n            v-for=\"component in basicComponents\"\n            :key=\"component.id\"\n            class=\"component-block\"\n            draggable=\"true\"\n            :data-group=\"'resume'\"\n            @dragstart=\"handleDragStart($event, component)\"\n          >\n            <v-icon size=\"18\">{{ component.icon }}</v-icon>\n            <div class=\"block-title\">{{ component.name }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 文件面板 -->\n      <div v-show=\"activeTab === 'file'\" class=\"panel-section\">\n        <div class=\"empty-tip\">\n          <v-icon>mdi-file</v-icon>\n          <span>暂无文件</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from 'vue'\nimport axios from 'axios'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: 'layout'\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst activeTab = ref(props.modelValue)\nconst loading = ref(false)\nconst layoutComponents = ref([])\nconst basicComponents = ref([])\n\nconst tabs = [\n  { code: 'layout', text: '布局', icon: 'mdi-view-dashboard' },\n  { code: 'component', text: '组件', icon: 'mdi-puzzle' },\n  { code: 'file', text: '文件', icon: 'mdi-file' }\n]\n\nwatch(activeTab, (newValue) => {\n  emit('update:modelValue', newValue)\n  if (newValue === 'layout' && layoutComponents.value.length === 0) {\n    fetchLayoutComponents()\n  } else if (newValue === 'component' && basicComponents.value.length === 0) {\n    fetchBasicComponents()\n  }\n})\n\nconst handleDragStart = (event, component) => {\n  console.log('ToolbarPanel - dragstart:', component)\n  event.dataTransfer.effectAllowed = 'copy'\n  event.dataTransfer.dropEffect = 'copy'\n  event.target.classList.add('dragging')\n  const data = JSON.stringify(component)\n  console.log('ToolbarPanel - Setting data:', data)\n  event.dataTransfer.setData('application/json', data)\n}\n\nconst fetchLayoutComponents = async () => {\n  try {\n    loading.value = true\n    const response = await axios.get('/api/v1/resume/component-categories/main_categories/')\n    const categories = response.data\n    console.log('ToolbarPanel - Categories:', categories)\n    const layoutCategory = categories.find(cat => cat.code === 'layout')\n    if (layoutCategory) {\n      const componentsResponse = await axios.get(`/api/v1/resume/component-categories/${layoutCategory.id}/components/`)\n      console.log('ToolbarPanel - Layout components:', componentsResponse.data)\n      layoutComponents.value = componentsResponse.data\n    }\n  } catch (error) {\n    console.error('ToolbarPanel - 获取布局组件失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst fetchBasicComponents = async () => {\n  try {\n    loading.value = true\n    const response = await axios.get('/api/v1/resume/component-categories/main_categories/')\n    const categories = response.data\n    const componentCategory = categories.find(cat => cat.code === 'component')\n    if (componentCategory) {\n      const componentsResponse = await axios.get(`/api/v1/resume/component-categories/${componentCategory.id}/components/`)\n      basicComponents.value = componentsResponse.data\n    }\n  } catch (error) {\n    console.error('获取基本组件失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nonMounted(() => {\n  if (activeTab.value === 'layout') {\n    fetchLayoutComponents()\n  }\n})\n</script>\n\n<style scoped>\n.toolbar-panel {\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  background: #fff;\n}\n\n.panel-tabs {\n  width: 48px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #e4e7ed;\n  background: #f5f7fa;\n}\n\n.tab-item {\n  height: 48px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  writing-mode: vertical-rl;\n  color: #909399;\n}\n\n.tab-item:hover {\n  background: #ecf5ff;\n  color: #409eff;\n}\n\n.tab-item.active {\n  background: #ecf5ff;\n  color: #409eff;\n  border-right: 2px solid #409eff;\n}\n\n.tab-text {\n  font-size: 12px;\n  margin-top: 4px;\n}\n\n.panel-content {\n  flex: 1;\n  height: 100%;\n  overflow: hidden;\n}\n\n.panel-section {\n  height: 100%;\n  overflow-y: auto;\n  padding: 12px;\n}\n\n.component-blocks {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.component-block {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: #f5f7fa;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  cursor: move;\n}\n\n.component-block:hover {\n  background: #ecf5ff;\n  border-color: #409eff;\n}\n\n.block-title {\n  font-size: 14px;\n  color: #606266;\n}\n\n.empty-tip {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  gap: 8px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}