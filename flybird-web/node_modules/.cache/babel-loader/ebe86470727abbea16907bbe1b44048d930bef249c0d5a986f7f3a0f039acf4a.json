{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"messages-container\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white rounded-lg shadow mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"flex border-b\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"absolute top-2 right-2 bg-red-500 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1\"\n};\nconst _hoisted_6 = {\n  class: \"bg-white rounded-lg shadow overflow-hidden\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"p-8 text-center\"\n};\nconst _hoisted_8 = {\n  class: \"w-16 h-16 mx-auto mb-4\"\n};\nconst _hoisted_9 = {\n  class: \"divide-y divide-gray-100\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  class: \"flex items-start space-x-3\"\n};\nconst _hoisted_12 = [\"src\", \"alt\"];\nconst _hoisted_13 = {\n  class: \"flex-1 min-w-0\"\n};\nconst _hoisted_14 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm font-medium text-gray-900\"\n};\nconst _hoisted_16 = {\n  class: \"text-xs text-gray-500\"\n};\nconst _hoisted_17 = {\n  class: \"text-sm text-gray-500 truncate mt-1\"\n};\nconst _hoisted_18 = {\n  key: 2,\n  class: \"p-4 text-center border-t\"\n};\nconst _hoisted_19 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 消息类型切换 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.messageTabs, tab => {\n    return _createElementVNode(\"button\", {\n      key: tab.key,\n      onClick: $event => $setup.currentMessageTab = tab.key,\n      class: _normalizeClass([\"flex-1 px-4 py-3 text-sm font-medium relative\", [$setup.currentMessageTab === tab.key ? 'text-blue-600' : 'text-gray-500 hover:text-gray-700']])\n    }, [_createTextVNode(_toDisplayString(tab.label) + \" \", 1 /* TEXT */), tab.unread ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(tab.unread), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 10 /* CLASS, PROPS */, _hoisted_4);\n  }), 64 /* STABLE_FRAGMENT */))])]), _createCommentVNode(\" 消息列表 \"), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" 空状态 \"), !$setup.currentMessages.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createVNode($setup[\"InboxIcon\"], {\n    class: \"w-full h-full text-gray-400\"\n  })]), _cache[0] || (_cache[0] = _createElementVNode(\"p\", {\n    class: \"text-gray-500\"\n  }, \"暂无消息\", -1 /* HOISTED */))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 消息列表 \"), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.currentMessages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: _normalizeClass([\"p-4 hover:bg-gray-50 transition-colors cursor-pointer\", {\n        'bg-blue-50': message.unread\n      }]),\n      onClick: $event => $setup.handleMessageClick(message)\n    }, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"img\", {\n      src: message.avatar,\n      alt: message.sender,\n      class: \"w-10 h-10 rounded-full flex-shrink-0\"\n    }, null, 8 /* PROPS */, _hoisted_12), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"p\", _hoisted_15, _toDisplayString(message.sender), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_16, _toDisplayString(message.time), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_17, _toDisplayString(message.content), 1 /* TEXT */)])])], 10 /* CLASS, PROPS */, _hoisted_10);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" 加载更多 \"), $setup.currentMessages.length && $setup.hasMore ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    onClick: $setup.loadMore,\n    class: \"text-sm text-blue-600 hover:text-blue-700\",\n    disabled: $setup.loading\n  }, _toDisplayString($setup.loading ? '加载中...' : '加载更多'), 9 /* TEXT, PROPS */, _hoisted_19)])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 新消息按钮 \"), _createElementVNode(\"button\", {\n    class: \"fixed right-4 bottom-20 lg:bottom-4 bg-blue-600 text-white rounded-full p-3 shadow-lg hover:bg-blue-700 transition-colors\",\n    onClick: $setup.openNewMessage\n  }, [_createVNode($setup[\"PencilSquareIcon\"], {\n    class: \"w-6 h-6\"\n  })])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","messageTabs","tab","onClick","$event","currentMessageTab","_normalizeClass","_createTextVNode","_toDisplayString","label","unread","_hoisted_5","_hoisted_4","_hoisted_6","currentMessages","length","_hoisted_7","_hoisted_8","_createVNode","_hoisted_9","message","id","handleMessageClick","_hoisted_11","src","avatar","alt","sender","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","time","_hoisted_17","content","_hoisted_10","hasMore","_hoisted_18","loadMore","disabled","loading","_hoisted_19","openNewMessage"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/MyMessages.vue"],"sourcesContent":["<template>\n  <div class=\"messages-container\">\n    <!-- 消息类型切换 -->\n    <div class=\"bg-white rounded-lg shadow mb-4\">\n      <div class=\"flex border-b\">\n        <button\n          v-for=\"tab in messageTabs\"\n          :key=\"tab.key\"\n          @click=\"currentMessageTab = tab.key\"\n          class=\"flex-1 px-4 py-3 text-sm font-medium relative\"\n          :class=\"[\n            currentMessageTab === tab.key\n              ? 'text-blue-600'\n              : 'text-gray-500 hover:text-gray-700'\n          ]\"\n        >\n          {{ tab.label }}\n          <span \n            v-if=\"tab.unread\" \n            class=\"absolute top-2 right-2 bg-red-500 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1\"\n          >\n            {{ tab.unread }}\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 消息列表 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <!-- 空状态 -->\n      <div v-if=\"!currentMessages.length\" class=\"p-8 text-center\">\n        <div class=\"w-16 h-16 mx-auto mb-4\">\n          <InboxIcon class=\"w-full h-full text-gray-400\" />\n        </div>\n        <p class=\"text-gray-500\">暂无消息</p>\n      </div>\n\n      <!-- 消息列表 -->\n      <div v-else class=\"divide-y divide-gray-100\">\n        <div \n          v-for=\"message in currentMessages\" \n          :key=\"message.id\"\n          class=\"p-4 hover:bg-gray-50 transition-colors cursor-pointer\"\n          :class=\"{ 'bg-blue-50': message.unread }\"\n          @click=\"handleMessageClick(message)\"\n        >\n          <div class=\"flex items-start space-x-3\">\n            <img \n              :src=\"message.avatar\" \n              :alt=\"message.sender\"\n              class=\"w-10 h-10 rounded-full flex-shrink-0\"\n            />\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center justify-between\">\n                <p class=\"text-sm font-medium text-gray-900\">{{ message.sender }}</p>\n                <span class=\"text-xs text-gray-500\">{{ message.time }}</span>\n              </div>\n              <p class=\"text-sm text-gray-500 truncate mt-1\">{{ message.content }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 加载更多 -->\n      <div \n        v-if=\"currentMessages.length && hasMore\" \n        class=\"p-4 text-center border-t\"\n      >\n        <button \n          @click=\"loadMore\"\n          class=\"text-sm text-blue-600 hover:text-blue-700\"\n          :disabled=\"loading\"\n        >\n          {{ loading ? '加载中...' : '加载更多' }}\n        </button>\n      </div>\n    </div>\n\n    <!-- 新消息按钮 -->\n    <button\n      class=\"fixed right-4 bottom-20 lg:bottom-4 bg-blue-600 text-white rounded-full p-3 shadow-lg hover:bg-blue-700 transition-colors\"\n      @click=\"openNewMessage\"\n    >\n      <PencilSquareIcon class=\"w-6 h-6\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { InboxIcon, PencilSquareIcon } from '@heroicons/vue/24/outline'\nimport { showToast } from '@/components/ToastMessage'\n\n// 消息类型标签\nconst messageTabs = [\n  { key: 'all', label: '全部消息', unread: 5 },\n  { key: 'system', label: '系统通知', unread: 2 },\n  { key: 'private', label: '私信', unread: 3 }\n]\n\nconst currentMessageTab = ref('all')\nconst loading = ref(false)\nconst hasMore = ref(true)\n\n// 模拟消息数据\nconst messages = ref([\n  {\n    id: 1,\n    sender: '系统通知',\n    avatar: 'https://picsum.photos/32/32?random=1',\n    content: '欢迎加入飞鸟社区！',\n    time: '刚刚',\n    unread: true,\n    type: 'system'\n  },\n  {\n    id: 2,\n    sender: '张三',\n    avatar: 'https://picsum.photos/32/32?random=2',\n    content: '你好，我看了你的文章很受启发',\n    time: '10分钟前',\n    unread: true,\n    type: 'private'\n  },\n  // 添加更多消息...\n])\n\n// 根据当前标签筛选消息\nconst currentMessages = computed(() => {\n  if (currentMessageTab.value === 'all') {\n    return messages.value\n  }\n  return messages.value.filter(msg => msg.type === currentMessageTab.value)\n})\n\n// 处理消息点击\nconst handleMessageClick = (message) => {\n  // 标记消息为已读\n  message.unread = false\n  // TODO: 打开消息详情\n  showToast('消息功能开发中...', 'info')\n}\n\n// 加载更多消息\nconst loadMore = async () => {\n  if (loading.value) return\n  loading.value = true\n  try {\n    // TODO: 调用API加载更多消息\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    // 模拟加载完成\n    hasMore.value = false\n  } catch (error) {\n    showToast('加载失败，请重试', 'error')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 打开新消息对话框\nconst openNewMessage = () => {\n  showToast('新消息功能开发中...', 'info')\n}\n</script>\n\n<style scoped>\n.messages-container {\n  min-height: calc(100vh - 64px - 56px); /* 减去头部和底部导航的高度 */\n  padding-bottom: 80px; /* 为新消息按钮预留空间 */\n}\n\n@media (min-width: 1024px) {\n  .messages-container {\n    min-height: calc(100vh - 64px);\n    padding-bottom: 60px;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}