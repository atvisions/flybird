{"ast":null,"code":"import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = {\n  class: \"canvas-container\"\n};\nconst _hoisted_2 = {\n  class: \"canvas-wrapper\"\n};\nconst _hoisted_3 = {\n  class: \"component-item\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"canvas-content\",\n    style: _normalizeStyle({\n      transform: `scale(${$props.scale})`\n    })\n  }, [_createVNode($setup[\"draggable\"], {\n    modelValue: $setup.components,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.components = $event),\n    group: \"resume\",\n    \"item-key\": \"id\",\n    class: _normalizeClass([\"canvas-drop-area\", {\n      'drag-over': $setup.isDragOver\n    }]),\n    onChange: $setup.handleChange,\n    onDragenter: $setup.handleDragEnter,\n    onDragleave: $setup.handleDragLeave,\n    onDragover: $setup.handleDragOver\n  }, {\n    item: _withCtx(({\n      element\n    }) => [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(), _createBlock(_resolveDynamicComponent($setup.getComponentDisplay(element)), {\n      data: element.data\n    }, null, 8 /* PROPS */, [\"data\"]))])]),\n    header: _withCtx(() => [$setup.components.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_v_icon, {\n      size: \"32\",\n      class: \"mb-2\"\n    }, {\n      default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"mdi-plus\")])),\n      _: 1 /* STABLE */\n    }), _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"拖拽组件到此处\", -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"class\"])], 4 /* STYLE */)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","style","_normalizeStyle","transform","$props","scale","_createVNode","$setup","modelValue","components","_cache","$event","group","_normalizeClass","isDragOver","onChange","handleChange","onDragenter","handleDragEnter","onDragleave","handleDragLeave","onDragover","handleDragOver","item","_withCtx","element","_hoisted_3","_createBlock","_resolveDynamicComponent","getComponentDisplay","data","header","length","_hoisted_4","_component_v_icon","size","default","_createTextVNode","_","_createCommentVNode"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" :style=\"{ transform: `scale(${scale})` }\">\n        <draggable\n          v-model=\"components\"\n          group=\"resume\"\n          item-key=\"id\"\n          class=\"canvas-drop-area\"\n          :class=\"{ 'drag-over': isDragOver }\"\n          @change=\"handleChange\"\n          @dragenter=\"handleDragEnter\"\n          @dragleave=\"handleDragLeave\"\n          @dragover=\"handleDragOver\"\n        >\n          <template #item=\"{ element }\">\n            <div class=\"component-item\">\n              <component\n                :is=\"getComponentDisplay(element)\"\n                :data=\"element.data\"\n              ></component>\n            </div>\n          </template>\n\n          <template #header>\n            <div v-if=\"components.length === 0\" class=\"placeholder\">\n              <v-icon size=\"32\" class=\"mb-2\">mdi-plus</v-icon>\n              <span>拖拽组件到此处</span>\n            </div>\n          </template>\n        </draggable>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport draggable from 'vuedraggable'\nimport BasicInfoDisplay from './BasicInfoDisplay.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst components = ref([])\nconst isDragOver = ref(false)\n\nconst handleDragEnter = (event) => {\n  event.preventDefault()\n  isDragOver.value = true\n}\n\nconst handleDragLeave = (event) => {\n  event.preventDefault()\n  isDragOver.value = false\n}\n\nconst handleDragOver = (event) => {\n  event.preventDefault()\n}\n\nconst handleChange = (event) => {\n  if (event.added) {\n    const component = JSON.parse(event.added.element)\n    const newComponent = {\n      id: Date.now(),\n      type: component.type,\n      data: {}\n    }\n    components.value.splice(event.added.newIndex, 1, newComponent)\n  }\n}\n\nconst getComponentDisplay = (component) => {\n  const componentMap = {\n    'contact': BasicInfoDisplay\n  }\n  return componentMap[component.type]\n}\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  height: 100%;\n  overflow: auto;\n  background: #f5f7fa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-wrapper {\n  padding: 40px;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: #ffffff;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  overflow: hidden;\n}\n\n.canvas-drop-area {\n  height: 100%;\n  padding: 24px;\n}\n\n.canvas-drop-area.drag-over {\n  background: #ecf5ff;\n  border: 2px dashed #409eff;\n}\n\n.placeholder {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  font-size: 14px;\n}\n\n.component-item {\n  margin-bottom: 16px;\n}\n\n.component-item:last-child {\n  margin-bottom: 0;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EACtBA,KAAK,EAAC;AAAgB;;EAcdA,KAAK,EAAC;AAAgB;;EAhBvCC,GAAA;EAyBgDD,KAAK,EAAC;;;;uBAxBpDE,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,mBAAA,CA8BM,OA9BNC,UA8BM,GA7BJD,mBAAA,CA4BM;IA5BDJ,KAAK,EAAC,gBAAgB;IAAEM,KAAK,EAHxCC,eAAA;MAAAC,SAAA,WAGgEC,MAAA,CAAAC,KAAK;IAAA;MAC7DC,YAAA,CA0BYC,MAAA;IA9BpBC,UAAA,EAKmBD,MAAA,CAAAE,UAAU;IAL7B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKmBJ,MAAA,CAAAE,UAAU,GAAAE,MAAA;IACnBC,KAAK,EAAC,QAAQ;IACd,UAAQ,EAAC,IAAI;IACbjB,KAAK,EARfkB,eAAA,EAQgB,kBAAkB;MAAA,aACDN,MAAA,CAAAO;IAAU;IAChCC,QAAM,EAAER,MAAA,CAAAS,YAAY;IACpBC,WAAS,EAAEV,MAAA,CAAAW,eAAe;IAC1BC,WAAS,EAAEZ,MAAA,CAAAa,eAAe;IAC1BC,UAAQ,EAAEd,MAAA,CAAAe;;IAEAC,IAAI,EAAAC,QAAA,CACb,CAKM;MANWC;IAAO,OACxB1B,mBAAA,CAKM,OALN2B,UAKM,I,cAJJC,YAAA,CAGaC,wBApB3B,CAkBqBrB,MAAA,CAAAsB,mBAAmB,CAACJ,OAAO;MAC/BK,IAAI,EAAEL,OAAO,CAACK;;IAKVC,MAAM,EAAAP,QAAA,CACf,MAGM,CAHKjB,MAAA,CAAAE,UAAU,CAACuB,MAAM,U,cAA5BnC,mBAAA,CAGM,OAHNoC,UAGM,GAFJ3B,YAAA,CAAgD4B,iBAAA;MAAxCC,IAAI,EAAC,IAAI;MAACxC,KAAK,EAAC;;MA1BtCyC,OAAA,EAAAZ,QAAA,CA0B6C,MAAQd,MAAA,QAAAA,MAAA,OA1BrD2B,gBAAA,CA0B6C,UAAQ,E;MA1BrDC,CAAA;kCA2BcvC,mBAAA,CAAoB,cAAd,SAAO,qB,KA3B3BwC,mBAAA,e;IAAAD,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}