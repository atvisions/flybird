{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { showToast } from '@/components/ToastMessage';\nimport { useDeleteAccount } from '@/composables/useDeleteAccount';\nimport { usePhone } from '@/composables/usePhone';\nimport { useEmail } from '@/composables/useEmail';\nimport { useChangePassword } from '@/composables/useChangePassword';\nimport { ElMessageBox } from 'element-plus';\nimport { account } from '@/api/account';\nimport { useAuthStore } from '@/stores/auth';\nimport { useUserStore } from '@/stores/user';\nexport default {\n  __name: 'AccountSettings',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const userStore = useUserStore();\n\n    // 基础信息\n    const phone = computed(() => userStore.userInfo?.phone || '');\n    const email = computed(() => userStore.userInfo?.email || '');\n\n    // 使用 composables\n    const phoneManager = usePhone();\n    const emailManager = useEmail();\n    const {\n      deleteLoading: loading,\n      handleDeleteAccount\n    } = useDeleteAccount();\n    const {\n      state: passwordState,\n      validatePassword,\n      updatePasswordStrength,\n      isPasswordValid,\n      strengthText,\n      strengthTextClass,\n      strengthColorClass\n    } = useChangePassword();\n\n    // 工具方法\n    const maskPhone = phone => {\n      if (!phone) return '未绑定';\n      return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\n    };\n\n    // 弹窗状态\n    const showPhoneModal = ref(false);\n    const showPasswordModal = ref(false);\n    const showDeleteConfirm = ref(false);\n\n    // 打开弹窗的方法\n    const openPhoneModal = () => {\n      phoneManager.state.value = '';\n      phoneManager.state.code = '';\n      showPhoneModal.value = true;\n    };\n    const openPasswordModal = () => {\n      showPasswordModal.value = true;\n    };\n    const openDeleteConfirm = async () => {\n      showDeleteConfirm.value = true;\n    };\n\n    // 关闭弹窗的方法\n    const closePhoneModal = () => {\n      showPhoneModal.value = false;\n      phoneManager.state.value = '';\n      phoneManager.state.code = '';\n    };\n    const closePasswordModal = () => {\n      showPasswordModal.value = false;\n    };\n    const closeDeleteConfirm = () => {\n      showDeleteConfirm.value = false;\n      deleteForm.value.password = '';\n    };\n\n    // 处理成功回调\n    const handlePasswordSuccess = () => {\n      closePasswordModal();\n      showToast('密码修改成功', 'success');\n    };\n\n    // 添加密码验证相关的状态和方法\n    const confirmPasswordError = ref('');\n    const validateNewPassword = () => {\n      // 使用 composable 中的验证方法\n      password.state.error = password.validatePassword(password.state.newPassword);\n      // 如果新密码变化，也要检查确认密码\n      if (password.state.confirmPassword) {\n        validateConfirmPassword();\n      }\n    };\n    const validateConfirmPassword = () => {\n      if (!password.state.confirmPassword) {\n        confirmPasswordError.value = '';\n      } else if (password.state.confirmPassword !== password.state.newPassword) {\n        confirmPasswordError.value = '两次输入的密码不一致';\n      } else {\n        confirmPasswordError.value = '';\n      }\n    };\n\n    // 添加计算属性控制密码修改按钮状态\n    const isPasswordFormValid = computed(() => {\n      const isValid = passwordState.oldPassword && passwordState.newPassword && passwordState.confirmPassword && passwordState.newPassword === passwordState.confirmPassword && isPasswordValid.value && !passwordState.loading;\n      console.log('Password form validation:', {\n        oldPassword: !!passwordState.oldPassword,\n        newPassword: !!passwordState.newPassword,\n        confirmPassword: !!passwordState.confirmPassword,\n        passwordsMatch: passwordState.newPassword === passwordState.confirmPassword,\n        isPasswordValid: isPasswordValid.value,\n        loading: passwordState.loading,\n        isValid\n      });\n      return isValid;\n    });\n\n    // 处理密码更新\n    const handlePasswordUpdate = async () => {\n      try {\n        passwordState.loading = true;\n        const response = await account.updatePassword({\n          old_password: passwordState.oldPassword,\n          new_password: passwordState.newPassword,\n          confirm_password: passwordState.confirmPassword\n        });\n        if (response?.data?.code === 200) {\n          closePasswordModal();\n          showToast('密码修改成功', 'success');\n          // 清空表单\n          passwordState.oldPassword = '';\n          passwordState.newPassword = '';\n          passwordState.confirmPassword = '';\n        }\n      } catch (error) {\n        console.error('密码修改失败:', error);\n        showToast(error?.response?.data?.message || '密码修改失败', 'error');\n      } finally {\n        passwordState.loading = false;\n      }\n    };\n\n    // 处理手机号更新\n    const handlePhoneUpdate = async () => {\n      if (!phoneManager.state.value || !phoneManager.state.code) {\n        showToast('请填写完整信息', 'warning');\n        return;\n      }\n\n      // 验证手机号格式\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      if (!phoneRegex.test(phoneManager.state.value)) {\n        showToast('请输入正确的手机号格式', 'warning');\n        return;\n      }\n      try {\n        const response = await account.changePhone({\n          phone: phoneManager.state.value,\n          code: phoneManager.state.code\n        });\n        if (response?.data?.code === 200 || response?.data?.detail) {\n          closePhoneModal();\n          await userStore.getUserInfo();\n          showToast(response.data.detail || '手机号更新成功', 'success');\n          return;\n        }\n        throw new Error(response?.data?.detail || '手机号更新失败');\n      } catch (error) {\n        console.error('手机号更新失败:', error);\n        const errorMsg = error.response?.data?.detail || error.response?.data?.message || error.message || '手机号更新失败';\n        showToast(errorMsg, 'error');\n      }\n    };\n\n    // 处理手机号验证码发送\n    const handlePhoneSendCode = async () => {\n      if (!phoneManager.state.value) {\n        showToast('请输入新手机号', 'warning');\n        return;\n      }\n\n      // 验证手机号格式\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      if (!phoneRegex.test(phoneManager.state.value)) {\n        showToast('请输入正确的手机号格式', 'warning');\n        return;\n      }\n      try {\n        phoneManager.state.loading = true;\n        const response = await account.sendVerifyCode({\n          phone: phoneManager.state.value,\n          scene: 'change_phone',\n          type: 'sms'\n        });\n        if (response?.data?.code === 200) {\n          startPhoneCountdown();\n          showToast(response.data.message || '验证码已发送', 'success');\n        } else {\n          throw new Error(response?.data?.message || '发送验证码失败');\n        }\n      } catch (error) {\n        console.error('发送验证码失败:', error);\n        const errorMsg = error.response?.data?.message || error.response?.data?.detail || error.message || '发送验证码失败';\n        showToast(errorMsg, 'error');\n      } finally {\n        phoneManager.state.loading = false;\n      }\n    };\n\n    // 邮箱相关\n    const showEmailModal = ref(false);\n    const openEmailModal = () => {\n      emailManager.state.value = '';\n      emailManager.state.code = '';\n      showEmailModal.value = true;\n    };\n    const closeEmailModal = () => {\n      showEmailModal.value = false;\n      emailManager.state.value = '';\n      emailManager.state.code = '';\n      emailManager.state.password = '';\n    };\n    const handleEmailUpdate = async () => {\n      try {\n        const data = {\n          email: emailManager.state.value,\n          code: emailManager.state.code,\n          password: emailManager.state.password\n        };\n        const response = await account.changeEmail(data);\n\n        // 检查响应状态\n        if (response?.data?.code === 200 || response?.data?.message?.includes('成功')) {\n          closeEmailModal();\n          // 更新用户信息\n          await userStore.getUserInfo();\n          showToast(response.data.message || '邮箱更新成功', 'success');\n          return; // 成功后直接返回，不抛出错误\n        }\n\n        // 如果没有成功状态码也没有成功消息，才抛出错误\n        throw new Error(response?.data?.message || '邮箱更新失败');\n      } catch (error) {\n        console.error('邮箱更新失败:', error);\n        // 如果错误消息包含\"成功\"，说明实际上是成功的\n        if (error.message?.includes('成功')) {\n          closeEmailModal();\n          await userStore.getUserInfo();\n          showToast(error.message, 'success');\n          return;\n        }\n\n        // 真正的错误处理\n        const errorMsg = error.response?.data?.detail || error.response?.data?.message || error.message || '邮箱操作失败';\n        showToast(errorMsg, 'error');\n      }\n    };\n\n    // 添加计算属性控制邮箱表单按钮状态\n    const isEmailFormValid = computed(() => {\n      // 检查邮箱格式\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      const isValidEmail = emailRegex.test(emailManager.state.value);\n\n      // 检查所有必填字段\n      const isValid = emailManager.state.value && emailManager.state.code && emailManager.state.password &&\n      // 密码必填\n      isValidEmail && !emailManager.state.loading;\n      console.log('Email form validation:', {\n        email: emailManager.state.value,\n        code: emailManager.state.code,\n        password: emailManager.state.password,\n        isValidEmail,\n        loading: emailManager.state.loading,\n        isValid\n      });\n      return isValid;\n    });\n\n    // 添加防重复点击状态\n    const isRequestingCode = ref(false);\n\n    // 处理邮箱更新的验证码发送\n    const handleEmailSendCode = async () => {\n      if (!emailManager.state.value) {\n        showToast('请输入新邮箱', 'warning');\n        return;\n      }\n      if (!phone.value) {\n        showToast('当前账号未绑定手机号，无法进行邮箱验证', 'warning');\n        return;\n      }\n\n      // 验证邮箱格式\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(emailManager.state.value)) {\n        showToast('请输入正确的邮箱格式', 'warning');\n        return;\n      }\n      try {\n        emailManager.state.loading = true;\n        isRequestingCode.value = true;\n        const response = await account.sendEmailCode({\n          email: emailManager.state.value\n        });\n        if (response?.data?.message) {\n          showToast(response.data.message, 'success');\n          startEmailCountdown();\n        }\n      } catch (error) {\n        console.error('发送验证码失败:', error);\n        const errorMsg = error.response?.data?.detail || error.message || '发送验证码失败';\n        showToast(errorMsg, 'error');\n      } finally {\n        emailManager.state.loading = false;\n        isRequestingCode.value = false;\n      }\n    };\n\n    // 修改按钮禁用状态\n    const isCodeButtonDisabled = computed(() => {\n      return emailManager.state.loading || emailManager.state.countdown > 0 || !emailManager.state.password || !emailManager.state.value || isRequestingCode.value;\n    });\n\n    // 修改密码强度更新的处理方法\n    const handlePasswordInput = () => {\n      validatePassword(passwordState.value.newPassword);\n      updatePasswordStrength(passwordState.value.newPassword);\n    };\n\n    // 添加表单数据\n    const deleteForm = ref({\n      password: ''\n    });\n\n    // 处理确认注销\n    const handleConfirmDelete = async () => {\n      if (!deleteForm.value.password) {\n        showToast('请输入密码', 'warning');\n        return;\n      }\n      try {\n        const response = await account.deleteAccount(deleteForm.value);\n        if (response?.data?.code === 200) {\n          showToast('账号已注销', 'success');\n          // 使用 auth store 的 logout 方法清除所有状态\n          await authStore.logout();\n          // 清除 user store 的状态\n          userStore.clearUserInfo();\n          // 清除其他可能的状态\n          localStorage.removeItem('isLoggedIn');\n          // 强制刷新页面以确保所有状态都被清除\n          window.location.href = '/login';\n        }\n      } catch (error) {\n        console.error('注销失败:', error);\n        showToast(error?.message || '注销失败', 'error');\n      }\n    };\n\n    // 倒计时管理\n    const startPhoneCountdown = () => {\n      phoneManager.state.countdown = 60;\n      const timer = setInterval(() => {\n        phoneManager.state.countdown--;\n        if (phoneManager.state.countdown <= 0) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    };\n    const startEmailCountdown = () => {\n      emailManager.state.countdown = 60;\n      const timer = setInterval(() => {\n        emailManager.state.countdown--;\n        if (emailManager.state.countdown <= 0) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    };\n\n    // 表单数据\n    const form = ref({\n      old_password: '',\n      new_password: '',\n      confirm_password: ''\n    });\n\n    // 用户信息\n    const userInfo = ref(null);\n\n    // 用户信息加载状态\n    const userInfoLoading = ref(false);\n\n    // 获取用户信息\n    const fetchUserInfo = async () => {\n      try {\n        userInfoLoading.value = true;\n        await userStore.getUserInfo();\n      } catch (error) {\n        console.error('获取用户信息失败:', error);\n        showToast('获取用户信息失败', 'error');\n      } finally {\n        userInfoLoading.value = false;\n      }\n    };\n\n    // 在组件挂载时获取用户信息\n    onMounted(() => {\n      fetchUserInfo();\n    });\n\n    // 表单验证\n    const validateForm = () => {\n      if (!form.value.old_password) {\n        showToast('请输入当前密码', 'error');\n        return false;\n      }\n      if (!form.value.new_password) {\n        showToast('请输入新密码', 'error');\n        return false;\n      }\n      if (!form.value.confirm_password) {\n        showToast('请确认新密码', 'error');\n        return false;\n      }\n      if (form.value.new_password !== form.value.confirm_password) {\n        showToast('两次输入的密码不一致', 'error');\n        return false;\n      }\n      if (form.value.new_password.length < 6) {\n        showToast('密码长度不能少于6位', 'error');\n        return false;\n      }\n      return true;\n    };\n\n    // 添加手机号表单验证\n    const isPhoneFormValid = computed(() => {\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      const isValidPhone = phoneRegex.test(phoneManager.state.value);\n      const isValid = phoneManager.state.value && phoneManager.state.code && isValidPhone && !phoneManager.state.loading;\n      console.log('Phone form validation:', {\n        phone: phoneManager.state.value,\n        code: phoneManager.state.code,\n        isValidPhone,\n        loading: phoneManager.state.loading,\n        isValid\n      });\n      return isValid;\n    });\n    const __returned__ = {\n      router,\n      authStore,\n      userStore,\n      phone,\n      email,\n      phoneManager,\n      emailManager,\n      loading,\n      handleDeleteAccount,\n      passwordState,\n      validatePassword,\n      updatePasswordStrength,\n      isPasswordValid,\n      strengthText,\n      strengthTextClass,\n      strengthColorClass,\n      maskPhone,\n      showPhoneModal,\n      showPasswordModal,\n      showDeleteConfirm,\n      openPhoneModal,\n      openPasswordModal,\n      openDeleteConfirm,\n      closePhoneModal,\n      closePasswordModal,\n      closeDeleteConfirm,\n      handlePasswordSuccess,\n      confirmPasswordError,\n      validateNewPassword,\n      validateConfirmPassword,\n      isPasswordFormValid,\n      handlePasswordUpdate,\n      handlePhoneUpdate,\n      handlePhoneSendCode,\n      showEmailModal,\n      openEmailModal,\n      closeEmailModal,\n      handleEmailUpdate,\n      isEmailFormValid,\n      isRequestingCode,\n      handleEmailSendCode,\n      isCodeButtonDisabled,\n      handlePasswordInput,\n      deleteForm,\n      handleConfirmDelete,\n      startPhoneCountdown,\n      startEmailCountdown,\n      form,\n      userInfo,\n      userInfoLoading,\n      fetchUserInfo,\n      validateForm,\n      isPhoneFormValid,\n      ref,\n      computed,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get showToast() {\n        return showToast;\n      },\n      get useDeleteAccount() {\n        return useDeleteAccount;\n      },\n      get usePhone() {\n        return usePhone;\n      },\n      get useEmail() {\n        return useEmail;\n      },\n      get useChangePassword() {\n        return useChangePassword;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get account() {\n        return account;\n      },\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      get useUserStore() {\n        return useUserStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useRouter","showToast","useDeleteAccount","usePhone","useEmail","useChangePassword","ElMessageBox","account","useAuthStore","useUserStore","router","authStore","userStore","phone","userInfo","email","phoneManager","emailManager","deleteLoading","loading","handleDeleteAccount","state","passwordState","validatePassword","updatePasswordStrength","isPasswordValid","strengthText","strengthTextClass","strengthColorClass","maskPhone","replace","showPhoneModal","showPasswordModal","showDeleteConfirm","openPhoneModal","value","code","openPasswordModal","openDeleteConfirm","closePhoneModal","closePasswordModal","closeDeleteConfirm","deleteForm","password","handlePasswordSuccess","confirmPasswordError","validateNewPassword","error","newPassword","confirmPassword","validateConfirmPassword","isPasswordFormValid","isValid","oldPassword","console","log","passwordsMatch","handlePasswordUpdate","response","updatePassword","old_password","new_password","confirm_password","data","message","handlePhoneUpdate","phoneRegex","test","changePhone","detail","getUserInfo","Error","errorMsg","handlePhoneSendCode","sendVerifyCode","scene","type","startPhoneCountdown","showEmailModal","openEmailModal","closeEmailModal","handleEmailUpdate","changeEmail","includes","isEmailFormValid","emailRegex","isValidEmail","isRequestingCode","handleEmailSendCode","sendEmailCode","startEmailCountdown","isCodeButtonDisabled","countdown","handlePasswordInput","handleConfirmDelete","deleteAccount","logout","clearUserInfo","localStorage","removeItem","window","location","href","timer","setInterval","clearInterval","form","userInfoLoading","fetchUserInfo","validateForm","length","isPhoneFormValid","isValidPhone"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/AccountSettings.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-4xl mx-auto\">\n    <div class=\"space-y-6\">\n      <!-- 账户安全 -->\n      <section class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"px-6 py-4 bg-gray-100 border-b border-gray-200\">\n          <h2 class=\"text-lg font-medium text-gray-900\">账户安全</h2>\n        </div>\n        \n        <div class=\"p-6 space-y-6\">\n          <!-- 邮箱 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">邮箱</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">{{ email || '未绑定' }}</p>\n            </div>\n            <button \n              @click=\"openEmailModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              {{ email ? '更换邮箱' : '绑定邮箱' }}\n            </button>\n          </div>\n\n          <!-- 手机号 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">手机号</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">{{ maskPhone(phone) }}</p>\n            </div>\n            <button \n              @click=\"openPhoneModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              更换手机号\n            </button>\n          </div>\n\n          <!-- 密码 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">登录密码</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">用于保护账号安全</p>\n            </div>\n            <button \n              @click=\"openPasswordModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              修改密码\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- 账户注销 -->\n      <section class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"px-6 py-4 bg-gray-100 border-b border-gray-200\">\n          <h2 class=\"text-lg font-medium text-gray-900\">账户注销</h2>\n        </div>\n        \n        <div class=\"p-6\">\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">账户注销</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">注销后，账户将被永久删除且无法恢复</p>\n            </div>\n            <button \n              @click=\"openDeleteConfirm\"\n              :disabled=\"loading\"\n              class=\"text-red-600 hover:text-red-500\"\n            >\n              {{ loading ? '注销中...' : '注销账号' }}\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- Teleport 部分重写所有弹窗 -->\n      <Teleport to=\"body\">\n        <!-- 手机号修改弹窗 -->\n        <div v-if=\"showPhoneModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>更换手机号</h3>\n              <button class=\"close-btn\" @click=\"closePhoneModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"text\" \n                  v-model=\"phoneManager.state.value\"\n                  placeholder=\"请输入新手机号\"\n                  :disabled=\"phoneManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <div class=\"code-input\">\n                  <input \n                    type=\"text\" \n                    v-model=\"phoneManager.state.code\"\n                    placeholder=\"请输入验证码\"\n                    :disabled=\"phoneManager.state.loading\"\n                  />\n                  <button \n                    @click=\"handlePhoneSendCode\"\n                    :disabled=\"phoneManager.state.loading || phoneManager.state.countdown > 0\"\n                    class=\"code-btn\"\n                  >\n                    {{ phoneManager.state.countdown > 0 ? `${phoneManager.state.countdown}s` : '获取验证码' }}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closePhoneModal\"\n                :disabled=\"phoneManager.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handlePhoneUpdate\"\n                :disabled=\"phoneManager.state.loading\"\n              >\n                {{ phoneManager.state.loading ? '更新中...' : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 密码修改弹窗 -->\n        <div v-if=\"showPasswordModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>修改密码</h3>\n              <button class=\"close-btn\" @click=\"closePasswordModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <!-- 原密码 -->\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"passwordState.oldPassword\"\n                  placeholder=\"请输入当前密码\"\n                />\n              </div>\n              \n              <!-- 新密码 -->\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"passwordState.newPassword\"\n                  @input=\"handlePasswordInput\"\n                  placeholder=\"请输入新密码\"\n                />\n                <!-- 密码强度指示器 -->\n                <div class=\"password-strength\">\n                  <div class=\"strength-text\" :class=\"strengthTextClass\">\n                    密码强度: {{ strengthText }}\n                  </div>\n                  <div class=\"strength-bar\">\n                    <div \n                      class=\"strength-progress\" \n                      :class=\"strengthColorClass\"\n                      :style=\"{ width: (passwordState.strength * 16.67) + '%' }\"\n                    ></div>\n                  </div>\n                </div>\n                <!-- 密码格式要求提示 -->\n                <div class=\"password-requirements text-sm text-gray-500 mt-2\">\n                  <p>密码必须满足：</p>\n                  <ul class=\"list-disc pl-5 space-y-1\">\n                    <li>长度至少8位</li>\n                    <li>包含字母</li>\n                    <li>包含数字</li>\n                  </ul>\n                  <p class=\"mt-1\">建议包含：</p>\n                  <ul class=\"list-disc pl-5 space-y-1\">\n                    <li>大写字母</li>\n                    <li>特殊字符（!@#$%^&*）</li>\n                  </ul>\n                </div>\n              </div>\n\n              <!-- 确认密码 -->\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"passwordState.confirmPassword\"\n                  placeholder=\"请确认新密码\"\n                />\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closePasswordModal\"\n                :disabled=\"passwordState.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handlePasswordUpdate\"\n                :disabled=\"!isPasswordFormValid\"\n              >\n                {{ passwordState.loading ? '修改中...' : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 账户注销确认弹窗 -->\n        <div v-if=\"showDeleteConfirm\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                </svg>\n                <h3 class=\"text-red-700\">账户注销确认</h3>\n              </div>\n              <button class=\"close-btn\" @click=\"closeDeleteConfirm\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"bg-red-50 p-4 rounded-md mb-4 border border-red-100\">\n                <div class=\"flex\">\n                  <div class=\"flex-shrink-0\">\n                    <svg class=\"h-5 w-5 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                        d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <div class=\"ml-3\">\n                    <h3 class=\"text-sm font-medium text-red-800\">\n                      请确认以下信息\n                    </h3>\n                    <div class=\"mt-2 text-sm text-red-700\">\n                      <ul class=\"list-disc pl-5 space-y-1\">\n                        <li>账户注销后将无法恢复</li>\n                        <li>所有个人数据将被永久删除</li>\n                        <li>相关服务和功能将立即停止</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"deleteForm.password\"\n                  placeholder=\"请输入登录密码确认\"\n                  :disabled=\"loading\"\n                  class=\"border-red-300 focus:border-red-500 focus:ring-red-500\"\n                />\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closeDeleteConfirm\"\n                :disabled=\"loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-danger\" \n                @click=\"handleConfirmDelete\"\n                :disabled=\"loading || !deleteForm.password\"\n              >\n                {{ loading ? '注销中...' : '确认注销' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 邮箱绑定弹窗 -->\n        <div v-if=\"showEmailModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>{{ email ? '更换邮箱' : '绑定邮箱' }}</h3>\n              <button class=\"close-btn\" @click=\"closeEmailModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"email\" \n                  v-model=\"emailManager.state.value\"\n                  placeholder=\"请输入邮箱地址\"\n                  :disabled=\"emailManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"emailManager.state.password\"\n                  placeholder=\"请输入登录密码\"\n                  :disabled=\"emailManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <div class=\"code-input\">\n                  <input \n                    type=\"text\" \n                    v-model=\"emailManager.state.code\"\n                    placeholder=\"请输入验证码\"\n                    :disabled=\"emailManager.state.loading\"\n                  />\n                  <button \n                    @click=\"handleEmailSendCode\"\n                    :disabled=\"isCodeButtonDisabled\"\n                    class=\"code-btn\"\n                  >\n                    {{ emailManager.state.countdown > 0 \n                      ? `${emailManager.state.countdown}s` \n                      : (isRequestingCode ? '发送中...' : '获取验证码') \n                    }}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closeEmailModal\"\n                :disabled=\"emailManager.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handleEmailUpdate\"\n                :disabled=\"!isEmailFormValid\"\n              >\n                {{ emailManager.state.loading ? (email ? '更换中...' : '绑定中...') : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n      </Teleport>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showToast } from '@/components/ToastMessage'\nimport { useDeleteAccount } from '@/composables/useDeleteAccount'\nimport { usePhone } from '@/composables/usePhone'\nimport { useEmail } from '@/composables/useEmail'\nimport { useChangePassword } from '@/composables/useChangePassword'\nimport { ElMessageBox } from 'element-plus'\nimport { account } from '@/api/account'\nimport { useAuthStore } from '@/stores/auth'\nimport { useUserStore } from '@/stores/user'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst userStore = useUserStore()\n\n// 基础信息\nconst phone = computed(() => userStore.userInfo?.phone || '')\nconst email = computed(() => userStore.userInfo?.email || '')\n\n// 使用 composables\nconst phoneManager = usePhone()\nconst emailManager = useEmail()\nconst { deleteLoading: loading, handleDeleteAccount } = useDeleteAccount()\nconst {\n  state: passwordState,\n  validatePassword,\n  updatePasswordStrength,\n  isPasswordValid,\n  strengthText,\n  strengthTextClass,\n  strengthColorClass\n} = useChangePassword()\n\n// 工具方法\nconst maskPhone = (phone) => {\n  if (!phone) return '未绑定'\n  return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n}\n\n// 弹窗状态\nconst showPhoneModal = ref(false)\nconst showPasswordModal = ref(false)\nconst showDeleteConfirm = ref(false)\n\n// 打开弹窗的方法\nconst openPhoneModal = () => {\n  phoneManager.state.value = ''\n  phoneManager.state.code = ''\n  showPhoneModal.value = true\n}\n\nconst openPasswordModal = () => {\n  showPasswordModal.value = true\n}\n\nconst openDeleteConfirm = async () => {\n  showDeleteConfirm.value = true\n}\n\n// 关闭弹窗的方法\nconst closePhoneModal = () => {\n  showPhoneModal.value = false\n  phoneManager.state.value = ''\n  phoneManager.state.code = ''\n}\n\nconst closePasswordModal = () => {\n  showPasswordModal.value = false\n}\n\nconst closeDeleteConfirm = () => {\n  showDeleteConfirm.value = false\n  deleteForm.value.password = ''\n}\n\n// 处理成功回调\nconst handlePasswordSuccess = () => {\n  closePasswordModal()\n  showToast('密码修改成功', 'success')\n}\n\n\n// 添加密码验证相关的状态和方法\nconst confirmPasswordError = ref('')\n\nconst validateNewPassword = () => {\n  // 使用 composable 中的验证方法\n  password.state.error = password.validatePassword(password.state.newPassword)\n  // 如果新密码变化，也要检查确认密码\n  if (password.state.confirmPassword) {\n    validateConfirmPassword()\n  }\n}\n\nconst validateConfirmPassword = () => {\n  if (!password.state.confirmPassword) {\n    confirmPasswordError.value = ''\n  } else if (password.state.confirmPassword !== password.state.newPassword) {\n    confirmPasswordError.value = '两次输入的密码不一致'\n  } else {\n    confirmPasswordError.value = ''\n  }\n}\n\n// 添加计算属性控制密码修改按钮状态\nconst isPasswordFormValid = computed(() => {\n  const isValid = passwordState.oldPassword && \n         passwordState.newPassword && \n         passwordState.confirmPassword && \n         passwordState.newPassword === passwordState.confirmPassword &&\n         isPasswordValid.value &&\n         !passwordState.loading\n\n  console.log('Password form validation:', {\n    oldPassword: !!passwordState.oldPassword,\n    newPassword: !!passwordState.newPassword,\n    confirmPassword: !!passwordState.confirmPassword,\n    passwordsMatch: passwordState.newPassword === passwordState.confirmPassword,\n    isPasswordValid: isPasswordValid.value,\n    loading: passwordState.loading,\n    isValid\n  })\n\n  return isValid\n})\n\n// 处理密码更新\nconst handlePasswordUpdate = async () => {\n  try {\n    passwordState.loading = true\n    const response = await account.updatePassword({\n      old_password: passwordState.oldPassword,\n      new_password: passwordState.newPassword,\n      confirm_password: passwordState.confirmPassword\n    })\n    \n    if (response?.data?.code === 200) {\n      closePasswordModal()\n      showToast('密码修改成功', 'success')\n      // 清空表单\n      passwordState.oldPassword = ''\n      passwordState.newPassword = ''\n      passwordState.confirmPassword = ''\n    }\n  } catch (error) {\n    console.error('密码修改失败:', error)\n    showToast(error?.response?.data?.message || '密码修改失败', 'error')\n  } finally {\n    passwordState.loading = false\n  }\n}\n\n// 处理手机号更新\nconst handlePhoneUpdate = async () => {\n  if (!phoneManager.state.value || !phoneManager.state.code) {\n    showToast('请填写完整信息', 'warning')\n    return\n  }\n\n  // 验证手机号格式\n  const phoneRegex = /^1[3-9]\\d{9}$/\n  if (!phoneRegex.test(phoneManager.state.value)) {\n    showToast('请输入正确的手机号格式', 'warning')\n    return\n  }\n\n  try {\n    const response = await account.changePhone({\n      phone: phoneManager.state.value,\n      code: phoneManager.state.code\n    })\n    \n    if (response?.data?.code === 200 || response?.data?.detail) {\n      closePhoneModal()\n      await userStore.getUserInfo()\n      showToast(response.data.detail || '手机号更新成功', 'success')\n      return\n    }\n    \n    throw new Error(response?.data?.detail || '手机号更新失败')\n  } catch (error) {\n    console.error('手机号更新失败:', error)\n    const errorMsg = error.response?.data?.detail || \n                    error.response?.data?.message ||\n                    error.message || \n                    '手机号更新失败'\n    showToast(errorMsg, 'error')\n  }\n}\n\n// 处理手机号验证码发送\nconst handlePhoneSendCode = async () => {\n  if (!phoneManager.state.value) {\n    showToast('请输入新手机号', 'warning')\n    return\n  }\n  \n  // 验证手机号格式\n  const phoneRegex = /^1[3-9]\\d{9}$/\n  if (!phoneRegex.test(phoneManager.state.value)) {\n    showToast('请输入正确的手机号格式', 'warning')\n    return\n  }\n  \n  try {\n    phoneManager.state.loading = true\n    const response = await account.sendVerifyCode({\n      phone: phoneManager.state.value,\n      scene: 'change_phone',\n      type: 'sms'\n    })\n\n    if (response?.data?.code === 200) {\n      startPhoneCountdown()\n      showToast(response.data.message || '验证码已发送', 'success')\n    } else {\n      throw new Error(response?.data?.message || '发送验证码失败')\n    }\n  } catch (error) {\n    console.error('发送验证码失败:', error)\n    const errorMsg = error.response?.data?.message || \n                    error.response?.data?.detail ||\n                    error.message || \n                    '发送验证码失败'\n    showToast(errorMsg, 'error')\n  } finally {\n    phoneManager.state.loading = false\n  }\n}\n\n// 邮箱相关\nconst showEmailModal = ref(false)\n\nconst openEmailModal = () => {\n  emailManager.state.value = ''\n  emailManager.state.code = ''\n  showEmailModal.value = true\n}\n\nconst closeEmailModal = () => {\n  showEmailModal.value = false\n  emailManager.state.value = ''\n  emailManager.state.code = ''\n  emailManager.state.password = ''\n}\n\nconst handleEmailUpdate = async () => {\n  try {\n    const data = {\n      email: emailManager.state.value,\n      code: emailManager.state.code,\n      password: emailManager.state.password\n    }\n    \n    const response = await account.changeEmail(data)\n\n    // 检查响应状态\n    if (response?.data?.code === 200 || response?.data?.message?.includes('成功')) {\n      closeEmailModal()\n      // 更新用户信息\n      await userStore.getUserInfo()\n      showToast(response.data.message || '邮箱更新成功', 'success')\n      return  // 成功后直接返回，不抛出错误\n    }\n    \n    // 如果没有成功状态码也没有成功消息，才抛出错误\n    throw new Error(response?.data?.message || '邮箱更新失败')\n  } catch (error) {\n    console.error('邮箱更新失败:', error)\n    // 如果错误消息包含\"成功\"，说明实际上是成功的\n    if (error.message?.includes('成功')) {\n      closeEmailModal()\n      await userStore.getUserInfo()\n      showToast(error.message, 'success')\n      return\n    }\n    \n    // 真正的错误处理\n    const errorMsg = error.response?.data?.detail || \n                    error.response?.data?.message || \n                    error.message || \n                    '邮箱操作失败'\n    showToast(errorMsg, 'error')\n  }\n}\n\n// 添加计算属性控制邮箱表单按钮状态\nconst isEmailFormValid = computed(() => {\n  // 检查邮箱格式\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  const isValidEmail = emailRegex.test(emailManager.state.value)\n  \n  // 检查所有必填字段\n  const isValid = emailManager.state.value && \n         emailManager.state.code && \n         emailManager.state.password &&  // 密码必填\n         isValidEmail && \n         !emailManager.state.loading\n\n  console.log('Email form validation:', {\n    email: emailManager.state.value,\n    code: emailManager.state.code,\n    password: emailManager.state.password,\n    isValidEmail,\n    loading: emailManager.state.loading,\n    isValid\n  })\n\n  return isValid\n})\n\n// 添加防重复点击状态\nconst isRequestingCode = ref(false)\n\n// 处理邮箱更新的验证码发送\nconst handleEmailSendCode = async () => {\n  if (!emailManager.state.value) {\n    showToast('请输入新邮箱', 'warning')\n    return\n  }\n  \n  if (!phone.value) {\n    showToast('当前账号未绑定手机号，无法进行邮箱验证', 'warning')\n    return\n  }\n  \n  // 验证邮箱格式\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  if (!emailRegex.test(emailManager.state.value)) {\n    showToast('请输入正确的邮箱格式', 'warning')\n    return\n  }\n  \n  try {\n    emailManager.state.loading = true\n    isRequestingCode.value = true\n    const response = await account.sendEmailCode({\n      email: emailManager.state.value\n    })\n    \n    if (response?.data?.message) {\n      showToast(response.data.message, 'success')\n      startEmailCountdown()\n    }\n  } catch (error) {\n    console.error('发送验证码失败:', error)\n    const errorMsg = error.response?.data?.detail || \n                    error.message || \n                    '发送验证码失败'\n    showToast(errorMsg, 'error')\n  } finally {\n    emailManager.state.loading = false\n    isRequestingCode.value = false\n  }\n}\n\n// 修改按钮禁用状态\nconst isCodeButtonDisabled = computed(() => {\n  return emailManager.state.loading || \n         emailManager.state.countdown > 0 || \n         !emailManager.state.password || \n         !emailManager.state.value ||\n         isRequestingCode.value\n})\n\n// 修改密码强度更新的处理方法\nconst handlePasswordInput = () => {\n  validatePassword(passwordState.value.newPassword)\n  updatePasswordStrength(passwordState.value.newPassword)\n}\n\n// 添加表单数据\nconst deleteForm = ref({\n  password: ''\n})\n\n// 处理确认注销\nconst handleConfirmDelete = async () => {\n  if (!deleteForm.value.password) {\n    showToast('请输入密码', 'warning')\n    return\n  }\n  \n  try {\n    const response = await account.deleteAccount(deleteForm.value)\n    if (response?.data?.code === 200) {\n      showToast('账号已注销', 'success')\n      // 使用 auth store 的 logout 方法清除所有状态\n      await authStore.logout()\n      // 清除 user store 的状态\n      userStore.clearUserInfo()\n      // 清除其他可能的状态\n      localStorage.removeItem('isLoggedIn')\n      // 强制刷新页面以确保所有状态都被清除\n      window.location.href = '/login'\n    }\n  } catch (error) {\n    console.error('注销失败:', error)\n    showToast(error?.message || '注销失败', 'error')\n  }\n}\n\n// 倒计时管理\nconst startPhoneCountdown = () => {\n  phoneManager.state.countdown = 60\n  const timer = setInterval(() => {\n    phoneManager.state.countdown--\n    if (phoneManager.state.countdown <= 0) {\n      clearInterval(timer)\n    }\n  }, 1000)\n}\n\nconst startEmailCountdown = () => {\n  emailManager.state.countdown = 60\n  const timer = setInterval(() => {\n    emailManager.state.countdown--\n    if (emailManager.state.countdown <= 0) {\n      clearInterval(timer)\n    }\n  }, 1000)\n}\n\n// 表单数据\nconst form = ref({\n  old_password: '',\n  new_password: '',\n  confirm_password: ''\n})\n\n// 用户信息\nconst userInfo = ref(null)\n\n// 用户信息加载状态\nconst userInfoLoading = ref(false)\n\n// 获取用户信息\nconst fetchUserInfo = async () => {\n  try {\n    userInfoLoading.value = true\n    await userStore.getUserInfo()\n  } catch (error) {\n    console.error('获取用户信息失败:', error)\n    showToast('获取用户信息失败', 'error')\n  } finally {\n    userInfoLoading.value = false\n  }\n}\n\n// 在组件挂载时获取用户信息\nonMounted(() => {\n  fetchUserInfo()\n})\n\n\n// 表单验证\nconst validateForm = () => {\n  if (!form.value.old_password) {\n    showToast('请输入当前密码', 'error')\n    return false\n  }\n  if (!form.value.new_password) {\n    showToast('请输入新密码', 'error')\n    return false\n  }\n  if (!form.value.confirm_password) {\n    showToast('请确认新密码', 'error')\n    return false\n  }\n  if (form.value.new_password !== form.value.confirm_password) {\n    showToast('两次输入的密码不一致', 'error')\n    return false\n  }\n  if (form.value.new_password.length < 6) {\n    showToast('密码长度不能少于6位', 'error')\n    return false\n  }\n  return true\n}\n\n// 添加手机号表单验证\nconst isPhoneFormValid = computed(() => {\n  const phoneRegex = /^1[3-9]\\d{9}$/\n  const isValidPhone = phoneRegex.test(phoneManager.state.value)\n\n  const isValid = phoneManager.state.value && \n         phoneManager.state.code && \n         isValidPhone && \n         !phoneManager.state.loading\n\n  console.log('Phone form validation:', {\n    phone: phoneManager.state.value,\n    code: phoneManager.state.code,\n    isValidPhone,\n    loading: phoneManager.state.loading,\n    isValid\n  })\n\n  return isValid\n})\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 50;\n}\n\n.modal-content {\n  position: relative;\n  width: 91.666667%;\n  max-width: 28rem;\n  background-color: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n.modal-header {\n  padding: 1rem 1.5rem;\n  background-color: #f9fafb;\n  border-bottom: 1px solid #e5e7eb;\n  border-top-left-radius: 0.5rem;\n  border-top-right-radius: 0.5rem;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #111827;\n  font-size: 1.125rem;\n  font-weight: 500;\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.modal-footer {\n  padding: 1rem 1.5rem;\n  background-color: #f9fafb;\n  border-top: 1px solid #e5e7eb;\n  border-bottom-left-radius: 0.5rem;\n  border-bottom-right-radius: 0.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n}\n\n.form-group {\n  margin-bottom: 1rem;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  color: #111827;\n  background-color: white;\n  transition: border-color 0.15s ease-in-out;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #6366f1;\n  box-shadow: 0 0 0 1px #6366f1;\n}\n\n.form-group input:disabled {\n  background-color: #f3f4f6;\n  cursor: not-allowed;\n}\n\n.code-input {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.code-input input {\n  flex: 1;\n}\n\n.code-btn {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: white;\n  background-color: #6366f1;\n  border-radius: 0.375rem;\n  transition: background-color 0.15s ease-in-out;\n}\n\n.code-btn:not(:disabled):hover {\n  background-color: #4f46e5;\n}\n\n.code-btn:disabled {\n  background-color: #9ca3af;\n  cursor: not-allowed;\n}\n\n.btn {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  border-radius: 0.375rem;\n  transition: all 0.15s ease-in-out;\n}\n\n.btn-default {\n  color: #374151;\n  background-color: white;\n  border: 1px solid #d1d5db;\n}\n\n.btn-default:not(:disabled):hover {\n  background-color: #f9fafb;\n}\n\n.btn-primary {\n  color: white;\n  background-color: #6366f1;\n  border: 1px solid transparent;\n}\n\n.btn-primary:not(:disabled):hover {\n  background-color: #4f46e5;\n}\n\n.btn-danger {\n  color: white;\n  background-color: #ef4444;\n  border: 1px solid transparent;\n}\n\n.btn-danger:not(:disabled):hover {\n  background-color: #dc2626;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* 关闭按钮样式 */\n.close-btn {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  padding: 0.25rem;\n  color: #6b7280;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: color 0.15s ease-in-out;\n}\n\n.close-btn:hover {\n  color: #374151;\n}\n\n/* 注销弹窗特殊样式 */\n.bg-red-50 {\n  background-color: #fef2f2;\n}\n\n.border-red-100 {\n  border-color: #fee2e2;\n}\n\n.text-red-400 {\n  color: #f87171;\n}\n\n.text-red-600 {\n  color: #dc2626;\n}\n\n.text-red-700 {\n  color: #b91c1c;\n}\n\n.text-red-800 {\n  color: #991b1b;\n}\n\n/* 注销弹窗的输入框特殊样式 */\n.form-group input.border-red-300 {\n  border-color: #fca5a5;\n}\n\n.form-group input.focus\\:border-red-500:focus {\n  border-color: #ef4444;\n}\n\n.form-group input.focus\\:ring-red-500:focus {\n  box-shadow: 0 0 0 1px #ef4444;\n}\n\n.input-tips {\n  background-color: #f9fafb;\n  border-radius: 0.5rem;\n  padding: 0.75rem;\n  border: 1px solid #e5e7eb;\n}\n\n.input-tips ul li {\n  color: #6b7280;\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n\n.input-tips ul li span:first-child {\n  min-width: 1rem;\n  background-color: white;\n}\n\n.form-group input.error {\n  border-color: #ef4444;\n}\n\n.form-group input.error:focus {\n  border-color: #ef4444;\n  box-shadow: 0 0 0 1px #ef4444;\n}\n\n/* 添加密码强度指示器样式 */\n.password-strength {\n  margin-top: 0.5rem;\n}\n\n.strength-text {\n  font-size: 0.875rem;\n  margin-bottom: 0.25rem;\n}\n\n.strength-bar {\n  height: 4px;\n  background-color: #e5e7eb;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.strength-progress {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}