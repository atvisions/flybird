{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"component-blocks\"\n};\nconst _hoisted_2 = [\"onDragstart\"];\nconst _hoisted_3 = {\n  class: \"block-content\"\n};\nconst _hoisted_4 = {\n  class: \"block-title\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_window_item = _resolveComponent(\"v-window-item\");\n  const _component_v_window = _resolveComponent(\"v-window\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  return _openBlock(), _createBlock(_component_v_card, {\n    class: \"h-100\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_window, {\n      modelValue: $setup.activeTab,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.activeTab = $event)\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" 布局面板 \"), _createVNode(_component_v_window_item, {\n        value: \"layout\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_text, {\n          class: \"pa-2\"\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.layoutComponents, component => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: component.id,\n              class: \"component-block\",\n              draggable: \"true\",\n              onDragstart: $event => $setup.handleDragStart($event, component)\n            }, [_createVNode(_component_v_icon, {\n              size: \"18\"\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(component.icon), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString(component.name), 1 /* TEXT */)])], 40 /* PROPS, NEED_HYDRATION */, _hoisted_2);\n          }), 128 /* KEYED_FRAGMENT */))])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 组件面板 \"), _createVNode(_component_v_window_item, {\n        value: \"components\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_text, {\n          class: \"pa-2\"\n        }, {\n          default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" 组件列表 \")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 档案面板 \"), _createVNode(_component_v_window_item, {\n        value: \"files\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_text, {\n          class: \"pa-2\"\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 档案列表 \")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_v_card","default","_withCtx","_createVNode","_component_v_window","modelValue","$setup","activeTab","_cache","$event","_createCommentVNode","_component_v_window_item","value","_component_v_card_text","_createElementVNode","_hoisted_1","_createElementBlock","_Fragment","_renderList","layoutComponents","component","key","id","draggable","onDragstart","handleDragStart","_component_v_icon","size","_createTextVNode","_toDisplayString","icon","_","_hoisted_3","_hoisted_4","name","_hoisted_2"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/ToolbarPanel.vue"],"sourcesContent":["<template>\n  <v-card class=\"h-100\">\n    <v-window v-model=\"activeTab\">\n      <!-- 布局面板 -->\n      <v-window-item value=\"layout\">\n        <v-card-text class=\"pa-2\">\n          <div class=\"component-blocks\">\n            <div v-for=\"component in layoutComponents\" \n              :key=\"component.id\"\n              class=\"component-block\"\n              draggable=\"true\"\n              @dragstart=\"handleDragStart($event, component)\">\n              <v-icon size=\"18\">{{ component.icon }}</v-icon>\n              <div class=\"block-content\">\n                <div class=\"block-title\">{{ component.name }}</div>\n              </div>\n            </div>\n          </div>\n        </v-card-text>\n      </v-window-item>\n\n      <!-- 组件面板 -->\n      <v-window-item value=\"components\">\n        <v-card-text class=\"pa-2\">\n          组件列表\n        </v-card-text>\n      </v-window-item>\n\n      <!-- 档案面板 -->\n      <v-window-item value=\"files\">\n        <v-card-text class=\"pa-2\">\n          档案列表\n        </v-card-text>\n      </v-window-item>\n    </v-window>\n  </v-card>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useDragDrop } from '../composables/useDragDrop'\nimport axios from 'axios'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst activeTab = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n})\n\nconst { handleDragStart } = useDragDrop()\n\n// 布局组件列表\nconst layoutComponents = ref([])\nconst isLoading = ref(false)\n\n// 获取布局组件\nconst fetchLayoutComponents = async () => {\n  isLoading.value = true\n  try {\n    // 先获取布局分类\n    const categoryResponse = await axios.get('/api/v1/resume/component-categories/main_categories/')\n    const layoutCategory = categoryResponse.data.find(category => category.code === 'layout')\n    \n    if (layoutCategory) {\n      // 获取布局分类下的组件\n      const componentsResponse = await axios.get(`/api/v1/resume/component-categories/${layoutCategory.id}/components/`)\n      layoutComponents.value = componentsResponse.data.map(component => ({\n        ...component,\n        config: {\n          layout: component.type,\n          columns: component.type === 'single' ? 1 : 2,\n          columnWidth: component.type === 'single' ? ['100%'] : ['50%', '50%']\n        }\n      }))\n    }\n  } catch (error) {\n    console.error('获取布局组件失败:', error)\n  } finally {\n    isLoading.value = false\n  }\n}\n\nonMounted(() => {\n  fetchLayoutComponents()\n})\n</script>\n\n<style scoped>\n.component-blocks {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 6px;\n  padding: 0 6px;\n}\n\n.component-block {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px;\n  background-color: white;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  border-radius: 4px;\n  cursor: move;\n  user-select: none;\n}\n\n.component-block:hover {\n  background-color: rgba(0, 0, 0, 0.02);\n}\n\n.block-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.block-title {\n  font-size: 14px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.87);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style> "],"mappings":";;EAMeA,KAAK,EAAC;AAAkB;mBANvC;;EAamBA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAa;;;;;;;uBAbtCC,YAAA,CAkCSC,iBAAA;IAlCDF,KAAK,EAAC;EAAO;IADvBG,OAAA,EAAAC,QAAA,CAEI,MAgCW,CAhCXC,YAAA,CAgCWC,mBAAA;MAlCfC,UAAA,EAEuBC,MAAA,CAAAC,SAAS;MAFhC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAEuBH,MAAA,CAAAC,SAAS,GAAAE,MAAA;;MAFhCR,OAAA,EAAAC,QAAA,CAGM,MAAa,CAAbQ,mBAAA,UAAa,EACbP,YAAA,CAegBQ,wBAAA;QAfDC,KAAK,EAAC;MAAQ;QAJnCX,OAAA,EAAAC,QAAA,CAKQ,MAac,CAbdC,YAAA,CAacU,sBAAA;UAbDf,KAAK,EAAC;QAAM;UALjCG,OAAA,EAAAC,QAAA,CAMU,MAWM,CAXNY,mBAAA,CAWM,OAXNC,UAWM,I,kBAVJC,mBAAA,CASMC,SAAA,QAhBlBC,WAAA,CAOqCZ,MAAA,CAAAa,gBAAgB,EAA7BC,SAAS;iCAArBJ,mBAAA,CASM;cARHK,GAAG,EAAED,SAAS,CAACE,EAAE;cAClBxB,KAAK,EAAC,iBAAiB;cACvByB,SAAS,EAAC,MAAM;cACfC,WAAS,EAAAf,MAAA,IAAEH,MAAA,CAAAmB,eAAe,CAAChB,MAAM,EAAEW,SAAS;gBAC7CjB,YAAA,CAA+CuB,iBAAA;cAAvCC,IAAI,EAAC;YAAI;cAZ/B1B,OAAA,EAAAC,QAAA,CAYgC,MAAoB,CAZpD0B,gBAAA,CAAAC,gBAAA,CAYmCT,SAAS,CAACU,IAAI,iB;cAZjDC,CAAA;0CAacjB,mBAAA,CAEM,OAFNkB,UAEM,GADJlB,mBAAA,CAAmD,OAAnDmB,UAAmD,EAAAJ,gBAAA,CAAvBT,SAAS,CAACc,IAAI,iB,oCAd1DC,UAAA;;UAAAJ,CAAA;;QAAAA,CAAA;UAqBMrB,mBAAA,UAAa,EACbP,YAAA,CAIgBQ,wBAAA;QAJDC,KAAK,EAAC;MAAY;QAtBvCX,OAAA,EAAAC,QAAA,CAuBQ,MAEc,CAFdC,YAAA,CAEcU,sBAAA;UAFDf,KAAK,EAAC;QAAM;UAvBjCG,OAAA,EAAAC,QAAA,CAuBkC,MAE1BM,MAAA,QAAAA,MAAA,OAzBRoB,gBAAA,CAuBkC,QAE1B,E;UAzBRG,CAAA;;QAAAA,CAAA;UA4BMrB,mBAAA,UAAa,EACbP,YAAA,CAIgBQ,wBAAA;QAJDC,KAAK,EAAC;MAAO;QA7BlCX,OAAA,EAAAC,QAAA,CA8BQ,MAEc,CAFdC,YAAA,CAEcU,sBAAA;UAFDf,KAAK,EAAC;QAAM;UA9BjCG,OAAA,EAAAC,QAAA,CA8BkC,MAE1BM,MAAA,QAAAA,MAAA,OAhCRoB,gBAAA,CA8BkC,QAE1B,E;UAhCRG,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}