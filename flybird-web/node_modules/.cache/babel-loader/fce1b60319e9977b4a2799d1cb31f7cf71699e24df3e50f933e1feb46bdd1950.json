{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport request from '@/utils/request';\nexport const user = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/');\n  },\n  // 更新用户头像\n  updateAvatar: data => {\n    const formData = new FormData();\n    formData.append('avatar', data);\n    return request.post('/api/v1/users/userInfo/avatar/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 更新用户背景图\n  updateBackground: data => {\n    const formData = new FormData();\n    formData.append('background', data);\n    return request.post('/api/v1/users/userInfo/background/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 更新用户基本信息\n  updateUserInfo: data => {\n    const formData = new FormData();\n    // 遍历对象，将所有非空值添加到 FormData\n    Object.keys(data).forEach(key => {\n      // 确保空字符串也会被发送\n      if (data[key] !== null && data[key] !== undefined && data[key] !== '') {\n        formData.append(key, data[key]);\n      }\n    });\n\n    // 打印发送的数据，用于调试\n    console.log('Sending user info update:', {\n      username: formData.get('username'),\n      position: formData.get('position'),\n      bio: formData.get('bio')\n    });\n    return request.put('/api/v1/users/userInfo/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 获取用户资料完整度\n  getProfileCompleteness: () => {\n    return request.get('/api/v1/users/account/completeness/');\n  }\n};\nexport default user;","map":{"version":3,"names":["request","user","getUserInfo","get","updateAvatar","data","formData","FormData","append","post","headers","updateBackground","updateUserInfo","Object","keys","forEach","key","undefined","console","log","username","position","bio","put","getProfileCompleteness"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/api/user.js"],"sourcesContent":["import request from '@/utils/request'\n\nexport const user = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/')\n  },\n\n  // 更新用户头像\n  updateAvatar: (data) => {\n    const formData = new FormData()\n    formData.append('avatar', data)\n    return request.post('/api/v1/users/userInfo/avatar/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n\n  // 更新用户背景图\n  updateBackground: (data) => {\n    const formData = new FormData()\n    formData.append('background', data)\n    return request.post('/api/v1/users/userInfo/background/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n\n  // 更新用户基本信息\n  updateUserInfo: (data) => {\n    const formData = new FormData()\n    // 遍历对象，将所有非空值添加到 FormData\n    Object.keys(data).forEach(key => {\n      // 确保空字符串也会被发送\n      if (data[key] !== null && data[key] !== undefined && data[key] !== '') {\n        formData.append(key, data[key])\n      }\n    })\n\n    // 打印发送的数据，用于调试\n    console.log('Sending user info update:', {\n      username: formData.get('username'),\n      position: formData.get('position'),\n      bio: formData.get('bio')\n    })\n\n    return request.put('/api/v1/users/userInfo/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n\n  // 获取用户资料完整度\n  getProfileCompleteness: () => {\n    return request.get('/api/v1/users/account/completeness/')\n  }\n}\n\nexport default user"],"mappings":";;AAAA,OAAOA,OAAO,MAAM,iBAAiB;AAErC,OAAO,MAAMC,IAAI,GAAG;EAClB;EACAC,WAAW,EAAEA,CAAA,KAAM;IACjB,OAAOF,OAAO,CAACG,GAAG,CAAC,yBAAyB,CAAC;EAC/C,CAAC;EAED;EACAC,YAAY,EAAGC,IAAI,IAAK;IACtB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEH,IAAI,CAAC;IAC/B,OAAOL,OAAO,CAACS,IAAI,CAAC,gCAAgC,EAAEH,QAAQ,EAAE;MAC9DI,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,gBAAgB,EAAGN,IAAI,IAAK;IAC1B,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEH,IAAI,CAAC;IACnC,OAAOL,OAAO,CAACS,IAAI,CAAC,oCAAoC,EAAEH,QAAQ,EAAE;MAClEI,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAE,cAAc,EAAGP,IAAI,IAAK;IACxB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/B;IACAM,MAAM,CAACC,IAAI,CAACT,IAAI,CAAC,CAACU,OAAO,CAACC,GAAG,IAAI;MAC/B;MACA,IAAIX,IAAI,CAACW,GAAG,CAAC,KAAK,IAAI,IAAIX,IAAI,CAACW,GAAG,CAAC,KAAKC,SAAS,IAAIZ,IAAI,CAACW,GAAG,CAAC,KAAK,EAAE,EAAE;QACrEV,QAAQ,CAACE,MAAM,CAACQ,GAAG,EAAEX,IAAI,CAACW,GAAG,CAAC,CAAC;MACjC;IACF,CAAC,CAAC;;IAEF;IACAE,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;MACvCC,QAAQ,EAAEd,QAAQ,CAACH,GAAG,CAAC,UAAU,CAAC;MAClCkB,QAAQ,EAAEf,QAAQ,CAACH,GAAG,CAAC,UAAU,CAAC;MAClCmB,GAAG,EAAEhB,QAAQ,CAACH,GAAG,CAAC,KAAK;IACzB,CAAC,CAAC;IAEF,OAAOH,OAAO,CAACuB,GAAG,CAAC,yBAAyB,EAAEjB,QAAQ,EAAE;MACtDI,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAc,sBAAsB,EAAEA,CAAA,KAAM;IAC5B,OAAOxB,OAAO,CAACG,GAAG,CAAC,qCAAqC,CAAC;EAC3D;AACF,CAAC;AAED,eAAeF,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}