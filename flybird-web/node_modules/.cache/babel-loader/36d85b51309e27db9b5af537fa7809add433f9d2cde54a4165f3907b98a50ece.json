{"ast":null,"code":"import { ref, computed, onMounted, defineAsyncComponent } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '@/stores/auth';\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const authStore = useAuthStore();\n\n    // 计算是否显示头部和底部\n    const showHeaderAndFooter = computed(() => {\n      const path = router.currentRoute.value.path;\n      return !path.includes('/login') && !path.includes('/register');\n    });\n\n    // 计算是否显示登录按钮\n    const showLoginButton = computed(() => !authStore.isAuthenticated);\n    onMounted(() => {\n      // 检查认证状态\n      if (!authStore.isAuthenticated) {\n        const currentPath = router.currentRoute.value.path;\n        if (currentPath !== '/login' && currentPath !== '/register') {\n          // 保存当前路径用于登录后重定向\n          const redirect = encodeURIComponent(currentPath);\n          router.push(`/login?redirect=${redirect}`);\n        }\n      }\n    });\n\n    // 异步导入组件\n    const HeadView = defineAsyncComponent(() => import('@/components/HeadView.vue'));\n    const FootView = defineAsyncComponent(() => import('@/components/FootView.vue'));\n    const ToastMessage = defineAsyncComponent(() => import('@/components/ToastMessage.vue'));\n    const __returned__ = {\n      router,\n      authStore,\n      showHeaderAndFooter,\n      showLoginButton,\n      HeadView,\n      FootView,\n      ToastMessage,\n      ref,\n      computed,\n      onMounted,\n      defineAsyncComponent,\n      get useRouter() {\n        return useRouter;\n      },\n      get useAuthStore() {\n        return useAuthStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","defineAsyncComponent","useRouter","useAuthStore","router","authStore","showHeaderAndFooter","path","currentRoute","value","includes","showLoginButton","isAuthenticated","currentPath","redirect","encodeURIComponent","push","HeadView","FootView","ToastMessage"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- 头部导航 -->\n    <HeadView v-if=\"showHeaderAndFooter\" />\n    \n    <!-- 主要内容区域 -->\n    <main>\n      <router-view></router-view>\n    </main>\n    \n    <!-- 底部 -->\n    <FootView v-if=\"showHeaderAndFooter\" />\n    \n    <!-- Toast 消息组件 -->\n    <ToastMessage />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, defineAsyncComponent } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\n\n// 计算是否显示头部和底部\nconst showHeaderAndFooter = computed(() => {\n  const path = router.currentRoute.value.path\n  return !path.includes('/login') && !path.includes('/register')\n})\n\n// 计算是否显示登录按钮\nconst showLoginButton = computed(() => !authStore.isAuthenticated)\n\nonMounted(() => {\n  // 检查认证状态\n  if (!authStore.isAuthenticated) {\n    const currentPath = router.currentRoute.value.path\n    if (currentPath !== '/login' && currentPath !== '/register') {\n      // 保存当前路径用于登录后重定向\n      const redirect = encodeURIComponent(currentPath)\n      router.push(`/login?redirect=${redirect}`)\n    }\n  }\n})\n\n// 异步导入组件\nconst HeadView = defineAsyncComponent(() => import('@/components/HeadView.vue'))\nconst FootView = defineAsyncComponent(() => import('@/components/FootView.vue'))\nconst ToastMessage = defineAsyncComponent(() => import('@/components/ToastMessage.vue'))\n</script>\n\n<style>\n.app-wrapper {\n  position: relative;\n  min-height: 100vh;\n}\n\n.bg-image {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 0;\n  pointer-events: none;\n}\n\n/* 可选：添加一个半透明遮罩让内容更易读 */\n.bg-image::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.8);\n}\n\n/* 确保内容在背景之上 */\n.app-wrapper > *:not(.bg-image) {\n  position: relative;\n  z-index: 1;\n}\n</style>"],"mappings":"AAmBA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,oBAAoB,QAAQ,KAAI;AACnE,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,YAAY,QAAQ,eAAc;;;;;;;IAE3C,MAAMC,MAAM,GAAGF,SAAS,CAAC;IACzB,MAAMG,SAAS,GAAGF,YAAY,CAAC;;IAE/B;IACA,MAAMG,mBAAmB,GAAGP,QAAQ,CAAC,MAAM;MACzC,MAAMQ,IAAI,GAAGH,MAAM,CAACI,YAAY,CAACC,KAAK,CAACF,IAAG;MAC1C,OAAO,CAACA,IAAI,CAACG,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAACH,IAAI,CAACG,QAAQ,CAAC,WAAW;IAC/D,CAAC;;IAED;IACA,MAAMC,eAAe,GAAGZ,QAAQ,CAAC,MAAM,CAACM,SAAS,CAACO,eAAe;IAEjEZ,SAAS,CAAC,MAAM;MACd;MACA,IAAI,CAACK,SAAS,CAACO,eAAe,EAAE;QAC9B,MAAMC,WAAW,GAAGT,MAAM,CAACI,YAAY,CAACC,KAAK,CAACF,IAAG;QACjD,IAAIM,WAAW,KAAK,QAAQ,IAAIA,WAAW,KAAK,WAAW,EAAE;UAC3D;UACA,MAAMC,QAAQ,GAAGC,kBAAkB,CAACF,WAAW;UAC/CT,MAAM,CAACY,IAAI,CAAC,mBAAmBF,QAAQ,EAAE;QAC3C;MACF;IACF,CAAC;;IAED;IACA,MAAMG,QAAQ,GAAGhB,oBAAoB,CAAC,MAAM,MAAM,CAAC,2BAA2B,CAAC;IAC/E,MAAMiB,QAAQ,GAAGjB,oBAAoB,CAAC,MAAM,MAAM,CAAC,2BAA2B,CAAC;IAC/E,MAAMkB,YAAY,GAAGlB,oBAAoB,CAAC,MAAM,MAAM,CAAC,+BAA+B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}