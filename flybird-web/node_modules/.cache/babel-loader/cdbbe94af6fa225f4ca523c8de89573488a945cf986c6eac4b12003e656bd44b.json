{"ast":null,"code":"import { createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed inset-0 overflow-y-auto\"\n};\nconst _hoisted_2 = {\n  class: \"flex min-h-full items-center justify-center p-4 text-center\"\n};\nconst _hoisted_3 = {\n  class: \"mt-4\"\n};\nconst _hoisted_4 = {\n  class: \"flex flex-col items-center\"\n};\nconst _hoisted_5 = {\n  class: \"relative w-48 h-48 mb-4 overflow-hidden rounded-full\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  key: 1,\n  class: \"w-full h-full bg-gray-100 flex items-center justify-center\"\n};\nconst _hoisted_8 = {\n  class: \"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n};\nconst _hoisted_9 = {\n  class: \"mt-6 flex justify-end space-x-3\"\n};\nconst _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"TransitionRoot\"], {\n    appear: \"\",\n    show: $props.modelValue,\n    as: \"template\"\n  }, {\n    default: _withCtx(() => [_createVNode($setup[\"Dialog\"], {\n      as: \"div\",\n      class: \"relative z-50\",\n      onClose: $setup.closeDialog\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"TransitionChild\"], {\n        as: \"template\",\n        enter: \"duration-300 ease-out\",\n        \"enter-from\": \"opacity-0\",\n        \"enter-to\": \"opacity-100\",\n        leave: \"duration-200 ease-in\",\n        \"leave-from\": \"opacity-100\",\n        \"leave-to\": \"opacity-0\"\n      }, {\n        default: _withCtx(() => _cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n          class: \"fixed inset-0 bg-black/25\"\n        }, null, -1 /* HOISTED */)])),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"TransitionChild\"], {\n        as: \"template\",\n        enter: \"duration-300 ease-out\",\n        \"enter-from\": \"opacity-0 scale-95\",\n        \"enter-to\": \"opacity-100 scale-100\",\n        leave: \"duration-200 ease-in\",\n        \"leave-from\": \"opacity-100 scale-100\",\n        \"leave-to\": \"opacity-0 scale-95\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"DialogPanel\"], {\n          class: \"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"DialogTitle\"], {\n            as: \"h3\",\n            class: \"text-lg font-medium leading-6 text-gray-900\"\n          }, {\n            default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" 上传职业头像 \")])),\n            _: 1 /* STABLE */\n          }), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" 预览区域 \"), _createElementVNode(\"div\", _hoisted_5, [$setup.previewUrl ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 0,\n            src: $setup.previewUrl,\n            class: \"w-full h-full object-cover\",\n            alt: \"头像预览\"\n          }, null, 8 /* PROPS */, _hoisted_6)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode($setup[\"UserIcon\"], {\n            class: \"w-12 h-12 text-gray-400\"\n          })]))]), _createCommentVNode(\" 上传按钮 \"), _createElementVNode(\"label\", _hoisted_8, [_createElementVNode(\"input\", {\n            type: \"file\",\n            class: \"hidden\",\n            accept: \"image/*\",\n            onChange: $setup.handleFileChange\n          }, null, 32 /* NEED_HYDRATION */), _cache[2] || (_cache[2] = _createTextVNode(\" 选择图片 \"))]), _cache[3] || (_cache[3] = _createElementVNode(\"p\", {\n            class: \"mt-2 text-sm text-gray-500\"\n          }, \" 支持 JPG、PNG 格式，建议尺寸 200x200 像素 \", -1 /* HOISTED */))])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n            onClick: $setup.closeDialog\n          }, \" 取消 \"), _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"inline-flex justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n            disabled: !$setup.selectedFile,\n            onClick: $setup.handleUpload\n          }, \" 确认上传 \", 8 /* PROPS */, _hoisted_10)])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })])])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"]);\n}","map":{"version":3,"names":["class","key","_createBlock","$setup","appear","show","$props","modelValue","as","default","_withCtx","_createVNode","onClose","closeDialog","enter","leave","_cache","_createElementVNode","_","_hoisted_1","_hoisted_2","_createTextVNode","_hoisted_3","_hoisted_4","_createCommentVNode","_hoisted_5","previewUrl","_createElementBlock","src","alt","_hoisted_6","_hoisted_7","_hoisted_8","type","accept","onChange","handleFileChange","_hoisted_9","onClick","disabled","selectedFile","handleUpload","_hoisted_10"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/components/ProfileAvatarUpload.vue"],"sourcesContent":["<template>\n  <TransitionRoot appear :show=\"modelValue\" as=\"template\">\n    <Dialog as=\"div\" class=\"relative z-50\" @close=\"closeDialog\">\n      <TransitionChild\n        as=\"template\"\n        enter=\"duration-300 ease-out\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"duration-200 ease-in\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div class=\"fixed inset-0 bg-black/25\" />\n      </TransitionChild>\n\n      <div class=\"fixed inset-0 overflow-y-auto\">\n        <div class=\"flex min-h-full items-center justify-center p-4 text-center\">\n          <TransitionChild\n            as=\"template\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0 scale-95\"\n            enter-to=\"opacity-100 scale-100\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100 scale-100\"\n            leave-to=\"opacity-0 scale-95\"\n          >\n            <DialogPanel class=\"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all\">\n              <DialogTitle as=\"h3\" class=\"text-lg font-medium leading-6 text-gray-900\">\n                上传职业头像\n              </DialogTitle>\n\n              <div class=\"mt-4\">\n                <div class=\"flex flex-col items-center\">\n                  <!-- 预览区域 -->\n                  <div class=\"relative w-48 h-48 mb-4 overflow-hidden rounded-full\">\n                    <img\n                      v-if=\"previewUrl\"\n                      :src=\"previewUrl\"\n                      class=\"w-full h-full object-cover\"\n                      alt=\"头像预览\"\n                    />\n                    <div v-else class=\"w-full h-full bg-gray-100 flex items-center justify-center\">\n                      <UserIcon class=\"w-12 h-12 text-gray-400\" />\n                    </div>\n                  </div>\n\n                  <!-- 上传按钮 -->\n                  <label class=\"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\">\n                    <input\n                      type=\"file\"\n                      class=\"hidden\"\n                      accept=\"image/*\"\n                      @change=\"handleFileChange\"\n                    >\n                    选择图片\n                  </label>\n\n                  <p class=\"mt-2 text-sm text-gray-500\">\n                    支持 JPG、PNG 格式，建议尺寸 200x200 像素\n                  </p>\n                </div>\n              </div>\n\n              <div class=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                  @click=\"closeDialog\"\n                >\n                  取消\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                  :disabled=\"!selectedFile\"\n                  @click=\"handleUpload\"\n                >\n                  确认上传\n                </button>\n              </div>\n            </DialogPanel>\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport {\n  Dialog,\n  DialogPanel,\n  DialogTitle,\n  TransitionChild,\n  TransitionRoot,\n} from '@headlessui/vue'\nimport { UserIcon } from '@heroicons/vue/24/outline'\nimport { showToast } from '@/components/ToastMessage'\n\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'upload'])\n\nconst selectedFile = ref(null)\nconst previewUrl = ref(null)\n\n// 处理文件选择\nconst handleFileChange = (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n\n  // 验证文件类型\n  if (!file.type.startsWith('image/')) {\n    showToast('请选择图片文件', 'error')\n    return\n  }\n\n  // 验证文件大小（例如限制为 2MB）\n  const maxSize = 2 * 1024 * 1024\n  if (file.size > maxSize) {\n    showToast('图片大小不能超过 2MB', 'error')\n    return\n  }\n\n  selectedFile.value = file\n  previewUrl.value = URL.createObjectURL(file)\n}\n\n// 处理上传\nconst handleUpload = async () => {\n  if (!selectedFile.value) return\n  \n  try {\n    // 触发上传事件\n    await emit('upload', selectedFile.value)\n    // 清理预览\n    clearPreview()\n    // 关闭对话框\n    closeDialog()\n  } catch (error) {\n    console.error('上传失败:', error)\n    // 保持对话框打开，让用户可以重试\n  }\n}\n\n// 关闭对话框\nconst closeDialog = () => {\n  emit('update:modelValue', false)\n  clearPreview()\n}\n\n// 清理预览\nconst clearPreview = () => {\n  if (previewUrl.value) {\n    URL.revokeObjectURL(previewUrl.value)\n  }\n  selectedFile.value = null\n  previewUrl.value = null\n}\n\n// 监听对话框关闭\nwatch(() => props.modelValue, (newVal) => {\n  if (!newVal) {\n    clearPreview()\n  }\n})\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}