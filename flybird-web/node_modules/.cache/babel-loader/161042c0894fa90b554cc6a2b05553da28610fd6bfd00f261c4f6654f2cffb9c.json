{"ast":null,"code":"import _objectSpread from \"/Users/liuzhao/Documents/Projects/flybird/flybird-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { defineStore } from 'pinia';\nimport profile from '@/api/profile';\nimport { ref, computed } from 'vue';\nexport const useProfileStore = defineStore('profile', () => {\n  const basicInfo = ref(null);\n  const avatarUpdateTime = ref(null);\n  const profileAvatar = computed(() => basicInfo.value?.avatar || null);\n\n  // 更新档案头像\n  function updateProfileAvatar(avatarUrl) {\n    if (basicInfo.value) {\n      basicInfo.value = _objectSpread(_objectSpread({}, basicInfo.value), {}, {\n        avatar: avatarUrl\n      });\n      avatarUpdateTime.value = Date.now();\n    }\n  }\n\n  // 获取档案基本信息\n  async function fetchBasicInfo() {\n    try {\n      console.log('Fetching basic info...');\n      const response = await profile.getData();\n      console.log('Response:', response.data);\n      if (response?.data?.code === 200) {\n        console.log('Previous basicInfo:', basicInfo.value);\n        basicInfo.value = _objectSpread({}, response.data.data.basic_info);\n        console.log('New basicInfo:', basicInfo.value);\n        avatarUpdateTime.value = Date.now();\n        console.log('Updated timestamp:', avatarUpdateTime.value);\n        return basicInfo.value;\n      }\n      return null;\n    } catch (error) {\n      console.error('获取档案基本信息失败:', error);\n      throw error;\n    }\n  }\n  return {\n    basicInfo,\n    avatarUpdateTime,\n    profileAvatar,\n    updateProfileAvatar,\n    fetchBasicInfo\n  };\n});","map":{"version":3,"names":["defineStore","profile","ref","computed","useProfileStore","basicInfo","avatarUpdateTime","profileAvatar","value","avatar","updateProfileAvatar","avatarUrl","_objectSpread","Date","now","fetchBasicInfo","console","log","response","getData","data","code","basic_info","error"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/profile.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport profile from '@/api/profile'\nimport { ref, computed } from 'vue'\n\nexport const useProfileStore = defineStore('profile', () => {\n  const basicInfo = ref(null)\n  const avatarUpdateTime = ref(null)\n\n  const profileAvatar = computed(() => basicInfo.value?.avatar || null)\n\n  // 更新档案头像\n  function updateProfileAvatar(avatarUrl) {\n    if (basicInfo.value) {\n      basicInfo.value = {\n        ...basicInfo.value,\n        avatar: avatarUrl\n      }\n      avatarUpdateTime.value = Date.now()\n    }\n  }\n\n  // 获取档案基本信息\n  async function fetchBasicInfo() {\n    try {\n      console.log('Fetching basic info...')\n      const response = await profile.getData()\n      console.log('Response:', response.data)\n      if (response?.data?.code === 200) {\n        console.log('Previous basicInfo:', basicInfo.value)\n        basicInfo.value = { ...response.data.data.basic_info }\n        console.log('New basicInfo:', basicInfo.value)\n        avatarUpdateTime.value = Date.now()\n        console.log('Updated timestamp:', avatarUpdateTime.value)\n        return basicInfo.value\n      }\n      return null\n    } catch (error) {\n      console.error('获取档案基本信息失败:', error)\n      throw error\n    }\n  }\n\n  return {\n    basicInfo,\n    avatarUpdateTime,\n    profileAvatar,\n    updateProfileAvatar,\n    fetchBasicInfo\n  }\n}) "],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,OAAO,MAAM,eAAe;AACnC,SAASC,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AAEnC,OAAO,MAAMC,eAAe,GAAGJ,WAAW,CAAC,SAAS,EAAE,MAAM;EAC1D,MAAMK,SAAS,GAAGH,GAAG,CAAC,IAAI,CAAC;EAC3B,MAAMI,gBAAgB,GAAGJ,GAAG,CAAC,IAAI,CAAC;EAElC,MAAMK,aAAa,GAAGJ,QAAQ,CAAC,MAAME,SAAS,CAACG,KAAK,EAAEC,MAAM,IAAI,IAAI,CAAC;;EAErE;EACA,SAASC,mBAAmBA,CAACC,SAAS,EAAE;IACtC,IAAIN,SAAS,CAACG,KAAK,EAAE;MACnBH,SAAS,CAACG,KAAK,GAAAI,aAAA,CAAAA,aAAA,KACVP,SAAS,CAACG,KAAK;QAClBC,MAAM,EAAEE;MAAS,EAClB;MACDL,gBAAgB,CAACE,KAAK,GAAGK,IAAI,CAACC,GAAG,CAAC,CAAC;IACrC;EACF;;EAEA;EACA,eAAeC,cAAcA,CAAA,EAAG;IAC9B,IAAI;MACFC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrC,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACkB,OAAO,CAAC,CAAC;MACxCH,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEC,QAAQ,CAACE,IAAI,CAAC;MACvC,IAAIF,QAAQ,EAAEE,IAAI,EAAEC,IAAI,KAAK,GAAG,EAAE;QAChCL,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEZ,SAAS,CAACG,KAAK,CAAC;QACnDH,SAAS,CAACG,KAAK,GAAAI,aAAA,KAAQM,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACE,UAAU,CAAE;QACtDN,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEZ,SAAS,CAACG,KAAK,CAAC;QAC9CF,gBAAgB,CAACE,KAAK,GAAGK,IAAI,CAACC,GAAG,CAAC,CAAC;QACnCE,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEX,gBAAgB,CAACE,KAAK,CAAC;QACzD,OAAOH,SAAS,CAACG,KAAK;MACxB;MACA,OAAO,IAAI;IACb,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdP,OAAO,CAACO,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;MACnC,MAAMA,KAAK;IACb;EACF;EAEA,OAAO;IACLlB,SAAS;IACTC,gBAAgB;IAChBC,aAAa;IACbG,mBAAmB;IACnBK;EACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}