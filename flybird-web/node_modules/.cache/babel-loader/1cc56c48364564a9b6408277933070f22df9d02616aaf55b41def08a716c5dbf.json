{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"messages-container\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white rounded-lg shadow mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"flex\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"absolute -top-1 -right-1 min-w-[16px] h-4 bg-red-500 rounded-full text-[10px] font-medium text-white flex items-center justify-center px-1\"\n};\nconst _hoisted_6 = {\n  class: \"bg-white rounded-lg shadow overflow-hidden\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"p-8 text-center\"\n};\nconst _hoisted_8 = {\n  class: \"divide-y divide-gray-100\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"flex items-start space-x-3\"\n};\nconst _hoisted_11 = [\"src\", \"alt\"];\nconst _hoisted_12 = {\n  class: \"flex-1 min-w-0\"\n};\nconst _hoisted_13 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_14 = {\n  class: \"flex items-center space-x-2\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm font-medium text-gray-900\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded-full\"\n};\nconst _hoisted_17 = {\n  class: \"text-xs text-gray-500\"\n};\nconst _hoisted_18 = {\n  class: \"text-sm text-gray-600 line-clamp-2 mt-1\"\n};\nconst _hoisted_19 = {\n  class: \"mt-2 flex items-center justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity\"\n};\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = {\n  key: 2,\n  class: \"p-4 text-center border-t\"\n};\nconst _hoisted_23 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 消息类型切换 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.messageTabs, tab => {\n    return _createElementVNode(\"button\", {\n      key: tab.key,\n      onClick: $event => $setup.currentMessageTab = tab.key,\n      class: _normalizeClass([\"flex-1 px-4 py-3 text-sm font-medium relative border-b-2 transition-colors\", [$setup.currentMessageTab === tab.key ? 'text-indigo-600 border-indigo-600' : 'text-gray-500 hover:text-gray-700 border-transparent hover:border-gray-300']])\n    }, [_createTextVNode(_toDisplayString(tab.label) + \" \", 1 /* TEXT */), tab.unread ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(tab.unread), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 10 /* CLASS, PROPS */, _hoisted_4);\n  }), 64 /* STABLE_FRAGMENT */))])]), _createCommentVNode(\" 消息列表 \"), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" 空状态 \"), !$setup.currentMessages.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode($setup[\"InboxIcon\"], {\n    class: \"mx-auto h-12 w-12 text-gray-400\"\n  }), _cache[0] || (_cache[0] = _createElementVNode(\"h3\", {\n    class: \"mt-2 text-sm font-medium text-gray-900\"\n  }, \"暂无消息\", -1 /* HOISTED */)), _cache[1] || (_cache[1] = _createElementVNode(\"p\", {\n    class: \"mt-1 text-sm text-gray-500\"\n  }, \"当有新消息时会在这里显示\", -1 /* HOISTED */))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 消息列表 \"), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.currentMessages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: _normalizeClass([\"p-4 hover:bg-gray-50 transition-colors cursor-pointer group\", {\n        'bg-indigo-50/50': message.unread\n      }]),\n      onClick: $event => $setup.handleMessageClick(message)\n    }, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n      src: message.avatar,\n      alt: message.sender,\n      class: \"w-10 h-10 rounded-full flex-shrink-0\",\n      onError: $setup.handleImageError\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_11), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"p\", _hoisted_15, _toDisplayString(message.sender), 1 /* TEXT */), message.type === 'system' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_16, \" 系统 \")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"span\", _hoisted_17, _toDisplayString(message.time), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_18, _toDisplayString(message.content), 1 /* TEXT */), _createCommentVNode(\" 操作按钮 \"), _createElementVNode(\"div\", _hoisted_19, [message.unread ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: _withModifiers($event => $setup.markAsRead(message), [\"stop\"]),\n      class: \"text-xs text-indigo-600 hover:text-indigo-700\"\n    }, \" 标记已读 \", 8 /* PROPS */, _hoisted_20)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $setup.deleteMessage(message), [\"stop\"]),\n      class: \"text-xs text-gray-500 hover:text-red-600\"\n    }, \" 删除 \", 8 /* PROPS */, _hoisted_21)])])])], 10 /* CLASS, PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" 加载更多 \"), $setup.currentMessages.length && $setup.hasMore ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [_createElementVNode(\"button\", {\n    onClick: $setup.loadMore,\n    class: \"text-sm text-indigo-600 hover:text-indigo-700\",\n    disabled: $setup.loading\n  }, _toDisplayString($setup.loading ? '加载中...' : '加载更多'), 9 /* TEXT, PROPS */, _hoisted_23)])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 新消息按钮 \"), _createElementVNode(\"button\", {\n    class: \"fixed right-4 bottom-20 lg:bottom-4 bg-indigo-600 text-white rounded-full p-3 shadow-lg hover:bg-indigo-700 transition-colors\",\n    onClick: $setup.openNewMessage\n  }, [_createVNode($setup[\"PencilSquareIcon\"], {\n    class: \"w-6 h-6\"\n  })])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","messageTabs","tab","onClick","$event","currentMessageTab","_normalizeClass","_createTextVNode","_toDisplayString","label","unread","_hoisted_5","_hoisted_4","_hoisted_6","currentMessages","length","_hoisted_7","_createVNode","_hoisted_8","message","id","handleMessageClick","_hoisted_10","src","avatar","alt","sender","onError","handleImageError","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","type","_hoisted_16","_hoisted_17","time","_hoisted_18","content","_hoisted_19","_withModifiers","markAsRead","_hoisted_20","deleteMessage","_hoisted_21","_hoisted_9","hasMore","_hoisted_22","loadMore","disabled","loading","_hoisted_23","openNewMessage"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/MyMessages.vue"],"sourcesContent":["<template>\n  <div class=\"messages-container\">\n    <!-- 消息类型切换 -->\n    <div class=\"bg-white rounded-lg shadow mb-4\">\n      <div class=\"flex\">\n        <button\n          v-for=\"tab in messageTabs\"\n          :key=\"tab.key\"\n          @click=\"currentMessageTab = tab.key\"\n          class=\"flex-1 px-4 py-3 text-sm font-medium relative border-b-2 transition-colors\"\n          :class=\"[\n            currentMessageTab === tab.key\n              ? 'text-indigo-600 border-indigo-600'\n              : 'text-gray-500 hover:text-gray-700 border-transparent hover:border-gray-300'\n          ]\"\n        >\n          {{ tab.label }}\n          <span \n            v-if=\"tab.unread\" \n            class=\"absolute -top-1 -right-1 min-w-[16px] h-4 bg-red-500 rounded-full text-[10px] font-medium text-white flex items-center justify-center px-1\"\n          >\n            {{ tab.unread }}\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 消息列表 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <!-- 空状态 -->\n      <div v-if=\"!currentMessages.length\" class=\"p-8 text-center\">\n        <InboxIcon class=\"mx-auto h-12 w-12 text-gray-400\" />\n        <h3 class=\"mt-2 text-sm font-medium text-gray-900\">暂无消息</h3>\n        <p class=\"mt-1 text-sm text-gray-500\">当有新消息时会在这里显示</p>\n      </div>\n\n      <!-- 消息列表 -->\n      <div v-else class=\"divide-y divide-gray-100\">\n        <div \n          v-for=\"message in currentMessages\" \n          :key=\"message.id\"\n          class=\"p-4 hover:bg-gray-50 transition-colors cursor-pointer group\"\n          :class=\"{ 'bg-indigo-50/50': message.unread }\"\n          @click=\"handleMessageClick(message)\"\n        >\n          <div class=\"flex items-start space-x-3\">\n            <img \n              :src=\"message.avatar\" \n              :alt=\"message.sender\"\n              class=\"w-10 h-10 rounded-full flex-shrink-0\"\n              @error=\"handleImageError\"\n            />\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex items-center space-x-2\">\n                  <p class=\"text-sm font-medium text-gray-900\">{{ message.sender }}</p>\n                  <span \n                    v-if=\"message.type === 'system'\"\n                    class=\"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded-full\"\n                  >\n                    系统\n                  </span>\n                </div>\n                <span class=\"text-xs text-gray-500\">{{ message.time }}</span>\n              </div>\n              <p class=\"text-sm text-gray-600 line-clamp-2 mt-1\">{{ message.content }}</p>\n              <!-- 操作按钮 -->\n              <div class=\"mt-2 flex items-center justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                <button\n                  v-if=\"message.unread\"\n                  @click.stop=\"markAsRead(message)\"\n                  class=\"text-xs text-indigo-600 hover:text-indigo-700\"\n                >\n                  标记已读\n                </button>\n                <button\n                  @click.stop=\"deleteMessage(message)\"\n                  class=\"text-xs text-gray-500 hover:text-red-600\"\n                >\n                  删除\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 加载更多 -->\n      <div \n        v-if=\"currentMessages.length && hasMore\" \n        class=\"p-4 text-center border-t\"\n      >\n        <button \n          @click=\"loadMore\"\n          class=\"text-sm text-indigo-600 hover:text-indigo-700\"\n          :disabled=\"loading\"\n        >\n          {{ loading ? '加载中...' : '加载更多' }}\n        </button>\n      </div>\n    </div>\n\n    <!-- 新消息按钮 -->\n    <button\n      class=\"fixed right-4 bottom-20 lg:bottom-4 bg-indigo-600 text-white rounded-full p-3 shadow-lg hover:bg-indigo-700 transition-colors\"\n      @click=\"openNewMessage\"\n    >\n      <PencilSquareIcon class=\"w-6 h-6\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { InboxIcon, PencilSquareIcon } from '@heroicons/vue/24/outline'\nimport { ElMessage } from 'element-plus'\nimport defaultAvatar from '@/assets/images/default-avatar.png'\n\n// 消息类型标签\nconst messageTabs = [\n  { key: 'all', label: '全部消息', unread: 5 },\n  { key: 'system', label: '系统通知', unread: 2 },\n  { key: 'private', label: '私信', unread: 3 }\n]\n\nconst currentMessageTab = ref('all')\nconst loading = ref(false)\nconst hasMore = ref(true)\n\n// 模拟消息数据\nconst messages = ref([\n  {\n    id: 1,\n    sender: '系统通知',\n    avatar: 'https://picsum.photos/32/32?random=1',\n    content: '欢迎加入飞鸟社区！',\n    time: '刚刚',\n    unread: true,\n    type: 'system'\n  },\n  {\n    id: 2,\n    sender: '张三',\n    avatar: 'https://picsum.photos/32/32?random=2',\n    content: '你好，我看了你的文章很受启发',\n    time: '10分钟前',\n    unread: true,\n    type: 'private'\n  },\n  // 添加更多消息...\n])\n\n// 根据当前标签筛选消息\nconst currentMessages = computed(() => {\n  if (currentMessageTab.value === 'all') {\n    return messages.value\n  }\n  return messages.value.filter(msg => msg.type === currentMessageTab.value)\n})\n\n// 处理消息点击\nconst handleMessageClick = (message) => {\n  // 标记消息为已读\n  message.unread = false\n  // TODO: 打开消息详情\n  showToast('消息功能开发中...', 'info')\n}\n\n// 加载更多消息\nconst loadMore = async () => {\n  if (loading.value) return\n  loading.value = true\n  try {\n    // TODO: 调用API加载更多消息\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    // 模拟加载完成\n    hasMore.value = false\n  } catch (error) {\n    showToast('加载失败，请重试', 'error')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 打开新消息对话框\nconst openNewMessage = () => {\n  showToast('新消息功能开发中...', 'info')\n}\n\n// 处理图片加载错误\nconst handleImageError = (e) => {\n  e.target.src = defaultAvatar\n}\n\n// 标记消息已读\nconst markAsRead = async (message) => {\n  try {\n    // TODO: 调用API标记消息已读\n    message.unread = false\n    ElMessage.success('已标记为已读')\n  } catch (error) {\n    ElMessage.error('操作失败，请重试')\n  }\n}\n\n// 删除消息\nconst deleteMessage = async (message) => {\n  try {\n    // TODO: 调用API删除消息\n    messages.value = messages.value.filter(msg => msg.id !== message.id)\n    ElMessage.success('删除成功')\n  } catch (error) {\n    ElMessage.error('删除失败，请重试')\n  }\n}\n</script>\n\n<style scoped>\n.messages-container {\n  min-height: calc(100vh - 64px - 56px); /* 减去头部和底部导航的高度 */\n  padding-bottom: 80px; /* 为新消息按钮预留空间 */\n}\n\n@media (min-width: 1024px) {\n  .messages-container {\n    min-height: calc(100vh - 64px);\n    padding-bottom: 60px;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}