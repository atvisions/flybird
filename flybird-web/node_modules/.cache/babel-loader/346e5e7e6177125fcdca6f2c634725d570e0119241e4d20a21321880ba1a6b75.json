{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAccountStore } from '@/stores/account';\nimport { SparklesIcon, DocumentIcon, CloudArrowUpIcon, ChatBubbleLeftRightIcon } from '@heroicons/vue/24/outline';\nimport { formatDate } from '@/utils/date';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const accountStore = useAccountStore();\n\n    // 会员权益\n    const memberBenefits = [{\n      key: 'resume',\n      name: '简历管理',\n      icon: DocumentIcon\n    }, {\n      key: 'upload',\n      name: '作品上传',\n      icon: CloudArrowUpIcon\n    }, {\n      key: 'ai',\n      name: 'AI助手',\n      icon: SparklesIcon\n    }, {\n      key: 'message',\n      name: '私信咨询',\n      icon: ChatBubbleLeftRightIcon\n    }];\n\n    // 积分信息\n    const pointsInfo = ref({\n      balance: 0,\n      total_earned: 0,\n      total_spent: 0,\n      level: 1\n    });\n\n    // 订单记录\n    const orders = ref([]);\n\n    // 获取积分信息\n    const fetchPointsInfo = async () => {\n      try {\n        const response = await membership.getPointsInfo();\n        if (response?.data?.code === 200) {\n          pointsInfo.value = response.data.data;\n        }\n      } catch (error) {\n        console.error('获取积分信息失败:', error);\n      }\n    };\n\n    // 获取订单记录\n    const fetchOrders = async () => {\n      try {\n        const response = await membership.getOrders();\n        if (response?.data?.code === 200) {\n          orders.value = response.data.data;\n        }\n      } catch (error) {\n        console.error('获取订单记录失败:', error);\n      }\n    };\n\n    // 会员类型文本\n    const vipTypeText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '普通用户';\n      return userInfo.vip_status;\n    });\n\n    // 会员到期文本\n    const vipExpireText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '开通会员享专属权益';\n      if (userInfo.vip_type === 'lifetime') return '终身会员';\n      if (userInfo.vip_expire_time) {\n        const expireDate = new Date(userInfo.vip_expire_time);\n        return `有效期至 ${formatDate(expireDate)}`;\n      }\n      return '';\n    });\n\n    // 会员按钮文本和处理\n    const vipButtonText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '立即开通';\n      if (userInfo.vip_type === 'lifetime') return '查看权益';\n      return '立即续费';\n    });\n    const handleVipButton = () => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) {\n        router.push('/pro');\n      } else if (userInfo.vip_type === 'lifetime') {\n        // 显示会员权益详情\n      } else {\n        router.push('/pro/renew');\n      }\n    };\n    onMounted(async () => {\n      await Promise.all([fetchPointsInfo(), fetchOrders()]);\n    });\n    const __returned__ = {\n      router,\n      accountStore,\n      memberBenefits,\n      pointsInfo,\n      orders,\n      fetchPointsInfo,\n      fetchOrders,\n      vipTypeText,\n      vipExpireText,\n      vipButtonText,\n      handleVipButton,\n      ref,\n      computed,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useAccountStore() {\n        return useAccountStore;\n      },\n      get SparklesIcon() {\n        return SparklesIcon;\n      },\n      get DocumentIcon() {\n        return DocumentIcon;\n      },\n      get CloudArrowUpIcon() {\n        return CloudArrowUpIcon;\n      },\n      get ChatBubbleLeftRightIcon() {\n        return ChatBubbleLeftRightIcon;\n      },\n      get formatDate() {\n        return formatDate;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useRouter","useAccountStore","SparklesIcon","DocumentIcon","CloudArrowUpIcon","ChatBubbleLeftRightIcon","formatDate","router","accountStore","memberBenefits","key","name","icon","pointsInfo","balance","total_earned","total_spent","level","orders","fetchPointsInfo","response","membership","getPointsInfo","data","code","value","error","console","fetchOrders","getOrders","vipTypeText","userInfo","is_vip","vip_status","vipExpireText","vip_type","vip_expire_time","expireDate","Date","vipButtonText","handleVipButton","push","Promise","all"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/Membership/index.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    <!-- 会员状态卡片 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div class=\"px-6 py-5 bg-gradient-to-r from-amber-500 to-yellow-500\">\n        <div class=\"flex items-center justify-between\">\n          <div class=\"text-white\">\n            <h3 class=\"text-xl font-semibold\">{{ vipTypeText }}</h3>\n            <p class=\"mt-1 text-amber-100\">{{ vipExpireText }}</p>\n          </div>\n          <button \n            @click=\"handleVipButton\"\n            class=\"px-4 py-2 bg-white text-amber-500 rounded-full text-sm font-medium hover:bg-amber-50 transition-colors\"\n          >\n            {{ vipButtonText }}\n          </button>\n        </div>\n      </div>\n      \n      <!-- 会员权益 -->\n      <div class=\"px-6 py-4\">\n        <h4 class=\"text-base font-medium text-gray-900 mb-3\">会员权益</h4>\n        <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div v-for=\"benefit in memberBenefits\" :key=\"benefit.key\" class=\"text-center\">\n            <div class=\"w-10 h-10 mx-auto mb-2 rounded-full bg-amber-100 flex items-center justify-center\">\n              <component :is=\"benefit.icon\" class=\"w-5 h-5 text-amber-500\" />\n            </div>\n            <div class=\"text-sm text-gray-600\">{{ benefit.name }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 积分信息 -->\n    <div class=\"bg-white rounded-lg shadow p-6\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <h3 class=\"text-lg font-medium text-gray-900\">我的积分</h3>\n        <span class=\"text-2xl font-semibold text-amber-500\">{{ pointsInfo.balance || 0 }}</span>\n      </div>\n      <div class=\"grid grid-cols-3 gap-4 text-center\">\n        <div>\n          <div class=\"text-sm text-gray-500\">总获得积分</div>\n          <div class=\"mt-1 text-lg font-medium text-gray-900\">{{ pointsInfo.total_earned || 0 }}</div>\n        </div>\n        <div>\n          <div class=\"text-sm text-gray-500\">已使用积分</div>\n          <div class=\"mt-1 text-lg font-medium text-gray-900\">{{ pointsInfo.total_spent || 0 }}</div>\n        </div>\n        <div>\n          <div class=\"text-sm text-gray-500\">当前等级</div>\n          <div class=\"mt-1 text-lg font-medium text-gray-900\">Lv.{{ pointsInfo.level || 1 }}</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 订单记录 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div class=\"px-6 py-4 border-b border-gray-200\">\n        <h3 class=\"text-lg font-medium text-gray-900\">订单记录</h3>\n      </div>\n      <div class=\"divide-y divide-gray-200\">\n        <div v-if=\"orders.length === 0\" class=\"py-8 text-center text-gray-500\">\n          暂无订单记录\n        </div>\n        <div v-else v-for=\"order in orders\" :key=\"order.order_no\" class=\"px-6 py-4\">\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <div class=\"text-sm text-gray-500\">订单号：{{ order.order_no }}</div>\n              <div class=\"mt-1 text-base font-medium text-gray-900\">{{ order.vip_type_display }}</div>\n            </div>\n            <div class=\"text-right\">\n              <div class=\"text-lg font-medium text-amber-500\">¥{{ order.amount }}</div>\n              <div class=\"mt-1 text-sm\" :class=\"{\n                'text-green-500': order.status === 'paid',\n                'text-gray-500': order.status === 'pending',\n                'text-red-500': ['cancelled', 'refunded'].includes(order.status)\n              }\">\n                {{ order.status_display }}\n              </div>\n            </div>\n          </div>\n          <div class=\"mt-2 text-sm text-gray-500\">\n            {{ formatDate(order.created_at) }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAccountStore } from '@/stores/account'\nimport { \n  SparklesIcon, DocumentIcon, CloudArrowUpIcon, \n  ChatBubbleLeftRightIcon \n} from '@heroicons/vue/24/outline'\nimport { formatDate } from '@/utils/date'\n\nconst router = useRouter()\nconst accountStore = useAccountStore()\n\n// 会员权益\nconst memberBenefits = [\n  { key: 'resume', name: '简历管理', icon: DocumentIcon },\n  { key: 'upload', name: '作品上传', icon: CloudArrowUpIcon },\n  { key: 'ai', name: 'AI助手', icon: SparklesIcon },\n  { key: 'message', name: '私信咨询', icon: ChatBubbleLeftRightIcon },\n]\n\n// 积分信息\nconst pointsInfo = ref({\n  balance: 0,\n  total_earned: 0,\n  total_spent: 0,\n  level: 1\n})\n\n// 订单记录\nconst orders = ref([])\n\n// 获取积分信息\nconst fetchPointsInfo = async () => {\n  try {\n    const response = await membership.getPointsInfo()\n    if (response?.data?.code === 200) {\n      pointsInfo.value = response.data.data\n    }\n  } catch (error) {\n    console.error('获取积分信息失败:', error)\n  }\n}\n\n// 获取订单记录\nconst fetchOrders = async () => {\n  try {\n    const response = await membership.getOrders()\n    if (response?.data?.code === 200) {\n      orders.value = response.data.data\n    }\n  } catch (error) {\n    console.error('获取订单记录失败:', error)\n  }\n}\n\n// 会员类型文本\nconst vipTypeText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '普通用户'\n  return userInfo.vip_status\n})\n\n// 会员到期文本\nconst vipExpireText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '开通会员享专属权益'\n  if (userInfo.vip_type === 'lifetime') return '终身会员'\n  if (userInfo.vip_expire_time) {\n    const expireDate = new Date(userInfo.vip_expire_time)\n    return `有效期至 ${formatDate(expireDate)}`\n  }\n  return ''\n})\n\n// 会员按钮文本和处理\nconst vipButtonText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '立即开通'\n  if (userInfo.vip_type === 'lifetime') return '查看权益'\n  return '立即续费'\n})\n\nconst handleVipButton = () => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) {\n    router.push('/pro')\n  } else if (userInfo.vip_type === 'lifetime') {\n    // 显示会员权益详情\n  } else {\n    router.push('/pro/renew')\n  }\n}\n\nonMounted(async () => {\n  await Promise.all([\n    fetchPointsInfo(),\n    fetchOrders()\n  ])\n})\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}