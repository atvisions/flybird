{"ast":null,"code":"import { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { auth } from '@/api/auth';\nimport { showToast } from '@/components/ToastMessage';\nexport function useLogout() {\n  const store = useStore();\n  const router = useRouter();\n  const handleLogout = async () => {\n    try {\n      // 调用后端登出接口\n      await auth.logout();\n\n      // 清理本地状态\n      await store.dispatch('logout');\n\n      // 显示成功提示\n      showToast('已安全退出', 'success');\n\n      // 跳转到登录页\n      router.push('/login');\n    } catch (error) {\n      console.error('登出失败:', error);\n      showToast('退出失败，请重试', 'error');\n\n      // 即使后端登出失败，也要清理本地状态\n      await store.dispatch('logout');\n      router.push('/login');\n    }\n  };\n  return {\n    handleLogout\n  };\n}","map":{"version":3,"names":["useStore","useRouter","auth","showToast","useLogout","store","router","handleLogout","logout","dispatch","push","error","console"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/composables/useLogout.js"],"sourcesContent":["import { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { auth } from '@/api/auth'\nimport { showToast } from '@/components/ToastMessage'\n\nexport function useLogout() {\n  const store = useStore()\n  const router = useRouter()\n\n  const handleLogout = async () => {\n    try {\n      // 调用后端登出接口\n      await auth.logout()\n      \n      // 清理本地状态\n      await store.dispatch('logout')\n      \n      // 显示成功提示\n      showToast('已安全退出', 'success')\n      \n      // 跳转到登录页\n      router.push('/login')\n    } catch (error) {\n      console.error('登出失败:', error)\n      showToast('退出失败，请重试', 'error')\n      \n      // 即使后端登出失败，也要清理本地状态\n      await store.dispatch('logout')\n      router.push('/login')\n    }\n  }\n\n  return {\n    handleLogout\n  }\n} "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,IAAI,QAAQ,YAAY;AACjC,SAASC,SAAS,QAAQ,2BAA2B;AAErD,OAAO,SAASC,SAASA,CAAA,EAAG;EAC1B,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;EACxB,MAAMM,MAAM,GAAGL,SAAS,CAAC,CAAC;EAE1B,MAAMM,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF;MACA,MAAML,IAAI,CAACM,MAAM,CAAC,CAAC;;MAEnB;MACA,MAAMH,KAAK,CAACI,QAAQ,CAAC,QAAQ,CAAC;;MAE9B;MACAN,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC;;MAE7B;MACAG,MAAM,CAACI,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC7BR,SAAS,CAAC,UAAU,EAAE,OAAO,CAAC;;MAE9B;MACA,MAAME,KAAK,CAACI,QAAQ,CAAC,QAAQ,CAAC;MAC9BH,MAAM,CAACI,IAAI,CAAC,QAAQ,CAAC;IACvB;EACF,CAAC;EAED,OAAO;IACLH;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}