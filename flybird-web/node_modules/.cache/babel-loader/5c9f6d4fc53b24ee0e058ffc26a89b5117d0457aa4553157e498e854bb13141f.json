{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport HeadView from '@/components/HeadView.vue';\nimport FooterView from '@/components/FooterView.vue';\nimport { DocumentTextIcon, QuestionMarkCircleIcon, ScaleIcon, HomeIcon, UserIcon, Bars3Icon, XMarkIcon, PlusIcon, DocumentIcon, EnvelopeIcon, Cog6ToothIcon } from '@heroicons/vue/24/outline';\nexport default {\n  __name: 'CommunityView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const isMobileMenuOpen = ref(false);\n\n    // 主导航标签\n    const mainTabs = [{\n      name: '文章',\n      path: '/community/articles',\n      icon: DocumentTextIcon\n    }, {\n      name: '问答',\n      path: '/community/questions',\n      icon: QuestionMarkCircleIcon\n    }, {\n      name: '话题',\n      path: '/community/topics',\n      icon: ScaleIcon\n    }];\n\n    // 移动端底部导航按钮\n    const mobileActions = [{\n      key: 'more',\n      label: '更多',\n      icon: Bars3Icon,\n      handler: () => {\n        isMobileMenuOpen.value = true;\n      }\n    }, {\n      key: 'profile',\n      label: '档案',\n      icon: UserIcon,\n      handler: () => router.push('/user?tab=profile')\n    }, {\n      key: 'resumes',\n      label: '简历',\n      icon: DocumentIcon,\n      handler: () => router.push('/user?tab=resumes')\n    }, {\n      key: 'messages',\n      label: '消息',\n      icon: EnvelopeIcon,\n      handler: () => router.push('/user?tab=messages'),\n      badge: messageBadge\n    }, {\n      key: 'settings',\n      label: '设置',\n      icon: Cog6ToothIcon,\n      handler: () => router.push('/user?tab=account')\n    }];\n\n    // 添加消息角标计算属性\n    const messageBadge = computed(() => unreadMessagesCount.value);\n    const unreadMessagesCount = ref(0); // 你需要从store或API获取实际的未读消息数量\n\n    // 修改判断当前激活的导航项逻辑\n    const isActiveAction = key => {\n      if (key === 'more') return false;\n      if (key === 'profile') return route.path.includes('user') && route.query.tab === 'profile';\n      if (key === 'resumes') return route.path.includes('user') && route.query.tab === 'resumes';\n      if (key === 'messages') return route.path.includes('user') && route.query.tab === 'messages';\n      if (key === 'settings') return route.path.includes('user') && route.query.tab === 'account';\n      return false;\n    };\n\n    // 处理发布按钮点击\n    const handlePublish = () => {\n      const path = route.path;\n      if (path.includes('articles')) {\n        router.push('/community/articles/publish');\n      } else if (path.includes('questions')) {\n        router.push('/community/questions/publish');\n      } else {\n        router.push('/community/articles/publish');\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      isMobileMenuOpen,\n      mainTabs,\n      mobileActions,\n      messageBadge,\n      unreadMessagesCount,\n      isActiveAction,\n      handlePublish,\n      ref,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      HeadView,\n      FooterView,\n      get DocumentTextIcon() {\n        return DocumentTextIcon;\n      },\n      get QuestionMarkCircleIcon() {\n        return QuestionMarkCircleIcon;\n      },\n      get ScaleIcon() {\n        return ScaleIcon;\n      },\n      get HomeIcon() {\n        return HomeIcon;\n      },\n      get UserIcon() {\n        return UserIcon;\n      },\n      get Bars3Icon() {\n        return Bars3Icon;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get PlusIcon() {\n        return PlusIcon;\n      },\n      get DocumentIcon() {\n        return DocumentIcon;\n      },\n      get EnvelopeIcon() {\n        return EnvelopeIcon;\n      },\n      get Cog6ToothIcon() {\n        return Cog6ToothIcon;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useRoute","useRouter","HeadView","FooterView","DocumentTextIcon","QuestionMarkCircleIcon","ScaleIcon","HomeIcon","UserIcon","Bars3Icon","XMarkIcon","PlusIcon","DocumentIcon","EnvelopeIcon","Cog6ToothIcon","route","router","isMobileMenuOpen","mainTabs","name","path","icon","mobileActions","key","label","handler","value","push","badge","messageBadge","unreadMessagesCount","isActiveAction","includes","query","tab","handlePublish"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/community/CommunityView.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50 pb-16 md:pb-0\">\n    <HeadView />\n    <router-view></router-view>\n    <FooterView class=\"hidden md:block\" />\n\n    <!-- 移动端底部导航栏 -->\n    <div class=\"fixed bottom-0 left-0 right-0 bg-white border-t lg:hidden safe-area-inset-bottom z-50\">\n      <div class=\"grid grid-cols-5 gap-1\">\n        <button\n          v-for=\"action in mobileActions\"\n          :key=\"action.key\"\n          @click=\"action.handler\"\n          class=\"flex flex-col items-center py-2 px-1 relative\"\n          :class=\"[\n            isActiveAction(action.key)\n              ? 'text-blue-600'\n              : 'text-gray-500'\n          ]\"\n        >\n          <component \n            :is=\"action.icon\" \n            class=\"w-6 h-6\"\n            :class=\"isActiveAction(action.key) ? 'text-blue-600' : 'text-gray-500'\"\n          />\n          <span class=\"text-xs mt-1 truncate\">{{ action.label }}</span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 移动端更多菜单抽屉的遮罩层 -->\n    <div \n      v-if=\"isMobileMenuOpen\" \n      class=\"fixed inset-0 bg-black bg-opacity-25 z-[60] lg:hidden\"\n      @click=\"isMobileMenuOpen = false\"\n    />\n    \n    <!-- 移动端更多菜单抽屉 -->\n    <div \n      :class=\"[\n        'fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-[70] transform transition-transform duration-300 ease-in-out lg:hidden',\n        isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full'\n      ]\"\n    >\n      <div class=\"h-full flex flex-col\">\n        <div class=\"p-4 border-b border-gray-200\">\n          <div class=\"flex items-center justify-between\">\n            <h2 class=\"text-lg font-medium text-gray-900\">更多功能</h2>\n            <button \n              @click=\"isMobileMenuOpen = false\"\n              class=\"text-gray-500\"\n            >\n              <XMarkIcon class=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"flex-1 overflow-y-auto\">\n          <div class=\"px-3 py-4\">\n            <div class=\"space-y-1\">\n              <router-link\n                v-for=\"tab in mainTabs\"\n                :key=\"tab.path\"\n                :to=\"tab.path\"\n                class=\"group flex items-center w-full px-3 py-2 text-sm font-medium rounded-md\"\n                :class=\"[\n                  route.path === tab.path\n                    ? 'bg-blue-50 text-blue-600'\n                    : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\n                ]\"\n                @click=\"isMobileMenuOpen = false\"\n              >\n                <component\n                  :is=\"tab.icon\"\n                  class=\"mr-3 h-6 w-6\"\n                  :class=\"route.path === tab.path ? 'text-blue-600' : 'text-gray-400'\"\n                />\n                {{ tab.name }}\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 移动端浮动发布按钮 -->\n    <button \n      class=\"fixed right-4 bottom-20 md:hidden bg-blue-500 text-white rounded-full p-3 shadow-lg hover:bg-blue-600 transition-colors z-50\"\n      @click=\"handlePublish\"\n    >\n      <PlusIcon class=\"w-6 h-6\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport HeadView from '@/components/HeadView.vue'\nimport FooterView from '@/components/FooterView.vue'\nimport {\n  DocumentTextIcon,\n  QuestionMarkCircleIcon,\n  ScaleIcon,\n  HomeIcon,\n  UserIcon,\n  Bars3Icon,\n  XMarkIcon,\n  PlusIcon,\n  DocumentIcon,\n  EnvelopeIcon,\n  Cog6ToothIcon\n} from '@heroicons/vue/24/outline'\n\nconst route = useRoute()\nconst router = useRouter()\nconst isMobileMenuOpen = ref(false)\n\n// 主导航标签\nconst mainTabs = [\n  { \n    name: '文章', \n    path: '/community/articles', \n    icon: DocumentTextIcon \n  },\n  { \n    name: '问答', \n    path: '/community/questions', \n    icon: QuestionMarkCircleIcon \n  },\n  { \n    name: '话题', \n    path: '/community/topics', \n    icon: ScaleIcon \n  }\n]\n\n// 移动端底部导航按钮\nconst mobileActions = [\n  {\n    key: 'more',\n    label: '更多',\n    icon: Bars3Icon,\n    handler: () => { \n      isMobileMenuOpen.value = true \n    }\n  },\n  {\n    key: 'profile',\n    label: '档案',\n    icon: UserIcon,\n    handler: () => router.push('/user?tab=profile')\n  },\n  {\n    key: 'resumes',\n    label: '简历',\n    icon: DocumentIcon,\n    handler: () => router.push('/user?tab=resumes')\n  },\n  {\n    key: 'messages',\n    label: '消息',\n    icon: EnvelopeIcon,\n    handler: () => router.push('/user?tab=messages'),\n    badge: messageBadge\n  },\n  {\n    key: 'settings',\n    label: '设置',\n    icon: Cog6ToothIcon,\n    handler: () => router.push('/user?tab=account')\n  }\n]\n\n// 添加消息角标计算属性\nconst messageBadge = computed(() => unreadMessagesCount.value)\nconst unreadMessagesCount = ref(0) // 你需要从store或API获取实际的未读消息数量\n\n// 修改判断当前激活的导航项逻辑\nconst isActiveAction = (key) => {\n  if (key === 'more') return false\n  if (key === 'profile') return route.path.includes('user') && route.query.tab === 'profile'\n  if (key === 'resumes') return route.path.includes('user') && route.query.tab === 'resumes'\n  if (key === 'messages') return route.path.includes('user') && route.query.tab === 'messages'\n  if (key === 'settings') return route.path.includes('user') && route.query.tab === 'account'\n  return false\n}\n\n// 处理发布按钮点击\nconst handlePublish = () => {\n  const path = route.path\n  if (path.includes('articles')) {\n    router.push('/community/articles/publish')\n  } else if (path.includes('questions')) {\n    router.push('/community/questions/publish')\n  } else {\n    router.push('/community/articles/publish')\n  }\n}\n</script>\n\n<style scoped>\n.safe-area-inset-bottom {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n@supports (padding-bottom: env(safe-area-inset-bottom)) {\n  .pb-16 {\n    padding-bottom: calc(4rem + env(safe-area-inset-bottom));\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}