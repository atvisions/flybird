{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { showToast } from '@/components/ToastMessage';\nimport { useDeleteAccount } from '@/composables/useDeleteAccount';\nimport { useNickname } from '@/composables/useNickname';\nimport { usePhone } from '@/composables/usePhone';\nimport { useEmail } from '@/composables/useEmail';\nimport { useChangePassword } from '@/composables/useChangePassword';\nimport { ElMessageBox } from 'element-plus';\nexport default {\n  __name: 'AccountSettings',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    // 基础信息\n    const username = computed(() => store.state.userInfo?.data?.user?.username || '未设置');\n    const uid = computed(() => store.state.userInfo?.data?.user?.uid || '暂无');\n    const phone = computed(() => store.state.userInfo?.data?.user?.phone || '');\n    const email = computed(() => store.state.userInfo?.data?.user?.email || '');\n\n    // 使用 composables\n    const nickname = useNickname();\n    const phoneManager = usePhone();\n    const emailManager = useEmail();\n    const {\n      loading,\n      handleDeleteAccount\n    } = useDeleteAccount();\n    const password = useChangePassword();\n\n    // 工具方法\n    const maskPhone = phone => {\n      if (!phone) return '未绑定';\n      return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\n    };\n\n    // 弹窗状态\n    const showNicknameModal = ref(false);\n    const showPhoneModal = ref(false);\n    const showPasswordModal = ref(false);\n    const showDeleteConfirm = ref(false);\n\n    // 打开弹窗的方法\n    const openNicknameModal = () => {\n      nickname.value = store.state.userInfo?.username || '';\n      showNicknameModal.value = true;\n    };\n    const openPhoneModal = () => {\n      phoneManager.state.value = '';\n      phoneManager.state.code = '';\n      showPhoneModal.value = true;\n    };\n    const openPasswordModal = () => {\n      showPasswordModal.value = true;\n    };\n    const openDeleteConfirm = async () => {\n      showDeleteConfirm.value = true;\n    };\n\n    // 关闭弹窗的方法\n    const closeNicknameModal = () => {\n      showNicknameModal.value = false;\n      nickname.value = '';\n    };\n    const closePhoneModal = () => {\n      showPhoneModal.value = false;\n      phoneManager.state.value = '';\n      phoneManager.state.code = '';\n    };\n    const closePasswordModal = () => {\n      showPasswordModal.value = false;\n    };\n    const closeDeleteConfirm = () => {\n      showDeleteConfirm.value = false;\n      deleteForm.value.password = '';\n    };\n\n    // 处理成功回调\n    const handlePasswordSuccess = () => {\n      closePasswordModal();\n      showToast('密码修改成功', 'success');\n    };\n\n    // 处理昵称更新\n    const handleNicknameUpdate = async () => {\n      const success = await nickname.handleUpdate();\n      if (success) {\n        closeNicknameModal();\n      }\n    };\n\n    // 添加密码验证相关的状态和方法\n    const confirmPasswordError = ref('');\n    const validateNewPassword = () => {\n      // 使用 composable 中的验证方法\n      password.state.error = password.validatePassword(password.state.newPassword);\n      // 如果新密码变化，也要检查确认密码\n      if (password.state.confirmPassword) {\n        validateConfirmPassword();\n      }\n    };\n    const validateConfirmPassword = () => {\n      if (!password.state.confirmPassword) {\n        confirmPasswordError.value = '';\n      } else if (password.state.confirmPassword !== password.state.newPassword) {\n        confirmPasswordError.value = '两次输入的密码不一致';\n      } else {\n        confirmPasswordError.value = '';\n      }\n    };\n\n    // 修改密码更新方法\n    const handlePasswordUpdate = async () => {\n      // 先验证一次\n      validateNewPassword();\n      validateConfirmPassword();\n\n      // 如果有错误就不提交\n      if (password.state.error || confirmPasswordError.value) {\n        return;\n      }\n      const success = await password.handleUpdate();\n      if (success) {\n        closePasswordModal();\n        showToast('密码修改成功', 'success');\n      }\n    };\n\n    // 处理手机号更新\n    const handlePhoneUpdate = async () => {\n      const success = await phoneManager.handleUpdate();\n      if (success) {\n        closePhoneModal();\n      }\n    };\n\n    // 实时验证昵称\n    const validateNickname = () => {\n      nickname.state.error = nickname.validateNickname(nickname.state.value);\n    };\n\n    // 邮箱相关\n    const showEmailModal = ref(false);\n    const openEmailModal = () => {\n      emailManager.state.value = '';\n      emailManager.state.code = '';\n      showEmailModal.value = true;\n    };\n    const closeEmailModal = () => {\n      showEmailModal.value = false;\n      emailManager.state.value = '';\n      emailManager.state.code = '';\n      emailManager.state.password = '';\n    };\n    const handleEmailUpdate = async () => {\n      const success = await emailManager.handleUpdate();\n      if (success) {\n        closeEmailModal();\n      }\n    };\n\n    // 添加计算属性控制邮箱表单按钮状态\n    const isEmailFormValid = computed(() => {\n      // 检查邮箱格式\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      const isValidEmail = emailRegex.test(emailManager.state.value);\n\n      // 检查所有必填字段\n      return emailManager.state.value && emailManager.state.code && emailManager.state.password &&\n      // 密码必填\n      isValidEmail && !emailManager.state.loading;\n    });\n\n    // 添加防重复点击状态\n    const isRequestingCode = ref(false);\n\n    // 修改发送验证码的处理方法\n    const handleSendCode = async () => {\n      if (isRequestingCode.value) {\n        return;\n      }\n      if (!emailManager.state.value || !emailManager.state.password) {\n        ElMessage.error('请先输入邮箱地址和登录密码');\n        return;\n      }\n      try {\n        isRequestingCode.value = true;\n        // 传递邮箱和密码参数\n        await emailManager.handleSendCode({\n          email: emailManager.state.value,\n          password: emailManager.state.password\n        });\n      } catch (error) {\n        console.error('发送验证码失败:', error);\n        ElMessage.error(error.response?.data?.detail || '发送验证码失败');\n      } finally {\n        isRequestingCode.value = false;\n      }\n    };\n\n    // 修改按钮禁用状态\n    const isCodeButtonDisabled = computed(() => {\n      return emailManager.state.loading || emailManager.state.countdown > 0 || !emailManager.state.password || !emailManager.state.value || isRequestingCode.value;\n    });\n\n    // 密码强度相关\n    const strengthText = computed(() => {\n      const strength = password.state.strength;\n      if (strength === 0) return '弱';\n      if (strength <= 2) return '中';\n      if (strength <= 4) return '强';\n      return '非常强';\n    });\n    const strengthTextClass = computed(() => {\n      const strength = password.state.strength;\n      if (strength === 0) return 'text-red-500';\n      if (strength <= 2) return 'text-yellow-500';\n      if (strength <= 4) return 'text-green-500';\n      return 'text-green-600';\n    });\n    const strengthColorClass = computed(() => {\n      const strength = password.state.strength;\n      if (strength === 0) return 'bg-red-500';\n      if (strength <= 2) return 'bg-yellow-500';\n      if (strength <= 4) return 'bg-green-500';\n      return 'bg-green-600';\n    });\n    const handlePasswordInput = () => {\n      validateNewPassword();\n      password.updatePasswordStrength(password.state.newPassword);\n    };\n\n    // 添加表单数据\n    const deleteForm = ref({\n      password: ''\n    });\n\n    // 处理确认注销\n    const handleConfirmDelete = async () => {\n      if (!deleteForm.value.password) {\n        showToast('请输入密码', 'warning');\n        return;\n      }\n      try {\n        await handleDeleteAccount(deleteForm.value.password);\n      } catch (error) {\n        console.error('注销失败:', error);\n        showToast(error?.message || '注销失败', 'error');\n      }\n    };\n    const __returned__ = {\n      store,\n      router,\n      username,\n      uid,\n      phone,\n      email,\n      nickname,\n      phoneManager,\n      emailManager,\n      loading,\n      handleDeleteAccount,\n      password,\n      maskPhone,\n      showNicknameModal,\n      showPhoneModal,\n      showPasswordModal,\n      showDeleteConfirm,\n      openNicknameModal,\n      openPhoneModal,\n      openPasswordModal,\n      openDeleteConfirm,\n      closeNicknameModal,\n      closePhoneModal,\n      closePasswordModal,\n      closeDeleteConfirm,\n      handlePasswordSuccess,\n      handleNicknameUpdate,\n      confirmPasswordError,\n      validateNewPassword,\n      validateConfirmPassword,\n      handlePasswordUpdate,\n      handlePhoneUpdate,\n      validateNickname,\n      showEmailModal,\n      openEmailModal,\n      closeEmailModal,\n      handleEmailUpdate,\n      isEmailFormValid,\n      isRequestingCode,\n      handleSendCode,\n      isCodeButtonDisabled,\n      strengthText,\n      strengthTextClass,\n      strengthColorClass,\n      handlePasswordInput,\n      deleteForm,\n      handleConfirmDelete,\n      ref,\n      computed,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get showToast() {\n        return showToast;\n      },\n      get useDeleteAccount() {\n        return useDeleteAccount;\n      },\n      get useNickname() {\n        return useNickname;\n      },\n      get usePhone() {\n        return usePhone;\n      },\n      get useEmail() {\n        return useEmail;\n      },\n      get useChangePassword() {\n        return useChangePassword;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","useRouter","showToast","useDeleteAccount","useNickname","usePhone","useEmail","useChangePassword","ElMessageBox","store","router","username","state","userInfo","data","user","uid","phone","email","nickname","phoneManager","emailManager","loading","handleDeleteAccount","password","maskPhone","replace","showNicknameModal","showPhoneModal","showPasswordModal","showDeleteConfirm","openNicknameModal","value","openPhoneModal","code","openPasswordModal","openDeleteConfirm","closeNicknameModal","closePhoneModal","closePasswordModal","closeDeleteConfirm","deleteForm","handlePasswordSuccess","handleNicknameUpdate","success","handleUpdate","confirmPasswordError","validateNewPassword","error","validatePassword","newPassword","confirmPassword","validateConfirmPassword","handlePasswordUpdate","handlePhoneUpdate","validateNickname","showEmailModal","openEmailModal","closeEmailModal","handleEmailUpdate","isEmailFormValid","emailRegex","isValidEmail","test","isRequestingCode","handleSendCode","ElMessage","console","response","detail","isCodeButtonDisabled","countdown","strengthText","strength","strengthTextClass","strengthColorClass","handlePasswordInput","updatePasswordStrength","handleConfirmDelete","message"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/AccountSettings.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-4xl mx-auto\">\n    <div class=\"space-y-6\">\n      <!-- 账户信息 -->\n      <section class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"px-6 py-4 bg-gray-100 border-b border-gray-200\">\n          <h2 class=\"text-lg font-medium text-gray-900\">账户信息</h2>\n        </div>\n        \n        <div class=\"p-6 space-y-6\">\n          <!-- UID -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex items-center space-x-2\">\n              <span class=\"text-sm font-medium text-gray-500\">UID</span>\n              <span class=\"text-sm text-gray-900\">{{ uid }}</span>\n            </div>\n            <div class=\"text-xs text-gray-500\">用户唯一标识</div>\n          </div>\n\n          <!-- 昵称 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex items-center space-x-2\">\n              <span class=\"text-sm font-medium text-gray-500\">昵称</span>\n              <span class=\"text-sm text-gray-900\">{{ username }}</span>\n              <span class=\"text-xs text-gray-400\" v-if=\"!username\">\n                (默认为 Flybird + 手机号后4位)\n              </span>\n            </div>\n            <button \n              @click=\"openNicknameModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                  d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n              </svg>\n              设置\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- 账户安全 -->\n      <section class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"px-6 py-4 bg-gray-100 border-b border-gray-200\">\n          <h2 class=\"text-lg font-medium text-gray-900\">账户安全</h2>\n        </div>\n        \n        <div class=\"p-6 space-y-6\">\n          <!-- 邮箱 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">邮箱</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">{{ email || '未绑定' }}</p>\n            </div>\n            <button \n              @click=\"openEmailModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              {{ email ? '更换邮箱' : '绑定邮箱' }}\n            </button>\n          </div>\n\n          <!-- 手机号 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">手机号</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">{{ maskPhone(phone) }}</p>\n            </div>\n            <button \n              @click=\"openPhoneModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              更换手机号\n            </button>\n          </div>\n\n          <!-- 密码 -->\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">登录密码</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">用于保护账号安全</p>\n            </div>\n            <button \n              @click=\"openPasswordModal\"\n              class=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 border border-indigo-600 \n              hover:bg-indigo-50 transition-colors rounded-md\">\n              修改密码\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- 账户注销 -->\n      <section class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"px-6 py-4 bg-gray-100 border-b border-gray-200\">\n          <h2 class=\"text-lg font-medium text-gray-900\">账户注销</h2>\n        </div>\n        \n        <div class=\"p-6\">\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex-1\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                <span class=\"text-sm font-medium text-gray-900\">账户注销</span>\n              </div>\n              <p class=\"mt-1 text-sm text-gray-500\">注销后，账户将被永久删除且无法恢复</p>\n            </div>\n            <button \n              @click=\"openDeleteConfirm\"\n              :disabled=\"loading\"\n              class=\"text-red-600 hover:text-red-500\"\n            >\n              {{ loading ? '注销中...' : '注销账号' }}\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- Teleport 部分重写所有弹窗 -->\n      <Teleport to=\"body\">\n        <!-- 昵称设置弹窗 -->\n        <div v-if=\"showNicknameModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>修改昵称</h3>\n              <button class=\"close-btn\" @click=\"closeNicknameModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"text\"\n                  v-model=\"nickname.state.value\"\n                  placeholder=\"请输入新昵称\"\n                  :disabled=\"nickname.state.loading\"\n                  @input=\"validateNickname\"\n                  :class=\"{ 'error': nickname.state.error }\"\n                />\n                <!-- 错误提示 -->\n                <div v-if=\"nickname.state.error\" class=\"text-red-500 text-sm mt-1\">\n                  {{ nickname.state.error }}\n                </div>\n                <!-- 简单的提示文字 -->\n                <div class=\"text-gray-400 text-xs mt-1\">\n                  昵称长度4-8个字符，可使用中文、英文字母、数字\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closeNicknameModal\"\n                :disabled=\"nickname.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handleNicknameUpdate\"\n                :disabled=\"nickname.state.loading\"\n              >\n                {{ nickname.state.loading ? '更新中...' : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 手机号修改弹窗 -->\n        <div v-if=\"showPhoneModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>更换手机号</h3>\n              <button class=\"close-btn\" @click=\"closePhoneModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"text\" \n                  v-model=\"phoneManager.state.value\"\n                  placeholder=\"请输入新手机号\"\n                  :disabled=\"phoneManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <div class=\"code-input\">\n                  <input \n                    type=\"text\" \n                    v-model=\"phoneManager.state.code\"\n                    placeholder=\"请输入验证码\"\n                    :disabled=\"phoneManager.state.loading\"\n                  />\n                  <button \n                    @click=\"phoneManager.handleSendCode\"\n                    :disabled=\"phoneManager.state.loading || phoneManager.state.countdown > 0\"\n                    class=\"code-btn\"\n                  >\n                    {{ phoneManager.state.countdown > 0 ? `${phoneManager.state.countdown}s` : '获取验证码' }}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closePhoneModal\"\n                :disabled=\"phoneManager.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handlePhoneUpdate\"\n                :disabled=\"phoneManager.state.loading\"\n              >\n                {{ phoneManager.state.loading ? '更新中...' : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 密码修改弹窗 -->\n        <div v-if=\"showPasswordModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>修改密码</h3>\n              <button class=\"close-btn\" @click=\"closePasswordModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"password.state.oldPassword\"\n                  placeholder=\"请输入原密码\"\n                  :disabled=\"password.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"password.state.newPassword\"\n                  placeholder=\"请输入新密码\"\n                  :disabled=\"password.state.loading\"\n                  @input=\"handlePasswordInput\"\n                />\n                <div v-if=\"password.state.error\" class=\"text-sm text-red-500 mt-1\">\n                  {{ password.state.error }}\n                </div>\n                \n                <!-- 密码强度指示器 -->\n                <div class=\"mt-2\">\n                  <div class=\"flex items-center justify-between mb-1\">\n                    <span class=\"text-xs text-gray-500\">密码强度</span>\n                    <span class=\"text-xs\" :class=\"strengthTextClass\">{{ strengthText }}</span>\n                  </div>\n                  <div class=\"flex gap-1 h-1\">\n                    <div \n                      v-for=\"n in 4\" \n                      :key=\"n\"\n                      class=\"flex-1 rounded-full transition-colors duration-200\"\n                      :class=\"[\n                        n <= password.state.strength \n                          ? strengthColorClass \n                          : 'bg-gray-200'\n                      ]\"\n                    ></div>\n                  </div>\n                </div>\n                \n                <!-- 密码规则提示 -->\n                <div class=\"text-xs text-gray-400 mt-2 space-y-1\">\n                  <div>密码要求：</div>\n                  <div>• 长度在8-20个字符之间</div>\n                  <div>• 必须包含字母</div>\n                  <div>• 必须包含数字</div>\n                  <div>• 不能与当前密码相同</div>\n                  <div>建议包含（可选）：</div>\n                  <div>• 大小写字母</div>\n                  <div>• 特殊字符（!@#$%^&*）</div>\n                </div>\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"password.state.confirmPassword\"\n                  placeholder=\"请确认新密码\"\n                  :disabled=\"password.state.loading\"\n                  @input=\"validateConfirmPassword\"\n                />\n                <div v-if=\"confirmPasswordError\" class=\"text-sm text-red-500 mt-1\">\n                  {{ confirmPasswordError }}\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closePasswordModal\"\n                :disabled=\"password.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handlePasswordUpdate\"\n                :disabled=\"password.state.loading\"\n              >\n                {{ password.state.loading ? '更新中...' : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 账户注销确认弹窗 -->\n        <div v-if=\"showDeleteConfirm\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                </svg>\n                <h3 class=\"text-red-700\">账户注销确认</h3>\n              </div>\n              <button class=\"close-btn\" @click=\"closeDeleteConfirm\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"bg-red-50 p-4 rounded-md mb-4 border border-red-100\">\n                <div class=\"flex\">\n                  <div class=\"flex-shrink-0\">\n                    <svg class=\"h-5 w-5 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                        d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <div class=\"ml-3\">\n                    <h3 class=\"text-sm font-medium text-red-800\">\n                      请确认以下信息\n                    </h3>\n                    <div class=\"mt-2 text-sm text-red-700\">\n                      <ul class=\"list-disc pl-5 space-y-1\">\n                        <li>账户注销后将无法恢复</li>\n                        <li>所有个人数据将被永久删除</li>\n                        <li>相关服务和功能将立即停止</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"deleteForm.password\"\n                  placeholder=\"请输入登录密码确认\"\n                  :disabled=\"loading\"\n                  class=\"border-red-300 focus:border-red-500 focus:ring-red-500\"\n                />\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closeDeleteConfirm\"\n                :disabled=\"loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-danger\" \n                @click=\"handleConfirmDelete\"\n                :disabled=\"loading || !deleteForm.password\"\n              >\n                {{ loading ? '注销中...' : '确认注销' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 邮箱绑定弹窗 -->\n        <div v-if=\"showEmailModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h3>{{ email ? '更换邮箱' : '绑定邮箱' }}</h3>\n              <button class=\"close-btn\" @click=\"closeEmailModal\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <input \n                  type=\"email\" \n                  v-model=\"emailManager.state.value\"\n                  placeholder=\"请输入邮箱地址\"\n                  :disabled=\"emailManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <input \n                  type=\"password\" \n                  v-model=\"emailManager.state.password\"\n                  placeholder=\"请输入登录密码\"\n                  :disabled=\"emailManager.state.loading\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <div class=\"code-input\">\n                  <input \n                    type=\"text\" \n                    v-model=\"emailManager.state.code\"\n                    placeholder=\"请输入验证码\"\n                    :disabled=\"emailManager.state.loading\"\n                  />\n                  <button \n                    @click=\"handleSendCode\"\n                    :disabled=\"isCodeButtonDisabled\"\n                    class=\"code-btn\"\n                  >\n                    {{ emailManager.state.countdown > 0 \n                      ? `${emailManager.state.countdown}s` \n                      : (isRequestingCode ? '发送中...' : '获取验证码') \n                    }}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button \n                class=\"btn btn-default\" \n                @click=\"closeEmailModal\"\n                :disabled=\"emailManager.state.loading\"\n              >\n                取消\n              </button>\n              <button \n                class=\"btn btn-primary\" \n                @click=\"handleEmailUpdate\"\n                :disabled=\"!isEmailFormValid\"\n              >\n                {{ emailManager.state.loading ? (email ? '更换中...' : '绑定中...') : '确认' }}\n              </button>\n            </div>\n          </div>\n        </div>\n      </Teleport>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { showToast } from '@/components/ToastMessage'\nimport { useDeleteAccount } from '@/composables/useDeleteAccount'\nimport { useNickname } from '@/composables/useNickname'\nimport { usePhone } from '@/composables/usePhone'\nimport { useEmail } from '@/composables/useEmail'\nimport { useChangePassword } from '@/composables/useChangePassword'\nimport { ElMessageBox } from 'element-plus'\n\nconst store = useStore()\nconst router = useRouter()\n// 基础信息\nconst username = computed(() => store.state.userInfo?.data?.user?.username || '未设置')\nconst uid = computed(() => store.state.userInfo?.data?.user?.uid || '暂无')\nconst phone = computed(() => store.state.userInfo?.data?.user?.phone || '')\nconst email = computed(() => store.state.userInfo?.data?.user?.email || '')\n\n// 使用 composables\nconst nickname = useNickname()\nconst phoneManager = usePhone()\nconst emailManager = useEmail()\nconst { loading, handleDeleteAccount } = useDeleteAccount()\nconst password = useChangePassword()\n\n// 工具方法\nconst maskPhone = (phone) => {\n  if (!phone) return '未绑定'\n  return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n}\n\n// 弹窗状态\nconst showNicknameModal = ref(false)\nconst showPhoneModal = ref(false)\nconst showPasswordModal = ref(false)\nconst showDeleteConfirm = ref(false)\n\n// 打开弹窗的方法\nconst openNicknameModal = () => {\n  nickname.value = store.state.userInfo?.username || ''\n  showNicknameModal.value = true\n}\n\nconst openPhoneModal = () => {\n  phoneManager.state.value = ''\n  phoneManager.state.code = ''\n  showPhoneModal.value = true\n}\n\nconst openPasswordModal = () => {\n  showPasswordModal.value = true\n}\n\nconst openDeleteConfirm = async () => {\n  showDeleteConfirm.value = true\n}\n\n// 关闭弹窗的方法\nconst closeNicknameModal = () => {\n  showNicknameModal.value = false\n  nickname.value = ''\n}\n\nconst closePhoneModal = () => {\n  showPhoneModal.value = false\n  phoneManager.state.value = ''\n  phoneManager.state.code = ''\n}\n\nconst closePasswordModal = () => {\n  showPasswordModal.value = false\n}\n\nconst closeDeleteConfirm = () => {\n  showDeleteConfirm.value = false\n  deleteForm.value.password = ''\n}\n\n// 处理成功回调\nconst handlePasswordSuccess = () => {\n  closePasswordModal()\n  showToast('密码修改成功', 'success')\n}\n\n// 处理昵称更新\nconst handleNicknameUpdate = async () => {\n  const success = await nickname.handleUpdate()\n  if (success) {\n    closeNicknameModal()\n  }\n}\n\n// 添加密码验证相关的状态和方法\nconst confirmPasswordError = ref('')\n\nconst validateNewPassword = () => {\n  // 使用 composable 中的验证方法\n  password.state.error = password.validatePassword(password.state.newPassword)\n  // 如果新密码变化，也要检查确认密码\n  if (password.state.confirmPassword) {\n    validateConfirmPassword()\n  }\n}\n\nconst validateConfirmPassword = () => {\n  if (!password.state.confirmPassword) {\n    confirmPasswordError.value = ''\n  } else if (password.state.confirmPassword !== password.state.newPassword) {\n    confirmPasswordError.value = '两次输入的密码不一致'\n  } else {\n    confirmPasswordError.value = ''\n  }\n}\n\n// 修改密码更新方法\nconst handlePasswordUpdate = async () => {\n  // 先验证一次\n  validateNewPassword()\n  validateConfirmPassword()\n  \n  // 如果有错误就不提交\n  if (password.state.error || confirmPasswordError.value) {\n    return\n  }\n  \n  const success = await password.handleUpdate()\n  if (success) {\n    closePasswordModal()\n    showToast('密码修改成功', 'success')\n  }\n}\n\n// 处理手机号更新\nconst handlePhoneUpdate = async () => {\n  const success = await phoneManager.handleUpdate()\n  if (success) {\n    closePhoneModal()\n  }\n}\n\n// 实时验证昵称\nconst validateNickname = () => {\n  nickname.state.error = nickname.validateNickname(nickname.state.value)\n}\n\n// 邮箱相关\nconst showEmailModal = ref(false)\n\nconst openEmailModal = () => {\n  emailManager.state.value = ''\n  emailManager.state.code = ''\n  showEmailModal.value = true\n}\n\nconst closeEmailModal = () => {\n  showEmailModal.value = false\n  emailManager.state.value = ''\n  emailManager.state.code = ''\n  emailManager.state.password = ''\n}\n\nconst handleEmailUpdate = async () => {\n  const success = await emailManager.handleUpdate()\n  if (success) {\n    closeEmailModal()\n  }\n}\n\n// 添加计算属性控制邮箱表单按钮状态\nconst isEmailFormValid = computed(() => {\n  // 检查邮箱格式\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  const isValidEmail = emailRegex.test(emailManager.state.value)\n  \n  // 检查所有必填字段\n  return emailManager.state.value && \n         emailManager.state.code && \n         emailManager.state.password &&  // 密码必填\n         isValidEmail && \n         !emailManager.state.loading\n})\n\n// 添加防重复点击状态\nconst isRequestingCode = ref(false)\n\n// 修改发送验证码的处理方法\nconst handleSendCode = async () => {\n  if (isRequestingCode.value) {\n    return\n  }\n\n  if (!emailManager.state.value || !emailManager.state.password) {\n    ElMessage.error('请先输入邮箱地址和登录密码')\n    return\n  }\n\n  try {\n    isRequestingCode.value = true\n    // 传递邮箱和密码参数\n    await emailManager.handleSendCode({\n      email: emailManager.state.value,\n      password: emailManager.state.password\n    })\n  } catch (error) {\n    console.error('发送验证码失败:', error)\n    ElMessage.error(error.response?.data?.detail || '发送验证码失败')\n  } finally {\n    isRequestingCode.value = false\n  }\n}\n\n// 修改按钮禁用状态\nconst isCodeButtonDisabled = computed(() => {\n  return emailManager.state.loading || \n         emailManager.state.countdown > 0 || \n         !emailManager.state.password || \n         !emailManager.state.value ||\n         isRequestingCode.value\n})\n\n// 密码强度相关\nconst strengthText = computed(() => {\n  const strength = password.state.strength\n  if (strength === 0) return '弱'\n  if (strength <= 2) return '中'\n  if (strength <= 4) return '强'\n  return '非常强'\n})\n\nconst strengthTextClass = computed(() => {\n  const strength = password.state.strength\n  if (strength === 0) return 'text-red-500'\n  if (strength <= 2) return 'text-yellow-500'\n  if (strength <= 4) return 'text-green-500'\n  return 'text-green-600'\n})\n\nconst strengthColorClass = computed(() => {\n  const strength = password.state.strength\n  if (strength === 0) return 'bg-red-500'\n  if (strength <= 2) return 'bg-yellow-500'\n  if (strength <= 4) return 'bg-green-500'\n  return 'bg-green-600'\n})\n\nconst handlePasswordInput = () => {\n  validateNewPassword()\n  password.updatePasswordStrength(password.state.newPassword)\n}\n\n// 添加表单数据\nconst deleteForm = ref({\n  password: ''\n})\n\n// 处理确认注销\nconst handleConfirmDelete = async () => {\n  if (!deleteForm.value.password) {\n    showToast('请输入密码', 'warning')\n    return\n  }\n  \n  try {\n    await handleDeleteAccount(deleteForm.value.password)\n  } catch (error) {\n    console.error('注销失败:', error)\n    showToast(error?.message || '注销失败', 'error')\n  }\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 50;\n}\n\n.modal-content {\n  position: relative;\n  width: 91.666667%;\n  max-width: 28rem;\n  background-color: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n.modal-header {\n  padding: 1rem 1.5rem;\n  background-color: #f9fafb;\n  border-bottom: 1px solid #e5e7eb;\n  border-top-left-radius: 0.5rem;\n  border-top-right-radius: 0.5rem;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #111827;\n  font-size: 1.125rem;\n  font-weight: 500;\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.modal-footer {\n  padding: 1rem 1.5rem;\n  background-color: #f9fafb;\n  border-top: 1px solid #e5e7eb;\n  border-bottom-left-radius: 0.5rem;\n  border-bottom-right-radius: 0.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n}\n\n.form-group {\n  margin-bottom: 1rem;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  color: #111827;\n  background-color: white;\n  transition: border-color 0.15s ease-in-out;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #6366f1;\n  box-shadow: 0 0 0 1px #6366f1;\n}\n\n.form-group input:disabled {\n  background-color: #f3f4f6;\n  cursor: not-allowed;\n}\n\n.code-input {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.code-input input {\n  flex: 1;\n}\n\n.code-btn {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: white;\n  background-color: #6366f1;\n  border-radius: 0.375rem;\n  transition: background-color 0.15s ease-in-out;\n}\n\n.code-btn:not(:disabled):hover {\n  background-color: #4f46e5;\n}\n\n.code-btn:disabled {\n  background-color: #9ca3af;\n  cursor: not-allowed;\n}\n\n.btn {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  border-radius: 0.375rem;\n  transition: all 0.15s ease-in-out;\n}\n\n.btn-default {\n  color: #374151;\n  background-color: white;\n  border: 1px solid #d1d5db;\n}\n\n.btn-default:not(:disabled):hover {\n  background-color: #f9fafb;\n}\n\n.btn-primary {\n  color: white;\n  background-color: #6366f1;\n  border: 1px solid transparent;\n}\n\n.btn-primary:not(:disabled):hover {\n  background-color: #4f46e5;\n}\n\n.btn-danger {\n  color: white;\n  background-color: #ef4444;\n  border: 1px solid transparent;\n}\n\n.btn-danger:not(:disabled):hover {\n  background-color: #dc2626;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* 关闭按钮样式 */\n.close-btn {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  padding: 0.25rem;\n  color: #6b7280;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: color 0.15s ease-in-out;\n}\n\n.close-btn:hover {\n  color: #374151;\n}\n\n/* 注销弹窗特殊样式 */\n.bg-red-50 {\n  background-color: #fef2f2;\n}\n\n.border-red-100 {\n  border-color: #fee2e2;\n}\n\n.text-red-400 {\n  color: #f87171;\n}\n\n.text-red-600 {\n  color: #dc2626;\n}\n\n.text-red-700 {\n  color: #b91c1c;\n}\n\n.text-red-800 {\n  color: #991b1b;\n}\n\n/* 注销弹窗的输入框特殊样式 */\n.form-group input.border-red-300 {\n  border-color: #fca5a5;\n}\n\n.form-group input.focus\\:border-red-500:focus {\n  border-color: #ef4444;\n}\n\n.form-group input.focus\\:ring-red-500:focus {\n  box-shadow: 0 0 0 1px #ef4444;\n}\n\n.input-tips {\n  background-color: #f9fafb;\n  border-radius: 0.5rem;\n  padding: 0.75rem;\n  border: 1px solid #e5e7eb;\n}\n\n.input-tips ul li {\n  color: #6b7280;\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n\n.input-tips ul li span:first-child {\n  min-width: 1rem;\n  background-color: white;\n}\n\n.form-group input.error {\n  border-color: #ef4444;\n}\n\n.form-group input.error:focus {\n  border-color: #ef4444;\n  box-shadow: 0 0 0 1px #ef4444;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}