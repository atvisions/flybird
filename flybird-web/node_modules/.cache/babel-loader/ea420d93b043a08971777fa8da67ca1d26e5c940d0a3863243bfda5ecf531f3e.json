{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'ToolbarPanel',\n  props: {\n    modelValue: {\n      type: String,\n      default: 'layout'\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const activeTab = ref(props.modelValue);\n    const layoutComponents = ref([]);\n    const componentList = ref([]);\n\n    // 工具栏标签\n    const toolbarTabs = [{\n      text: '布局',\n      value: 'layout',\n      icon: 'mdi-view-dashboard'\n    }, {\n      text: '组件',\n      value: 'component',\n      icon: 'mdi-puzzle'\n    }, {\n      text: '文件',\n      value: 'file',\n      icon: 'mdi-file'\n    }];\n\n    // 监听标签变化\n    watch(activeTab, newValue => {\n      emit('update:modelValue', newValue);\n      if (newValue === 'layout') {\n        fetchLayoutComponents();\n      } else if (newValue === 'component') {\n        fetchComponents();\n      }\n    });\n\n    // 获取布局组件\n    const fetchLayoutComponents = async () => {\n      try {\n        const response = await axios.get('/api/v1/resume/component-categories/layout/components/');\n        layoutComponents.value = response.data;\n      } catch (error) {\n        console.error('获取布局组件失败:', error);\n      }\n    };\n\n    // 获取普通组件\n    const fetchComponents = async () => {\n      try {\n        const response = await axios.get('/api/v1/resume/component-categories/component/components/');\n        componentList.value = response.data;\n      } catch (error) {\n        console.error('获取组件失败:', error);\n      }\n    };\n\n    // 处理拖拽开始事件\n    const handleDragStart = (event, component) => {\n      event.dataTransfer.setData('application/json', JSON.stringify(component));\n    };\n    onMounted(() => {\n      if (activeTab.value === 'layout') {\n        fetchLayoutComponents();\n      }\n    });\n    const __returned__ = {\n      props,\n      emit,\n      activeTab,\n      layoutComponents,\n      componentList,\n      toolbarTabs,\n      fetchLayoutComponents,\n      fetchComponents,\n      handleDragStart,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","props","__props","emit","__emit","activeTab","modelValue","layoutComponents","componentList","toolbarTabs","text","value","icon","watch","newValue","fetchLayoutComponents","fetchComponents","response","get","data","error","console","handleDragStart","event","component","dataTransfer","setData","JSON","stringify"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/ToolbarPanel.vue"],"sourcesContent":["<template>\n  <div class=\"toolbar-panel\">\n    <!-- 垂直标签栏 -->\n    <div class=\"vertical-tabs\">\n      <div v-for=\"tab in toolbarTabs\" \n        :key=\"tab.value\"\n        class=\"tab-item\"\n        :class=\"{ active: activeTab === tab.value }\"\n        @click=\"activeTab = tab.value\">\n        <v-icon size=\"20\" class=\"mb-1\">{{ tab.icon }}</v-icon>\n        <span class=\"tab-text\">{{ tab.text }}</span>\n      </div>\n    </div>\n\n    <!-- 内容区域 -->\n    <div class=\"panel-content\">\n      <!-- 布局面板 -->\n      <div v-show=\"activeTab === 'layout'\" class=\"panel-section\">\n        <div class=\"component-blocks\">\n          <div v-for=\"component in layoutComponents\"\n            :key=\"component.id\"\n            class=\"component-block\"\n            draggable=\"true\"\n            @dragstart=\"handleDragStart($event, component)\">\n            <v-icon size=\"18\">{{ component.icon }}</v-icon>\n            <div class=\"block-title\">{{ component.name }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 组件面板 -->\n      <div v-show=\"activeTab === 'component'\" class=\"panel-section\">\n        <div class=\"component-blocks\">\n          <div v-for=\"component in componentList\"\n            :key=\"component.id\"\n            class=\"component-block\"\n            draggable=\"true\"\n            @dragstart=\"handleDragStart($event, component)\">\n            <v-icon size=\"18\">{{ component.icon }}</v-icon>\n            <div class=\"block-title\">{{ component.name }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 文件面板 -->\n      <div v-show=\"activeTab === 'file'\" class=\"panel-section\">\n        <div class=\"component-blocks\">\n          <!-- 文件相关组件 -->\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport axios from 'axios'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: 'layout'\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst activeTab = ref(props.modelValue)\nconst layoutComponents = ref([])\nconst componentList = ref([])\n\n// 工具栏标签\nconst toolbarTabs = [\n  { text: '布局', value: 'layout', icon: 'mdi-view-dashboard' },\n  { text: '组件', value: 'component', icon: 'mdi-puzzle' },\n  { text: '文件', value: 'file', icon: 'mdi-file' }\n]\n\n// 监听标签变化\nwatch(activeTab, (newValue) => {\n  emit('update:modelValue', newValue)\n  if (newValue === 'layout') {\n    fetchLayoutComponents()\n  } else if (newValue === 'component') {\n    fetchComponents()\n  }\n})\n\n// 获取布局组件\nconst fetchLayoutComponents = async () => {\n  try {\n    const response = await axios.get('/api/v1/resume/component-categories/layout/components/')\n    layoutComponents.value = response.data\n  } catch (error) {\n    console.error('获取布局组件失败:', error)\n  }\n}\n\n// 获取普通组件\nconst fetchComponents = async () => {\n  try {\n    const response = await axios.get('/api/v1/resume/component-categories/component/components/')\n    componentList.value = response.data\n  } catch (error) {\n    console.error('获取组件失败:', error)\n  }\n}\n\n// 处理拖拽开始事件\nconst handleDragStart = (event, component) => {\n  event.dataTransfer.setData('application/json', JSON.stringify(component))\n}\n\nonMounted(() => {\n  if (activeTab.value === 'layout') {\n    fetchLayoutComponents()\n  }\n})\n</script>\n\n<style scoped>\n.toolbar-panel {\n  height: 100%;\n  display: flex;\n}\n\n.vertical-tabs {\n  width: 48px;\n  background: #f5f7fa;\n  border-right: 1px solid #e4e7ed;\n  display: flex;\n  flex-direction: column;\n  padding: 8px 0;\n}\n\n.tab-item {\n  height: 48px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: #606266;\n  transition: all 0.3s;\n  writing-mode: vertical-rl;\n  padding: 8px;\n}\n\n.tab-item:hover {\n  color: #409eff;\n  background: #ecf5ff;\n}\n\n.tab-item.active {\n  color: #409eff;\n  background: #ecf5ff;\n}\n\n.panel-content {\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.panel-section {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n}\n\n.component-blocks {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.component-block {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: #f5f7fa;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  cursor: move;\n  transition: all 0.3s;\n}\n\n.component-block:hover {\n  background: #ecf5ff;\n  border-color: #409eff;\n}\n\n.block-title {\n  font-size: 14px;\n  color: #606266;\n}\n</style> "],"mappings":"AAuDA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;AACnC,OAAOC,KAAK,MAAM,OAAM;;;;;;;;;;;;;;;IAExB,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,SAAS,GAAGP,GAAG,CAACG,KAAK,CAACK,UAAU;IACtC,MAAMC,gBAAgB,GAAGT,GAAG,CAAC,EAAE;IAC/B,MAAMU,aAAa,GAAGV,GAAG,CAAC,EAAE;;IAE5B;IACA,MAAMW,WAAW,GAAG,CAClB;MAAEC,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAqB,CAAC,EAC3D;MAAEF,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,WAAW;MAAEC,IAAI,EAAE;IAAa,CAAC,EACtD;MAAEF,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,MAAM;MAAEC,IAAI,EAAE;IAAW,EAChD;;IAEA;IACAC,KAAK,CAACR,SAAS,EAAGS,QAAQ,IAAK;MAC7BX,IAAI,CAAC,mBAAmB,EAAEW,QAAQ;MAClC,IAAIA,QAAQ,KAAK,QAAQ,EAAE;QACzBC,qBAAqB,CAAC;MACxB,CAAC,MAAM,IAAID,QAAQ,KAAK,WAAW,EAAE;QACnCE,eAAe,CAAC;MAClB;IACF,CAAC;;IAED;IACA,MAAMD,qBAAqB,GAAG,MAAAA,CAAA,KAAY;MACxC,IAAI;QACF,MAAME,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,wDAAwD;QACzFX,gBAAgB,CAACI,KAAK,GAAGM,QAAQ,CAACE,IAAG;MACvC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK;MAClC;IACF;;IAEA;IACA,MAAMJ,eAAe,GAAG,MAAAA,CAAA,KAAY;MAClC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,2DAA2D;QAC5FV,aAAa,CAACG,KAAK,GAAGM,QAAQ,CAACE,IAAG;MACpC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;MAChC;IACF;;IAEA;IACA,MAAME,eAAe,GAAGA,CAACC,KAAK,EAAEC,SAAS,KAAK;MAC5CD,KAAK,CAACE,YAAY,CAACC,OAAO,CAAC,kBAAkB,EAAEC,IAAI,CAACC,SAAS,CAACJ,SAAS,CAAC;IAC1E;IAEAzB,SAAS,CAAC,MAAM;MACd,IAAIM,SAAS,CAACM,KAAK,KAAK,QAAQ,EAAE;QAChCI,qBAAqB,CAAC;MACxB;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}