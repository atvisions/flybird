{"ast":null,"code":"import { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { showToast } from '@/components/ToastMessage';\nimport { useDeleteAccount } from '@/composables/useDeleteAccount';\nimport { usePhone } from '@/composables/usePhone';\nimport { useEmail } from '@/composables/useEmail';\nimport { useChangePassword } from '@/composables/useChangePassword';\nimport { ElMessageBox } from 'element-plus';\nimport { account } from '@/api/account';\nimport { useAuthStore } from '@/stores/auth';\nimport { useUserStore } from '@/stores/user';\nexport default {\n  __name: 'AccountSettings',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const userStore = useUserStore();\n\n    // 修改手机号表单验证\n    const isPhoneFormValid = computed(() => {\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      const isValidPhone = phoneRegex.test(phoneManager.state.value);\n      const isValidCode = phoneManager.state.code?.length === 6;\n\n      // 添加调试日志\n      console.log('Phone validation:', {\n        phone: phoneManager.state.value,\n        code: phoneManager.state.code,\n        isValidPhone,\n        isValidCode,\n        loading: phoneManager.state.loading,\n        finalResult: isValidPhone && isValidCode\n      });\n\n      // 修改验证逻辑，参考邮箱验证的写法\n      const isValid = phoneManager.state.value && phoneManager.state.code && isValidPhone && isValidCode;\n      return isValid; // 移除 loading 状态检查\n    });\n\n    // ... 其他脚本内容 ...\n\n    const __returned__ = {\n      router,\n      authStore,\n      userStore,\n      isPhoneFormValid,\n      ref,\n      computed,\n      onMounted,\n      onUnmounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get showToast() {\n        return showToast;\n      },\n      get useDeleteAccount() {\n        return useDeleteAccount;\n      },\n      get usePhone() {\n        return usePhone;\n      },\n      get useEmail() {\n        return useEmail;\n      },\n      get useChangePassword() {\n        return useChangePassword;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get account() {\n        return account;\n      },\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      get useUserStore() {\n        return useUserStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","useRouter","showToast","useDeleteAccount","usePhone","useEmail","useChangePassword","ElMessageBox","account","useAuthStore","useUserStore","router","authStore","userStore","isPhoneFormValid","phoneRegex","isValidPhone","test","phoneManager","state","value","isValidCode","code","length","console","log","phone","loading","finalResult","isValid"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/AccountSettings.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-4xl mx-auto\">\n    <div class=\"space-y-6\">\n      <!-- 账户安全 -->\n      <!-- ... 其他模板内容 ... -->\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showToast } from '@/components/ToastMessage'\nimport { useDeleteAccount } from '@/composables/useDeleteAccount'\nimport { usePhone } from '@/composables/usePhone'\nimport { useEmail } from '@/composables/useEmail'\nimport { useChangePassword } from '@/composables/useChangePassword'\nimport { ElMessageBox } from 'element-plus'\nimport { account } from '@/api/account'\nimport { useAuthStore } from '@/stores/auth'\nimport { useUserStore } from '@/stores/user'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst userStore = useUserStore()\n\n// 修改手机号表单验证\nconst isPhoneFormValid = computed(() => {\n  const phoneRegex = /^1[3-9]\\d{9}$/\n  const isValidPhone = phoneRegex.test(phoneManager.state.value)\n  const isValidCode = phoneManager.state.code?.length === 6\n\n  // 添加调试日志\n  console.log('Phone validation:', {\n    phone: phoneManager.state.value,\n    code: phoneManager.state.code,\n    isValidPhone,\n    isValidCode,\n    loading: phoneManager.state.loading,\n    finalResult: isValidPhone && isValidCode\n  })\n\n  // 修改验证逻辑，参考邮箱验证的写法\n  const isValid = phoneManager.state.value && \n         phoneManager.state.code && \n         isValidPhone && \n         isValidCode\n\n  return isValid  // 移除 loading 状态检查\n})\n\n// ... 其他脚本内容 ...\n\n</script>\n\n<style scoped>\n/* ... 样式内容 ... */\n</style>"],"mappings":"AAUA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAI;AAC1D,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,SAAS,QAAQ,2BAA0B;AACpD,SAASC,gBAAgB,QAAQ,gCAA+B;AAChE,SAASC,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,iBAAiB,QAAQ,iCAAgC;AAClE,SAASC,YAAY,QAAQ,cAAa;AAC1C,SAASC,OAAO,QAAQ,eAAc;AACtC,SAASC,YAAY,QAAQ,eAAc;AAC3C,SAASC,YAAY,QAAQ,eAAc;;;;;;;IAE3C,MAAMC,MAAM,GAAGV,SAAS,CAAC;IACzB,MAAMW,SAAS,GAAGH,YAAY,CAAC;IAC/B,MAAMI,SAAS,GAAGH,YAAY,CAAC;;IAE/B;IACA,MAAMI,gBAAgB,GAAGhB,QAAQ,CAAC,MAAM;MACtC,MAAMiB,UAAU,GAAG,eAAc;MACjC,MAAMC,YAAY,GAAGD,UAAU,CAACE,IAAI,CAACC,YAAY,CAACC,KAAK,CAACC,KAAK;MAC7D,MAAMC,WAAW,GAAGH,YAAY,CAACC,KAAK,CAACG,IAAI,EAAEC,MAAM,KAAK;;MAExD;MACAC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;QAC/BC,KAAK,EAAER,YAAY,CAACC,KAAK,CAACC,KAAK;QAC/BE,IAAI,EAAEJ,YAAY,CAACC,KAAK,CAACG,IAAI;QAC7BN,YAAY;QACZK,WAAW;QACXM,OAAO,EAAET,YAAY,CAACC,KAAK,CAACQ,OAAO;QACnCC,WAAW,EAAEZ,YAAY,IAAIK;MAC/B,CAAC;;MAED;MACA,MAAMQ,OAAO,GAAGX,YAAY,CAACC,KAAK,CAACC,KAAK,IACjCF,YAAY,CAACC,KAAK,CAACG,IAAI,IACvBN,YAAY,IACZK,WAAU;MAEjB,OAAOQ,OAAO,EAAE;IAClB,CAAC;;IAED","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}