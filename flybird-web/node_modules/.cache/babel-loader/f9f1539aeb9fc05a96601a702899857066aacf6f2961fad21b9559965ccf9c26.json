{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport { ref, watch } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'ToolbarPanel',\n  props: {\n    activeTab: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['update:activeTab'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // 组件分类和组件列表\n    const categories = ref([]);\n    const currentCategory = ref(null);\n    const components = ref([]);\n    const loading = ref(false);\n\n    // 布局组件数据\n    const layoutComponents = ref([]);\n    const layoutLoading = ref(false);\n\n    // 获取布局组件\n    const fetchLayoutComponents = async () => {\n      layoutLoading.value = true;\n      try {\n        // 先获取布局分类\n        const categoryRes = await axios.get('/api/v1/resume/component-categories/main_categories/');\n        const layoutCategory = categoryRes.data.find(cat => cat.code === 'layout');\n        if (layoutCategory) {\n          // 获取布局分类下的组件\n          const componentsRes = await axios.get(`/api/v1/resume/component-categories/${layoutCategory.id}/components/`);\n          layoutComponents.value = componentsRes.data;\n        }\n      } catch (error) {\n        console.error('获取布局组件失败:', error);\n      } finally {\n        layoutLoading.value = false;\n      }\n    };\n\n    // 获取组件分类\n    const fetchCategories = async () => {\n      try {\n        const response = await axios.get('/api/v1/resume/component-categories/');\n        categories.value = response.data;\n        if (categories.value.length > 0) {\n          currentCategory.value = categories.value[0].id;\n          fetchComponents(currentCategory.value);\n        }\n      } catch (error) {\n        console.error('获取组件分类失败:', error);\n      }\n    };\n\n    // 获取组件列表\n    const fetchComponents = async categoryId => {\n      if (!categoryId) return;\n      loading.value = true;\n      try {\n        const response = await axios.get(`/api/v1/resume/component-categories/${categoryId}/components/`);\n        components.value = response.data;\n      } catch (error) {\n        console.error('获取组件列表失败:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 监听分类变化\n    watch(currentCategory, newCategoryId => {\n      if (newCategoryId) {\n        fetchComponents(newCategoryId);\n      }\n    });\n\n    // 拖拽开始\n    const handleDragStart = (event, layout) => {\n      event.dataTransfer.effectAllowed = 'move';\n      event.dataTransfer.setData('application/json', JSON.stringify(layout));\n    };\n\n    // 初始化数据\n    fetchLayoutComponents();\n    fetchCategories();\n    const __returned__ = {\n      props,\n      emit,\n      categories,\n      currentCategory,\n      components,\n      loading,\n      layoutComponents,\n      layoutLoading,\n      fetchLayoutComponents,\n      fetchCategories,\n      fetchComponents,\n      handleDragStart,\n      ref,\n      watch,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","axios","props","__props","emit","__emit","categories","currentCategory","components","loading","layoutComponents","layoutLoading","fetchLayoutComponents","value","categoryRes","get","layoutCategory","data","find","cat","code","componentsRes","id","error","console","fetchCategories","response","length","fetchComponents","categoryId","newCategoryId","handleDragStart","event","layout","dataTransfer","effectAllowed","setData","JSON","stringify"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/ToolbarPanel.vue"],"sourcesContent":["<template>\n  <v-card class=\"h-100 d-flex flex-column toolbar-content\">\n    <v-window :model-value=\"activeTab\" @update:model-value=\"$emit('update:activeTab', $event)\">\n      <!-- 布局面板 -->\n      <v-window-item value=\"layout\">\n        <v-card-title class=\"text-body-1 py-2\">布局</v-card-title>\n        <v-divider></v-divider>\n        <v-card-text class=\"flex-grow-1 overflow-y-auto pa-2\">\n          <div class=\"layout-tip\">拖动以下布局到画布中开始设计简历</div>\n          <div class=\"layout-blocks\">\n            <v-progress-linear\n              v-if=\"layoutLoading\"\n              indeterminate\n              color=\"primary\"\n            ></v-progress-linear>\n            <div class=\"layout-block\" \n              v-for=\"layout in layoutComponents\" \n              :key=\"layout.id\"\n              draggable=\"true\"\n              @dragstart=\"handleDragStart($event, layout)\">\n              <div class=\"block-icon\">\n                <v-icon size=\"24\">{{ layout.icon }}</v-icon>\n              </div>\n              <div class=\"block-content\">\n                <div class=\"block-title\">{{ layout.name }}</div>\n                <div class=\"block-desc\">{{ layout.description }}</div>\n              </div>\n              <v-icon size=\"18\" color=\"rgba(0,0,0,0.4)\" class=\"block-arrow\">mdi-chevron-right</v-icon>\n            </div>\n          </div>\n        </v-card-text>\n      </v-window-item>\n\n      <!-- 组件面板 -->\n      <v-window-item value=\"components\">\n        <v-card-title class=\"text-body-1 py-2\">组件</v-card-title>\n        <v-divider></v-divider>\n        <v-card-text class=\"flex-grow-1 overflow-hidden pa-0\">\n          <div class=\"component-container\">\n            <!-- 左侧分类导航 -->\n            <div class=\"component-nav\">\n              <div class=\"component-nav-item\" \n                v-for=\"category in categories\" \n                :key=\"category.id\"\n                :class=\"{ active: currentCategory === category.id }\"\n                @click=\"currentCategory = category.id\">\n                <v-icon size=\"20\" class=\"mb-1\">{{ category.icon }}</v-icon>\n                <div class=\"nav-text\">{{ category.name }}</div>\n              </div>\n            </div>\n\n            <!-- 右侧组件列表 -->\n            <div class=\"component-list\">\n              <div class=\"component-tip px-4 pt-2\">拖动组件到画布中编辑简历内容</div>\n              <div class=\"component-scroll\">\n                <v-progress-linear\n                  v-if=\"loading\"\n                  indeterminate\n                  color=\"primary\"\n                ></v-progress-linear>\n                <div class=\"component-blocks px-4\">\n                  <div class=\"component-block\" \n                    v-for=\"component in components\" \n                    :key=\"component.id\">\n                    <div class=\"block-icon\">\n                      <v-icon size=\"18\">{{ component.icon }}</v-icon>\n                    </div>\n                    <div class=\"block-content\">\n                      <div class=\"block-title\">{{ component.name }}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </v-card-text>\n      </v-window-item>\n\n      <!-- 档案面板 -->\n      <v-window-item value=\"files\">\n        <v-card-title class=\"text-body-1 py-2\">档案</v-card-title>\n        <v-divider></v-divider>\n        <v-card-text class=\"flex-grow-1 overflow-y-auto pa-2\">\n          <v-list density=\"compact\">\n            <v-list-item>\n              <v-list-item-title>我的模板</v-list-item-title>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-title>历史版本</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-card-text>\n      </v-window-item>\n    </v-window>\n  </v-card>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport axios from 'axios'\n\nconst props = defineProps({\n  activeTab: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:activeTab'])\n\n// 组件分类和组件列表\nconst categories = ref([])\nconst currentCategory = ref(null)\nconst components = ref([])\nconst loading = ref(false)\n\n// 布局组件数据\nconst layoutComponents = ref([])\nconst layoutLoading = ref(false)\n\n// 获取布局组件\nconst fetchLayoutComponents = async () => {\n  layoutLoading.value = true\n  try {\n    // 先获取布局分类\n    const categoryRes = await axios.get('/api/v1/resume/component-categories/main_categories/')\n    const layoutCategory = categoryRes.data.find(cat => cat.code === 'layout')\n    \n    if (layoutCategory) {\n      // 获取布局分类下的组件\n      const componentsRes = await axios.get(`/api/v1/resume/component-categories/${layoutCategory.id}/components/`)\n      layoutComponents.value = componentsRes.data\n    }\n  } catch (error) {\n    console.error('获取布局组件失败:', error)\n  } finally {\n    layoutLoading.value = false\n  }\n}\n\n// 获取组件分类\nconst fetchCategories = async () => {\n  try {\n    const response = await axios.get('/api/v1/resume/component-categories/')\n    categories.value = response.data\n    if (categories.value.length > 0) {\n      currentCategory.value = categories.value[0].id\n      fetchComponents(currentCategory.value)\n    }\n  } catch (error) {\n    console.error('获取组件分类失败:', error)\n  }\n}\n\n// 获取组件列表\nconst fetchComponents = async (categoryId) => {\n  if (!categoryId) return\n  loading.value = true\n  try {\n    const response = await axios.get(`/api/v1/resume/component-categories/${categoryId}/components/`)\n    components.value = response.data\n  } catch (error) {\n    console.error('获取组件列表失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 监听分类变化\nwatch(currentCategory, (newCategoryId) => {\n  if (newCategoryId) {\n    fetchComponents(newCategoryId)\n  }\n})\n\n// 拖拽开始\nconst handleDragStart = (event, layout) => {\n  event.dataTransfer.effectAllowed = 'move'\n  event.dataTransfer.setData('application/json', JSON.stringify(layout))\n}\n\n// 初始化数据\nfetchLayoutComponents()\nfetchCategories()\n</script>\n\n<style scoped>\n.toolbar-content {\n  width: 260px;\n  border-top-right-radius: 0 !important;\n  border-bottom-right-radius: 0 !important;\n  height: 100%;\n}\n\n:deep(.v-window) {\n  height: 100%;\n}\n\n:deep(.v-window__container) {\n  height: 100%;\n}\n\n:deep(.v-window-item) {\n  height: 100%;\n}\n\n:deep(.v-window-item.v-window-item--active) {\n  display: flex;\n  flex-direction: column;\n}\n\n.layout-blocks {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 4px;\n}\n\n.layout-block {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.04);\n  border-radius: 6px;\n  cursor: move;\n  transition: all 0.2s;\n  gap: 12px;\n}\n\n.layout-block:hover {\n  background: rgba(24, 103, 192, 0.08);\n}\n\n.block-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  background: white;\n  border-radius: 6px;\n  color: #1867C0;\n  flex-shrink: 0;\n}\n\n.block-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.block-title {\n  font-size: 14px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.87);\n  margin-bottom: 2px;\n}\n\n.block-desc {\n  font-size: 11px;\n  color: rgba(0, 0, 0, 0.6);\n  line-height: 1.2;\n}\n\n.block-arrow {\n  flex-shrink: 0;\n}\n\n.layout-tip {\n  font-size: 13px;\n  color: rgba(0, 0, 0, 0.6);\n  margin-bottom: 12px;\n  padding: 0 4px;\n}\n\n.component-container {\n  display: flex;\n  height: 100%;\n}\n\n.component-nav {\n  width: 80px;\n  height: 100%;\n  border-right: 1px solid rgba(0, 0, 0, 0.12);\n}\n\n.component-nav-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 0;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.04);\n  }\n\n  &.active {\n    background-color: var(--v-primary-base);\n    color: white;\n  }\n\n  .nav-text {\n    font-size: 12px;\n    margin-top: 4px;\n    text-align: center;\n  }\n}\n\n.component-list {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n}\n\n.component-scroll {\n  flex: 1;\n  overflow-y: auto;\n}\n\n.component-blocks {\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.component-block {\n  display: flex;\n  align-items: center;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  cursor: move;\n  transition: all 0.3s;\n  gap: 8px;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.04);\n  }\n\n  .block-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.04);\n  }\n\n  .block-content {\n    flex: 1;\n    min-width: 0;\n  }\n\n  .block-title {\n    font-size: 14px;\n    font-weight: 500;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n\n.component-tip {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.6);\n  padding: 8px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}