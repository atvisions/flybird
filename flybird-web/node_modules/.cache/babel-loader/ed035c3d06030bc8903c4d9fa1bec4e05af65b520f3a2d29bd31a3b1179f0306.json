{"ast":null,"code":"import request from '@/utils/request';\nexport const user = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/');\n  },\n  // 更新用户信息\n  updateUserInfo: data => {\n    const formData = new FormData();\n    if (data.avatar) formData.append('avatar', data.avatar);\n    if (data.background_image) formData.append('background_image', data.background_image);\n    if (data.position) formData.append('position', data.position);\n    if (data.bio) formData.append('bio', data.bio);\n    if (data.username) formData.append('username', data.username);\n    return request.put('/api/v1/users/userInfo/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 更新用户名\n  updateUsername: data => {\n    return request.post('/api/v1/users/account/username/', {\n      username: data.username\n    });\n  },\n  // 更换手机号\n  changePhone: data => {\n    return request.post('/api/v1/users/account/phone/', {\n      phone: data.phone,\n      code: data.code\n    });\n  },\n  // 修改密码\n  updatePassword: data => {\n    return request.post('/api/v1/users/account/password/', {\n      old_password: data.old_password,\n      new_password: data.new_password,\n      confirm_password: data.confirm_password\n    });\n  },\n  // 上传头像\n  uploadAvatar: file => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    return request.post('/api/v1/users/profile/avatar/upload/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  // 上传背景图\n  uploadBackground: file => {\n    const formData = new FormData();\n    formData.append('background', file);\n    return request.post('/api/v1/users/profile/background/upload/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n};\nexport const updateNickname = nickname => {\n  return user.updateUsername({\n    username: nickname\n  });\n};\nexport default user;","map":{"version":3,"names":["request","user","getUserInfo","get","updateUserInfo","data","formData","FormData","avatar","append","background_image","position","bio","username","put","headers","updateUsername","post","changePhone","phone","code","updatePassword","old_password","new_password","confirm_password","uploadAvatar","file","uploadBackground","updateNickname","nickname"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/api/user.js"],"sourcesContent":["import request from '@/utils/request'\n\nexport const user = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/')\n  },\n\n  // 更新用户信息\n  updateUserInfo: (data) => {\n    const formData = new FormData()\n    if (data.avatar) formData.append('avatar', data.avatar)\n    if (data.background_image) formData.append('background_image', data.background_image)\n    if (data.position) formData.append('position', data.position)\n    if (data.bio) formData.append('bio', data.bio)\n    if (data.username) formData.append('username', data.username)\n    return request.put('/api/v1/users/userInfo/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n\n  // 更新用户名\n  updateUsername: (data) => {\n    return request.post('/api/v1/users/account/username/', {\n      username: data.username\n    })\n  },\n\n  // 更换手机号\n  changePhone: (data) => {\n    return request.post('/api/v1/users/account/phone/', {\n      phone: data.phone,\n      code: data.code\n    })\n  },\n\n  // 修改密码\n  updatePassword: (data) => {\n    return request.post('/api/v1/users/account/password/', {\n      old_password: data.old_password,\n      new_password: data.new_password,\n      confirm_password: data.confirm_password\n    })\n  },\n\n  // 上传头像\n  uploadAvatar: (file) => {\n    const formData = new FormData()\n    formData.append('avatar', file)\n    return request.post('/api/v1/users/profile/avatar/upload/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n\n  // 上传背景图\n  uploadBackground: (file) => {\n    const formData = new FormData()\n    formData.append('background', file)\n    return request.post('/api/v1/users/profile/background/upload/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n}\n\nexport const updateNickname = (nickname) => {\n  return user.updateUsername({ username: nickname })\n}\n\nexport default user"],"mappings":"AAAA,OAAOA,OAAO,MAAM,iBAAiB;AAErC,OAAO,MAAMC,IAAI,GAAG;EAClB;EACAC,WAAW,EAAEA,CAAA,KAAM;IACjB,OAAOF,OAAO,CAACG,GAAG,CAAC,yBAAyB,CAAC;EAC/C,CAAC;EAED;EACAC,cAAc,EAAGC,IAAI,IAAK;IACxB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/B,IAAIF,IAAI,CAACG,MAAM,EAAEF,QAAQ,CAACG,MAAM,CAAC,QAAQ,EAAEJ,IAAI,CAACG,MAAM,CAAC;IACvD,IAAIH,IAAI,CAACK,gBAAgB,EAAEJ,QAAQ,CAACG,MAAM,CAAC,kBAAkB,EAAEJ,IAAI,CAACK,gBAAgB,CAAC;IACrF,IAAIL,IAAI,CAACM,QAAQ,EAAEL,QAAQ,CAACG,MAAM,CAAC,UAAU,EAAEJ,IAAI,CAACM,QAAQ,CAAC;IAC7D,IAAIN,IAAI,CAACO,GAAG,EAAEN,QAAQ,CAACG,MAAM,CAAC,KAAK,EAAEJ,IAAI,CAACO,GAAG,CAAC;IAC9C,IAAIP,IAAI,CAACQ,QAAQ,EAAEP,QAAQ,CAACG,MAAM,CAAC,UAAU,EAAEJ,IAAI,CAACQ,QAAQ,CAAC;IAC7D,OAAOb,OAAO,CAACc,GAAG,CAAC,yBAAyB,EAAER,QAAQ,EAAE;MACtDS,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,cAAc,EAAGX,IAAI,IAAK;IACxB,OAAOL,OAAO,CAACiB,IAAI,CAAC,iCAAiC,EAAE;MACrDJ,QAAQ,EAAER,IAAI,CAACQ;IACjB,CAAC,CAAC;EACJ,CAAC;EAED;EACAK,WAAW,EAAGb,IAAI,IAAK;IACrB,OAAOL,OAAO,CAACiB,IAAI,CAAC,8BAA8B,EAAE;MAClDE,KAAK,EAAEd,IAAI,CAACc,KAAK;MACjBC,IAAI,EAAEf,IAAI,CAACe;IACb,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,cAAc,EAAGhB,IAAI,IAAK;IACxB,OAAOL,OAAO,CAACiB,IAAI,CAAC,iCAAiC,EAAE;MACrDK,YAAY,EAAEjB,IAAI,CAACiB,YAAY;MAC/BC,YAAY,EAAElB,IAAI,CAACkB,YAAY;MAC/BC,gBAAgB,EAAEnB,IAAI,CAACmB;IACzB,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,YAAY,EAAGC,IAAI,IAAK;IACtB,MAAMpB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACG,MAAM,CAAC,QAAQ,EAAEiB,IAAI,CAAC;IAC/B,OAAO1B,OAAO,CAACiB,IAAI,CAAC,sCAAsC,EAAEX,QAAQ,EAAE;MACpES,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAY,gBAAgB,EAAGD,IAAI,IAAK;IAC1B,MAAMpB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACG,MAAM,CAAC,YAAY,EAAEiB,IAAI,CAAC;IACnC,OAAO1B,OAAO,CAACiB,IAAI,CAAC,0CAA0C,EAAEX,QAAQ,EAAE;MACxES,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMa,cAAc,GAAIC,QAAQ,IAAK;EAC1C,OAAO5B,IAAI,CAACe,cAAc,CAAC;IAAEH,QAAQ,EAAEgB;EAAS,CAAC,CAAC;AACpD,CAAC;AAED,eAAe5B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}