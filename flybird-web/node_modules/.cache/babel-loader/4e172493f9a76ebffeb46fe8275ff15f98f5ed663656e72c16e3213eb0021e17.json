{"ast":null,"code":"import { useCssVars as _useCssVars, unref as _unref } from 'vue';\nimport { ref, computed } from 'vue';\nimport draggable from 'vuedraggable';\nimport SingleLayout from '../layouts/SingleLayout.vue';\nimport DoubleLayout from '../layouts/DoubleLayout.vue';\nimport TripleLayout from '../layouts/TripleLayout.vue';\nexport default {\n  __name: 'Canvas',\n  props: {\n    scale: {\n      type: Number,\n      default: 1\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    _useCssVars(_ctx => ({\n      \"6e1f5d36-scale\\ \\>\\=\\ 1\\ \\?\\ \\'40px\\'\\ \\:\\ 0\": __props.scale >= 1 ? '40px' : 0,\n      \"6e1f5d36-scale\\ \\<\\ 1\\ \\?\\ \\'100\\%\\'\\ \\:\\ \\'none\\'\": __props.scale < 1 ? '100%' : 'none'\n    }));\n    const props = __props;\n    const layouts = ref([]);\n    const isDragOver = ref(false);\n    const handleDragEnter = event => {\n      event.preventDefault();\n      console.log('Canvas - dragenter');\n      isDragOver.value = true;\n    };\n    const handleDragLeave = event => {\n      event.preventDefault();\n      console.log('Canvas - dragleave');\n      isDragOver.value = false;\n    };\n    const handleDragOver = event => {\n      event.preventDefault();\n      console.log('Canvas - dragover');\n    };\n    const handleChange = event => {\n      isDragOver.value = false;\n      console.log('Canvas - handleChange:', event);\n      if (event.added) {\n        try {\n          const component = event.added.element;\n          console.log('Canvas - Added component:', component);\n          if (component.type === 'layout') {\n            const newLayout = {\n              id: Date.now(),\n              type: component.type,\n              name: component.name,\n              config: {\n                type: component.name === '单栏布局' ? 'single' : component.name === '双栏布局' ? 'double' : 'triple',\n                layout: component.name === '单栏布局' ? 1 : component.name === '双栏布局' ? 2 : 3\n              }\n            };\n            console.log('Canvas - Creating new layout:', newLayout);\n            layouts.value.splice(event.added.newIndex, 1, newLayout);\n          }\n        } catch (error) {\n          console.error('Canvas - 处理组件时出错:', error);\n        }\n      }\n    };\n    const getLayoutComponent = layout => {\n      const layoutMap = {\n        'single': SingleLayout,\n        'double': DoubleLayout,\n        'triple': TripleLayout\n      };\n      return layoutMap[layout.config.type] || null;\n    };\n    const removeLayout = layout => {\n      const index = layouts.value.findIndex(l => l.id === layout.id);\n      if (index > -1) {\n        layouts.value.splice(index, 1);\n      }\n    };\n    const __returned__ = {\n      props,\n      layouts,\n      isDragOver,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      handleChange,\n      getLayoutComponent,\n      removeLayout,\n      ref,\n      computed,\n      get draggable() {\n        return draggable;\n      },\n      SingleLayout,\n      DoubleLayout,\n      TripleLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","draggable","SingleLayout","DoubleLayout","TripleLayout","props","__props","layouts","isDragOver","handleDragEnter","event","preventDefault","console","log","value","handleDragLeave","handleDragOver","handleChange","added","component","element","type","newLayout","id","Date","now","name","config","layout","splice","newIndex","error","getLayoutComponent","layoutMap","removeLayout","index","findIndex","l"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" :style=\"{ transform: `scale(${scale})` }\">\n        <draggable\n          v-model=\"layouts\"\n          :group=\"{ name: 'layouts', pull: false, put: true }\"\n          item-key=\"id\"\n          class=\"canvas-drop-area\"\n          :class=\"{ 'drag-over': isDragOver }\"\n          @change=\"handleChange\"\n        >\n          <template #item=\"{ element }\">\n            <div class=\"layout-wrapper\">\n              <div class=\"layout-actions\">\n                <v-btn\n                  icon=\"mdi-delete\"\n                  size=\"small\"\n                  color=\"error\"\n                  variant=\"text\"\n                  @click=\"removeLayout(element)\"\n                ></v-btn>\n              </div>\n              <component\n                :is=\"getLayoutComponent(element)\"\n                :config=\"element.config\"\n              ></component>\n            </div>\n          </template>\n\n          <template #header>\n            <div v-if=\"layouts.length === 0\" class=\"placeholder\">\n              <v-icon size=\"32\" class=\"mb-2\">mdi-plus</v-icon>\n              <span>拖拽布局到此处</span>\n            </div>\n          </template>\n        </draggable>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport draggable from 'vuedraggable'\nimport SingleLayout from '../layouts/SingleLayout.vue'\nimport DoubleLayout from '../layouts/DoubleLayout.vue'\nimport TripleLayout from '../layouts/TripleLayout.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst layouts = ref([])\nconst isDragOver = ref(false)\n\nconst handleDragEnter = (event) => {\n  event.preventDefault()\n  console.log('Canvas - dragenter')\n  isDragOver.value = true\n}\n\nconst handleDragLeave = (event) => {\n  event.preventDefault()\n  console.log('Canvas - dragleave')\n  isDragOver.value = false\n}\n\nconst handleDragOver = (event) => {\n  event.preventDefault()\n  console.log('Canvas - dragover')\n}\n\nconst handleChange = (event) => {\n  isDragOver.value = false\n  console.log('Canvas - handleChange:', event)\n  if (event.added) {\n    try {\n      const component = event.added.element\n      console.log('Canvas - Added component:', component)\n      if (component.type === 'layout') {\n        const newLayout = {\n          id: Date.now(),\n          type: component.type,\n          name: component.name,\n          config: {\n            type: component.name === '单栏布局' ? 'single' : \n                  component.name === '双栏布局' ? 'double' : 'triple',\n            layout: component.name === '单栏布局' ? 1 : \n                   component.name === '双栏布局' ? 2 : 3\n          }\n        }\n        console.log('Canvas - Creating new layout:', newLayout)\n        layouts.value.splice(event.added.newIndex, 1, newLayout)\n      }\n    } catch (error) {\n      console.error('Canvas - 处理组件时出错:', error)\n    }\n  }\n}\n\nconst getLayoutComponent = (layout) => {\n  const layoutMap = {\n    'single': SingleLayout,\n    'double': DoubleLayout,\n    'triple': TripleLayout\n  }\n  return layoutMap[layout.config.type] || null\n}\n\nconst removeLayout = (layout) => {\n  const index = layouts.value.findIndex(l => l.id === layout.id)\n  if (index > -1) {\n    layouts.value.splice(index, 1)\n  }\n}\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  height: 100%;\n  background: #f5f7fa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n}\n\n.canvas-wrapper {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: auto;\n  padding: v-bind(\"scale >= 1 ? '40px' : 0\");\n}\n\n.canvas-wrapper::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n.canvas-wrapper::-webkit-scrollbar-track {\n  background: #f5f7fa;\n}\n\n.canvas-wrapper::-webkit-scrollbar-thumb {\n  background: #dcdfe6;\n  border-radius: 4px;\n}\n\n.canvas-wrapper::-webkit-scrollbar-thumb:hover {\n  background: #c0c4cc;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: #ffffff;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  overflow: hidden;\n  padding: 57px;\n  position: relative;\n  flex-shrink: 0;\n  max-height: v-bind(\"scale < 1 ? '100%' : 'none'\");\n  max-width: v-bind(\"scale < 1 ? '100%' : 'none'\");\n}\n\n.canvas-drop-area {\n  height: 100%;\n  width: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.canvas-drop-area.drag-over {\n  background: #ecf5ff;\n  border: 2px dashed #409eff;\n  border-radius: 4px;\n}\n\n.placeholder {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  font-size: 14px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.layout-wrapper {\n  position: relative;\n  width: 100%;\n  flex: 1;\n  min-height: 100px;\n  background: #f5f7fa;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n}\n\n.layout-wrapper:last-child {\n  margin-bottom: 0;\n}\n\n.layout-actions {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.3s;\n  z-index: 10;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 4px;\n  padding: 2px;\n}\n\n.layout-wrapper:hover .layout-actions {\n  opacity: 1;\n}\n</style> "],"mappings":";AA2CA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,OAAOC,SAAS,MAAM,cAAa;AACnC,OAAOC,YAAY,MAAM,6BAA4B;AACrD,OAAOC,YAAY,MAAM,6BAA4B;AACrD,OAAOC,YAAY,MAAM,6BAA4B;;;;;;;;;;;;;;;;;IAErD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,OAAO,GAAGR,GAAG,CAAC,EAAE;IACtB,MAAMS,UAAU,GAAGT,GAAG,CAAC,KAAK;IAE5B,MAAMU,eAAe,GAAIC,KAAK,IAAK;MACjCA,KAAK,CAACC,cAAc,CAAC;MACrBC,OAAO,CAACC,GAAG,CAAC,oBAAoB;MAChCL,UAAU,CAACM,KAAK,GAAG,IAAG;IACxB;IAEA,MAAMC,eAAe,GAAIL,KAAK,IAAK;MACjCA,KAAK,CAACC,cAAc,CAAC;MACrBC,OAAO,CAACC,GAAG,CAAC,oBAAoB;MAChCL,UAAU,CAACM,KAAK,GAAG,KAAI;IACzB;IAEA,MAAME,cAAc,GAAIN,KAAK,IAAK;MAChCA,KAAK,CAACC,cAAc,CAAC;MACrBC,OAAO,CAACC,GAAG,CAAC,mBAAmB;IACjC;IAEA,MAAMI,YAAY,GAAIP,KAAK,IAAK;MAC9BF,UAAU,CAACM,KAAK,GAAG,KAAI;MACvBF,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,KAAK;MAC3C,IAAIA,KAAK,CAACQ,KAAK,EAAE;QACf,IAAI;UACF,MAAMC,SAAS,GAAGT,KAAK,CAACQ,KAAK,CAACE,OAAM;UACpCR,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEM,SAAS;UAClD,IAAIA,SAAS,CAACE,IAAI,KAAK,QAAQ,EAAE;YAC/B,MAAMC,SAAS,GAAG;cAChBC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;cACdJ,IAAI,EAAEF,SAAS,CAACE,IAAI;cACpBK,IAAI,EAAEP,SAAS,CAACO,IAAI;cACpBC,MAAM,EAAE;gBACNN,IAAI,EAAEF,SAAS,CAACO,IAAI,KAAK,MAAM,GAAG,QAAQ,GACpCP,SAAS,CAACO,IAAI,KAAK,MAAM,GAAG,QAAQ,GAAG,QAAQ;gBACrDE,MAAM,EAAET,SAAS,CAACO,IAAI,KAAK,MAAM,GAAG,CAAC,GAC9BP,SAAS,CAACO,IAAI,KAAK,MAAM,GAAG,CAAC,GAAG;cACzC;YACF;YACAd,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAES,SAAS;YACtDf,OAAO,CAACO,KAAK,CAACe,MAAM,CAACnB,KAAK,CAACQ,KAAK,CAACY,QAAQ,EAAE,CAAC,EAAER,SAAS;UACzD;QACF,CAAC,CAAC,OAAOS,KAAK,EAAE;UACdnB,OAAO,CAACmB,KAAK,CAAC,mBAAmB,EAAEA,KAAK;QAC1C;MACF;IACF;IAEA,MAAMC,kBAAkB,GAAIJ,MAAM,IAAK;MACrC,MAAMK,SAAS,GAAG;QAChB,QAAQ,EAAE/B,YAAY;QACtB,QAAQ,EAAEC,YAAY;QACtB,QAAQ,EAAEC;MACZ;MACA,OAAO6B,SAAS,CAACL,MAAM,CAACD,MAAM,CAACN,IAAI,CAAC,IAAI,IAAG;IAC7C;IAEA,MAAMa,YAAY,GAAIN,MAAM,IAAK;MAC/B,MAAMO,KAAK,GAAG5B,OAAO,CAACO,KAAK,CAACsB,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACd,EAAE,KAAKK,MAAM,CAACL,EAAE;MAC7D,IAAIY,KAAK,GAAG,CAAC,CAAC,EAAE;QACd5B,OAAO,CAACO,KAAK,CAACe,MAAM,CAACM,KAAK,EAAE,CAAC;MAC/B;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}