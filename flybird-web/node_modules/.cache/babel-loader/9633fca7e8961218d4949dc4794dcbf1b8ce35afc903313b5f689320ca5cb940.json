{"ast":null,"code":"import { ref, computed, watch } from 'vue';\nimport { useDragDrop } from '../composables/useDragDrop';\nimport SingleLayout from '../layouts/SingleLayout.vue';\nimport DoubleLayout from '../layouts/DoubleLayout.vue';\nexport default {\n  __name: 'Canvas',\n  props: {\n    scale: {\n      type: Number,\n      default: 1\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const {\n      currentLayout,\n      handleDragEnter: onDragEnter,\n      handleDragLeave: onDragLeave,\n      handleDragOver: onDragOver,\n      handleDrop: onDrop\n    } = useDragDrop();\n    const isDragOver = ref(false);\n    const handleDragEnter = event => {\n      event.preventDefault();\n      isDragOver.value = true;\n      onDragEnter(event);\n    };\n    const handleDragLeave = event => {\n      event.preventDefault();\n      isDragOver.value = false;\n      onDragLeave(event);\n    };\n    const handleDragOver = event => {\n      event.preventDefault();\n      onDragOver(event);\n    };\n    const handleDrop = event => {\n      event.preventDefault();\n      isDragOver.value = false;\n      onDrop(event);\n    };\n\n    // 监听布局变化\n    watch(currentLayout, newLayout => {\n      console.log('布局已更新:', newLayout);\n    });\n    const layoutComponent = computed(() => {\n      console.log('当前布局:', currentLayout.value);\n      if (!currentLayout.value?.config?.layout) return null;\n      const layoutMap = {\n        'single': SingleLayout,\n        'double': DoubleLayout\n      };\n      return layoutMap[currentLayout.value.config.layout] || null;\n    });\n    const __returned__ = {\n      props,\n      currentLayout,\n      onDragEnter,\n      onDragLeave,\n      onDragOver,\n      onDrop,\n      isDragOver,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      handleDrop,\n      layoutComponent,\n      ref,\n      computed,\n      watch,\n      get useDragDrop() {\n        return useDragDrop;\n      },\n      SingleLayout,\n      DoubleLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","useDragDrop","SingleLayout","DoubleLayout","props","__props","currentLayout","handleDragEnter","onDragEnter","handleDragLeave","onDragLeave","handleDragOver","onDragOver","handleDrop","onDrop","isDragOver","event","preventDefault","value","newLayout","console","log","layoutComponent","config","layout","layoutMap"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" \n        :style=\"{ transform: `scale(${scale})` }\"\n        @dragenter=\"handleDragEnter\"\n        @dragleave=\"handleDragLeave\"\n        @dragover=\"handleDragOver\"\n        @drop=\"handleDrop\">\n        <!-- 根据布局类型动态渲染布局组件 -->\n        <component \n          v-if=\"currentLayout?.config?.layout && layoutComponent\"\n          :is=\"layoutComponent\"\n          :config=\"currentLayout.config\" />\n        <div v-else class=\"canvas-placeholder\" :class=\"{ 'drag-over': isDragOver }\">\n          <v-icon size=\"48\" color=\"rgba(0,0,0,0.2)\">mdi-file-document-plus</v-icon>\n          <div class=\"text-subtitle-1 text-medium-emphasis mt-4\">\n            从左侧拖拽布局到此处开始编辑\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useDragDrop } from '../composables/useDragDrop'\nimport SingleLayout from '../layouts/SingleLayout.vue'\nimport DoubleLayout from '../layouts/DoubleLayout.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst { currentLayout, handleDragEnter: onDragEnter, handleDragLeave: onDragLeave, handleDragOver: onDragOver, handleDrop: onDrop } = useDragDrop()\nconst isDragOver = ref(false)\n\nconst handleDragEnter = (event) => {\n  event.preventDefault()\n  isDragOver.value = true\n  onDragEnter(event)\n}\n\nconst handleDragLeave = (event) => {\n  event.preventDefault()\n  isDragOver.value = false\n  onDragLeave(event)\n}\n\nconst handleDragOver = (event) => {\n  event.preventDefault()\n  onDragOver(event)\n}\n\nconst handleDrop = (event) => {\n  event.preventDefault()\n  isDragOver.value = false\n  onDrop(event)\n}\n\n// 监听布局变化\nwatch(currentLayout, (newLayout) => {\n  console.log('布局已更新:', newLayout)\n})\n\nconst layoutComponent = computed(() => {\n  console.log('当前布局:', currentLayout.value)\n  if (!currentLayout.value?.config?.layout) return null\n  const layoutMap = {\n    'single': SingleLayout,\n    'double': DoubleLayout\n  }\n  return layoutMap[currentLayout.value.config.layout] || null\n})\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  border-radius: 4px;\n}\n\n.canvas-wrapper {\n  padding: 40px;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: white;\n  box-shadow: 0 0 24px rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  position: relative;\n}\n\n.canvas-placeholder {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.02);\n  border: 2px dashed rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n\n.canvas-placeholder.drag-over {\n  background-color: rgba(24, 103, 192, 0.05);\n  border-color: rgba(24, 103, 192, 0.3);\n}\n</style> "],"mappings":"AA0BA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAI;AACzC,SAASC,WAAW,QAAQ,4BAA2B;AACvD,OAAOC,YAAY,MAAM,6BAA4B;AACrD,OAAOC,YAAY,MAAM,6BAA4B;;;;;;;;;;;;;IAErD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAM;MAAEC,aAAa;MAAEC,eAAe,EAAEC,WAAW;MAAEC,eAAe,EAAEC,WAAW;MAAEC,cAAc,EAAEC,UAAU;MAAEC,UAAU,EAAEC;IAAO,CAAC,GAAGb,WAAW,CAAC;IAClJ,MAAMc,UAAU,GAAGjB,GAAG,CAAC,KAAK;IAE5B,MAAMS,eAAe,GAAIS,KAAK,IAAK;MACjCA,KAAK,CAACC,cAAc,CAAC;MACrBF,UAAU,CAACG,KAAK,GAAG,IAAG;MACtBV,WAAW,CAACQ,KAAK;IACnB;IAEA,MAAMP,eAAe,GAAIO,KAAK,IAAK;MACjCA,KAAK,CAACC,cAAc,CAAC;MACrBF,UAAU,CAACG,KAAK,GAAG,KAAI;MACvBR,WAAW,CAACM,KAAK;IACnB;IAEA,MAAML,cAAc,GAAIK,KAAK,IAAK;MAChCA,KAAK,CAACC,cAAc,CAAC;MACrBL,UAAU,CAACI,KAAK;IAClB;IAEA,MAAMH,UAAU,GAAIG,KAAK,IAAK;MAC5BA,KAAK,CAACC,cAAc,CAAC;MACrBF,UAAU,CAACG,KAAK,GAAG,KAAI;MACvBJ,MAAM,CAACE,KAAK;IACd;;IAEA;IACAhB,KAAK,CAACM,aAAa,EAAGa,SAAS,IAAK;MAClCC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,SAAS;IACjC,CAAC;IAED,MAAMG,eAAe,GAAGvB,QAAQ,CAAC,MAAM;MACrCqB,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEf,aAAa,CAACY,KAAK;MACxC,IAAI,CAACZ,aAAa,CAACY,KAAK,EAAEK,MAAM,EAAEC,MAAM,EAAE,OAAO,IAAG;MACpD,MAAMC,SAAS,GAAG;QAChB,QAAQ,EAAEvB,YAAY;QACtB,QAAQ,EAAEC;MACZ;MACA,OAAOsB,SAAS,CAACnB,aAAa,CAACY,KAAK,CAACK,MAAM,CAACC,MAAM,CAAC,IAAI,IAAG;IAC5D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}