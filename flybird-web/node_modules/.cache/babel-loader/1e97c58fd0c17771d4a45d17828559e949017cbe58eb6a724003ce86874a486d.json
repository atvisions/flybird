{"ast":null,"code":"import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = {\n  class: \"canvas-container\"\n};\nconst _hoisted_2 = {\n  class: \"canvas-wrapper\"\n};\nconst _hoisted_3 = {\n  class: \"layout-wrapper\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"canvas-placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"canvas-content\",\n    style: _normalizeStyle({\n      transform: `scale(${$props.scale})`\n    })\n  }, [_createVNode($setup[\"draggable\"], {\n    modelValue: $setup.layouts,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.layouts = $event),\n    group: {\n      name: 'layouts',\n      pull: false,\n      put: true\n    },\n    \"item-key\": \"id\",\n    class: \"canvas-drop-area\",\n    animation: 200,\n    onChange: $setup.handleChange\n  }, {\n    item: _withCtx(({\n      element\n    }) => [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(), _createBlock(_resolveDynamicComponent($setup.getLayoutComponent(element)), {\n      config: element.config\n    }, null, 8 /* PROPS */, [\"config\"]))])]),\n    default: _withCtx(() => [!$setup.layouts.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_v_icon, {\n      size: \"48\",\n      color: \"rgba(0,0,0,0.2)\"\n    }, {\n      default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"mdi-file-document-plus\")])),\n      _: 1 /* STABLE */\n    }), _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n      class: \"text-subtitle-1 text-medium-emphasis mt-4\"\n    }, \" 从左侧拖拽布局到此处开始编辑 \", -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])], 4 /* STYLE */)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","style","_normalizeStyle","transform","$props","scale","_createVNode","$setup","modelValue","layouts","_cache","$event","group","name","pull","put","animation","onChange","handleChange","item","_withCtx","element","_hoisted_3","_createBlock","_resolveDynamicComponent","getLayoutComponent","config","default","length","_hoisted_4","_component_v_icon","size","color","_createTextVNode","_","_createCommentVNode"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" :style=\"{ transform: `scale(${scale})` }\">\n        <draggable \n          v-model=\"layouts\"\n          :group=\"{ name: 'layouts', pull: false, put: true }\"\n          item-key=\"id\"\n          class=\"canvas-drop-area\"\n          :animation=\"200\"\n          @change=\"handleChange\">\n          <template #item=\"{ element }\">\n            <div class=\"layout-wrapper\">\n              <component \n                :is=\"getLayoutComponent(element)\"\n                :config=\"element.config\" />\n            </div>\n          </template>\n          <template #default>\n            <div v-if=\"!layouts.length\" class=\"canvas-placeholder\">\n              <v-icon size=\"48\" color=\"rgba(0,0,0,0.2)\">mdi-file-document-plus</v-icon>\n              <div class=\"text-subtitle-1 text-medium-emphasis mt-4\">\n                从左侧拖拽布局到此处开始编辑\n              </div>\n            </div>\n          </template>\n        </draggable>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport draggable from 'vuedraggable'\nimport SingleLayout from '../layouts/SingleLayout.vue'\nimport DoubleLayout from '../layouts/DoubleLayout.vue'\nimport TripleLayout from '../layouts/TripleLayout.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst layouts = ref([])\n\nconst handleChange = (event) => {\n  if (event.added) {\n    console.log('添加布局:', event.added.element)\n  }\n}\n\nconst getLayoutComponent = (layout) => {\n  console.log('获取布局组件:', layout)\n  const layoutMap = {\n    'single': SingleLayout,\n    'double': DoubleLayout,\n    'triple': TripleLayout\n  }\n  const layoutName = layout.name\n  let layoutType = 'single'\n  if (layoutName.includes('双栏')) {\n    layoutType = 'double'\n  } else if (layoutName.includes('三栏')) {\n    layoutType = 'triple'\n  }\n  return layoutMap[layoutType] || null\n}\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  border-radius: 4px;\n}\n\n.canvas-wrapper {\n  padding: 40px;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: white;\n  box-shadow: 0 0 24px rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  position: relative;\n}\n\n.canvas-drop-area {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.layout-wrapper {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.canvas-placeholder {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.02);\n  border: 2px dashed rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n\n.sortable-ghost {\n  opacity: 0.5;\n  background: #ecf5ff;\n  border: 2px dashed #409eff;\n  border-radius: 8px;\n}\n\n.sortable-chosen {\n  background: #ecf5ff;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EACtBA,KAAK,EAAC;AAAgB;;EAUdA,KAAK,EAAC;AAAgB;;EAZvCC,GAAA;EAmBwCD,KAAK,EAAC;;;;uBAlB5CE,mBAAA,CA4BM,OA5BNC,UA4BM,GA3BJC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJD,mBAAA,CAwBM;IAxBDJ,KAAK,EAAC,gBAAgB;IAAEM,KAAK,EAHxCC,eAAA;MAAAC,SAAA,WAGgEC,MAAA,CAAAC,KAAK;IAAA;MAC7DC,YAAA,CAsBYC,MAAA;IA1BpBC,UAAA,EAKmBD,MAAA,CAAAE,OAAO;IAL1B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKmBJ,MAAA,CAAAE,OAAO,GAAAE,MAAA;IACfC,KAAK,EAAE;MAAAC,IAAA;MAAAC,IAAA;MAAAC,GAAA;IAAA,CAA2C;IACnD,UAAQ,EAAC,IAAI;IACbpB,KAAK,EAAC,kBAAkB;IACvBqB,SAAS,EAAE,GAAG;IACdC,QAAM,EAAEV,MAAA,CAAAW;;IACEC,IAAI,EAAAC,QAAA,CACb,CAIM;MALWC;IAAO,OACxBtB,mBAAA,CAIM,OAJNuB,UAIM,I,cAHJC,YAAA,CAE6BC,wBAf3C,CAcqBjB,MAAA,CAAAkB,kBAAkB,CAACJ,OAAO;MAC9BK,MAAM,EAAEL,OAAO,CAACK;;IAGZC,OAAO,EAAAP,QAAA,CAChB,MAKM,C,CALMb,MAAA,CAAAE,OAAO,CAACmB,MAAM,I,cAA1B/B,mBAAA,CAKM,OALNgC,UAKM,GAJJvB,YAAA,CAAyEwB,iBAAA;MAAjEC,IAAI,EAAC,IAAI;MAACC,KAAK,EAAC;;MApBtCL,OAAA,EAAAP,QAAA,CAoBwD,MAAsBV,MAAA,QAAAA,MAAA,OApB9EuB,gBAAA,CAoBwD,wBAAsB,E;MApB9EC,CAAA;kCAqBcnC,mBAAA,CAEM;MAFDJ,KAAK,EAAC;IAA2C,GAAC,kBAEvD,qB,KAvBdwC,mBAAA,e;IAAAD,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}