{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useUserStore } from '@/stores/user';\nexport function useChangePassword() {\n  const userStore = useUserStore();\n  const state = ref({\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n    loading: false,\n    error: '',\n    strength: 0\n  });\n  const validatePassword = password => {\n    if (!password) return '请输入密码';\n    if (password.length < 8) return '密码长度不能少于8位';\n    if (!/[A-Za-z]/.test(password)) return '密码必须包含字母';\n    if (!/\\d/.test(password)) return '密码必须包含数字';\n    return '';\n  };\n  const checkPasswordStrength = password => {\n    let score = 0;\n    if (password.length >= 8) score += 1;\n    if (password.length >= 12) score += 1;\n    if (/[a-z]/.test(password)) score += 1;\n    if (/[A-Z]/.test(password)) score += 1;\n    if (/\\d/.test(password)) score += 1;\n    if (/[!@#$%^&*]/.test(password)) score += 1;\n    return score;\n  };\n  const updatePasswordStrength = password => {\n    state.value.strength = checkPasswordStrength(password);\n  };\n  const isPasswordValid = computed(() => {\n    const password = state.value.newPassword;\n    return password && password.length >= 8 && /[A-Za-z]/.test(password) && /\\d/.test(password);\n  });\n  const strengthText = computed(() => {\n    const strength = state.value.strength;\n    if (strength <= 1) return '弱';\n    if (strength <= 3) return '中';\n    if (strength <= 5) return '强';\n    return '非常强';\n  });\n  const strengthTextClass = computed(() => {\n    const strength = state.value.strength;\n    if (strength <= 1) return 'text-red-500';\n    if (strength <= 3) return 'text-yellow-500';\n    if (strength <= 5) return 'text-green-500';\n    return 'text-green-600';\n  });\n  const strengthColorClass = computed(() => {\n    const strength = state.value.strength;\n    if (strength <= 1) return 'bg-red-500';\n    if (strength <= 3) return 'bg-yellow-500';\n    if (strength <= 5) return 'bg-green-500';\n    return 'bg-green-600';\n  });\n  return {\n    state,\n    validatePassword,\n    updatePasswordStrength,\n    isPasswordValid,\n    strengthText,\n    strengthTextClass,\n    strengthColorClass,\n    userStore\n  };\n}","map":{"version":3,"names":["ref","computed","useUserStore","useChangePassword","userStore","state","oldPassword","newPassword","confirmPassword","loading","error","strength","validatePassword","password","length","test","checkPasswordStrength","score","updatePasswordStrength","value","isPasswordValid","strengthText","strengthTextClass","strengthColorClass"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/composables/useChangePassword.js"],"sourcesContent":["import { ref, computed } from 'vue'\nimport { useUserStore } from '@/stores/user'\n\nexport function useChangePassword() {\n  const userStore = useUserStore()\n  const state = ref({\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n    loading: false,\n    error: '',\n    strength: 0\n  })\n\n  const validatePassword = (password) => {\n    if (!password) return '请输入密码'\n    if (password.length < 8) return '密码长度不能少于8位'\n    if (!/[A-Za-z]/.test(password)) return '密码必须包含字母'\n    if (!/\\d/.test(password)) return '密码必须包含数字'\n    return ''\n  }\n\n  const checkPasswordStrength = (password) => {\n    let score = 0\n    \n    if (password.length >= 8) score += 1\n    if (password.length >= 12) score += 1\n    \n    if (/[a-z]/.test(password)) score += 1\n    if (/[A-Z]/.test(password)) score += 1\n    if (/\\d/.test(password)) score += 1\n    if (/[!@#$%^&*]/.test(password)) score += 1\n    \n    return score\n  }\n\n  const updatePasswordStrength = (password) => {\n    state.value.strength = checkPasswordStrength(password)\n  }\n\n  const isPasswordValid = computed(() => {\n    const password = state.value.newPassword\n    return password &&\n           password.length >= 8 &&\n           /[A-Za-z]/.test(password) &&\n           /\\d/.test(password)\n  })\n\n  const strengthText = computed(() => {\n    const strength = state.value.strength\n    if (strength <= 1) return '弱'\n    if (strength <= 3) return '中'\n    if (strength <= 5) return '强'\n    return '非常强'\n  })\n\n  const strengthTextClass = computed(() => {\n    const strength = state.value.strength\n    if (strength <= 1) return 'text-red-500'\n    if (strength <= 3) return 'text-yellow-500'\n    if (strength <= 5) return 'text-green-500'\n    return 'text-green-600'\n  })\n\n  const strengthColorClass = computed(() => {\n    const strength = state.value.strength\n    if (strength <= 1) return 'bg-red-500'\n    if (strength <= 3) return 'bg-yellow-500'\n    if (strength <= 5) return 'bg-green-500'\n    return 'bg-green-600'\n  })\n\n  return {\n    state,\n    validatePassword,\n    updatePasswordStrength,\n    isPasswordValid,\n    strengthText,\n    strengthTextClass,\n    strengthColorClass,\n    userStore\n  }\n} "],"mappings":"AAAA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,YAAY,QAAQ,eAAe;AAE5C,OAAO,SAASC,iBAAiBA,CAAA,EAAG;EAClC,MAAMC,SAAS,GAAGF,YAAY,CAAC,CAAC;EAChC,MAAMG,KAAK,GAAGL,GAAG,CAAC;IAChBM,WAAW,EAAE,EAAE;IACfC,WAAW,EAAE,EAAE;IACfC,eAAe,EAAE,EAAE;IACnBC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE;EACZ,CAAC,CAAC;EAEF,MAAMC,gBAAgB,GAAIC,QAAQ,IAAK;IACrC,IAAI,CAACA,QAAQ,EAAE,OAAO,OAAO;IAC7B,IAAIA,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE,OAAO,YAAY;IAC5C,IAAI,CAAC,UAAU,CAACC,IAAI,CAACF,QAAQ,CAAC,EAAE,OAAO,UAAU;IACjD,IAAI,CAAC,IAAI,CAACE,IAAI,CAACF,QAAQ,CAAC,EAAE,OAAO,UAAU;IAC3C,OAAO,EAAE;EACX,CAAC;EAED,MAAMG,qBAAqB,GAAIH,QAAQ,IAAK;IAC1C,IAAII,KAAK,GAAG,CAAC;IAEb,IAAIJ,QAAQ,CAACC,MAAM,IAAI,CAAC,EAAEG,KAAK,IAAI,CAAC;IACpC,IAAIJ,QAAQ,CAACC,MAAM,IAAI,EAAE,EAAEG,KAAK,IAAI,CAAC;IAErC,IAAI,OAAO,CAACF,IAAI,CAACF,QAAQ,CAAC,EAAEI,KAAK,IAAI,CAAC;IACtC,IAAI,OAAO,CAACF,IAAI,CAACF,QAAQ,CAAC,EAAEI,KAAK,IAAI,CAAC;IACtC,IAAI,IAAI,CAACF,IAAI,CAACF,QAAQ,CAAC,EAAEI,KAAK,IAAI,CAAC;IACnC,IAAI,YAAY,CAACF,IAAI,CAACF,QAAQ,CAAC,EAAEI,KAAK,IAAI,CAAC;IAE3C,OAAOA,KAAK;EACd,CAAC;EAED,MAAMC,sBAAsB,GAAIL,QAAQ,IAAK;IAC3CR,KAAK,CAACc,KAAK,CAACR,QAAQ,GAAGK,qBAAqB,CAACH,QAAQ,CAAC;EACxD,CAAC;EAED,MAAMO,eAAe,GAAGnB,QAAQ,CAAC,MAAM;IACrC,MAAMY,QAAQ,GAAGR,KAAK,CAACc,KAAK,CAACZ,WAAW;IACxC,OAAOM,QAAQ,IACRA,QAAQ,CAACC,MAAM,IAAI,CAAC,IACpB,UAAU,CAACC,IAAI,CAACF,QAAQ,CAAC,IACzB,IAAI,CAACE,IAAI,CAACF,QAAQ,CAAC;EAC5B,CAAC,CAAC;EAEF,MAAMQ,YAAY,GAAGpB,QAAQ,CAAC,MAAM;IAClC,MAAMU,QAAQ,GAAGN,KAAK,CAACc,KAAK,CAACR,QAAQ;IACrC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,GAAG;IAC7B,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,GAAG;IAC7B,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,GAAG;IAC7B,OAAO,KAAK;EACd,CAAC,CAAC;EAEF,MAAMW,iBAAiB,GAAGrB,QAAQ,CAAC,MAAM;IACvC,MAAMU,QAAQ,GAAGN,KAAK,CAACc,KAAK,CAACR,QAAQ;IACrC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,cAAc;IACxC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,iBAAiB;IAC3C,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,gBAAgB;IAC1C,OAAO,gBAAgB;EACzB,CAAC,CAAC;EAEF,MAAMY,kBAAkB,GAAGtB,QAAQ,CAAC,MAAM;IACxC,MAAMU,QAAQ,GAAGN,KAAK,CAACc,KAAK,CAACR,QAAQ;IACrC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,YAAY;IACtC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,eAAe;IACzC,IAAIA,QAAQ,IAAI,CAAC,EAAE,OAAO,cAAc;IACxC,OAAO,cAAc;EACvB,CAAC,CAAC;EAEF,OAAO;IACLN,KAAK;IACLO,gBAAgB;IAChBM,sBAAsB;IACtBE,eAAe;IACfC,YAAY;IACZC,iBAAiB;IACjBC,kBAAkB;IAClBnB;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}