{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = {\n  class: \"canvas-container\"\n};\nconst _hoisted_2 = {\n  class: \"canvas-wrapper\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"canvas-content\",\n    style: _normalizeStyle({\n      transform: `scale(${$props.scale})`\n    }),\n    onDragenter: $setup.handleDragEnter,\n    onDragleave: $setup.handleDragLeave,\n    onDragover: $setup.handleDragOver,\n    onDrop: $setup.handleDrop\n  }, [_createCommentVNode(\" 根据布局类型动态渲染布局组件 \"), $setup.currentLayout?.config?.layout && $setup.layoutComponent ? (_openBlock(), _createBlock(_resolveDynamicComponent($setup.layoutComponent), {\n    key: 0,\n    config: $setup.currentLayout.config\n  }, null, 8 /* PROPS */, [\"config\"])) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: _normalizeClass([\"canvas-placeholder\", {\n      'drag-over': $setup.isDragOver\n    }])\n  }, [_createVNode(_component_v_icon, {\n    size: \"48\",\n    color: \"rgba(0,0,0,0.2)\"\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"mdi-file-document-plus\")])),\n    _: 1 /* STABLE */\n  }), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"text-subtitle-1 text-medium-emphasis mt-4\"\n  }, \" 从左侧拖拽布局到此处开始编辑 \", -1 /* HOISTED */))], 2 /* CLASS */))], 36 /* STYLE, NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","style","_normalizeStyle","transform","$props","scale","onDragenter","$setup","handleDragEnter","onDragleave","handleDragLeave","onDragover","handleDragOver","onDrop","handleDrop","_createCommentVNode","currentLayout","config","layout","layoutComponent","_createBlock","_resolveDynamicComponent","key","_normalizeClass","isDragOver","_createVNode","_component_v_icon","size","color","default","_withCtx","_cache","_createTextVNode","_"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" \n        :style=\"{ transform: `scale(${scale})` }\"\n        @dragenter=\"handleDragEnter\"\n        @dragleave=\"handleDragLeave\"\n        @dragover=\"handleDragOver\"\n        @drop=\"handleDrop\">\n        <!-- 根据布局类型动态渲染布局组件 -->\n        <component \n          v-if=\"currentLayout?.config?.layout && layoutComponent\"\n          :is=\"layoutComponent\"\n          :config=\"currentLayout.config\" />\n        <div v-else class=\"canvas-placeholder\" :class=\"{ 'drag-over': isDragOver }\">\n          <v-icon size=\"48\" color=\"rgba(0,0,0,0.2)\">mdi-file-document-plus</v-icon>\n          <div class=\"text-subtitle-1 text-medium-emphasis mt-4\">\n            从左侧拖拽布局到此处开始编辑\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useDragDrop } from '../composables/useDragDrop'\nimport SingleLayout from '../layouts/SingleLayout.vue'\nimport DoubleLayout from '../layouts/DoubleLayout.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst { currentLayout, handleDragEnter: onDragEnter, handleDragLeave: onDragLeave, handleDragOver: onDragOver, handleDrop: onDrop } = useDragDrop()\nconst isDragOver = ref(false)\n\nconst handleDragEnter = (event) => {\n  event.preventDefault()\n  isDragOver.value = true\n  onDragEnter(event)\n}\n\nconst handleDragLeave = (event) => {\n  event.preventDefault()\n  isDragOver.value = false\n  onDragLeave(event)\n}\n\nconst handleDragOver = (event) => {\n  event.preventDefault()\n  onDragOver(event)\n}\n\nconst handleDrop = (event) => {\n  event.preventDefault()\n  isDragOver.value = false\n  onDrop(event)\n}\n\n// 监听布局变化\nwatch(currentLayout, (newLayout) => {\n  console.log('布局已更新:', newLayout)\n})\n\nconst layoutComponent = computed(() => {\n  console.log('当前布局:', currentLayout.value)\n  if (!currentLayout.value?.config?.layout) return null\n  const layoutMap = {\n    'single': SingleLayout,\n    'double': DoubleLayout\n  }\n  return layoutMap[currentLayout.value.config.layout] || null\n})\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  border-radius: 4px;\n}\n\n.canvas-wrapper {\n  padding: 40px;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: white;\n  box-shadow: 0 0 24px rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  position: relative;\n}\n\n.canvas-placeholder {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.02);\n  border: 2px dashed rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n\n.canvas-placeholder.drag-over {\n  background-color: rgba(24, 103, 192, 0.05);\n  border-color: rgba(24, 103, 192, 0.3);\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EACtBA,KAAK,EAAC;AAAgB;;;uBAD7BC,mBAAA,CAqBM,OArBNC,UAqBM,GApBJC,mBAAA,CAmBM,OAnBNC,UAmBM,GAlBJD,mBAAA,CAiBM;IAjBDH,KAAK,EAAC,gBAAgB;IACxBK,KAAK,EAJdC,eAAA;MAAAC,SAAA,WAIsCC,MAAA,CAAAC,KAAK;IAAA;IAClCC,WAAS,EAAEC,MAAA,CAAAC,eAAe;IAC1BC,WAAS,EAAEF,MAAA,CAAAG,eAAe;IAC1BC,UAAQ,EAAEJ,MAAA,CAAAK,cAAc;IACxBC,MAAI,EAAEN,MAAA,CAAAO;MACPC,mBAAA,oBAAuB,EAEfR,MAAA,CAAAS,aAAa,EAAEC,MAAM,EAAEC,MAAM,IAAIX,MAAA,CAAAY,eAAe,I,cADxDC,YAAA,CAGmCC,wBAb3C,CAYed,MAAA,CAAAY,eAAe;IAZ9BG,GAAA;IAaWL,MAAM,EAAEV,MAAA,CAAAS,aAAa,CAACC;wDACzBpB,mBAAA,CAKM;IAnBdyB,GAAA;IAcoB1B,KAAK,EAdzB2B,eAAA,EAc0B,oBAAoB;MAAA,aAAwBhB,MAAA,CAAAiB;IAAU;MACtEC,YAAA,CAAyEC,iBAAA;IAAjEC,IAAI,EAAC,IAAI;IAACC,KAAK,EAAC;;IAflCC,OAAA,EAAAC,QAAA,CAeoD,MAAsBC,MAAA,QAAAA,MAAA,OAf1EC,gBAAA,CAeoD,wBAAsB,E;IAf1EC,CAAA;gCAgBUlC,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAA2C,GAAC,kBAEvD,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}