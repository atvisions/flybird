{"ast":null,"code":"import { defineStore } from 'pinia';\nexport const useSubscriptionStore = defineStore({\n  id: 'subscription',\n  state: () => ({\n    subscriptionStatus: null,\n    subscriptionEndDate: null,\n    loading: false\n  }),\n  getters: {\n    isSubscribed: state => {\n      if (!state.subscriptionStatus) return false;\n      if (!state.subscriptionEndDate) return false;\n      return new Date(state.subscriptionEndDate) > new Date();\n    }\n  },\n  actions: {\n    async fetchSubscriptionStatus() {\n      try {\n        this.loading = true;\n        // TODO: 调用后端 API 获取会员状态\n        // const response = await api.subscription.getStatus()\n        // this.subscriptionStatus = response.data.status\n        // this.subscriptionEndDate = response.data.endDate\n      } catch (error) {\n        console.error('获取会员状态失败:', error);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useSubscriptionStore","id","state","subscriptionStatus","subscriptionEndDate","loading","getters","isSubscribed","Date","actions","fetchSubscriptionStatus","error","console"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/subscription.js"],"sourcesContent":["import { defineStore } from 'pinia'\n\nexport const useSubscriptionStore = defineStore({\n  id: 'subscription',\n  state: () => ({\n    subscriptionStatus: null,\n    subscriptionEndDate: null,\n    loading: false\n  }),\n\n  getters: {\n    isSubscribed: (state) => {\n      if (!state.subscriptionStatus) return false\n      if (!state.subscriptionEndDate) return false\n      return new Date(state.subscriptionEndDate) > new Date()\n    }\n  },\n\n  actions: {\n    async fetchSubscriptionStatus() {\n      try {\n        this.loading = true\n        // TODO: 调用后端 API 获取会员状态\n        // const response = await api.subscription.getStatus()\n        // this.subscriptionStatus = response.data.status\n        // this.subscriptionEndDate = response.data.endDate\n      } catch (error) {\n        console.error('获取会员状态失败:', error)\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}) "],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AAEnC,OAAO,MAAMC,oBAAoB,GAAGD,WAAW,CAAC;EAC9CE,EAAE,EAAE,cAAc;EAClBC,KAAK,EAAEA,CAAA,MAAO;IACZC,kBAAkB,EAAE,IAAI;IACxBC,mBAAmB,EAAE,IAAI;IACzBC,OAAO,EAAE;EACX,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,YAAY,EAAGL,KAAK,IAAK;MACvB,IAAI,CAACA,KAAK,CAACC,kBAAkB,EAAE,OAAO,KAAK;MAC3C,IAAI,CAACD,KAAK,CAACE,mBAAmB,EAAE,OAAO,KAAK;MAC5C,OAAO,IAAII,IAAI,CAACN,KAAK,CAACE,mBAAmB,CAAC,GAAG,IAAII,IAAI,CAAC,CAAC;IACzD;EACF,CAAC;EAEDC,OAAO,EAAE;IACP,MAAMC,uBAAuBA,CAAA,EAAG;MAC9B,IAAI;QACF,IAAI,CAACL,OAAO,GAAG,IAAI;QACnB;QACA;QACA;QACA;MACF,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACnC,CAAC,SAAS;QACR,IAAI,CAACN,OAAO,GAAG,KAAK;MACtB;IACF;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}