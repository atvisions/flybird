{"ast":null,"code":"export default {\n  __name: 'AccountSettings',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    // No changes to imports or setup section\n\n    // 注销账号相关状态\n    const deleteFormState = ref({\n      password: '',\n      loading: false\n    });\n\n    // 处理确认注销\n    const handleConfirmDelete = async () => {\n      if (!deleteFormState.value.password) {\n        showToast('请输入密码', 'warning');\n        return;\n      }\n      try {\n        deleteFormState.value.loading = true;\n        const response = await account.deleteAccount({\n          password: deleteFormState.value.password\n        });\n        if (response?.data?.code === 200) {\n          showToast('账号已注销', 'success');\n          // 使用 auth store 的 logout 方法清除所有状态\n          await authStore.logout();\n          // 清除 user store 的状态\n          userStore.clearUserInfo();\n          // 清除其他可能的状态\n          localStorage.removeItem('isLoggedIn');\n          // 强制刷新页面以确保所有状态都被清除\n          window.location.href = '/login';\n        }\n      } catch (error) {\n        console.error('注销失败:', error);\n        const errorMsg = error.response?.data?.detail || error.response?.data?.message || error.message || '注销失败';\n        showToast(errorMsg, 'error');\n      } finally {\n        deleteFormState.value.loading = false;\n      }\n    };\n\n    // ... 其他代码保持不变\n\n    const __returned__ = {\n      deleteFormState,\n      handleConfirmDelete\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["deleteFormState","ref","password","loading","handleConfirmDelete","value","showToast","response","account","deleteAccount","data","code","authStore","logout","userStore","clearUserInfo","localStorage","removeItem","window","location","href","error","console","errorMsg","detail","message"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/AccountSettings.vue"],"sourcesContent":["<template>\n  <!-- No changes to template section -->\n</template>\n\n<script setup>\n// No changes to imports or setup section\n\n// 注销账号相关状态\nconst deleteFormState = ref({\n  password: '',\n  loading: false\n})\n\n// 处理确认注销\nconst handleConfirmDelete = async () => {\n  if (!deleteFormState.value.password) {\n    showToast('请输入密码', 'warning')\n    return\n  }\n  \n  try {\n    deleteFormState.value.loading = true\n    const response = await account.deleteAccount({\n      password: deleteFormState.value.password\n    })\n    \n    if (response?.data?.code === 200) {\n      showToast('账号已注销', 'success')\n      // 使用 auth store 的 logout 方法清除所有状态\n      await authStore.logout()\n      // 清除 user store 的状态\n      userStore.clearUserInfo()\n      // 清除其他可能的状态\n      localStorage.removeItem('isLoggedIn')\n      // 强制刷新页面以确保所有状态都被清除\n      window.location.href = '/login'\n    }\n  } catch (error) {\n    console.error('注销失败:', error)\n    const errorMsg = error.response?.data?.detail || \n                    error.response?.data?.message || \n                    error.message || \n                    '注销失败'\n    showToast(errorMsg, 'error')\n  } finally {\n    deleteFormState.value.loading = false\n  }\n}\n\n// ... 其他代码保持不变\n</script>\n\n<style scoped>\n/* No changes to style section */\n</style>"],"mappings":";;;;;;;IAKA;;IAEA;IACA,MAAMA,eAAe,GAAGC,GAAG,CAAC;MAC1BC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;;IAED;IACA,MAAMC,mBAAmB,GAAG,MAAAA,CAAA,KAAY;MACtC,IAAI,CAACJ,eAAe,CAACK,KAAK,CAACH,QAAQ,EAAE;QACnCI,SAAS,CAAC,OAAO,EAAE,SAAS;QAC5B;MACF;MAEA,IAAI;QACFN,eAAe,CAACK,KAAK,CAACF,OAAO,GAAG,IAAG;QACnC,MAAMI,QAAQ,GAAG,MAAMC,OAAO,CAACC,aAAa,CAAC;UAC3CP,QAAQ,EAAEF,eAAe,CAACK,KAAK,CAACH;QAClC,CAAC;QAED,IAAIK,QAAQ,EAAEG,IAAI,EAAEC,IAAI,KAAK,GAAG,EAAE;UAChCL,SAAS,CAAC,OAAO,EAAE,SAAS;UAC5B;UACA,MAAMM,SAAS,CAACC,MAAM,CAAC;UACvB;UACAC,SAAS,CAACC,aAAa,CAAC;UACxB;UACAC,YAAY,CAACC,UAAU,CAAC,YAAY;UACpC;UACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAO;QAChC;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK;QAC5B,MAAME,QAAQ,GAAGF,KAAK,CAACd,QAAQ,EAAEG,IAAI,EAAEc,MAAM,IAC7BH,KAAK,CAACd,QAAQ,EAAEG,IAAI,EAAEe,OAAO,IAC7BJ,KAAK,CAACI,OAAO,IACb,MAAK;QACrBnB,SAAS,CAACiB,QAAQ,EAAE,OAAO;MAC7B,CAAC,SAAS;QACRvB,eAAe,CAACK,KAAK,CAACF,OAAO,GAAG,KAAI;MACtC;IACF;;IAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}