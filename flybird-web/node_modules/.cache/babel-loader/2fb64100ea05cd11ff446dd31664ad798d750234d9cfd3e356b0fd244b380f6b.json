{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, Transition as _Transition, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"space-y-6 p-4 lg:p-6 pb-24\"\n};\nconst _hoisted_2 = {\n  class: \"relative\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_4 = {\n  class: \"ml-3 block truncate\"\n};\nconst _hoisted_5 = {\n  class: \"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\"\n};\nconst _hoisted_6 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_7 = {\n  class: \"flex items-center gap-4\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"absolute inset-0 flex flex-col items-center justify-center text-gray-400 group-hover:text-violet-500\"\n};\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = {\n  class: \"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-4 z-50\"\n};\nconst _hoisted_11 = {\n  class: \"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\"\n};\nconst _hoisted_12 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_13 = {\n  class: \"text-sm text-gray-500\"\n};\nconst _hoisted_14 = {\n  class: \"flex items-center gap-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" 标题 \"), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.title = $event),\n    class: \"block w-full text-xl font-medium border-0 focus:ring-0 p-0\",\n    placeholder: \"输入文章标题...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.title]])]), _createCommentVNode(\" 分类 \"), _createElementVNode(\"div\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"文章分类\", -1 /* HOISTED */)), _createVNode($setup[\"Listbox\"], {\n    modelValue: $setup.selectedCategory,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedCategory = $event)\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"ListboxButton\"], {\n      class: \"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-3 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-violet-500 sm:text-sm\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_3, [(_openBlock(), _createBlock(_resolveDynamicComponent($setup.selectedCategory.icon), {\n        class: \"h-5 w-5 flex-shrink-0 text-gray-400\",\n        \"aria-hidden\": \"true\"\n      })), _createElementVNode(\"span\", _hoisted_4, _toDisplayString($setup.selectedCategory.name), 1 /* TEXT */)]), _createElementVNode(\"span\", _hoisted_5, [_createVNode($setup[\"ChevronUpDownIcon\"], {\n        class: \"h-5 w-5 text-gray-400\",\n        \"aria-hidden\": \"true\"\n      })])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_Transition, {\n      \"leave-active-class\": \"transition duration-100 ease-in\",\n      \"leave-from-class\": \"opacity-100\",\n      \"leave-to-class\": \"opacity-0\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"ListboxOptions\"], {\n        class: \"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\"\n      }, {\n        default: _withCtx(() => [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.categories, category => {\n          return _createVNode($setup[\"ListboxOption\"], {\n            key: category.id,\n            value: category,\n            as: \"template\"\n          }, {\n            default: _withCtx(({\n              active,\n              selected\n            }) => [_createElementVNode(\"li\", {\n              class: _normalizeClass([active ? 'bg-violet-600 text-white' : 'text-gray-900', 'relative cursor-pointer select-none py-2 pl-3 pr-9'])\n            }, [_createElementVNode(\"div\", _hoisted_6, [(_openBlock(), _createBlock(_resolveDynamicComponent(category.icon), {\n              class: _normalizeClass([active ? 'text-white' : 'text-gray-400', 'h-5 w-5 flex-shrink-0']),\n              \"aria-hidden\": \"true\"\n            }, null, 8 /* PROPS */, [\"class\"])), _createElementVNode(\"span\", {\n              class: _normalizeClass([selected ? 'font-semibold' : 'font-normal', 'ml-3 block truncate'])\n            }, _toDisplayString(category.name), 3 /* TEXT, CLASS */)]), selected ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: _normalizeClass([active ? 'text-white' : 'text-violet-600', 'absolute inset-y-0 right-0 flex items-center pr-4'])\n            }, [_createVNode($setup[\"CheckIcon\"], {\n              class: \"h-5 w-5\",\n              \"aria-hidden\": \"true\"\n            })], 2 /* CLASS */)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"value\"]);\n        }), 64 /* STABLE_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]), _createCommentVNode(\" 缩略图 \"), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"文章封面\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"relative w-48 h-32 rounded-lg border-2 border-dashed border-gray-300 hover:border-violet-500 transition-colors overflow-hidden group\", {\n      'border-solid border-violet-500': $setup.form.cover\n    }])\n  }, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    class: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\",\n    onChange: $setup.handleCoverChange\n  }, null, 32 /* NEED_HYDRATION */), !$setup.form.cover ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode($setup[\"PhotoIcon\"], {\n    class: \"w-8 h-8 mb-1\"\n  }), _cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n    class: \"text-xs\"\n  }, \"点击上传封面\", -1 /* HOISTED */))])) : (_openBlock(), _createElementBlock(\"img\", {\n    key: 1,\n    src: $setup.form.cover,\n    class: \"w-full h-full object-cover\",\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_9)), $setup.form.cover ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    type: \"button\",\n    class: \"absolute top-2 right-2 p-1 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity\",\n    onClick: _withModifiers($setup.removeCover, [\"stop\"])\n  }, [_createVNode($setup[\"XMarkIcon\"], {\n    class: \"w-4 h-4\"\n  })])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"flex-1 text-sm text-gray-500\"\n  }, [_createElementVNode(\"p\", null, \"建议尺寸：1200x675 像素\"), _createElementVNode(\"p\", null, \"支持 jpg、png 格式，最大 2MB\")], -1 /* HOISTED */))])]), _createCommentVNode(\" 文章摘要 \"), _createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"文章摘要\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.summary = $event),\n    rows: \"3\",\n    class: \"block w-full rounded-lg border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500\",\n    placeholder: \"写一段简短的介绍，会显示在文章列表中\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.summary]])]), _createCommentVNode(\" 编辑器 \"), _createElementVNode(\"div\", null, [_createVNode($setup[\"Toolbar\"], {\n    style: {\n      \"border-bottom\": \"1px solid #ccc\"\n    },\n    editor: $setup.editorRef,\n    defaultConfig: $setup.toolbarConfig,\n    mode: \"default\"\n  }, null, 8 /* PROPS */, [\"editor\"]), _createVNode($setup[\"Editor\"], {\n    modelValue: $setup.form.content,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.content = $event),\n    style: {\n      \"height\": \"500px\",\n      \"overflow-y\": \"hidden\"\n    },\n    defaultConfig: $setup.editorConfig,\n    mode: \"default\",\n    onOnCreated: $setup.handleCreated,\n    onOnChange: $setup.handleChange\n  }, null, 8 /* PROPS */, [\"modelValue\"])])]), _createCommentVNode(\" 底部按钮 \"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", _hoisted_13, _toDisplayString($setup.lastSaveTime ? `上次保存: ${$setup.formatTime($setup.lastSaveTime)}` : '文章将自动保存'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    class: \"px-6 h-10 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\",\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.$router.back())\n  }, \" 取消 \"), _createElementVNode(\"button\", {\n    class: \"px-6 h-10 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors\",\n    onClick: $setup.handleSubmit\n  }, \" 发布文章 \")])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createCommentVNode","type","_cache","$event","$setup","form","title","placeholder","_createVNode","modelValue","selectedCategory","default","_withCtx","_hoisted_2","_hoisted_3","_createBlock","_resolveDynamicComponent","icon","_hoisted_4","_toDisplayString","name","_hoisted_5","_","_Transition","_renderList","categories","category","id","value","as","active","selected","_normalizeClass","_hoisted_6","_hoisted_7","cover","accept","onChange","handleCoverChange","_hoisted_8","src","alt","_hoisted_9","onClick","_withModifiers","removeCover","summary","rows","style","editor","editorRef","defaultConfig","toolbarConfig","mode","content","editorConfig","onOnCreated","handleCreated","onOnChange","handleChange","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","lastSaveTime","formatTime","_hoisted_14","_ctx","$router","back","handleSubmit"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/community/components/ArticleForm.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6 p-4 lg:p-6 pb-24\">\n    <!-- 标题 -->\n    <div>\n      <input\n        type=\"text\"\n        v-model=\"form.title\"\n        class=\"block w-full text-xl font-medium border-0 focus:ring-0 p-0\"\n        placeholder=\"输入文章标题...\"\n      >\n    </div>\n\n    <!-- 分类 -->\n    <div>\n      <label class=\"block text-sm font-medium text-gray-700 mb-2\">文章分类</label>\n      <Listbox v-model=\"selectedCategory\">\n        <div class=\"relative\">\n          <ListboxButton\n            class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-3 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-violet-500 sm:text-sm\"\n          >\n            <span class=\"flex items-center\">\n              <component \n                :is=\"selectedCategory.icon\" \n                class=\"h-5 w-5 flex-shrink-0 text-gray-400\"\n                aria-hidden=\"true\"\n              />\n              <span class=\"ml-3 block truncate\">{{ selectedCategory.name }}</span>\n            </span>\n            <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\">\n              <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n            </span>\n          </ListboxButton>\n\n          <Transition\n            leave-active-class=\"transition duration-100 ease-in\"\n            leave-from-class=\"opacity-100\"\n            leave-to-class=\"opacity-0\"\n          >\n            <ListboxOptions\n              class=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\"\n            >\n              <ListboxOption\n                v-for=\"category in categories\"\n                :key=\"category.id\"\n                :value=\"category\"\n                v-slot=\"{ active, selected }\"\n                as=\"template\"\n              >\n                <li\n                  :class=\"[\n                    active ? 'bg-violet-600 text-white' : 'text-gray-900',\n                    'relative cursor-pointer select-none py-2 pl-3 pr-9'\n                  ]\"\n                >\n                  <div class=\"flex items-center\">\n                    <component \n                      :is=\"category.icon\" \n                      :class=\"[\n                        active ? 'text-white' : 'text-gray-400',\n                        'h-5 w-5 flex-shrink-0'\n                      ]\"\n                      aria-hidden=\"true\"\n                    />\n                    <span\n                      :class=\"[\n                        selected ? 'font-semibold' : 'font-normal',\n                        'ml-3 block truncate'\n                      ]\"\n                    >\n                      {{ category.name }}\n                    </span>\n                  </div>\n\n                  <span\n                    v-if=\"selected\"\n                    :class=\"[\n                      active ? 'text-white' : 'text-violet-600',\n                      'absolute inset-y-0 right-0 flex items-center pr-4'\n                    ]\"\n                  >\n                    <CheckIcon class=\"h-5 w-5\" aria-hidden=\"true\" />\n                  </span>\n                </li>\n              </ListboxOption>\n            </ListboxOptions>\n          </Transition>\n        </div>\n      </Listbox>\n    </div>\n\n    <!-- 缩略图 -->\n    <div>\n      <label class=\"block text-sm font-medium text-gray-700 mb-2\">文章封面</label>\n      <div class=\"flex items-center gap-4\">\n        <div \n          class=\"relative w-48 h-32 rounded-lg border-2 border-dashed border-gray-300 hover:border-violet-500 transition-colors overflow-hidden group\"\n          :class=\"{ 'border-solid border-violet-500': form.cover }\"\n        >\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            class=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"\n            @change=\"handleCoverChange\"\n          >\n          <div v-if=\"!form.cover\" class=\"absolute inset-0 flex flex-col items-center justify-center text-gray-400 group-hover:text-violet-500\">\n            <PhotoIcon class=\"w-8 h-8 mb-1\" />\n            <span class=\"text-xs\">点击上传封面</span>\n          </div>\n          <img \n            v-else \n            :src=\"form.cover\" \n            class=\"w-full h-full object-cover\"\n            alt=\"\"\n          >\n          <button \n            v-if=\"form.cover\"\n            type=\"button\"\n            class=\"absolute top-2 right-2 p-1 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity\"\n            @click.stop=\"removeCover\"\n          >\n            <XMarkIcon class=\"w-4 h-4\" />\n          </button>\n        </div>\n        <div class=\"flex-1 text-sm text-gray-500\">\n          <p>建议尺寸：1200x675 像素</p>\n          <p>支持 jpg、png 格式，最大 2MB</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 文章摘要 -->\n    <div>\n      <label class=\"block text-sm font-medium text-gray-700 mb-2\">文章摘要</label>\n      <textarea\n        v-model=\"form.summary\"\n        rows=\"3\"\n        class=\"block w-full rounded-lg border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500\"\n        placeholder=\"写一段简短的介绍，会显示在文章列表中\"\n      ></textarea>\n    </div>\n\n    <!-- 编辑器 -->\n    <div>\n      <Toolbar\n        style=\"border-bottom: 1px solid #ccc\"\n        :editor=\"editorRef\"\n        :defaultConfig=\"toolbarConfig\"\n        mode=\"default\"\n      />\n      <Editor\n        v-model=\"form.content\"\n        style=\"height: 500px; overflow-y: hidden;\"\n        :defaultConfig=\"editorConfig\"\n        mode=\"default\"\n        @onCreated=\"handleCreated\"\n        @onChange=\"handleChange\"\n      />\n    </div>\n  </div>\n\n  <!-- 底部按钮 -->\n  <div class=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-4 z-50\">\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n      <div class=\"flex items-center justify-between\">\n        <span class=\"text-sm text-gray-500\">{{ lastSaveTime ? `上次保存: ${formatTime(lastSaveTime)}` : '文章将自动保存' }}</span>\n        <div class=\"flex items-center gap-4\">\n          <button \n            class=\"px-6 h-10 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\n            @click=\"$router.back()\"\n          >\n            取消\n          </button>\n          <button \n            class=\"px-6 h-10 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors\"\n            @click=\"handleSubmit\"\n          >\n            发布文章\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onBeforeUnmount } from 'vue'\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\nimport { formatTime } from '@/utils/time'\nimport { showToast } from '@/components/ToastMessage'\nimport { Listbox, ListboxButton, ListboxOptions, ListboxOption } from '@headlessui/vue'\nimport { \n  ChevronUpDownIcon, \n  CheckIcon,\n  CodeBracketIcon,\n  ServerIcon,\n  DevicePhoneMobileIcon,\n  ChartBarIcon,\n  DatabaseIcon,\n  CpuChipIcon,\n  BeakerIcon,\n  PhotoIcon,\n  XMarkIcon\n} from '@heroicons/vue/24/outline'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'submit'])\n\n// 编辑器实例\nconst editorRef = ref(null)\n\n// 编辑器配置\nconst editorConfig = {\n  placeholder: '开始写作...',\n  MENU_CONF: {}\n}\n\n// 工具栏配置\nconst toolbarConfig = {\n  excludeKeys: [\n    'group-video',\n    'insertTable',\n    'codeBlock',\n    'fullScreen'\n  ]\n}\n\n// 表单数据\nconst form = ref({\n  title: '',\n  category: '',\n  content: '',\n  tags: [],\n  cover: '',\n  summary: '',\n  isPublic: true,\n  allowComment: true\n})\n\n// 最后保存时间\nconst lastSaveTime = ref(null)\n\n// 自动保存相关\nlet autoSaveTimer = null\nconst AUTOSAVE_INTERVAL = 30000 // 30秒\nconst DRAFT_KEY = 'article_draft'\n\n// 分类数据\nconst categories = [\n  { id: 'frontend', name: '前端开发', icon: CodeBracketIcon },\n  { id: 'backend', name: '后端开发', icon: ServerIcon },\n  { id: 'mobile', name: '移动开发', icon: DevicePhoneMobileIcon },\n  { id: 'algorithm', name: '算法', icon: ChartBarIcon },\n  { id: 'database', name: '数据库', icon: DatabaseIcon },\n  { id: 'devops', name: '运维', icon: CpuChipIcon },\n  { id: 'ai', name: '人工智能', icon: BeakerIcon }\n]\n\n// 选中的分类\nconst selectedCategory = ref(categories[0])\n\n// 监听分类变化\nwatch(selectedCategory, (category) => {\n  form.value.category = category.id\n})\n\n// 处理封面图片上传\nconst handleCoverChange = (e) => {\n  const file = e.target.files[0]\n  if (!file) return\n\n  // 验证文件类型\n  if (!file.type.startsWith('image/')) {\n    showToast('请选择图片文件', 'error')\n    return\n  }\n\n  // 验证文件大小（2MB）\n  if (file.size > 2 * 1024 * 1024) {\n    showToast('图片大小不能超过 2MB', 'error')\n    return\n  }\n\n  // 读取文件预览\n  const reader = new FileReader()\n  reader.onload = (e) => {\n    form.value.cover = e.target.result\n  }\n  reader.readAsDataURL(file)\n}\n\n// 移除封面图片\nconst removeCover = () => {\n  form.value.cover = ''\n}\n\n// 保存草稿\nconst saveDraft = () => {\n  const draftData = {\n    ...form.value,\n    editorContent: editorRef.value?.getHtml() || '',\n    selectedCategory: selectedCategory.value // 保存选中的分类对象\n  }\n  localStorage.setItem(DRAFT_KEY, JSON.stringify(draftData))\n  lastSaveTime.value = new Date()\n}\n\n// 加载草稿\nconst loadDraft = () => {\n  const draft = localStorage.getItem(DRAFT_KEY)\n  if (draft) {\n    try {\n      const draftData = JSON.parse(draft)\n      form.value = {\n        ...draftData,\n        content: draftData.editorContent\n      }\n      // 恢复选中的分类\n      if (draftData.selectedCategory) {\n        selectedCategory.value = draftData.selectedCategory\n      }\n      lastSaveTime.value = new Date()\n      showToast('已恢复上次编辑的内容', 'info')\n    } catch (error) {\n      console.error('加载草稿失败:', error)\n    }\n  }\n}\n\n// 清除草稿\nconst clearDraft = () => {\n  localStorage.removeItem(DRAFT_KEY)\n}\n\n// 开始自动保存\nconst startAutoSave = () => {\n  stopAutoSave()\n  autoSaveTimer = setInterval(saveDraft, AUTOSAVE_INTERVAL)\n}\n\n// 停止自动保存\nconst stopAutoSave = () => {\n  if (autoSaveTimer) {\n    clearInterval(autoSaveTimer)\n    autoSaveTimer = null\n  }\n}\n\n// 编辑器创建完成\nconst handleCreated = (editor) => {\n  editorRef.value = editor\n}\n\n// 编辑器内容变化\nconst handleChange = () => {\n  form.value.content = editorRef.value.getHtml()\n  emit('update:modelValue', form.value)\n}\n\n// 提交表单\nconst handleSubmit = () => {\n  // 表单验证\n  if (!form.value.title) {\n    showToast('请输入文章标题', 'warning')\n    return\n  }\n  if (!form.value.category) {\n    showToast('请选择文章分类', 'warning')\n    return\n  }\n  if (!form.value.content) {\n    showToast('请输入文章内容', 'warning')\n    return\n  }\n\n  emit('submit', form.value)\n}\n\n// 监听父组件数据变化\nwatch(\n  () => props.modelValue,\n  (newVal) => {\n    if (newVal && Object.keys(newVal).length > 0) {\n      form.value = { ...newVal }\n    }\n  },\n  { deep: true }\n)\n\nonMounted(() => {\n  loadDraft()\n  startAutoSave()\n})\n\nonBeforeUnmount(() => {\n  stopAutoSave()\n  saveDraft() // 最后保存一次\n  if (editorRef.value) {\n    editorRef.value.destroy()\n  }\n})\n</script>\n\n<style src=\"@wangeditor/editor/dist/css/style.css\"></style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}