{"ast":null,"code":"// frontend/src/main.js\nimport { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport App from './App.vue';\nimport router from './router';\nimport './assets/css/input.css';\nimport { showToast } from '@/components/ToastMessage';\nimport ElementPlus from 'element-plus';\nimport 'element-plus/dist/index.css';\nimport { eventBus } from '@/utils/eventBus';\nimport VueCropper from 'vue-cropper';\nimport 'vue-cropper/dist/index.css';\nimport { useAuthStore } from '@/stores/auth';\nimport config from './config';\n\n// Vuetify\nimport 'vuetify/styles';\nimport { createVuetify } from 'vuetify';\nimport * as components from 'vuetify/components';\nimport * as directives from 'vuetify/directives';\nimport { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport '@mdi/font/css/materialdesignicons.css';\nconst vuetify = createVuetify({\n  components,\n  directives,\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi\n    }\n  }\n});\nconst app = createApp(App);\nconst pinia = createPinia();\napp.use(pinia);\napp.use(ElementPlus);\napp.use(VueCropper);\napp.use(router);\napp.use(vuetify);\n\n// 初始化应用\nconst initApp = async () => {\n  try {\n    const authStore = useAuthStore();\n    await authStore.initialize();\n    console.log('Auth initialized:', {\n      isLoggedIn: authStore.isLoggedIn,\n      token: localStorage.getItem('token')\n    });\n  } catch (error) {\n    console.error('Auth initialization failed:', error);\n  } finally {\n    // 添加全局配置\n    app.config.globalProperties.$toast = showToast;\n    window.$toast = showToast;\n    app.config.globalProperties.eventBus = eventBus;\n    app.config.globalProperties.$config = config;\n\n    // 最后挂载应用\n    app.mount('#app');\n  }\n};\n\n// 启动应用\ninitApp();","map":{"version":3,"names":["createApp","createPinia","App","router","showToast","ElementPlus","eventBus","VueCropper","useAuthStore","config","createVuetify","components","directives","aliases","mdi","vuetify","icons","defaultSet","sets","app","pinia","use","initApp","authStore","initialize","console","log","isLoggedIn","token","localStorage","getItem","error","globalProperties","$toast","window","$config","mount"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/main.js"],"sourcesContent":["// frontend/src/main.js\nimport { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/css/input.css'\nimport { showToast } from '@/components/ToastMessage'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport { eventBus } from '@/utils/eventBus'\nimport VueCropper from 'vue-cropper'\nimport 'vue-cropper/dist/index.css'\nimport { useAuthStore } from '@/stores/auth'\nimport config from './config'\n\n// Vuetify\nimport 'vuetify/styles'\nimport { createVuetify } from 'vuetify'\nimport * as components from 'vuetify/components'\nimport * as directives from 'vuetify/directives'\nimport { aliases, mdi } from 'vuetify/iconsets/mdi'\nimport '@mdi/font/css/materialdesignicons.css'\n\nconst vuetify = createVuetify({\n  components,\n  directives,\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n})\n\nconst app = createApp(App)\nconst pinia = createPinia()\napp.use(pinia)\napp.use(ElementPlus)\napp.use(VueCropper)\napp.use(router)\napp.use(vuetify)\n\n// 初始化应用\nconst initApp = async () => {\n  try {\n    const authStore = useAuthStore()\n    await authStore.initialize()\n    console.log('Auth initialized:', {\n      isLoggedIn: authStore.isLoggedIn,\n      token: localStorage.getItem('token')\n    })\n  } catch (error) {\n    console.error('Auth initialization failed:', error)\n  } finally {\n    // 添加全局配置\n    app.config.globalProperties.$toast = showToast\n    window.$toast = showToast\n    app.config.globalProperties.eventBus = eventBus\n    app.config.globalProperties.$config = config\n    \n    // 最后挂载应用\n    app.mount('#app')\n  }\n}\n\n// 启动应用\ninitApp()"],"mappings":"AAAA;AACA,SAASA,SAAS,QAAQ,KAAK;AAC/B,SAASC,WAAW,QAAQ,OAAO;AACnC,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAO,wBAAwB;AAC/B,SAASC,SAAS,QAAQ,2BAA2B;AACrD,OAAOC,WAAW,MAAM,cAAc;AACtC,OAAO,6BAA6B;AACpC,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAO,4BAA4B;AACnC,SAASC,YAAY,QAAQ,eAAe;AAC5C,OAAOC,MAAM,MAAM,UAAU;;AAE7B;AACA,OAAO,gBAAgB;AACvB,SAASC,aAAa,QAAQ,SAAS;AACvC,OAAO,KAAKC,UAAU,MAAM,oBAAoB;AAChD,OAAO,KAAKC,UAAU,MAAM,oBAAoB;AAChD,SAASC,OAAO,EAAEC,GAAG,QAAQ,sBAAsB;AACnD,OAAO,uCAAuC;AAE9C,MAAMC,OAAO,GAAGL,aAAa,CAAC;EAC5BC,UAAU;EACVC,UAAU;EACVI,KAAK,EAAE;IACLC,UAAU,EAAE,KAAK;IACjBJ,OAAO;IACPK,IAAI,EAAE;MACJJ;IACF;EACF;AACF,CAAC,CAAC;AAEF,MAAMK,GAAG,GAAGnB,SAAS,CAACE,GAAG,CAAC;AAC1B,MAAMkB,KAAK,GAAGnB,WAAW,CAAC,CAAC;AAC3BkB,GAAG,CAACE,GAAG,CAACD,KAAK,CAAC;AACdD,GAAG,CAACE,GAAG,CAAChB,WAAW,CAAC;AACpBc,GAAG,CAACE,GAAG,CAACd,UAAU,CAAC;AACnBY,GAAG,CAACE,GAAG,CAAClB,MAAM,CAAC;AACfgB,GAAG,CAACE,GAAG,CAACN,OAAO,CAAC;;AAEhB;AACA,MAAMO,OAAO,GAAG,MAAAA,CAAA,KAAY;EAC1B,IAAI;IACF,MAAMC,SAAS,GAAGf,YAAY,CAAC,CAAC;IAChC,MAAMe,SAAS,CAACC,UAAU,CAAC,CAAC;IAC5BC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;MAC/BC,UAAU,EAAEJ,SAAS,CAACI,UAAU;MAChCC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;IACrC,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdN,OAAO,CAACM,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;EACrD,CAAC,SAAS;IACR;IACAZ,GAAG,CAACV,MAAM,CAACuB,gBAAgB,CAACC,MAAM,GAAG7B,SAAS;IAC9C8B,MAAM,CAACD,MAAM,GAAG7B,SAAS;IACzBe,GAAG,CAACV,MAAM,CAACuB,gBAAgB,CAAC1B,QAAQ,GAAGA,QAAQ;IAC/Ca,GAAG,CAACV,MAAM,CAACuB,gBAAgB,CAACG,OAAO,GAAG1B,MAAM;;IAE5C;IACAU,GAAG,CAACiB,KAAK,CAAC,MAAM,CAAC;EACnB;AACF,CAAC;;AAED;AACAd,OAAO,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}