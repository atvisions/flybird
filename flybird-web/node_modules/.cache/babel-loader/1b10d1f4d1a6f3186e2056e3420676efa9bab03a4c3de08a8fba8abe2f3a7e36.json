{"ast":null,"code":"import _objectSpread from \"/Users/liuzhao/Documents/Projects/flybird/flybird-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ref, computed, onMounted, onUnmounted, nextTick } from 'vue';\nexport default {\n  __name: 'DesignElement',\n  props: {\n    element: {\n      type: Object,\n      required: true\n    },\n    isSelected: {\n      type: Boolean,\n      default: false\n    },\n    scale: {\n      type: Number,\n      default: 1\n    },\n    dataFields: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: ['select', 'update'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // DOM 引用\n    const elementRef = ref(null);\n\n    // 元素样式\n    const elementStyle = computed(() => ({\n      transform: `translate(${props.element.x}px, ${props.element.y}px) rotate(${props.element.rotation || 0}deg)`,\n      position: 'absolute',\n      cursor: props.isSelected ? 'move' : 'pointer',\n      userSelect: 'none',\n      zIndex: props.element.styles?.zIndex || 0\n    }));\n\n    // 缩放控制点配置\n    const resizeHandles = [{\n      class: 'nw',\n      cursor: 'nw-resize'\n    }, {\n      class: 'n',\n      cursor: 'n-resize'\n    }, {\n      class: 'ne',\n      cursor: 'ne-resize'\n    }, {\n      class: 'w',\n      cursor: 'w-resize'\n    }, {\n      class: 'e',\n      cursor: 'e-resize'\n    }, {\n      class: 'sw',\n      cursor: 'sw-resize'\n    }, {\n      class: 's',\n      cursor: 's-resize'\n    }, {\n      class: 'se',\n      cursor: 'se-resize'\n    }];\n\n    // 拖拽相关状态\n    let startX = 0;\n    let startY = 0;\n    let startWidth = 0;\n    let startHeight = 0;\n    let startRotation = 0;\n    let isDragging = false;\n    let isResizing = false;\n    let isRotating = false;\n    let currentHandle = null;\n\n    // 开始移动\n    const startDrag = e => {\n      if (!props.isSelected || isResizing || isRotating) return;\n      isDragging = true;\n      startX = e.clientX - props.element.x;\n      startY = e.clientY - props.element.y;\n      document.addEventListener('mousemove', handleDrag);\n      document.addEventListener('mouseup', stopDrag);\n    };\n\n    // 处理移动\n    const handleDrag = e => {\n      if (!isDragging) return;\n      const newX = e.clientX - startX;\n      const newY = e.clientY - startY;\n      emit('update', _objectSpread(_objectSpread({}, props.element), {}, {\n        x: newX,\n        y: newY\n      }));\n    };\n\n    // 停止移动\n    const stopDrag = () => {\n      isDragging = false;\n      document.removeEventListener('mousemove', handleDrag);\n      document.removeEventListener('mouseup', stopDrag);\n    };\n\n    // 开始缩放\n    const startResize = (e, cursor) => {\n      e.stopPropagation();\n      isResizing = true;\n      currentHandle = cursor;\n      startX = e.clientX;\n      startY = e.clientY;\n      startWidth = props.element.width;\n      startHeight = props.element.height;\n      document.addEventListener('mousemove', handleResize);\n      document.addEventListener('mouseup', stopResize);\n    };\n\n    // 处理缩放\n    const handleResize = e => {\n      if (!isResizing) return;\n      const dx = (e.clientX - startX) / props.scale;\n      const dy = (e.clientY - startY) / props.scale;\n      let newWidth = startWidth;\n      let newHeight = startHeight;\n      switch (currentHandle) {\n        case 'e-resize':\n          newWidth = startWidth + dx;\n          break;\n        case 'w-resize':\n          newWidth = startWidth - dx;\n          break;\n        case 's-resize':\n          newHeight = startHeight + dy;\n          break;\n        case 'n-resize':\n          newHeight = startHeight - dy;\n          break;\n        case 'se-resize':\n          newWidth = startWidth + dx;\n          newHeight = startHeight + dy;\n          break;\n        case 'sw-resize':\n          newWidth = startWidth - dx;\n          newHeight = startHeight + dy;\n          break;\n        case 'ne-resize':\n          newWidth = startWidth + dx;\n          newHeight = startHeight - dy;\n          break;\n        case 'nw-resize':\n          newWidth = startWidth - dx;\n          newHeight = startHeight - dy;\n          break;\n      }\n\n      // 确保尺寸不小于最小值\n      newWidth = Math.max(20, newWidth);\n      newHeight = Math.max(20, newHeight);\n      emit('update', _objectSpread(_objectSpread({}, props.element), {}, {\n        width: newWidth,\n        height: newHeight\n      }));\n    };\n\n    // 停止缩放\n    const stopResize = () => {\n      isResizing = false;\n      currentHandle = null;\n      document.removeEventListener('mousemove', handleResize);\n      document.removeEventListener('mouseup', stopResize);\n    };\n\n    // 开始旋转\n    const startRotate = e => {\n      e.stopPropagation();\n      isRotating = true;\n      const rect = elementRef.value.getBoundingClientRect();\n      const centerX = rect.left + rect.width / 2;\n      const centerY = rect.top + rect.height / 2;\n      startRotation = Math.atan2(e.clientY - centerY, e.clientX - centerX);\n      document.addEventListener('mousemove', handleRotate);\n      document.addEventListener('mouseup', stopRotate);\n    };\n\n    // 处理旋转\n    const handleRotate = e => {\n      if (!isRotating || !elementRef.value) return;\n      const rect = elementRef.value.getBoundingClientRect();\n      const centerX = rect.left + rect.width / 2;\n      const centerY = rect.top + rect.height / 2;\n      const angle = Math.atan2(e.clientY - centerY, e.clientX - centerX);\n      let rotation = (angle - startRotation) * (180 / Math.PI);\n\n      // 将旋转角度限制在0-360度之间\n      rotation = (rotation + 360) % 360;\n      emit('update', _objectSpread(_objectSpread({}, props.element), {}, {\n        rotation\n      }));\n    };\n\n    // 停止旋转\n    const stopRotate = () => {\n      isRotating = false;\n      document.removeEventListener('mousemove', handleRotate);\n      document.removeEventListener('mouseup', stopRotate);\n    };\n    const isEditing = ref(false);\n    const editingText = ref('');\n    const textEditorRef = ref(null);\n\n    // 开始文字编辑\n    const startTextEdit = e => {\n      if (props.element.type !== 'text') return;\n      e.stopPropagation();\n      isEditing.value = true;\n      editingText.value = props.element.content;\n      nextTick(() => {\n        if (textEditorRef.value) {\n          textEditorRef.value.focus();\n        }\n      });\n    };\n\n    // 完成文字编辑\n    const finishTextEdit = () => {\n      if (!isEditing.value) return;\n      isEditing.value = false;\n      emit('update', _objectSpread(_objectSpread({}, props.element), {}, {\n        content: editingText.value\n      }));\n    };\n\n    // 右键菜单状态\n    const showMenu = ref(false);\n    const menuX = ref(0);\n    const menuY = ref(0);\n\n    // 显示右键菜单\n    const showContextMenu = event => {\n      event.preventDefault();\n      menuX.value = event.clientX;\n      menuY.value = event.clientY;\n      showMenu.value = true;\n    };\n\n    // 插入字段\n    const insertField = field => {\n      const textarea = textEditorRef.value;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const fieldText = `{{${field.field}}}`;\n      editingText.value = editingText.value.substring(0, start) + fieldText + editingText.value.substring(end);\n\n      // 更新元素\n      emit('update', _objectSpread(_objectSpread({}, props.element), {}, {\n        content: editingText.value,\n        dataBinding: {\n          field: field.field,\n          label: field.label\n        }\n      }));\n\n      // 关闭菜单\n      showMenu.value = false;\n    };\n\n    // 添加事件监听\n    onMounted(() => {\n      if (elementRef.value) {\n        elementRef.value.addEventListener('mousedown', startDrag);\n      }\n    });\n    onUnmounted(() => {\n      if (elementRef.value) {\n        elementRef.value.removeEventListener('mousedown', startDrag);\n      }\n      // 清理所有可能的事件监听\n      document.removeEventListener('mousemove', handleDrag);\n      document.removeEventListener('mouseup', stopDrag);\n      document.removeEventListener('mousemove', handleResize);\n      document.removeEventListener('mouseup', stopResize);\n      document.removeEventListener('mousemove', handleRotate);\n      document.removeEventListener('mouseup', stopRotate);\n    });\n    const __returned__ = {\n      props,\n      emit,\n      elementRef,\n      elementStyle,\n      resizeHandles,\n      get startX() {\n        return startX;\n      },\n      set startX(v) {\n        startX = v;\n      },\n      get startY() {\n        return startY;\n      },\n      set startY(v) {\n        startY = v;\n      },\n      get startWidth() {\n        return startWidth;\n      },\n      set startWidth(v) {\n        startWidth = v;\n      },\n      get startHeight() {\n        return startHeight;\n      },\n      set startHeight(v) {\n        startHeight = v;\n      },\n      get startRotation() {\n        return startRotation;\n      },\n      set startRotation(v) {\n        startRotation = v;\n      },\n      get isDragging() {\n        return isDragging;\n      },\n      set isDragging(v) {\n        isDragging = v;\n      },\n      get isResizing() {\n        return isResizing;\n      },\n      set isResizing(v) {\n        isResizing = v;\n      },\n      get isRotating() {\n        return isRotating;\n      },\n      set isRotating(v) {\n        isRotating = v;\n      },\n      get currentHandle() {\n        return currentHandle;\n      },\n      set currentHandle(v) {\n        currentHandle = v;\n      },\n      startDrag,\n      handleDrag,\n      stopDrag,\n      startResize,\n      handleResize,\n      stopResize,\n      startRotate,\n      handleRotate,\n      stopRotate,\n      isEditing,\n      editingText,\n      textEditorRef,\n      startTextEdit,\n      finishTextEdit,\n      showMenu,\n      menuX,\n      menuY,\n      showContextMenu,\n      insertField,\n      ref,\n      computed,\n      onMounted,\n      onUnmounted,\n      nextTick\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","nextTick","props","__props","emit","__emit","elementRef","elementStyle","transform","element","x","y","rotation","position","cursor","isSelected","userSelect","zIndex","styles","resizeHandles","class","startX","startY","startWidth","startHeight","startRotation","isDragging","isResizing","isRotating","currentHandle","startDrag","e","clientX","clientY","document","addEventListener","handleDrag","stopDrag","newX","newY","_objectSpread","removeEventListener","startResize","stopPropagation","width","height","handleResize","stopResize","dx","scale","dy","newWidth","newHeight","Math","max","startRotate","rect","value","getBoundingClientRect","centerX","left","centerY","top","atan2","handleRotate","stopRotate","angle","PI","isEditing","editingText","textEditorRef","startTextEdit","type","content","focus","finishTextEdit","showMenu","menuX","menuY","showContextMenu","event","preventDefault","insertField","field","textarea","start","selectionStart","end","selectionEnd","fieldText","substring","dataBinding","label"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/DesignElement.vue"],"sourcesContent":["<template>\n  <div\n    class=\"design-element\"\n    :class=\"{ 'is-selected': isSelected }\"\n    :style=\"elementStyle\"\n    @click.stop=\"$emit('select', element)\"\n    ref=\"elementRef\"\n  >\n    <!-- 图片元素 -->\n    <v-img\n      v-if=\"element.type === 'image'\"\n      :src=\"element.content\"\n      :width=\"element.width\"\n      :height=\"element.height\"\n      :style=\"element.styles\"\n      cover\n    />\n\n    <!-- 文字元素 -->\n    <div\n      v-else-if=\"element.type === 'text'\"\n      class=\"text-element\"\n      :class=\"{ 'has-binding': element.dataBinding }\"\n      :style=\"{\n        width: `${element.width}px`,\n        height: `${element.height}px`,\n        color: element.styles.color,\n        fontSize: element.styles.fontSize,\n        fontWeight: element.styles.fontWeight,\n        textAlign: element.styles.textAlign,\n        fontFamily: `${element.styles.fontFamily}, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif`\n      }\"\n      @dblclick=\"startTextEdit\"\n    >\n      <div v-if=\"!isEditing\" class=\"text-content\">\n        {{ element.content }}\n        <div v-if=\"element.dataBinding\" class=\"binding-indicator\">\n          <v-icon size=\"small\" color=\"primary\">mdi-link-variant</v-icon>\n          <span class=\"binding-label\">{{ element.dataBinding.label }}</span>\n        </div>\n      </div>\n      <textarea\n        v-else\n        v-model=\"editingText\"\n        class=\"text-editor\"\n        @blur=\"finishTextEdit\"\n        @keydown.enter=\"finishTextEdit\"\n        @contextmenu.prevent=\"showContextMenu\"\n        ref=\"textEditorRef\"\n        :style=\"{\n          color: element.styles.color,\n          fontSize: element.styles.fontSize,\n          fontWeight: element.styles.fontWeight,\n          textAlign: element.styles.textAlign,\n          fontFamily: `${element.styles.fontFamily}, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif`,\n          width: '100%',\n          height: '100%'\n        }\"\n      ></textarea>\n\n      <!-- 右键菜单 -->\n      <v-menu\n        v-model=\"showMenu\"\n        :position-x=\"menuX\"\n        :position-y=\"menuY\"\n        absolute\n        offset-y\n      >\n        <v-list>\n          <v-list-subheader>插入数据字段</v-list-subheader>\n          <v-list-item\n            v-for=\"field in dataFields\"\n            :key=\"field.field\"\n            @click=\"insertField(field)\"\n            :title=\"field.label\"\n          >\n            <template v-slot:prepend>\n              <v-icon size=\"small\">mdi-link-variant</v-icon>\n            </template>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </div>\n\n    <!-- 形状元素 -->\n    <div\n      v-else-if=\"element.type === 'shape'\"\n      class=\"shape-element\"\n      :class=\"element.shapeType\"\n      :style=\"{\n        width: `${element.width}px`,\n        height: `${element.height}px`,\n        ...element.styles\n      }\"\n    ></div>\n\n    <!-- 选中时显示的控制点 -->\n    <template v-if=\"isSelected\">\n      <!-- 旋转控制点 -->\n      <div class=\"rotate-handle\" @mousedown.stop=\"startRotate\"></div>\n      \n      <!-- 缩放控制点 -->\n      <div \n        v-for=\"(handle, index) in resizeHandles\" \n        :key=\"index\"\n        class=\"resize-handle\"\n        :class=\"handle.class\"\n        @mousedown.stop=\"startResize($event, handle.cursor)\"\n      ></div>\n    </template>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\n\nconst props = defineProps({\n  element: {\n    type: Object,\n    required: true\n  },\n  isSelected: {\n    type: Boolean,\n    default: false\n  },\n  scale: {\n    type: Number,\n    default: 1\n  },\n  dataFields: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst emit = defineEmits(['select', 'update'])\n\n// DOM 引用\nconst elementRef = ref(null)\n\n// 元素样式\nconst elementStyle = computed(() => ({\n  transform: `translate(${props.element.x}px, ${props.element.y}px) rotate(${props.element.rotation || 0}deg)`,\n  position: 'absolute',\n  cursor: props.isSelected ? 'move' : 'pointer',\n  userSelect: 'none',\n  zIndex: props.element.styles?.zIndex || 0\n}))\n\n// 缩放控制点配置\nconst resizeHandles = [\n  { class: 'nw', cursor: 'nw-resize' },\n  { class: 'n', cursor: 'n-resize' },\n  { class: 'ne', cursor: 'ne-resize' },\n  { class: 'w', cursor: 'w-resize' },\n  { class: 'e', cursor: 'e-resize' },\n  { class: 'sw', cursor: 'sw-resize' },\n  { class: 's', cursor: 's-resize' },\n  { class: 'se', cursor: 'se-resize' }\n]\n\n// 拖拽相关状态\nlet startX = 0\nlet startY = 0\nlet startWidth = 0\nlet startHeight = 0\nlet startRotation = 0\nlet isDragging = false\nlet isResizing = false\nlet isRotating = false\nlet currentHandle = null\n\n// 开始移动\nconst startDrag = (e) => {\n  if (!props.isSelected || isResizing || isRotating) return\n  \n  isDragging = true\n  startX = e.clientX - props.element.x\n  startY = e.clientY - props.element.y\n  \n  document.addEventListener('mousemove', handleDrag)\n  document.addEventListener('mouseup', stopDrag)\n}\n\n// 处理移动\nconst handleDrag = (e) => {\n  if (!isDragging) return\n  \n  const newX = e.clientX - startX\n  const newY = e.clientY - startY\n  \n  emit('update', {\n    ...props.element,\n    x: newX,\n    y: newY\n  })\n}\n\n// 停止移动\nconst stopDrag = () => {\n  isDragging = false\n  document.removeEventListener('mousemove', handleDrag)\n  document.removeEventListener('mouseup', stopDrag)\n}\n\n// 开始缩放\nconst startResize = (e, cursor) => {\n  e.stopPropagation()\n  isResizing = true\n  currentHandle = cursor\n  \n  startX = e.clientX\n  startY = e.clientY\n  startWidth = props.element.width\n  startHeight = props.element.height\n  \n  document.addEventListener('mousemove', handleResize)\n  document.addEventListener('mouseup', stopResize)\n}\n\n// 处理缩放\nconst handleResize = (e) => {\n  if (!isResizing) return\n  \n  const dx = (e.clientX - startX) / props.scale\n  const dy = (e.clientY - startY) / props.scale\n  \n  let newWidth = startWidth\n  let newHeight = startHeight\n  \n  switch (currentHandle) {\n    case 'e-resize':\n      newWidth = startWidth + dx\n      break\n    case 'w-resize':\n      newWidth = startWidth - dx\n      break\n    case 's-resize':\n      newHeight = startHeight + dy\n      break\n    case 'n-resize':\n      newHeight = startHeight - dy\n      break\n    case 'se-resize':\n      newWidth = startWidth + dx\n      newHeight = startHeight + dy\n      break\n    case 'sw-resize':\n      newWidth = startWidth - dx\n      newHeight = startHeight + dy\n      break\n    case 'ne-resize':\n      newWidth = startWidth + dx\n      newHeight = startHeight - dy\n      break\n    case 'nw-resize':\n      newWidth = startWidth - dx\n      newHeight = startHeight - dy\n      break\n  }\n  \n  // 确保尺寸不小于最小值\n  newWidth = Math.max(20, newWidth)\n  newHeight = Math.max(20, newHeight)\n  \n  emit('update', {\n    ...props.element,\n    width: newWidth,\n    height: newHeight\n  })\n}\n\n// 停止缩放\nconst stopResize = () => {\n  isResizing = false\n  currentHandle = null\n  document.removeEventListener('mousemove', handleResize)\n  document.removeEventListener('mouseup', stopResize)\n}\n\n// 开始旋转\nconst startRotate = (e) => {\n  e.stopPropagation()\n  isRotating = true\n  \n  const rect = elementRef.value.getBoundingClientRect()\n  const centerX = rect.left + rect.width / 2\n  const centerY = rect.top + rect.height / 2\n  startRotation = Math.atan2(e.clientY - centerY, e.clientX - centerX)\n  \n  document.addEventListener('mousemove', handleRotate)\n  document.addEventListener('mouseup', stopRotate)\n}\n\n// 处理旋转\nconst handleRotate = (e) => {\n  if (!isRotating || !elementRef.value) return\n  \n  const rect = elementRef.value.getBoundingClientRect()\n  const centerX = rect.left + rect.width / 2\n  const centerY = rect.top + rect.height / 2\n  \n  const angle = Math.atan2(e.clientY - centerY, e.clientX - centerX)\n  let rotation = (angle - startRotation) * (180 / Math.PI)\n  \n  // 将旋转角度限制在0-360度之间\n  rotation = (rotation + 360) % 360\n  \n  emit('update', {\n    ...props.element,\n    rotation\n  })\n}\n\n// 停止旋转\nconst stopRotate = () => {\n  isRotating = false\n  document.removeEventListener('mousemove', handleRotate)\n  document.removeEventListener('mouseup', stopRotate)\n}\n\nconst isEditing = ref(false)\nconst editingText = ref('')\nconst textEditorRef = ref(null)\n\n// 开始文字编辑\nconst startTextEdit = (e) => {\n  if (props.element.type !== 'text') return\n  e.stopPropagation()\n  isEditing.value = true\n  editingText.value = props.element.content\n  nextTick(() => {\n    if (textEditorRef.value) {\n      textEditorRef.value.focus()\n    }\n  })\n}\n\n// 完成文字编辑\nconst finishTextEdit = () => {\n  if (!isEditing.value) return\n  isEditing.value = false\n  emit('update', {\n    ...props.element,\n    content: editingText.value\n  })\n}\n\n// 右键菜单状态\nconst showMenu = ref(false)\nconst menuX = ref(0)\nconst menuY = ref(0)\n\n// 显示右键菜单\nconst showContextMenu = (event) => {\n  event.preventDefault()\n  menuX.value = event.clientX\n  menuY.value = event.clientY\n  showMenu.value = true\n}\n\n// 插入字段\nconst insertField = (field) => {\n  const textarea = textEditorRef.value\n  const start = textarea.selectionStart\n  const end = textarea.selectionEnd\n  const fieldText = `{{${field.field}}}`\n  \n  editingText.value = \n    editingText.value.substring(0, start) +\n    fieldText +\n    editingText.value.substring(end)\n\n  // 更新元素\n  emit('update', {\n    ...props.element,\n    content: editingText.value,\n    dataBinding: {\n      field: field.field,\n      label: field.label\n    }\n  })\n\n  // 关闭菜单\n  showMenu.value = false\n}\n\n// 添加事件监听\nonMounted(() => {\n  if (elementRef.value) {\n    elementRef.value.addEventListener('mousedown', startDrag)\n  }\n})\n\nonUnmounted(() => {\n  if (elementRef.value) {\n    elementRef.value.removeEventListener('mousedown', startDrag)\n  }\n  // 清理所有可能的事件监听\n  document.removeEventListener('mousemove', handleDrag)\n  document.removeEventListener('mouseup', stopDrag)\n  document.removeEventListener('mousemove', handleResize)\n  document.removeEventListener('mouseup', stopResize)\n  document.removeEventListener('mousemove', handleRotate)\n  document.removeEventListener('mouseup', stopRotate)\n})\n</script>\n\n<style scoped>\n.design-element {\n  position: absolute;\n  touch-action: none;\n}\n\n.is-selected {\n  outline: 1px solid #409eff;\n}\n\n.resize-handle {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background: #fff;\n  border: 1px solid #409eff;\n  border-radius: 50%;\n}\n\n.rotate-handle {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background: #fff;\n  border: 1px solid #409eff;\n  border-radius: 50%;\n  top: -20px;\n  left: 50%;\n  transform: translateX(-50%);\n  cursor: pointer;\n}\n\n/* 缩放控制点位置 */\n.nw { top: -4px; left: -4px; cursor: nw-resize; }\n.n { top: -4px; left: 50%; transform: translateX(-50%); cursor: n-resize; }\n.ne { top: -4px; right: -4px; cursor: ne-resize; }\n.w { top: 50%; left: -4px; transform: translateY(-50%); cursor: w-resize; }\n.e { top: 50%; right: -4px; transform: translateY(-50%); cursor: e-resize; }\n.sw { bottom: -4px; left: -4px; cursor: sw-resize; }\n.s { bottom: -4px; left: 50%; transform: translateX(-50%); cursor: s-resize; }\n.se { bottom: -4px; right: -4px; cursor: se-resize; }\n\n/* 形状元素样式 */\n.shape-element {\n  width: 100%;\n  height: 100%;\n}\n\n.shape-element.triangle {\n  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);\n}\n\n.text-element {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  overflow: hidden;\n  white-space: pre-wrap;\n  word-break: break-word;\n  line-height: 1.5;\n}\n\n.text-content {\n  width: 100%;\n  height: 100%;\n  padding: 4px;\n  margin: 0;\n}\n\n.text-editor {\n  border: none;\n  outline: none;\n  background: transparent;\n  resize: none;\n  padding: 4px;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.text-element.has-binding {\n  position: relative;\n}\n\n.binding-indicator {\n  position: absolute;\n  top: -18px;\n  left: 0;\n  font-size: 12px;\n  color: #409eff;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 2px 4px;\n  border-radius: 4px;\n  border: 1px solid #409eff;\n  pointer-events: none;\n}\n\n.binding-label {\n  font-size: 12px;\n  color: #409eff;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}