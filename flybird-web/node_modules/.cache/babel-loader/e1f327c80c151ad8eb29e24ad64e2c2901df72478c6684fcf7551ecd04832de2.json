{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"resume-editor\"\n};\nconst _hoisted_2 = {\n  class: \"editor-toolbar\"\n};\nconst _hoisted_3 = {\n  class: \"editor-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 顶部工具栏 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_v_btn, {\n    color: \"primary\",\n    \"prepend-icon\": \"mdi-content-save\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showSaveDialog = true)\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 保存模板 \")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_btn, {\n    color: \"info\",\n    \"prepend-icon\": \"mdi-eye\",\n    class: \"ml-2\",\n    onClick: $setup.previewTemplate\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 预览 \")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" 左侧工具面板 \"), _createVNode($setup[\"ToolbarPanel\"]), _createCommentVNode(\" 中间画布区域 \"), _createVNode($setup[\"Canvas\"], {\n    ref: \"canvas\",\n    onElementSelect: $setup.handleElementSelect,\n    onDataFieldsUpdate: $setup.handleDataFieldsUpdate\n  }, null, 512 /* NEED_PATCH */), _createCommentVNode(\" 右侧属性面板 \"), _createVNode($setup[\"PropertyPanel\"], {\n    \"selected-element\": $setup.selectedElement,\n    \"data-fields\": $setup.dataFields,\n    onUpdate: $setup.handleElementUpdate\n  }, null, 8 /* PROPS */, [\"selected-element\", \"data-fields\"])]), _createCommentVNode(\" 保存模板对话框 \"), _createVNode($setup[\"SaveTemplateDialog\"], {\n    modelValue: $setup.showSaveDialog,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.showSaveDialog = $event),\n    onSave: $setup.handleSaveTemplate\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 消息提示 \"), _createVNode(_component_v_snackbar, {\n    modelValue: $setup.snackbar.show,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.snackbar.show = $event),\n    color: $setup.snackbar.color,\n    timeout: 3000\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.snackbar.text), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"color\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_createVNode","_component_v_btn","color","onClick","_cache","$event","$setup","showSaveDialog","default","_withCtx","_createTextVNode","_","previewTemplate","_hoisted_3","ref","onElementSelect","handleElementSelect","onDataFieldsUpdate","handleDataFieldsUpdate","selectedElement","dataFields","onUpdate","handleElementUpdate","modelValue","onSave","handleSaveTemplate","_component_v_snackbar","snackbar","show","timeout","_toDisplayString","text"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/index.vue"],"sourcesContent":["<template>\n  <div class=\"resume-editor\">\n    <!-- 顶部工具栏 -->\n    <div class=\"editor-toolbar\">\n      <v-btn\n        color=\"primary\"\n        prepend-icon=\"mdi-content-save\"\n        @click=\"showSaveDialog = true\"\n      >\n        保存模板\n      </v-btn>\n      \n      <v-btn\n        color=\"info\"\n        prepend-icon=\"mdi-eye\"\n        class=\"ml-2\"\n        @click=\"previewTemplate\"\n      >\n        预览\n      </v-btn>\n    </div>\n\n    <div class=\"editor-content\">\n      <!-- 左侧工具面板 -->\n      <ToolbarPanel />\n\n      <!-- 中间画布区域 -->\n      <Canvas\n        ref=\"canvas\"\n        @element-select=\"handleElementSelect\"\n        @data-fields-update=\"handleDataFieldsUpdate\"\n      />\n\n      <!-- 右侧属性面板 -->\n      <PropertyPanel\n        :selected-element=\"selectedElement\"\n        :data-fields=\"dataFields\"\n        @update=\"handleElementUpdate\"\n      />\n    </div>\n\n    <!-- 保存模板对话框 -->\n    <SaveTemplateDialog\n      v-model=\"showSaveDialog\"\n      @save=\"handleSaveTemplate\"\n    />\n\n    <!-- 消息提示 -->\n    <v-snackbar\n      v-model=\"snackbar.show\"\n      :color=\"snackbar.color\"\n      :timeout=\"3000\"\n    >\n      {{ snackbar.text }}\n    </v-snackbar>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport ToolbarPanel from './components/ToolbarPanel.vue'\nimport Canvas from './components/Canvas.vue'\nimport PropertyPanel from './components/PropertyPanel.vue'\nimport SaveTemplateDialog from './components/SaveTemplateDialog.vue'\nimport { useTemplateStore } from '@/stores/template'\n\nconst canvas = ref(null)\nconst toolbarRef = ref(null)\nconst selectedElement = ref(null)\nconst dataFields = ref([])\nconst showSaveDialog = ref(false)\nconst snackbar = ref({\n  show: false,\n  text: '',\n  color: 'success'\n})\n\nconst templateStore = useTemplateStore()\n\n// 显示消息\nconst showMessage = (text, color = 'success') => {\n  snackbar.value = {\n    show: true,\n    text,\n    color\n  }\n}\n\n// 处理元素选择\nconst handleElementSelect = (element) => {\n  selectedElement.value = element\n}\n\n// 处理数据字段更新\nconst handleDataFieldsUpdate = (fields) => {\n  dataFields.value = fields\n}\n\n// 处理元素更新\nconst handleElementUpdate = (update) => {\n  if (canvas.value) {\n    canvas.value.handleElementUpdate(update)\n  }\n}\n\n// 预览模板\nconst previewTemplate = () => {\n  // TODO: 实现预览功能\n  showMessage('预览功能开发中')\n}\n\n// 处理保存模板\nconst handleSaveTemplate = async (formData) => {\n  try {\n    const canvasData = canvas.value.getCanvasData()\n    const templateData = {\n      ...formData,\n      content: {\n        elements: canvasData.elements\n      }\n    }\n    await templateStore.saveTemplate(templateData)\n    showMessage('保存成功', 'success')\n    showSaveDialog.value = false\n    // 刷新模板列表\n    toolbarRef.value.refreshTemplates()\n  } catch (error) {\n    showMessage(error.message || '保存失败', 'error')\n  }\n}\n</script>\n\n<style scoped>\n.resume-editor {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background-color: #f5f5f5;\n}\n\n.editor-toolbar {\n  padding: 8px 16px;\n  background-color: #fff;\n  border-bottom: 1px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n}\n\n.editor-content {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAe;;EAEnBA,KAAK,EAAC;AAAgB;;EAmBtBA,KAAK,EAAC;AAAgB;;;;uBArB7BC,mBAAA,CAsDM,OAtDNC,UAsDM,GArDJC,mBAAA,WAAc,EACdC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJC,YAAA,CAMQC,gBAAA;IALNC,KAAK,EAAC,SAAS;IACf,cAAY,EAAC,kBAAkB;IAC9BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,cAAc;;IAP9BC,OAAA,EAAAC,QAAA,CAQO,MAEDL,MAAA,QAAAA,MAAA,OAVNM,gBAAA,CAQO,QAED,E;IAVNC,CAAA;MAYMX,YAAA,CAOQC,gBAAA;IANNC,KAAK,EAAC,MAAM;IACZ,cAAY,EAAC,SAAS;IACtBR,KAAK,EAAC,MAAM;IACXS,OAAK,EAAEG,MAAA,CAAAM;;IAhBhBJ,OAAA,EAAAC,QAAA,CAiBO,MAEDL,MAAA,QAAAA,MAAA,OAnBNM,gBAAA,CAiBO,MAED,E;IAnBNC,CAAA;QAsBIb,mBAAA,CAiBM,OAjBNe,UAiBM,GAhBJhB,mBAAA,YAAe,EACfG,YAAA,CAAgBM,MAAA,mBAEhBT,mBAAA,YAAe,EACfG,YAAA,CAIEM,MAAA;IAHAQ,GAAG,EAAC,QAAQ;IACXC,eAAc,EAAET,MAAA,CAAAU,mBAAmB;IACnCC,kBAAkB,EAAEX,MAAA,CAAAY;kCAGvBrB,mBAAA,YAAe,EACfG,YAAA,CAIEM,MAAA;IAHC,kBAAgB,EAAEA,MAAA,CAAAa,eAAe;IACjC,aAAW,EAAEb,MAAA,CAAAc,UAAU;IACvBC,QAAM,EAAEf,MAAA,CAAAgB;kEAIbzB,mBAAA,aAAgB,EAChBG,YAAA,CAGEM,MAAA;IA7CNiB,UAAA,EA2CejB,MAAA,CAAAC,cAAc;IA3C7B,uBAAAH,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA2CeC,MAAA,CAAAC,cAAc,GAAAF,MAAA;IACtBmB,MAAI,EAAElB,MAAA,CAAAmB;2CAGT5B,mBAAA,UAAa,EACbG,YAAA,CAMa0B,qBAAA;IAtDjBH,UAAA,EAiDejB,MAAA,CAAAqB,QAAQ,CAACC,IAAI;IAjD5B,uBAAAxB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAiDeC,MAAA,CAAAqB,QAAQ,CAACC,IAAI,GAAAvB,MAAA;IACrBH,KAAK,EAAEI,MAAA,CAAAqB,QAAQ,CAACzB,KAAK;IACrB2B,OAAO,EAAE;;IAnDhBrB,OAAA,EAAAC,QAAA,CAqDM,MAAmB,CArDzBC,gBAAA,CAAAoB,gBAAA,CAqDSxB,MAAA,CAAAqB,QAAQ,CAACI,IAAI,iB;IArDtBpB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}