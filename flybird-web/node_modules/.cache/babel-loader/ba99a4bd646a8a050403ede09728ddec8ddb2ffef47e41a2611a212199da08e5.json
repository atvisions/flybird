{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_select = _resolveComponent(\"v-select\");\n  const _component_v_file_input = _resolveComponent(\"v-file-input\");\n  const _component_v_textarea = _resolveComponent(\"v-textarea\");\n  const _component_v_switch = _resolveComponent(\"v-switch\");\n  const _component_v_form = _resolveComponent(\"v-form\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createBlock(_component_v_dialog, {\n    \"model-value\": $props.modelValue,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => _ctx.$emit('update:modelValue', $event)),\n    \"max-width\": \"600\",\n    persistent: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_card, null, {\n      default: _withCtx(() => [_createVNode(_component_v_card_title, {\n        class: \"text-h5\"\n      }, {\n        default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"保存为模板\")])),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createVNode(_component_v_form, {\n          ref: \"form\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_text_field, {\n            modelValue: $setup.formData.name,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.formData.name = $event),\n            label: \"模板名称\",\n            rules: [v => !!v || '请输入模板名称'],\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), $setup.categories.length > 0 ? (_openBlock(), _createBlock(_component_v_select, {\n            key: 0,\n            modelValue: $setup.formData.category,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.formData.category = $event),\n            items: $setup.categories,\n            \"item-title\": \"name\",\n            \"item-value\": \"id\",\n            label: \"选择分类\",\n            rules: [v => !!v || '请选择分类'],\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"items\", \"rules\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_v_file_input, {\n            modelValue: $setup.formData.thumbnail,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.formData.thumbnail = $event),\n            label: \"缩略图\",\n            accept: \"image/*\",\n            rules: [v => !!v || '请上传缩略图'],\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _createVNode(_component_v_textarea, {\n            modelValue: $setup.formData.description,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.formData.description = $event),\n            label: \"模板描述\",\n            rules: [v => !!v || '请输入模板描述'],\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _createVNode(_component_v_switch, {\n            modelValue: $setup.formData.is_vip,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.formData.is_vip = $event),\n            label: \"VIP模板\",\n            color: \"primary\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }, 512 /* NEED_PATCH */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n          color: \"grey-darken-1\",\n          variant: \"text\",\n          onClick: _cache[5] || (_cache[5] = $event => _ctx.$emit('update:modelValue', false))\n        }, {\n          default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\" 取消 \")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_v_btn, {\n          color: \"primary\",\n          variant: \"text\",\n          loading: $setup.loading,\n          disabled: !$setup.isFormValid,\n          onClick: $setup.handleSave\n        }, {\n          default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\" 保存 \")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"loading\", \"disabled\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model-value\"]);\n}","map":{"version":3,"names":["_createBlock","_component_v_dialog","$props","modelValue","_cache","$event","_ctx","$emit","persistent","default","_withCtx","_createVNode","_component_v_card","_component_v_card_title","class","_createTextVNode","_","_component_v_card_text","_component_v_form","ref","_component_v_text_field","$setup","formData","name","label","rules","v","required","categories","length","_component_v_select","key","category","items","_createCommentVNode","_component_v_file_input","thumbnail","accept","_component_v_textarea","description","_component_v_switch","is_vip","color","_component_v_card_actions","_component_v_spacer","_component_v_btn","variant","onClick","loading","disabled","isFormValid","handleSave"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/SaveTemplateDialog.vue"],"sourcesContent":["<template>\n  <v-dialog\n    :model-value=\"modelValue\"\n    @update:model-value=\"$emit('update:modelValue', $event)\"\n    max-width=\"600\"\n    persistent\n  >\n    <v-card>\n      <v-card-title class=\"text-h5\">保存为模板</v-card-title>\n      <v-card-text>\n        <v-form ref=\"form\">\n          <v-text-field\n            v-model=\"formData.name\"\n            label=\"模板名称\"\n            :rules=\"[v => !!v || '请输入模板名称']\"\n            required\n          ></v-text-field>\n\n          <v-select\n            v-if=\"categories.length > 0\"\n            v-model=\"formData.category\"\n            :items=\"categories\"\n            item-title=\"name\"\n            item-value=\"id\"\n            label=\"选择分类\"\n            :rules=\"[v => !!v || '请选择分类']\"\n            required\n          ></v-select>\n\n          <v-file-input\n            v-model=\"formData.thumbnail\"\n            label=\"缩略图\"\n            accept=\"image/*\"\n            :rules=\"[v => !!v || '请上传缩略图']\"\n            required\n          ></v-file-input>\n\n          <v-textarea\n            v-model=\"formData.description\"\n            label=\"模板描述\"\n            :rules=\"[v => !!v || '请输入模板描述']\"\n            required\n          ></v-textarea>\n\n          <v-switch\n            v-model=\"formData.is_vip\"\n            label=\"VIP模板\"\n            color=\"primary\"\n          ></v-switch>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn \n          color=\"grey-darken-1\" \n          variant=\"text\" \n          @click=\"$emit('update:modelValue', false)\"\n        >\n          取消\n        </v-btn>\n        <v-btn\n          color=\"primary\"\n          variant=\"text\"\n          :loading=\"loading\"\n          :disabled=\"!isFormValid\"\n          @click=\"handleSave\"\n        >\n          保存\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted, computed } from 'vue'\nimport { useTemplateStore } from '@/stores/template'\n\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'save'])\n\n// 表单数据\nconst form = ref(null)\nconst loading = ref(false)\nconst formData = ref({\n  name: '',\n  category: null,\n  thumbnail: null,\n  description: '',\n  is_vip: false\n})\n\n// 计算表单是否有效\nconst isFormValid = computed(() => {\n  return formData.value.name && \n         formData.value.category && \n         formData.value.thumbnail && \n         formData.value.description\n})\n\n// 模板分类\nconst templateStore = useTemplateStore()\nconst categories = ref([])\n\n// 获取分类数据\nconst fetchCategories = async () => {\n  try {\n    loading.value = true\n    const response = await templateStore.getCategories()\n    categories.value = response || []\n  } catch (error) {\n    console.error('获取分类失败:', error)\n    categories.value = []\n  } finally {\n    loading.value = false\n  }\n}\n\n// 监听对话框显示状态\nwatch(() => props.modelValue, (val) => {\n  if (val && categories.value.length === 0) {\n    fetchCategories()\n  }\n  if (!val) {\n    // 重置表单\n    form.value?.reset()\n    formData.value = {\n      name: '',\n      category: null,\n      thumbnail: null,\n      description: '',\n      is_vip: false\n    }\n  }\n})\n\n// 保存模板\nconst handleSave = async () => {\n  const { valid } = await form.value.validate()\n  if (!valid) return\n\n  loading.value = true\n  try {\n    emit('save', formData.value)\n  } catch (error) {\n    console.error('保存失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 初始化时获取分类数据\nonMounted(() => {\n  if (props.modelValue) {\n    fetchCategories()\n  }\n})\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}