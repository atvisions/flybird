{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"resume-editor\"\n};\nconst _hoisted_2 = {\n  class: \"editor-header\"\n};\nconst _hoisted_3 = {\n  class: \"left-actions\"\n};\nconst _hoisted_4 = {\n  class: \"scale-text\"\n};\nconst _hoisted_5 = {\n  class: \"right-actions\"\n};\nconst _hoisted_6 = {\n  class: \"editor-main\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_btn_group = _resolveComponent(\"v-btn-group\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_v_btn_group, null, {\n    default: _withCtx(() => [_createVNode(_component_v_btn, {\n      icon: \"mdi-minus\",\n      onClick: $setup.handleZoomOut,\n      disabled: $setup.scale <= 0.5\n    }, null, 8 /* PROPS */, [\"disabled\"]), _createVNode(_component_v_btn, {\n      icon: \"mdi-plus\",\n      onClick: $setup.handleZoomIn,\n      disabled: $setup.scale >= 2\n    }, null, 8 /* PROPS */, [\"disabled\"]), _createVNode(_component_v_btn, {\n      icon: \"mdi-refresh\",\n      onClick: $setup.handleZoomReset\n    })]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"span\", _hoisted_4, _toDisplayString(Math.round($setup.scale * 100)) + \"%\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_v_btn, {\n    color: \"primary\",\n    \"prepend-icon\": \"mdi-content-save\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showSaveDialog = true)\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 保存为模板 \")])),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode($setup[\"ToolbarPanel\"]), _createVNode($setup[\"Canvas\"], {\n    ref: \"canvasRef\",\n    scale: $setup.scale,\n    onElementSelect: $setup.handleElementSelect,\n    onDataFieldsUpdate: $setup.handleDataFieldsUpdate\n  }, null, 8 /* PROPS */, [\"scale\"]), _createVNode($setup[\"PropertyPanel\"], {\n    \"selected-element\": $setup.selectedElement,\n    \"data-fields\": $setup.dataFields,\n    onUpdate: $setup.handleElementUpdate\n  }, null, 8 /* PROPS */, [\"selected-element\", \"data-fields\"])]), _createVNode($setup[\"SaveTemplateDialog\"], {\n    modelValue: $setup.showSaveDialog,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.showSaveDialog = $event),\n    onSave: $setup.handleSaveTemplate\n  }, null, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_v_btn_group","default","_withCtx","_component_v_btn","icon","onClick","$setup","handleZoomOut","disabled","scale","handleZoomIn","handleZoomReset","_","_hoisted_4","_toDisplayString","Math","round","_hoisted_5","color","_cache","$event","showSaveDialog","_createTextVNode","_hoisted_6","ref","onElementSelect","handleElementSelect","onDataFieldsUpdate","handleDataFieldsUpdate","selectedElement","dataFields","onUpdate","handleElementUpdate","modelValue","onSave","handleSaveTemplate"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/index.vue"],"sourcesContent":["<template>\n  <div class=\"resume-editor\">\n    <div class=\"editor-header\">\n      <div class=\"left-actions\">\n        <v-btn-group>\n          <v-btn\n            icon=\"mdi-minus\"\n            @click=\"handleZoomOut\"\n            :disabled=\"scale <= 0.5\"\n          ></v-btn>\n          <v-btn\n            icon=\"mdi-plus\"\n            @click=\"handleZoomIn\"\n            :disabled=\"scale >= 2\"\n          ></v-btn>\n          <v-btn icon=\"mdi-refresh\" @click=\"handleZoomReset\"></v-btn>\n        </v-btn-group>\n        <span class=\"scale-text\">{{ Math.round(scale * 100) }}%</span>\n      </div>\n      <div class=\"right-actions\">\n        <v-btn\n          color=\"primary\"\n          prepend-icon=\"mdi-content-save\"\n          @click=\"showSaveDialog = true\"\n        >\n          保存为模板\n        </v-btn>\n      </div>\n    </div>\n    \n    <div class=\"editor-main\">\n      <ToolbarPanel />\n      <Canvas \n        ref=\"canvasRef\" \n        :scale=\"scale\"\n        @element-select=\"handleElementSelect\"\n        @data-fields-update=\"handleDataFieldsUpdate\"\n      />\n      <PropertyPanel \n        :selected-element=\"selectedElement\"\n        :data-fields=\"dataFields\"\n        @update=\"handleElementUpdate\"\n      />\n    </div>\n\n    <SaveTemplateDialog\n      v-model=\"showSaveDialog\"\n      @save=\"handleSaveTemplate\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport ToolbarPanel from './components/ToolbarPanel.vue'\nimport Canvas from './components/Canvas.vue'\nimport PropertyPanel from './components/PropertyPanel.vue'\nimport SaveTemplateDialog from './components/SaveTemplateDialog.vue'\nimport { useTemplateStore } from '@/stores/template'\nimport { useMessage } from '@/composables/useMessage'\n\n// 画布缩放\nconst scale = ref(1)\nconst canvasRef = ref(null)\n\n// 保存模板对话框\nconst showSaveDialog = ref(false)\n\n// 选中元素\nconst selectedElement = ref(null)\n\n// 模板store\nconst templateStore = useTemplateStore()\nconst { showSuccess, showError } = useMessage()\n\n// 处理元素选择\nconst handleElementSelect = (element) => {\n  selectedElement.value = element\n}\n\n// 处理元素更新\nconst handleElementUpdate = (updatedElement) => {\n  if (canvasRef.value) {\n    canvasRef.value.handleElementUpdate(updatedElement)\n  }\n}\n\n// 处理模板保存\nconst handleSaveTemplate = async (templateData) => {\n  try {\n    const layoutData = canvasRef.value.exportLayoutData()\n    \n    // 构建模板数据\n    const data = {\n      ...templateData,\n      components: layoutData.elements,\n      layout: {\n        type: 'grid',\n        columns: 12,\n        gap: '16px',\n        areas: []\n      },\n      theme: {\n        colors: {\n          primary: '#2c3e50',\n          secondary: '#7f8c8d',\n          background: '#f5f7fa',\n          accent: '#3498db'\n        },\n        typography: {\n          title: {\n            font: 'Arial',\n            size: '24px',\n            weight: 'bold'\n          },\n          body: {\n            font: 'Arial',\n            size: '14px',\n            weight: 'normal'\n          }\n        },\n        spacing: {\n          unit: '1rem',\n          section: '2rem'\n        }\n      }\n    }\n\n    // 保存模板\n    await templateStore.saveTemplate(data)\n    showSuccess('模板保存成功')\n    showSaveDialog.value = false\n  } catch (error) {\n    console.error('保存模板失败:', error)\n    showError('保存模板失败: ' + error.message)\n  }\n}\n\n// 处理缩放\nconst handleZoomIn = () => {\n  if (scale.value < 2) {\n    scale.value += 0.1\n  }\n}\n\nconst handleZoomOut = () => {\n  if (scale.value > 0.5) {\n    scale.value -= 0.1\n  }\n}\n\nconst handleZoomReset = () => {\n  scale.value = 1\n}\n\nconst dataFields = ref([])\n\n// 处理数据字段更新\nconst handleDataFieldsUpdate = (fields) => {\n  dataFields.value = fields\n}\n</script>\n\n<style scoped>\n.resume-editor {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.editor-header {\n  height: 64px;\n  padding: 0 20px;\n  border-bottom: 1px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #ffffff;\n}\n\n.left-actions,\n.right-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.scale-text {\n  font-size: 14px;\n  color: #666;\n  min-width: 48px;\n}\n\n.editor-main {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAc;;EAcjBA,KAAK,EAAC;AAAY;;EAErBA,KAAK,EAAC;AAAe;;EAWvBA,KAAK,EAAC;AAAa;;;;uBA7B1BC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CJC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJD,mBAAA,CAeM,OAfNE,UAeM,GAdJC,YAAA,CAYcC,sBAAA;IAhBtBC,OAAA,EAAAC,QAAA,CAKU,MAIS,CAJTH,YAAA,CAISI,gBAAA;MAHPC,IAAI,EAAC,WAAW;MACfC,OAAK,EAAEC,MAAA,CAAAC,aAAa;MACpBC,QAAQ,EAAEF,MAAA,CAAAG,KAAK;2CAElBV,YAAA,CAISI,gBAAA;MAHPC,IAAI,EAAC,UAAU;MACdC,OAAK,EAAEC,MAAA,CAAAI,YAAY;MACnBF,QAAQ,EAAEF,MAAA,CAAAG,KAAK;2CAElBV,YAAA,CAA2DI,gBAAA;MAApDC,IAAI,EAAC,aAAa;MAAEC,OAAK,EAAEC,MAAA,CAAAK;;IAf5CC,CAAA;MAiBQhB,mBAAA,CAA8D,QAA9DiB,UAA8D,EAAAC,gBAAA,CAAlCC,IAAI,CAACC,KAAK,CAACV,MAAA,CAAAG,KAAK,WAAU,GAAC,gB,GAEzDb,mBAAA,CAQM,OARNqB,UAQM,GAPJlB,YAAA,CAMQI,gBAAA;IALNe,KAAK,EAAC,SAAS;IACf,cAAY,EAAC,kBAAkB;IAC9Bb,OAAK,EAAAc,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEd,MAAA,CAAAe,cAAc;;IAvBhCpB,OAAA,EAAAC,QAAA,CAwBS,MAEDiB,MAAA,QAAAA,MAAA,OA1BRG,gBAAA,CAwBS,SAED,E;IA1BRV,CAAA;UA8BIhB,mBAAA,CAaM,OAbN2B,UAaM,GAZJxB,YAAA,CAAgBO,MAAA,mBAChBP,YAAA,CAKEO,MAAA;IAJAkB,GAAG,EAAC,WAAW;IACdf,KAAK,EAAEH,MAAA,CAAAG,KAAK;IACZgB,eAAc,EAAEnB,MAAA,CAAAoB,mBAAmB;IACnCC,kBAAkB,EAAErB,MAAA,CAAAsB;sCAEvB7B,YAAA,CAIEO,MAAA;IAHC,kBAAgB,EAAEA,MAAA,CAAAuB,eAAe;IACjC,aAAW,EAAEvB,MAAA,CAAAwB,UAAU;IACvBC,QAAM,EAAEzB,MAAA,CAAA0B;kEAIbjC,YAAA,CAGEO,MAAA;IAhDN2B,UAAA,EA8Ce3B,MAAA,CAAAe,cAAc;IA9C7B,uBAAAF,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA8Ced,MAAA,CAAAe,cAAc,GAAAD,MAAA;IACtBc,MAAI,EAAE5B,MAAA,CAAA6B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}