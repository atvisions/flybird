{"ast":null,"code":"import request from '@/utils/request';\n\n// 获取模板分类列表\nexport function getCategories() {\n  // 返回默认分类\n  return Promise.resolve([{\n    id: 1,\n    name: '简历'\n  }, {\n    id: 2,\n    name: '求职信'\n  }, {\n    id: 3,\n    name: '个人简介'\n  }]);\n}\n\n// 保存模板\nexport function saveTemplate(data) {\n  const formData = new FormData();\n\n  // 添加基本字段\n  formData.append('name', data.name);\n  formData.append('category', data.category);\n  formData.append('description', data.description);\n  formData.append('is_vip', data.is_vip);\n\n  // 添加缩略图\n  if (data.thumbnail) {\n    formData.append('thumbnail', data.thumbnail);\n  }\n\n  // 添加画布内容数据\n  if (data.components) {\n    formData.append('content', JSON.stringify({\n      elements: data.components\n    }));\n  }\n\n  // 打印请求数据\n  console.log('请求数据:', {\n    name: data.name,\n    category: data.category,\n    description: data.description,\n    is_vip: data.is_vip,\n    thumbnail: data.thumbnail,\n    content: JSON.parse(formData.get('content') || '{}')\n  });\n  return request({\n    url: '/api/v1/resume/templates/',\n    method: 'post',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  }).catch(error => {\n    if (error.response?.data) {\n      const errors = error.response.data;\n      const errorMessages = [];\n\n      // 处理字段错误\n      for (const field in errors) {\n        if (Array.isArray(errors[field])) {\n          errorMessages.push(`${field}: ${errors[field].join(', ')}`);\n        }\n      }\n      console.error('服务器响应错误:', errors);\n      throw new Error(errorMessages.join('\\n') || '保存失败，请检查表单数据');\n    }\n    throw error;\n  });\n}\n\n// 获取模板列表\nexport function getTemplates(params) {\n  return request({\n    url: '/api/v1/resume/templates/',\n    method: 'get',\n    params\n  });\n}\n\n// 获取模板详情\nexport function getTemplateDetail(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'get'\n  });\n}\n\n// 更新模板\nexport function updateTemplate(id, data) {\n  const formData = new FormData();\n\n  // 添加基本字段\n  if (data.name) formData.append('name', data.name);\n  if (data.category) formData.append('category', data.category);\n  if (data.description) formData.append('description', data.description);\n  if (typeof data.is_vip === 'boolean') formData.append('is_vip', data.is_vip);\n\n  // 添加缩略图\n  if (data.thumbnail && data.thumbnail.length > 0) {\n    formData.append('thumbnail', data.thumbnail[0]);\n  }\n\n  // 添加布局数据\n  if (data.layout) {\n    formData.append('layout', JSON.stringify(data.layout));\n  }\n\n  // 添加组件数据\n  if (data.components) {\n    formData.append('components', JSON.stringify(data.components));\n  }\n\n  // 添加主题数据\n  if (data.theme) {\n    formData.append('theme', JSON.stringify(data.theme));\n  }\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'patch',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n}\n\n// 删除模板\nexport function deleteTemplate(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'delete'\n  });\n}\n\n// 提交模板审核\nexport function submitForReview(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/submit_for_review/`,\n    method: 'post'\n  });\n}","map":{"version":3,"names":["request","getCategories","Promise","resolve","id","name","saveTemplate","data","formData","FormData","append","category","description","is_vip","thumbnail","components","JSON","stringify","elements","console","log","content","parse","get","url","method","headers","catch","error","response","errors","errorMessages","field","Array","isArray","push","join","Error","getTemplates","params","getTemplateDetail","updateTemplate","length","layout","theme","deleteTemplate","submitForReview"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/api/template.js"],"sourcesContent":["import request from '@/utils/request'\n\n// 获取模板分类列表\nexport function getCategories() {\n  // 返回默认分类\n  return Promise.resolve([\n    { id: 1, name: '简历' },\n    { id: 2, name: '求职信' },\n    { id: 3, name: '个人简介' }\n  ])\n}\n\n// 保存模板\nexport function saveTemplate(data) {\n  const formData = new FormData()\n  \n  // 添加基本字段\n  formData.append('name', data.name)\n  formData.append('category', data.category)\n  formData.append('description', data.description)\n  formData.append('is_vip', data.is_vip)\n  \n  // 添加缩略图\n  if (data.thumbnail) {\n    formData.append('thumbnail', data.thumbnail)\n  }\n  \n  // 添加画布内容数据\n  if (data.components) {\n    formData.append('content', JSON.stringify({\n      elements: data.components\n    }))\n  }\n\n  // 打印请求数据\n  console.log('请求数据:', {\n    name: data.name,\n    category: data.category,\n    description: data.description,\n    is_vip: data.is_vip,\n    thumbnail: data.thumbnail,\n    content: JSON.parse(formData.get('content') || '{}')\n  })\n\n  return request({\n    url: '/api/v1/resume/templates/',\n    method: 'post',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  }).catch(error => {\n    if (error.response?.data) {\n      const errors = error.response.data\n      const errorMessages = []\n      \n      // 处理字段错误\n      for (const field in errors) {\n        if (Array.isArray(errors[field])) {\n          errorMessages.push(`${field}: ${errors[field].join(', ')}`)\n        }\n      }\n      \n      console.error('服务器响应错误:', errors)\n      throw new Error(errorMessages.join('\\n') || '保存失败，请检查表单数据')\n    }\n    throw error\n  })\n}\n\n// 获取模板列表\nexport function getTemplates(params) {\n  return request({\n    url: '/api/v1/resume/templates/',\n    method: 'get',\n    params\n  })\n}\n\n// 获取模板详情\nexport function getTemplateDetail(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'get'\n  })\n}\n\n// 更新模板\nexport function updateTemplate(id, data) {\n  const formData = new FormData()\n  \n  // 添加基本字段\n  if (data.name) formData.append('name', data.name)\n  if (data.category) formData.append('category', data.category)\n  if (data.description) formData.append('description', data.description)\n  if (typeof data.is_vip === 'boolean') formData.append('is_vip', data.is_vip)\n  \n  // 添加缩略图\n  if (data.thumbnail && data.thumbnail.length > 0) {\n    formData.append('thumbnail', data.thumbnail[0])\n  }\n  \n  // 添加布局数据\n  if (data.layout) {\n    formData.append('layout', JSON.stringify(data.layout))\n  }\n  \n  // 添加组件数据\n  if (data.components) {\n    formData.append('components', JSON.stringify(data.components))\n  }\n  \n  // 添加主题数据\n  if (data.theme) {\n    formData.append('theme', JSON.stringify(data.theme))\n  }\n\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'patch',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  })\n}\n\n// 删除模板\nexport function deleteTemplate(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/`,\n    method: 'delete'\n  })\n}\n\n// 提交模板审核\nexport function submitForReview(id) {\n  return request({\n    url: `/api/v1/resume/templates/${id}/submit_for_review/`,\n    method: 'post'\n  })\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}