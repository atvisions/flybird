{"ast":null,"code":"import _objectSpread from \"/Users/liuzhao/Documents/Projects/flybird/flybird-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { defineStore } from 'pinia';\nimport profile from '@/api/profile';\nexport const useProfileStore = defineStore('profile', {\n  state: () => ({\n    basicInfo: null,\n    avatarUpdateTime: null\n  }),\n  getters: {\n    profileAvatar: state => state.basicInfo?.avatar || null\n  },\n  actions: {\n    // 更新档案头像\n    updateProfileAvatar(avatarUrl) {\n      if (this.basicInfo) {\n        this.basicInfo = _objectSpread(_objectSpread({}, this.basicInfo), {}, {\n          avatar: avatarUrl\n        });\n        this.avatarUpdateTime = Date.now();\n      }\n    },\n    // 获取档案基本信息\n    async fetchBasicInfo() {\n      try {\n        const response = await profile.getData();\n        if (response?.data?.code === 200) {\n          this.basicInfo = response.data.data.basic_info;\n          return this.basicInfo;\n        }\n        return null;\n      } catch (error) {\n        console.error('获取档案基本信息失败:', error);\n        throw error;\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","profile","useProfileStore","state","basicInfo","avatarUpdateTime","getters","profileAvatar","avatar","actions","updateProfileAvatar","avatarUrl","_objectSpread","Date","now","fetchBasicInfo","response","getData","data","code","basic_info","error","console"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/profile.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport profile from '@/api/profile'\n\nexport const useProfileStore = defineStore('profile', {\n  state: () => ({\n    basicInfo: null,\n    avatarUpdateTime: null\n  }),\n\n  getters: {\n    profileAvatar: (state) => state.basicInfo?.avatar || null\n  },\n\n  actions: {\n    // 更新档案头像\n    updateProfileAvatar(avatarUrl) {\n      if (this.basicInfo) {\n        this.basicInfo = {\n          ...this.basicInfo,\n          avatar: avatarUrl\n        }\n        this.avatarUpdateTime = Date.now()\n      }\n    },\n\n    // 获取档案基本信息\n    async fetchBasicInfo() {\n      try {\n        const response = await profile.getData()\n        if (response?.data?.code === 200) {\n          this.basicInfo = response.data.data.basic_info\n          return this.basicInfo\n        }\n        return null\n      } catch (error) {\n        console.error('获取档案基本信息失败:', error)\n        throw error\n      }\n    }\n  }\n}) "],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,OAAO,MAAM,eAAe;AAEnC,OAAO,MAAMC,eAAe,GAAGF,WAAW,CAAC,SAAS,EAAE;EACpDG,KAAK,EAAEA,CAAA,MAAO;IACZC,SAAS,EAAE,IAAI;IACfC,gBAAgB,EAAE;EACpB,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,aAAa,EAAGJ,KAAK,IAAKA,KAAK,CAACC,SAAS,EAAEI,MAAM,IAAI;EACvD,CAAC;EAEDC,OAAO,EAAE;IACP;IACAC,mBAAmBA,CAACC,SAAS,EAAE;MAC7B,IAAI,IAAI,CAACP,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,GAAAQ,aAAA,CAAAA,aAAA,KACT,IAAI,CAACR,SAAS;UACjBI,MAAM,EAAEG;QAAS,EAClB;QACD,IAAI,CAACN,gBAAgB,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC;MACpC;IACF,CAAC;IAED;IACA,MAAMC,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMf,OAAO,CAACgB,OAAO,CAAC,CAAC;QACxC,IAAID,QAAQ,EAAEE,IAAI,EAAEC,IAAI,KAAK,GAAG,EAAE;UAChC,IAAI,CAACf,SAAS,GAAGY,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACE,UAAU;UAC9C,OAAO,IAAI,CAAChB,SAAS;QACvB;QACA,OAAO,IAAI;MACb,CAAC,CAAC,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;QACnC,MAAMA,KAAK;MACb;IACF;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}