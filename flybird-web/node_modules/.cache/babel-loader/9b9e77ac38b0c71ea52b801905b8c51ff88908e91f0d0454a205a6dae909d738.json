{"ast":null,"code":"import _objectSpread from \"/Users/liuzhao/Documents/Projects/flybird/flybird-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { defineStore } from 'pinia';\nimport request from '@/utils/request';\nimport { user } from '@/api/user';\nimport defaultAvatar from '@/assets/images/default-avatar.png';\nimport { showToast } from '@/components/ToastMessage';\nimport { useAuthStore } from '@/stores/auth';\nexport const useAccountStore = defineStore('account', {\n  state: () => ({\n    userInfo: JSON.parse(localStorage.getItem('userInfo')) || null,\n    avatarUpdateTime: null,\n    background_image: localStorage.getItem('background_image') || null\n  }),\n  getters: {\n    avatar: state => {\n      const avatar = state.userInfo?.avatar;\n      if (!avatar || avatar === 'null' || avatar === 'undefined' || typeof avatar === 'undefined' || avatar === null) {\n        return defaultAvatar;\n      }\n      return avatar;\n    },\n    username: state => state.userInfo?.username || '未设置用户名',\n    uid: state => state.userInfo?.uid,\n    background: state => state.userInfo?.background_image || state.background_image,\n    phone: state => state.userInfo?.phone,\n    email: state => state.userInfo?.email,\n    position: state => state.userInfo?.position,\n    bio: state => state.userInfo?.bio,\n    isVip: state => state.userInfo?.is_vip || false,\n    isStaff: state => state.userInfo?.is_staff || false\n  },\n  actions: {\n    async fetchUserInfo() {\n      const authStore = useAuthStore();\n      if (!authStore.isAuthenticated) {\n        return null;\n      }\n      try {\n        const response = await user.getUserInfo();\n        if (response?.data?.code === 200) {\n          const userData = response.data.data;\n          this.userInfo = _objectSpread(_objectSpread({}, userData), {}, {\n            id: userData.id,\n            uid: userData.uid,\n            username: userData.username,\n            phone: userData.phone || null,\n            email: userData.email || null,\n            avatar: userData.avatar || null,\n            position: userData.position || null,\n            bio: userData.bio || null,\n            is_vip: userData.is_vip || false,\n            vip_type: userData.vip_type || 'none',\n            vip_expire_time: userData.vip_expire_time || null,\n            vip_status: userData.vip_status || '普通用户',\n            is_staff: userData.is_staff || false,\n            background_image: userData.background_image || null\n          });\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo));\n          return this.userInfo;\n        }\n        return null;\n      } catch (error) {\n        console.error('获取用户信息失败:', error);\n        throw error;\n      }\n    },\n    async updateAvatar(formData) {\n      try {\n        const file = formData.get('avatar');\n        const response = await request.post('/api/v1/users/userInfo/avatar/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        if (response?.data?.code === 200) {\n          this.avatarUpdateTime = Date.now();\n          this.userInfo = _objectSpread(_objectSpread({}, this.userInfo), {}, {\n            avatar: response.data.data.avatar\n          });\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo));\n          return response;\n        }\n        throw new Error(response?.data?.message || '更新头像失败');\n      } catch (error) {\n        console.error('Failed to update avatar:', error);\n        throw error;\n      }\n    },\n    async updateBackground(formData) {\n      try {\n        const file = formData.get('background');\n        const response = await user.updateBackground(file);\n        if (response?.data?.code === 200) {\n          this.background_image = response.data.data.background;\n          this.userInfo = _objectSpread(_objectSpread({}, this.userInfo), {}, {\n            background_image: response.data.data.background\n          });\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo));\n          localStorage.setItem('background_image', this.background_image);\n          return response;\n        }\n        throw new Error(response?.data?.message || '更新背景图失败');\n      } catch (error) {\n        console.error('Failed to update background:', error);\n        throw error;\n      }\n    },\n    async updateUserInfo(data) {\n      try {\n        const response = await user.updateUserInfo(data);\n        if (response?.data?.code === 200) {\n          const userData = response.data.data;\n          if (data.avatar) {\n            this.avatarUpdateTime = Date.now();\n          }\n          this.userInfo = _objectSpread(_objectSpread({}, this.userInfo), {}, {\n            avatar: userData.avatar,\n            id: userData.id,\n            uid: userData.uid,\n            username: userData.username,\n            phone: userData.phone || null,\n            email: userData.email || null,\n            position: userData.position || null,\n            bio: userData.bio || null,\n            is_vip: userData.is_vip || false,\n            is_staff: userData.is_staff || false\n          });\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo));\n          return response;\n        }\n        throw new Error(response?.data?.message || '更新用户信息失败');\n      } catch (error) {\n        console.error('Failed to update user info:', error);\n        throw error;\n      }\n    },\n    clearUserInfo() {\n      this.userInfo = null;\n      this.avatarUpdateTime = null;\n      this.background_image = null;\n    },\n    async deleteAccount(data) {\n      try {\n        const response = await user.deleteAccount(data);\n        if (response?.data?.code === 200) {\n          const authStore = useAuthStore();\n          authStore.clearAuth();\n          this.clearUserInfo();\n          localStorage.clear();\n          showToast('账号已注销', 'success');\n          return true;\n        }\n        return false;\n      } catch (error) {\n        if (error.response?.status === 401) {\n          const authStore = useAuthStore();\n          authStore.clearAuth();\n          this.clearUserInfo();\n          localStorage.clear();\n          showToast('账号已注销', 'success');\n          return true;\n        }\n        console.error('Failed to delete account:', error);\n        throw error;\n      }\n    },\n    async changePhone(data) {\n      try {\n        console.log('Starting phone change process:', {\n          phone: data.phone,\n          oldPhone: this.userInfo?.phone,\n          hasCode: !!data.code\n        });\n\n        // 验证手机号格式\n        const phoneRegex = /^1[3-9]\\d{9}$/;\n        if (!phoneRegex.test(data.phone)) {\n          throw new Error('请输入正确的手机号格式');\n        }\n\n        // 验证验证码格式\n        if (data.code && !/^\\d{6}$/.test(data.code)) {\n          throw new Error('请输入6位数字验证码');\n        }\n\n        // 如果没有验证码，先发送验证码\n        if (!data.code) {\n          console.log('No code provided, sending verification code');\n          await account.sendVerifyCode({\n            phone: data.phone,\n            scene: 'change_phone',\n            type: 'sms'\n          });\n          showToast('验证码已发送', 'success');\n          return true;\n        }\n        console.log('Attempting to change phone with code');\n        const response = await account.changePhone({\n          phone: data.phone,\n          code: data.code,\n          oldPhone: this.userInfo?.phone\n        });\n        console.log('Change phone response:', response);\n        if (response?.data?.code === 200) {\n          // 更新本地用户信息\n          this.userInfo = _objectSpread(_objectSpread({}, this.userInfo), {}, {\n            phone: data.phone\n          });\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo));\n          showToast('手机号更新成功', 'success');\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('手机号更新失败:', error);\n        if (error.response) {\n          console.error('Error response:', {\n            status: error.response.status,\n            data: error.response.data,\n            headers: error.response.headers,\n            message: error.response.data?.message || error.response.data?.detail\n          });\n        }\n\n        // 提供更友好的错误信息\n        let errorMessage;\n        if (error.isPhoneDisabled) {\n          errorMessage = error.friendlyMessage;\n        } else {\n          errorMessage = error.response?.data?.message || error.response?.data?.detail || error.response?.data?.error || error.message || '手机号更新失败，请稍后重试';\n        }\n\n        // 如果是发送验证码时的错误，添加更多提示信息\n        if (error.response?.data?.code === 'sms_limit_exceeded') {\n          errorMessage = '该手机号发送验证码次数过多，请24小时后再试';\n        } else if (error.response?.data?.code === 'phone_blacklisted') {\n          errorMessage = '该手机号已被限制使用，请更换其他手机号';\n        }\n        showToast(errorMessage, 'error');\n        throw error;\n      }\n    },\n    // 发送验证码\n    async sendVerifyCode(phone, scene) {\n      try {\n        const response = await account.sendVerifyCode({\n          phone,\n          scene,\n          type: 'sms'\n        });\n        if (response?.data?.code === 200) {\n          showToast('验证码已发送', 'success');\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('发送验证码失败:', error);\n        let errorMessage;\n        if (error.response?.data?.code === 'sms_limit_exceeded') {\n          errorMessage = '该手机号发送验证码次数过多，请24小时后再试';\n        } else if (error.response?.data?.code === 'phone_blacklisted') {\n          errorMessage = '该手机号已被限制使用，请更换其他手机号';\n        } else {\n          errorMessage = error.response?.data?.message || '发送验证码失败，请稍后重试';\n        }\n        showToast(errorMessage, 'error');\n        throw error;\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","request","user","defaultAvatar","showToast","useAuthStore","useAccountStore","state","userInfo","JSON","parse","localStorage","getItem","avatarUpdateTime","background_image","getters","avatar","username","uid","background","phone","email","position","bio","isVip","is_vip","isStaff","is_staff","actions","fetchUserInfo","authStore","isAuthenticated","response","getUserInfo","data","code","userData","_objectSpread","id","vip_type","vip_expire_time","vip_status","setItem","stringify","error","console","updateAvatar","formData","file","get","post","headers","Date","now","Error","message","updateBackground","updateUserInfo","clearUserInfo","deleteAccount","clearAuth","clear","status","changePhone","log","oldPhone","hasCode","phoneRegex","test","account","sendVerifyCode","scene","type","detail","errorMessage","isPhoneDisabled","friendlyMessage"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/account.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport request from '@/utils/request'\nimport { user } from '@/api/user'\nimport defaultAvatar from '@/assets/images/default-avatar.png'\nimport { showToast } from '@/components/ToastMessage'\nimport { useAuthStore } from '@/stores/auth'\n\nexport const useAccountStore = defineStore('account', {\n  state: () => ({\n    userInfo: JSON.parse(localStorage.getItem('userInfo')) || null,\n    avatarUpdateTime: null,\n    background_image: localStorage.getItem('background_image') || null\n  }),\n\n  getters: {\n    avatar: (state) => {\n      const avatar = state.userInfo?.avatar\n      if (!avatar || avatar === 'null' || avatar === 'undefined' || typeof avatar === 'undefined' || avatar === null) {\n        return defaultAvatar\n      }\n      return avatar\n    },\n    username: (state) => state.userInfo?.username || '未设置用户名',\n    uid: (state) => state.userInfo?.uid,\n    background: (state) => state.userInfo?.background_image || state.background_image,\n    phone: (state) => state.userInfo?.phone,\n    email: (state) => state.userInfo?.email,\n    position: (state) => state.userInfo?.position,\n    bio: (state) => state.userInfo?.bio,\n    isVip: (state) => state.userInfo?.is_vip || false,\n    isStaff: (state) => state.userInfo?.is_staff || false\n  },\n\n  actions: {\n    async fetchUserInfo() {\n      const authStore = useAuthStore()\n      if (!authStore.isAuthenticated) {\n        return null\n      }\n      try {\n        const response = await user.getUserInfo()\n        if (response?.data?.code === 200) {\n          const userData = response.data.data\n          \n          this.userInfo = {\n            ...userData,\n            id: userData.id,\n            uid: userData.uid,\n            username: userData.username,\n            phone: userData.phone || null,\n            email: userData.email || null,\n            avatar: userData.avatar || null,\n            position: userData.position || null,\n            bio: userData.bio || null,\n            is_vip: userData.is_vip || false,\n            vip_type: userData.vip_type || 'none',\n            vip_expire_time: userData.vip_expire_time || null,\n            vip_status: userData.vip_status || '普通用户',\n            is_staff: userData.is_staff || false,\n            background_image: userData.background_image || null\n          }\n          \n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo))\n          return this.userInfo\n        }\n        return null\n      } catch (error) {\n        console.error('获取用户信息失败:', error)\n        throw error\n      }\n    },\n\n    async updateAvatar(formData) {\n      try {\n        const file = formData.get('avatar')\n        const response = await request.post('/api/v1/users/userInfo/avatar/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n        if (response?.data?.code === 200) {\n          this.avatarUpdateTime = Date.now()\n          this.userInfo = {\n            ...this.userInfo,\n            avatar: response.data.data.avatar\n          }\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo))\n          return response\n        }\n        throw new Error(response?.data?.message || '更新头像失败')\n      } catch (error) {\n        console.error('Failed to update avatar:', error)\n        throw error\n      }\n    },\n\n    async updateBackground(formData) {\n      try {\n        const file = formData.get('background')\n        const response = await user.updateBackground(file)\n        if (response?.data?.code === 200) {\n          this.background_image = response.data.data.background\n          this.userInfo = {\n            ...this.userInfo,\n            background_image: response.data.data.background\n          }\n          \n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo))\n          localStorage.setItem('background_image', this.background_image)\n          return response\n        }\n        throw new Error(response?.data?.message || '更新背景图失败')\n      } catch (error) {\n        console.error('Failed to update background:', error)\n        throw error\n      }\n    },\n\n    async updateUserInfo(data) {\n      try {\n        const response = await user.updateUserInfo(data)\n       \n        if (response?.data?.code === 200) {\n          const userData = response.data.data\n          \n          if (data.avatar) {\n            this.avatarUpdateTime = Date.now()\n          }\n          \n          this.userInfo = {\n            ...this.userInfo,\n            avatar: userData.avatar,\n            id: userData.id,\n            uid: userData.uid,\n            username: userData.username,\n            phone: userData.phone || null,\n            email: userData.email || null,\n            position: userData.position || null,\n            bio: userData.bio || null,\n            is_vip: userData.is_vip || false,\n            is_staff: userData.is_staff || false\n          }\n          \n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo))\n          \n          return response\n        }\n        throw new Error(response?.data?.message || '更新用户信息失败')\n      } catch (error) {\n        console.error('Failed to update user info:', error)\n        throw error\n      }\n    },\n\n    clearUserInfo() {\n      this.userInfo = null\n      this.avatarUpdateTime = null\n      this.background_image = null\n    },\n\n    async deleteAccount(data) {\n      try {\n        const response = await user.deleteAccount(data)\n        if (response?.data?.code === 200) {\n          const authStore = useAuthStore()\n          authStore.clearAuth()\n          this.clearUserInfo()\n          localStorage.clear()\n          \n          showToast('账号已注销', 'success')\n          return true\n        }\n        return false\n      } catch (error) {\n        if (error.response?.status === 401) {\n          const authStore = useAuthStore()\n          authStore.clearAuth()\n          this.clearUserInfo()\n          localStorage.clear()\n          \n          showToast('账号已注销', 'success')\n          return true\n        }\n        console.error('Failed to delete account:', error)\n        throw error\n      }\n    },\n\n    async changePhone(data) {\n      try {\n        console.log('Starting phone change process:', {\n          phone: data.phone,\n          oldPhone: this.userInfo?.phone,\n          hasCode: !!data.code\n        })\n\n        // 验证手机号格式\n        const phoneRegex = /^1[3-9]\\d{9}$/\n        if (!phoneRegex.test(data.phone)) {\n          throw new Error('请输入正确的手机号格式')\n        }\n\n        // 验证验证码格式\n        if (data.code && !/^\\d{6}$/.test(data.code)) {\n          throw new Error('请输入6位数字验证码')\n        }\n\n        // 如果没有验证码，先发送验证码\n        if (!data.code) {\n          console.log('No code provided, sending verification code')\n          await account.sendVerifyCode({\n            phone: data.phone,\n            scene: 'change_phone',\n            type: 'sms'\n          })\n          showToast('验证码已发送', 'success')\n          return true\n        }\n\n        console.log('Attempting to change phone with code')\n        const response = await account.changePhone({\n          phone: data.phone,\n          code: data.code,\n          oldPhone: this.userInfo?.phone\n        })\n        console.log('Change phone response:', response)\n        \n        if (response?.data?.code === 200) {\n          // 更新本地用户信息\n          this.userInfo = {\n            ...this.userInfo,\n            phone: data.phone\n          }\n          localStorage.setItem('userInfo', JSON.stringify(this.userInfo))\n          \n          showToast('手机号更新成功', 'success')\n          return true\n        }\n        return false\n      } catch (error) {\n        console.error('手机号更新失败:', error)\n        if (error.response) {\n          console.error('Error response:', {\n            status: error.response.status,\n            data: error.response.data,\n            headers: error.response.headers,\n            message: error.response.data?.message || error.response.data?.detail\n          })\n        }\n        \n        // 提供更友好的错误信息\n        let errorMessage\n        if (error.isPhoneDisabled) {\n          errorMessage = error.friendlyMessage\n        } else {\n          errorMessage = error.response?.data?.message \n            || error.response?.data?.detail\n            || error.response?.data?.error \n            || error.message \n            || '手机号更新失败，请稍后重试'\n        }\n\n        // 如果是发送验证码时的错误，添加更多提示信息\n        if (error.response?.data?.code === 'sms_limit_exceeded') {\n          errorMessage = '该手机号发送验证码次数过多，请24小时后再试'\n        } else if (error.response?.data?.code === 'phone_blacklisted') {\n          errorMessage = '该手机号已被限制使用，请更换其他手机号'\n        }\n\n        showToast(errorMessage, 'error')\n        throw error\n      }\n    },\n\n    // 发送验证码\n    async sendVerifyCode(phone, scene) {\n      try {\n        const response = await account.sendVerifyCode({\n          phone,\n          scene,\n          type: 'sms'\n        })\n        if (response?.data?.code === 200) {\n          showToast('验证码已发送', 'success')\n          return true\n        }\n        return false\n      } catch (error) {\n        console.error('发送验证码失败:', error)\n        let errorMessage\n        if (error.response?.data?.code === 'sms_limit_exceeded') {\n          errorMessage = '该手机号发送验证码次数过多，请24小时后再试'\n        } else if (error.response?.data?.code === 'phone_blacklisted') {\n          errorMessage = '该手机号已被限制使用，请更换其他手机号'\n        } else {\n          errorMessage = error.response?.data?.message || '发送验证码失败，请稍后重试'\n        }\n        showToast(errorMessage, 'error')\n        throw error\n      }\n    }\n  }\n}) "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}