{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"resume-editor\"\n};\nconst _hoisted_2 = {\n  class: \"editor-toolbar\"\n};\nconst _hoisted_3 = {\n  class: \"editor-content\"\n};\nconst _hoisted_4 = {\n  class: \"editor-footer\"\n};\nconst _hoisted_5 = {\n  class: \"zoom-controls\"\n};\nconst _hoisted_6 = {\n  class: \"zoom-slider\"\n};\nconst _hoisted_7 = {\n  class: \"zoom-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_slider = _resolveComponent(\"v-slider\");\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 顶部工具栏 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_v_btn, {\n    color: \"primary\",\n    \"prepend-icon\": \"mdi-content-save\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showSaveDialog = true)\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 保存模板 \")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_btn, {\n    color: \"info\",\n    \"prepend-icon\": \"mdi-eye\",\n    class: \"ml-2\",\n    onClick: $setup.previewTemplate\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 预览 \")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" 左侧工具面板 \"), _createVNode($setup[\"ToolbarPanel\"], {\n    ref: \"toolbarRef\",\n    onElementDragstart: _ctx.handleElementDragStart,\n    onTemplateSelect: $setup.handleTemplateSelect\n  }, null, 8 /* PROPS */, [\"onElementDragstart\"]), _createCommentVNode(\" 中间画布区域 \"), _createVNode($setup[\"Canvas\"], {\n    ref: \"canvas\",\n    scale: $setup.scale,\n    onElementSelect: $setup.handleElementSelect,\n    onDataFieldsUpdate: $setup.handleDataFieldsUpdate\n  }, null, 8 /* PROPS */, [\"scale\"]), _createCommentVNode(\" 右侧属性面板 \"), _createVNode($setup[\"PropertyPanel\"], {\n    \"selected-element\": $setup.selectedElement,\n    \"data-fields\": $setup.dataFields,\n    onUpdate: $setup.handleElementUpdate\n  }, null, 8 /* PROPS */, [\"selected-element\", \"data-fields\"])]), _createCommentVNode(\" 底部工具栏 \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_v_btn, {\n    icon: \"mdi-minus\",\n    variant: \"text\",\n    density: \"comfortable\",\n    onClick: $setup.decreaseScale,\n    disabled: $setup.scale <= 0.25\n  }, null, 8 /* PROPS */, [\"disabled\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_v_slider, {\n    modelValue: $setup.scalePercentage,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.scalePercentage = $event),\n    min: 25,\n    max: 200,\n    step: 5,\n    \"hide-details\": \"\",\n    density: \"compact\",\n    color: \"primary\",\n    \"track-color\": \"grey-lighten-2\"\n  }, {\n    append: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, _toDisplayString(Math.round($setup.scalePercentage)) + \"%\", 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]), _createVNode(_component_v_btn, {\n    icon: \"mdi-plus\",\n    variant: \"text\",\n    density: \"comfortable\",\n    onClick: $setup.increaseScale,\n    disabled: $setup.scale >= 2\n  }, null, 8 /* PROPS */, [\"disabled\"])])]), _createCommentVNode(\" 保存模板对话框 \"), _createVNode($setup[\"SaveTemplateDialog\"], {\n    modelValue: $setup.showSaveDialog,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.showSaveDialog = $event),\n    onSave: $setup.handleSaveTemplate\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 消息提示 \"), _createVNode(_component_v_snackbar, {\n    modelValue: $setup.snackbar.show,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.snackbar.show = $event),\n    color: $setup.snackbar.color,\n    timeout: 3000\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.snackbar.text), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"color\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_createVNode","_component_v_btn","color","onClick","_cache","$event","$setup","showSaveDialog","default","_withCtx","_createTextVNode","_","previewTemplate","_hoisted_3","ref","onElementDragstart","_ctx","handleElementDragStart","onTemplateSelect","handleTemplateSelect","scale","onElementSelect","handleElementSelect","onDataFieldsUpdate","handleDataFieldsUpdate","selectedElement","dataFields","onUpdate","handleElementUpdate","_hoisted_4","_hoisted_5","icon","variant","density","decreaseScale","disabled","_hoisted_6","_component_v_slider","modelValue","scalePercentage","min","max","step","append","_hoisted_7","_toDisplayString","Math","round","increaseScale","onSave","handleSaveTemplate","_component_v_snackbar","snackbar","show","timeout","text"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/index.vue"],"sourcesContent":["<template>\n  <div class=\"resume-editor\">\n    <!-- 顶部工具栏 -->\n    <div class=\"editor-toolbar\">\n      <v-btn\n        color=\"primary\"\n        prepend-icon=\"mdi-content-save\"\n        @click=\"showSaveDialog = true\"\n      >\n        保存模板\n      </v-btn>\n      \n      <v-btn\n        color=\"info\"\n        prepend-icon=\"mdi-eye\"\n        class=\"ml-2\"\n        @click=\"previewTemplate\"\n      >\n        预览\n      </v-btn>\n    </div>\n\n    <div class=\"editor-content\">\n      <!-- 左侧工具面板 -->\n      <ToolbarPanel\n        ref=\"toolbarRef\"\n        @element-dragstart=\"handleElementDragStart\"\n        @template-select=\"handleTemplateSelect\"\n      />\n\n      <!-- 中间画布区域 -->\n      <Canvas\n        ref=\"canvas\"\n        :scale=\"scale\"\n        @element-select=\"handleElementSelect\"\n        @data-fields-update=\"handleDataFieldsUpdate\"\n      />\n\n      <!-- 右侧属性面板 -->\n      <PropertyPanel\n        :selected-element=\"selectedElement\"\n        :data-fields=\"dataFields\"\n        @update=\"handleElementUpdate\"\n      />\n    </div>\n\n    <!-- 底部工具栏 -->\n    <div class=\"editor-footer\">\n      <div class=\"zoom-controls\">\n        <v-btn\n          icon=\"mdi-minus\"\n          variant=\"text\"\n          density=\"comfortable\"\n          @click=\"decreaseScale\"\n          :disabled=\"scale <= 0.25\"\n        ></v-btn>\n        <div class=\"zoom-slider\">\n          <v-slider\n            v-model=\"scalePercentage\"\n            :min=\"25\"\n            :max=\"200\"\n            :step=\"5\"\n            hide-details\n            density=\"compact\"\n            color=\"primary\"\n            track-color=\"grey-lighten-2\"\n          >\n            <template v-slot:append>\n              <div class=\"zoom-text\">{{ Math.round(scalePercentage) }}%</div>\n            </template>\n          </v-slider>\n        </div>\n        <v-btn\n          icon=\"mdi-plus\"\n          variant=\"text\"\n          density=\"comfortable\"\n          @click=\"increaseScale\"\n          :disabled=\"scale >= 2\"\n        ></v-btn>\n      </div>\n    </div>\n\n    <!-- 保存模板对话框 -->\n    <SaveTemplateDialog\n      v-model=\"showSaveDialog\"\n      @save=\"handleSaveTemplate\"\n    />\n\n    <!-- 消息提示 -->\n    <v-snackbar\n      v-model=\"snackbar.show\"\n      :color=\"snackbar.color\"\n      :timeout=\"3000\"\n    >\n      {{ snackbar.text }}\n    </v-snackbar>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport ToolbarPanel from './components/ToolbarPanel.vue'\nimport Canvas from './components/Canvas.vue'\nimport PropertyPanel from './components/PropertyPanel.vue'\nimport SaveTemplateDialog from './components/SaveTemplateDialog.vue'\nimport { useTemplateStore } from '@/stores/template'\n\nconst canvas = ref(null)\nconst toolbarRef = ref(null)\nconst selectedElement = ref(null)\nconst dataFields = ref([])\nconst showSaveDialog = ref(false)\nconst scale = ref(1)\n\n// 计算缩放百分比\nconst scalePercentage = computed({\n  get: () => scale.value * 100,\n  set: (value) => {\n    scale.value = value / 100\n  }\n})\n\n// 增加缩放\nconst increaseScale = () => {\n  if (scale.value < 2) {\n    scale.value = Math.min(2, scale.value + 0.1)\n  }\n}\n\n// 减少缩放\nconst decreaseScale = () => {\n  if (scale.value > 0.25) {\n    scale.value = Math.max(0.25, scale.value - 0.1)\n  }\n}\n\nconst snackbar = ref({\n  show: false,\n  text: '',\n  color: 'success'\n})\n\nconst templateStore = useTemplateStore()\n\n// 显示消息\nconst showMessage = (text, color = 'success') => {\n  snackbar.value = {\n    show: true,\n    text,\n    color\n  }\n}\n\n// 处理元素选择\nconst handleElementSelect = (element) => {\n  selectedElement.value = element\n}\n\n// 处理数据字段更新\nconst handleDataFieldsUpdate = (fields) => {\n  dataFields.value = fields\n}\n\n// 处理元素更新\nconst handleElementUpdate = (update) => {\n  if (canvas.value) {\n    canvas.value.handleElementUpdate(update)\n  }\n}\n\n// 预览模板\nconst previewTemplate = () => {\n  // TODO: 实现预览功能\n  showMessage('预览功能开发中')\n}\n\n// 处理保存模板\nconst handleSaveTemplate = async (formData) => {\n  try {\n    const canvasData = canvas.value.getCanvasData()\n    const templateData = {\n      ...formData,\n      content: {\n        elements: canvasData.elements\n      }\n    }\n    await templateStore.saveTemplate(templateData)\n    showMessage('保存成功', 'success')\n    showSaveDialog.value = false\n    // 刷新模板列表\n    toolbarRef.value.refreshTemplates()\n  } catch (error) {\n    showMessage(error.message || '保存失败', 'error')\n  }\n}\n\n// 处理模板选择\nconst handleTemplateSelect = async (template) => {\n  try {\n    // 获取模板详情\n    const templateData = await templateStore.getTemplateDetail(template.id)\n    console.log('模板详情:', templateData)\n    \n    // 加载模板内容到画布\n    if (canvas.value && templateData.content) {\n      await canvas.value.loadTemplate(templateData.content)\n      showMessage('模板加载成功', 'success')\n    } else {\n      throw new Error('模板内容为空')\n    }\n  } catch (error) {\n    console.error('加载模板失败:', error)\n    showMessage(error.message || '加载模板失败', 'error')\n  }\n}\n</script>\n\n<style scoped>\n.resume-editor {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: #f5f5f5;\n}\n\n.editor-toolbar {\n  height: 64px;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.editor-content {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n.editor-footer {\n  height: 48px;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  border-top: 1px solid #e0e0e0;\n}\n\n.zoom-controls {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background-color: #f5f7fa;\n  padding: 4px;\n  border-radius: 4px;\n}\n\n.zoom-slider {\n  width: 200px;\n  margin: 0 8px;\n}\n\n.zoom-text {\n  min-width: 48px;\n  text-align: center;\n  font-size: 14px;\n  color: #606266;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}