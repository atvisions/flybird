{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue';\nimport 'grapesjs/dist/css/grapes.min.css';\nimport grapesjs from 'grapesjs';\n\n// 模板数据\n\nexport default {\n  __name: 'TemplateEditor',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const templateName = ref('新建模板');\n    const editor = ref(null);\n    const route = useRoute();\n    const zoomLevel = ref(75);\n\n    // 初始化编辑器\n    onMounted(() => {\n      // 基础配置\n      editor.value = grapesjs.init({\n        container: '#gjs',\n        height: '100%',\n        width: '100%',\n        storageManager: false,\n        // 画布配置\n        canvas: {\n          styles: ['https://unpkg.com/element-plus/dist/index.css'],\n          // A4 尺寸 (210mm x 297mm)\n          width: '210mm',\n          height: '297mm',\n          // 默认缩放\n          zoom: 75,\n          // 允许缩放\n          zoomEnabled: true,\n          // 缩放范围\n          minZoom: 25,\n          maxZoom: 200,\n          // 画布背景\n          backgroundColor: '#ffffff',\n          // 画布内边距\n          frameOffset: 0,\n          // 显示网格\n          gridSize: 10\n        },\n        // 设备管理器配置\n        deviceManager: {\n          devices: [{\n            name: 'A4',\n            width: '210mm',\n            height: '297mm'\n          }]\n        },\n        // 面板配置\n        panels: {\n          defaults: [{\n            id: 'panel-top',\n            el: '.panel__top',\n            buttons: [{\n              id: 'zoom-in',\n              className: 'fa fa-search-plus',\n              command: 'canvas-zoom-in',\n              attributes: {\n                title: '放大'\n              }\n            }, {\n              id: 'zoom-out',\n              className: 'fa fa-search-minus',\n              command: 'canvas-zoom-out',\n              attributes: {\n                title: '缩小'\n              }\n            }, {\n              id: 'zoom-reset',\n              className: 'fa fa-compress',\n              command: 'canvas-zoom-reset',\n              attributes: {\n                title: '重置缩放'\n              }\n            }, {\n              type: 'range',\n              id: 'zoom-range',\n              command: 'canvas-zoom',\n              min: 25,\n              max: 200,\n              step: 5,\n              value: 75,\n              attributes: {\n                title: '缩放比例'\n              }\n            }]\n          }]\n        },\n        // 块管理器配置\n        blockManager: {\n          appendTo: '#blocks',\n          blocks: [{\n            id: 'section',\n            label: '分栏',\n            content: `\n            <div class=\"section\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"分栏\">\n              <div class=\"column\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"列1\"></div>\n              <div class=\"column\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"列2\"></div>\n            </div>\n            <style>\n              .section {\n                display: flex;\n                gap: 20px;\n                padding: 20px;\n              }\n              .column {\n                flex: 1;\n                min-height: 100px;\n                background-color: #f5f7fa;\n                border-radius: 8px;\n              }\n            </style>\n          `\n          }, {\n            id: 'text',\n            label: '文本',\n            content: '<div data-gjs-type=\"text\" data-gjs-resizable=\"true\">双击编辑文本</div>'\n          }]\n        },\n        // 样式管理器配置\n        styleManager: {\n          appendTo: '#styles',\n          sectors: [{\n            name: '尺寸',\n            open: false,\n            properties: ['width', 'height', 'padding', 'margin', 'min-width', 'min-height', 'max-width', 'max-height']\n          }, {\n            name: '排版',\n            open: false,\n            properties: ['font-family', 'font-size', 'font-weight', 'color', 'text-align', 'line-height', 'letter-spacing', 'text-shadow']\n          }, {\n            name: '装饰',\n            open: false,\n            properties: ['background-color', 'border-radius', 'border', 'box-shadow', 'opacity']\n          }]\n        },\n        // 拖拽设置\n        dragMode: 'absolute',\n        // 调整大小设置\n        resizeManager: {\n          tl: true,\n          // 左上角\n          tc: true,\n          // 上中\n          tr: true,\n          // 右上角\n          cl: true,\n          // 左中\n          cr: true,\n          // 右中\n          bl: true,\n          // 左下角\n          bc: true,\n          // 下中\n          br: true // 右下角\n        }\n      });\n\n      // 监听画布缩放事件\n      editor.value.on('canvas:zoom', () => {\n        zoomLevel.value = Math.round(editor.value.Canvas.getZoom());\n      });\n\n      // 添加缩放命令\n      editor.value.Commands.add('canvas-zoom-in', {\n        run: editor => {\n          const zoom = editor.Canvas.getZoom();\n          editor.Canvas.setZoom(Math.min(zoom + 5, 200));\n        }\n      });\n      editor.value.Commands.add('canvas-zoom-out', {\n        run: editor => {\n          const zoom = editor.Canvas.getZoom();\n          editor.Canvas.setZoom(Math.max(zoom - 5, 25));\n        }\n      });\n      editor.value.Commands.add('canvas-zoom-reset', {\n        run: editor => {\n          editor.Canvas.setZoom(75);\n        }\n      });\n      editor.value.Commands.add('canvas-zoom', {\n        run: (editor, sender, options) => {\n          editor.Canvas.setZoom(options.value);\n        }\n      });\n\n      // 添加自定义简历组件\n      addResumeBlocks();\n\n      // 如果有模板 ID，加载模板数据\n      if (route.params.id) {\n        loadTemplate(route.params.id);\n      }\n    });\n\n    // 添加简历专用组件\n    const addResumeBlocks = () => {\n      const blockManager = editor.value.BlockManager;\n\n      // 基本信息组件\n      blockManager.add('basic-info', {\n        label: '基本信息',\n        category: '简历组件',\n        content: `\n      <div class=\"basic-info\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"基本信息\">\n        <div class=\"avatar\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"头像\">\n          <img src=\"https://via.placeholder.com/100\" alt=\"头像\" />\n        </div>\n        <div class=\"info\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"个人信息\">\n          <h2 data-gjs-type=\"text\">姓名</h2>\n          <p data-gjs-type=\"text\">性别 | 年龄</p>\n          <p data-gjs-type=\"text\">电话 | 邮箱</p>\n          <p data-gjs-type=\"text\">所在地</p>\n        </div>\n      </div>\n    `,\n        style: {\n          'basic-info': {\n            padding: '20px',\n            display: 'flex',\n            'align-items': 'center',\n            gap: '20px',\n            'background-color': '#f5f7fa',\n            'border-radius': '8px'\n          }\n        }\n      });\n\n      // 工作经历组件\n      blockManager.add('work-experience', {\n        label: '工作经历',\n        category: '简历组件',\n        content: `\n      <div class=\"work-experience\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"工作经历\">\n        <h3 data-gjs-type=\"text\">工作经历</h3>\n        <div class=\"experience-item\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"工作项\">\n          <div class=\"company\" data-gjs-type=\"text\">公司名称</div>\n          <div class=\"position\" data-gjs-type=\"text\">职位</div>\n          <div class=\"date\" data-gjs-type=\"text\">2020.01 - 至今</div>\n          <div class=\"description\" data-gjs-type=\"text\">工作描述</div>\n        </div>\n      </div>\n    `,\n        style: {\n          'work-experience': {\n            padding: '20px',\n            'background-color': '#ffffff',\n            'border-radius': '8px',\n            'box-shadow': '0 2px 4px rgba(0,0,0,0.05)'\n          }\n        }\n      });\n\n      // 教育经历组件\n      blockManager.add('education', {\n        label: '教育经历',\n        category: '简历组件',\n        content: `\n      <div class=\"education\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"教育经历\">\n        <h3 data-gjs-type=\"text\">教育经历</h3>\n        <div class=\"education-item\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"教育项\">\n          <div class=\"school\" data-gjs-type=\"text\">学校名称</div>\n          <div class=\"major\" data-gjs-type=\"text\">专业</div>\n          <div class=\"date\" data-gjs-type=\"text\">2016.09 - 2020.06</div>\n          <div class=\"degree\" data-gjs-type=\"text\">学位</div>\n        </div>\n      </div>\n    `,\n        style: {\n          'education': {\n            padding: '20px',\n            'background-color': '#ffffff',\n            'border-radius': '8px',\n            'box-shadow': '0 2px 4px rgba(0,0,0,0.05)'\n          }\n        }\n      });\n    };\n\n    // 加载模板数据\n    const loadTemplate = async id => {\n      try {\n        // TODO: 从后端加载模板数据\n        const template = await fetch(`/api/v1/resume/templates/${id}`).then(res => res.json());\n        templateName.value = template.name;\n        editor.value.setComponents(template.content);\n      } catch (error) {\n        ElMessage.error('加载模板失败');\n      }\n    };\n\n    // 保存模板\n    const handleSave = async () => {\n      try {\n        const html = editor.value.getHtml();\n        const css = editor.value.getCss();\n\n        // TODO: 保存到后端\n        await fetch('/api/v1/resume/templates', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            name: templateName.value,\n            content: html,\n            styles: css\n          })\n        });\n        ElMessage.success('保存成功');\n      } catch (error) {\n        ElMessage.error('保存失败');\n      }\n    };\n\n    // 预览模板\n    const handlePreview = () => {\n      const html = editor.value.getHtml();\n      const css = editor.value.getCss();\n\n      // 在新窗口中预览\n      const win = window.open('', '_blank');\n      win.document.write(`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <style>${css}</style>\n      </head>\n      <body>${html}</body>\n    </html>\n  `);\n    };\n\n    // 导出模板\n    const handleExport = () => {\n      const html = editor.value.getHtml();\n      const css = editor.value.getCss();\n\n      // TODO: 调用后端导出 PDF\n    };\n\n    // 缩放控制\n    const handleZoomIn = () => {\n      const newZoom = Math.min(zoomLevel.value + 5, 200);\n      zoomLevel.value = newZoom;\n      editor.value?.Canvas.setZoom(newZoom);\n    };\n    const handleZoomOut = () => {\n      const newZoom = Math.max(zoomLevel.value - 5, 25);\n      zoomLevel.value = newZoom;\n      editor.value?.Canvas.setZoom(newZoom);\n    };\n\n    // 组件销毁时清理编辑器\n    onUnmounted(() => {\n      if (editor.value) {\n        editor.value.destroy();\n      }\n    });\n    const __returned__ = {\n      templateName,\n      editor,\n      route,\n      zoomLevel,\n      addResumeBlocks,\n      loadTemplate,\n      handleSave,\n      handlePreview,\n      handleExport,\n      handleZoomIn,\n      handleZoomOut,\n      ref,\n      onMounted,\n      onUnmounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElementPlusIconsVue() {\n        return ElementPlusIconsVue;\n      },\n      get grapesjs() {\n        return grapesjs;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","useRoute","ElMessage","ElementPlusIconsVue","grapesjs","templateName","editor","route","zoomLevel","value","init","container","height","width","storageManager","canvas","styles","zoom","zoomEnabled","minZoom","maxZoom","backgroundColor","frameOffset","gridSize","deviceManager","devices","name","panels","defaults","id","el","buttons","className","command","attributes","title","type","min","max","step","blockManager","appendTo","blocks","label","content","styleManager","sectors","open","properties","dragMode","resizeManager","tl","tc","tr","cl","cr","bl","bc","br","on","Math","round","Canvas","getZoom","Commands","add","run","setZoom","sender","options","addResumeBlocks","params","loadTemplate","BlockManager","category","style","padding","display","gap","template","fetch","then","res","json","setComponents","error","handleSave","html","getHtml","css","getCss","method","headers","body","JSON","stringify","success","handlePreview","win","window","document","write","handleExport","handleZoomIn","newZoom","handleZoomOut","destroy"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/template-editor/views/TemplateEditor.vue"],"sourcesContent":["<!-- 模板编辑器主视图 -->\n<template>\n  <div class=\"template-editor\">\n    <!-- 顶部工具栏 -->\n    <div class=\"editor-toolbar\">\n      <el-button-group>\n        <el-button @click=\"handleSave\">\n          <el-icon><SaveFilled /></el-icon>\n          保存\n        </el-button>\n        <el-button @click=\"handlePreview\">\n          <el-icon><View /></el-icon>\n          预览\n        </el-button>\n        <el-button @click=\"handleExport\">\n          <el-icon><Download /></el-icon>\n          导出\n        </el-button>\n      </el-button-group>\n      \n      <el-input\n        v-model=\"templateName\"\n        placeholder=\"模板名称\"\n        class=\"template-name\"\n      />\n    </div>\n    \n    <!-- 编辑器主体 -->\n    <div class=\"editor-main\">\n      <!-- 左侧组件面板 -->\n      <div class=\"editor-left\">\n        <div class=\"panel-header\">组件库</div>\n        <div id=\"blocks\" class=\"panel-content\"></div>\n      </div>\n      \n      <!-- 中间画布 -->\n      <div id=\"gjs\" class=\"editor-canvas\"></div>\n      \n      <!-- 右侧样式面板 -->\n      <div class=\"editor-right\">\n        <div class=\"panel-header\">样式设置</div>\n        <div id=\"styles\" class=\"panel-content\"></div>\n      </div>\n    </div>\n\n    <!-- 底部工具栏 -->\n    <div class=\"editor-footer\">\n      <div class=\"zoom-controls\">\n        <el-button-group>\n          <el-button @click=\"handleZoomOut\">\n            <el-icon><ZoomOut /></el-icon>\n          </el-button>\n          <el-button>{{ zoomLevel }}%</el-button>\n          <el-button @click=\"handleZoomIn\">\n            <el-icon><ZoomIn /></el-icon>\n          </el-button>\n        </el-button-group>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\nimport 'grapesjs/dist/css/grapes.min.css'\nimport grapesjs from 'grapesjs'\n\n// 模板数据\nconst templateName = ref('新建模板')\nconst editor = ref(null)\nconst route = useRoute()\nconst zoomLevel = ref(75)\n\n// 初始化编辑器\nonMounted(() => {\n  // 基础配置\n  editor.value = grapesjs.init({\n    container: '#gjs',\n    height: '100%',\n    width: '100%',\n    storageManager: false,\n    \n    // 画布配置\n    canvas: {\n      styles: [\n        'https://unpkg.com/element-plus/dist/index.css'\n      ],\n      // A4 尺寸 (210mm x 297mm)\n      width: '210mm',\n      height: '297mm',\n      // 默认缩放\n      zoom: 75,\n      // 允许缩放\n      zoomEnabled: true,\n      // 缩放范围\n      minZoom: 25,\n      maxZoom: 200,\n      // 画布背景\n      backgroundColor: '#ffffff',\n      // 画布内边距\n      frameOffset: 0,\n      // 显示网格\n      gridSize: 10,\n    },\n    \n    // 设备管理器配置\n    deviceManager: {\n      devices: [{\n        name: 'A4',\n        width: '210mm',\n        height: '297mm',\n      }]\n    },\n    \n    // 面板配置\n    panels: {\n      defaults: [\n        {\n          id: 'panel-top',\n          el: '.panel__top',\n          buttons: [\n            {\n              id: 'zoom-in',\n              className: 'fa fa-search-plus',\n              command: 'canvas-zoom-in',\n              attributes: { title: '放大' }\n            },\n            {\n              id: 'zoom-out',\n              className: 'fa fa-search-minus',\n              command: 'canvas-zoom-out',\n              attributes: { title: '缩小' }\n            },\n            {\n              id: 'zoom-reset',\n              className: 'fa fa-compress',\n              command: 'canvas-zoom-reset',\n              attributes: { title: '重置缩放' }\n            },\n            {\n              type: 'range',\n              id: 'zoom-range',\n              command: 'canvas-zoom',\n              min: 25,\n              max: 200,\n              step: 5,\n              value: 75,\n              attributes: { title: '缩放比例' }\n            }\n          ]\n        }\n      ]\n    },\n    \n    // 块管理器配置\n    blockManager: {\n      appendTo: '#blocks',\n      blocks: [\n        {\n          id: 'section',\n          label: '分栏',\n          content: `\n            <div class=\"section\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"分栏\">\n              <div class=\"column\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"列1\"></div>\n              <div class=\"column\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"列2\"></div>\n            </div>\n            <style>\n              .section {\n                display: flex;\n                gap: 20px;\n                padding: 20px;\n              }\n              .column {\n                flex: 1;\n                min-height: 100px;\n                background-color: #f5f7fa;\n                border-radius: 8px;\n              }\n            </style>\n          `\n        },\n        {\n          id: 'text',\n          label: '文本',\n          content: '<div data-gjs-type=\"text\" data-gjs-resizable=\"true\">双击编辑文本</div>'\n        }\n      ]\n    },\n    \n    // 样式管理器配置\n    styleManager: {\n      appendTo: '#styles',\n      sectors: [{\n        name: '尺寸',\n        open: false,\n        properties: [\n          'width',\n          'height',\n          'padding',\n          'margin',\n          'min-width',\n          'min-height',\n          'max-width',\n          'max-height'\n        ]\n      },\n      {\n        name: '排版',\n        open: false,\n        properties: [\n          'font-family',\n          'font-size',\n          'font-weight',\n          'color',\n          'text-align',\n          'line-height',\n          'letter-spacing',\n          'text-shadow'\n        ]\n      },\n      {\n        name: '装饰',\n        open: false,\n        properties: [\n          'background-color',\n          'border-radius',\n          'border',\n          'box-shadow',\n          'opacity'\n        ]\n      }]\n    },\n    \n    // 拖拽设置\n    dragMode: 'absolute',\n    \n    // 调整大小设置\n    resizeManager: {\n      tl: true, // 左上角\n      tc: true, // 上中\n      tr: true, // 右上角\n      cl: true, // 左中\n      cr: true, // 右中\n      bl: true, // 左下角\n      bc: true, // 下中\n      br: true  // 右下角\n    }\n  })\n  \n  // 监听画布缩放事件\n  editor.value.on('canvas:zoom', () => {\n    zoomLevel.value = Math.round(editor.value.Canvas.getZoom())\n  })\n  \n  // 添加缩放命令\n  editor.value.Commands.add('canvas-zoom-in', {\n    run: (editor) => {\n      const zoom = editor.Canvas.getZoom()\n      editor.Canvas.setZoom(Math.min(zoom + 5, 200))\n    }\n  })\n  \n  editor.value.Commands.add('canvas-zoom-out', {\n    run: (editor) => {\n      const zoom = editor.Canvas.getZoom()\n      editor.Canvas.setZoom(Math.max(zoom - 5, 25))\n    }\n  })\n  \n  editor.value.Commands.add('canvas-zoom-reset', {\n    run: (editor) => {\n      editor.Canvas.setZoom(75)\n    }\n  })\n  \n  editor.value.Commands.add('canvas-zoom', {\n    run: (editor, sender, options) => {\n      editor.Canvas.setZoom(options.value)\n    }\n  })\n  \n  // 添加自定义简历组件\n  addResumeBlocks()\n  \n  // 如果有模板 ID，加载模板数据\n  if (route.params.id) {\n    loadTemplate(route.params.id)\n  }\n})\n\n// 添加简历专用组件\nconst addResumeBlocks = () => {\n  const blockManager = editor.value.BlockManager\n  \n  // 基本信息组件\n  blockManager.add('basic-info', {\n    label: '基本信息',\n    category: '简历组件',\n    content: `\n      <div class=\"basic-info\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"基本信息\">\n        <div class=\"avatar\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"头像\">\n          <img src=\"https://via.placeholder.com/100\" alt=\"头像\" />\n        </div>\n        <div class=\"info\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"个人信息\">\n          <h2 data-gjs-type=\"text\">姓名</h2>\n          <p data-gjs-type=\"text\">性别 | 年龄</p>\n          <p data-gjs-type=\"text\">电话 | 邮箱</p>\n          <p data-gjs-type=\"text\">所在地</p>\n        </div>\n      </div>\n    `,\n    style: {\n      'basic-info': {\n        padding: '20px',\n        display: 'flex',\n        'align-items': 'center',\n        gap: '20px',\n        'background-color': '#f5f7fa',\n        'border-radius': '8px'\n      }\n    }\n  })\n  \n  // 工作经历组件\n  blockManager.add('work-experience', {\n    label: '工作经历',\n    category: '简历组件',\n    content: `\n      <div class=\"work-experience\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"工作经历\">\n        <h3 data-gjs-type=\"text\">工作经历</h3>\n        <div class=\"experience-item\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"工作项\">\n          <div class=\"company\" data-gjs-type=\"text\">公司名称</div>\n          <div class=\"position\" data-gjs-type=\"text\">职位</div>\n          <div class=\"date\" data-gjs-type=\"text\">2020.01 - 至今</div>\n          <div class=\"description\" data-gjs-type=\"text\">工作描述</div>\n        </div>\n      </div>\n    `,\n    style: {\n      'work-experience': {\n        padding: '20px',\n        'background-color': '#ffffff',\n        'border-radius': '8px',\n        'box-shadow': '0 2px 4px rgba(0,0,0,0.05)'\n      }\n    }\n  })\n  \n  // 教育经历组件\n  blockManager.add('education', {\n    label: '教育经历',\n    category: '简历组件',\n    content: `\n      <div class=\"education\" data-gjs-droppable=\"true\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"教育经历\">\n        <h3 data-gjs-type=\"text\">教育经历</h3>\n        <div class=\"education-item\" data-gjs-resizable=\"true\" data-gjs-custom-name=\"教育项\">\n          <div class=\"school\" data-gjs-type=\"text\">学校名称</div>\n          <div class=\"major\" data-gjs-type=\"text\">专业</div>\n          <div class=\"date\" data-gjs-type=\"text\">2016.09 - 2020.06</div>\n          <div class=\"degree\" data-gjs-type=\"text\">学位</div>\n        </div>\n      </div>\n    `,\n    style: {\n      'education': {\n        padding: '20px',\n        'background-color': '#ffffff',\n        'border-radius': '8px',\n        'box-shadow': '0 2px 4px rgba(0,0,0,0.05)'\n      }\n    }\n  })\n}\n\n// 加载模板数据\nconst loadTemplate = async (id) => {\n  try {\n    // TODO: 从后端加载模板数据\n    const template = await fetch(`/api/v1/resume/templates/${id}`).then(res => res.json())\n    templateName.value = template.name\n    editor.value.setComponents(template.content)\n  } catch (error) {\n    ElMessage.error('加载模板失败')\n  }\n}\n\n// 保存模板\nconst handleSave = async () => {\n  try {\n    const html = editor.value.getHtml()\n    const css = editor.value.getCss()\n    \n    // TODO: 保存到后端\n    await fetch('/api/v1/resume/templates', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: templateName.value,\n        content: html,\n        styles: css\n      })\n    })\n    \n    ElMessage.success('保存成功')\n  } catch (error) {\n    ElMessage.error('保存失败')\n  }\n}\n\n// 预览模板\nconst handlePreview = () => {\n  const html = editor.value.getHtml()\n  const css = editor.value.getCss()\n  \n  // 在新窗口中预览\n  const win = window.open('', '_blank')\n  win.document.write(`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <style>${css}</style>\n      </head>\n      <body>${html}</body>\n    </html>\n  `)\n}\n\n// 导出模板\nconst handleExport = () => {\n  const html = editor.value.getHtml()\n  const css = editor.value.getCss()\n  \n  // TODO: 调用后端导出 PDF\n}\n\n// 缩放控制\nconst handleZoomIn = () => {\n  const newZoom = Math.min(zoomLevel.value + 5, 200)\n  zoomLevel.value = newZoom\n  editor.value?.Canvas.setZoom(newZoom)\n}\n\nconst handleZoomOut = () => {\n  const newZoom = Math.max(zoomLevel.value - 5, 25)\n  zoomLevel.value = newZoom\n  editor.value?.Canvas.setZoom(newZoom)\n}\n\n// 组件销毁时清理编辑器\nonUnmounted(() => {\n  if (editor.value) {\n    editor.value.destroy()\n  }\n})\n</script>\n\n<style lang=\"scss\">\n.template-editor {\n  @apply h-screen w-screen flex flex-col fixed inset-0;\n  \n  .editor-toolbar {\n    @apply h-16 px-4 flex items-center justify-between bg-white border-b border-gray-200;\n    \n    .template-name {\n      @apply w-64;\n    }\n  }\n  \n  .editor-main {\n    @apply flex flex-1 overflow-hidden;\n    \n    .editor-left,\n    .editor-right {\n      @apply w-64 bg-white border-gray-200 flex flex-col overflow-hidden;\n      \n      .panel-header {\n        @apply h-12 px-4 flex items-center font-medium bg-gray-50 border-b border-gray-200 flex-shrink-0;\n      }\n      \n      .panel-content {\n        @apply p-4 flex-1 overflow-y-auto;\n      }\n    }\n    \n    .editor-left {\n      @apply border-r;\n    }\n    \n    .editor-right {\n      @apply border-l;\n    }\n    \n    #gjs {\n      @apply flex-1 flex items-center justify-center;\n      background-color: rgba(239, 68, 68, 0.1) !important;\n      \n      .gjs-editor {\n        @apply h-full w-full flex items-center justify-center;\n        background-color: rgba(59, 130, 246, 0.1) !important;\n        \n        .gjs-cv-canvas {\n          @apply h-full w-full flex items-center justify-center;\n          background-color: #15518c !important;\n          position: relative !important;\n          \n          .gjs-frame-wrapper {\n            @apply bg-white shadow-lg;\n            width: 210mm !important;\n            height: 297mm !important;\n            position: absolute !important;\n            left: 50% !important;\n            top: 50% !important;\n            transform: translate(-50%, -50%) !important;\n            border: 1px solid #15518c !important;\n          }\n        }\n      }\n    }\n  }\n\n  .editor-footer {\n    @apply h-12 px-4 flex items-center justify-center bg-white border-t border-gray-200;\n    \n    .zoom-controls {\n      @apply flex items-center;\n      \n      .el-button-group {\n        @apply mx-2;\n      }\n    }\n  }\n  \n  // 优化滚动条样式\n  ::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n  \n  ::-webkit-scrollbar-track {\n    @apply bg-transparent;\n  }\n  \n  ::-webkit-scrollbar-thumb {\n    @apply bg-gray-300 rounded-full;\n    \n    &:hover {\n      @apply bg-gray-400;\n    }\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}