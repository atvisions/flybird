{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { computed } from 'vue';\nimport { useComponentStore } from '../../store/component';\nexport default {\n  __name: 'ComponentPanel',\n  props: {\n    components: {\n      type: Array,\n      required: true\n    }\n  },\n  emits: ['add-component'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // 按分类过滤组件\n    const basicComponents = computed(() => props.components.filter(c => c.category === 'basic'));\n    const contentComponents = computed(() => props.components.filter(c => c.category === 'content'));\n\n    // 处理拖拽开始\n    const handleDragStart = (event, component) => {\n      // 设置拖拽数据\n      const dragData = {\n        type: component.type,\n        data: component.demo_data || {},\n        styles: component.styles || {},\n        name: component.name\n      };\n\n      // 设置拖拽数据\n      event.dataTransfer.setData('text/plain', JSON.stringify(dragData));\n      // 设置拖拽效果\n      event.dataTransfer.effectAllowed = 'copy';\n\n      // 添加拖拽图像\n      const dragImage = document.createElement('div');\n      dragImage.className = 'drag-image';\n      dragImage.textContent = component.name;\n      dragImage.style.cssText = `\n    position: fixed;\n    top: -100px;\n    left: -100px;\n    padding: 8px 12px;\n    background: #fff;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    z-index: 9999;\n  `;\n      document.body.appendChild(dragImage);\n      event.dataTransfer.setDragImage(dragImage, 0, 0);\n\n      // 清理拖拽图像\n      requestAnimationFrame(() => {\n        document.body.removeChild(dragImage);\n      });\n    };\n\n    // 处理拖拽结束\n    const handleDragEnd = event => {\n      event.preventDefault();\n    };\n\n    // 处理点击添加\n    const handleAddComponent = component => {\n      emit('add-component', {\n        type: component.type,\n        data: component.demo_data || {},\n        styles: component.styles || {},\n        name: component.name,\n        position: {\n          x: 0,\n          y: 0\n        }\n      });\n    };\n    const __returned__ = {\n      props,\n      emit,\n      basicComponents,\n      contentComponents,\n      handleDragStart,\n      handleDragEnd,\n      handleAddComponent,\n      computed,\n      get useComponentStore() {\n        return useComponentStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","useComponentStore","props","__props","emit","__emit","basicComponents","components","filter","c","category","contentComponents","handleDragStart","event","component","dragData","type","data","demo_data","styles","name","dataTransfer","setData","JSON","stringify","effectAllowed","dragImage","document","createElement","className","textContent","style","cssText","body","appendChild","setDragImage","requestAnimationFrame","removeChild","handleDragEnd","preventDefault","handleAddComponent","position","x","y"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/template-editor/components/panels/ComponentPanel.vue"],"sourcesContent":["<template>\n  <div class=\"component-panel\">\n    <el-tabs>\n      <el-tab-pane label=\"基础组件\">\n        <div class=\"component-list\">\n          <div\n            v-for=\"component in basicComponents\"\n            :key=\"component.type\"\n            class=\"component-item\"\n            draggable=\"true\"\n            @dragstart=\"(e) => handleDragStart(e, component)\"\n            @dragend=\"handleDragEnd\"\n          >\n            <el-icon class=\"mr-2\"><component :is=\"component.icon\" /></el-icon>\n            <span>{{ component.name }}</span>\n          </div>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"内容组件\">\n        <div class=\"component-list\">\n          <div\n            v-for=\"component in contentComponents\"\n            :key=\"component.type\"\n            class=\"component-item\"\n            draggable=\"true\"\n            @dragstart=\"(e) => handleDragStart(e, component)\"\n            @dragend=\"handleDragEnd\"\n          >\n            <el-icon class=\"mr-2\"><component :is=\"component.icon\" /></el-icon>\n            <span>{{ component.name }}</span>\n          </div>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useComponentStore } from '../../store/component'\n\nconst props = defineProps({\n  components: {\n    type: Array,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['add-component'])\n\n// 按分类过滤组件\nconst basicComponents = computed(() => \n  props.components.filter(c => c.category === 'basic')\n)\n\nconst contentComponents = computed(() => \n  props.components.filter(c => c.category === 'content')\n)\n\n// 处理拖拽开始\nconst handleDragStart = (event, component) => {\n  // 设置拖拽数据\n  const dragData = {\n    type: component.type,\n    data: component.demo_data || {},\n    styles: component.styles || {},\n    name: component.name\n  }\n  \n  // 设置拖拽数据\n  event.dataTransfer.setData('text/plain', JSON.stringify(dragData))\n  // 设置拖拽效果\n  event.dataTransfer.effectAllowed = 'copy'\n  \n  // 添加拖拽图像\n  const dragImage = document.createElement('div')\n  dragImage.className = 'drag-image'\n  dragImage.textContent = component.name\n  dragImage.style.cssText = `\n    position: fixed;\n    top: -100px;\n    left: -100px;\n    padding: 8px 12px;\n    background: #fff;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    z-index: 9999;\n  `\n  document.body.appendChild(dragImage)\n  event.dataTransfer.setDragImage(dragImage, 0, 0)\n  \n  // 清理拖拽图像\n  requestAnimationFrame(() => {\n    document.body.removeChild(dragImage)\n  })\n}\n\n// 处理拖拽结束\nconst handleDragEnd = (event) => {\n  event.preventDefault()\n}\n\n// 处理点击添加\nconst handleAddComponent = (component) => {\n  emit('add-component', {\n    type: component.type,\n    data: component.demo_data || {},\n    styles: component.styles || {},\n    name: component.name,\n    position: { x: 0, y: 0 }\n  })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.component-panel {\n  @apply w-64 border-r border-gray-200 bg-white overflow-y-auto;\n  height: calc(100vh - 64px);\n\n  .component-list {\n    @apply p-4;\n  }\n\n  .component-item {\n    @apply flex items-center px-4 py-2 mb-2 rounded cursor-move\n           bg-gray-50 hover:bg-blue-50 transition-colors;\n\n    &:last-child {\n      @apply mb-0;\n    }\n  }\n}\n</style> "],"mappings":";;AAsCA,SAASA,QAAQ,QAAQ,KAAI;AAC7B,SAASC,iBAAiB,QAAQ,uBAAsB;;;;;;;;;;;;;;;IAExD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;;IAEb;IACA,MAAMC,eAAe,GAAGN,QAAQ,CAAC,MAC/BE,KAAK,CAACK,UAAU,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,QAAQ,KAAK,OAAO,CACrD;IAEA,MAAMC,iBAAiB,GAAGX,QAAQ,CAAC,MACjCE,KAAK,CAACK,UAAU,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,QAAQ,KAAK,SAAS,CACvD;;IAEA;IACA,MAAME,eAAe,GAAGA,CAACC,KAAK,EAAEC,SAAS,KAAK;MAC5C;MACA,MAAMC,QAAQ,GAAG;QACfC,IAAI,EAAEF,SAAS,CAACE,IAAI;QACpBC,IAAI,EAAEH,SAAS,CAACI,SAAS,IAAI,CAAC,CAAC;QAC/BC,MAAM,EAAEL,SAAS,CAACK,MAAM,IAAI,CAAC,CAAC;QAC9BC,IAAI,EAAEN,SAAS,CAACM;MAClB;;MAEA;MACAP,KAAK,CAACQ,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAACT,QAAQ,CAAC;MACjE;MACAF,KAAK,CAACQ,YAAY,CAACI,aAAa,GAAG,MAAK;;MAExC;MACA,MAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK;MAC9CF,SAAS,CAACG,SAAS,GAAG,YAAW;MACjCH,SAAS,CAACI,WAAW,GAAGhB,SAAS,CAACM,IAAG;MACrCM,SAAS,CAACK,KAAK,CAACC,OAAO,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;MACAL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,SAAS;MACnCb,KAAK,CAACQ,YAAY,CAACc,YAAY,CAACT,SAAS,EAAE,CAAC,EAAE,CAAC;;MAE/C;MACAU,qBAAqB,CAAC,MAAM;QAC1BT,QAAQ,CAACM,IAAI,CAACI,WAAW,CAACX,SAAS;MACrC,CAAC;IACH;;IAEA;IACA,MAAMY,aAAa,GAAIzB,KAAK,IAAK;MAC/BA,KAAK,CAAC0B,cAAc,CAAC;IACvB;;IAEA;IACA,MAAMC,kBAAkB,GAAI1B,SAAS,IAAK;MACxCV,IAAI,CAAC,eAAe,EAAE;QACpBY,IAAI,EAAEF,SAAS,CAACE,IAAI;QACpBC,IAAI,EAAEH,SAAS,CAACI,SAAS,IAAI,CAAC,CAAC;QAC/BC,MAAM,EAAEL,SAAS,CAACK,MAAM,IAAI,CAAC,CAAC;QAC9BC,IAAI,EAAEN,SAAS,CAACM,IAAI;QACpBqB,QAAQ,EAAE;UAAEC,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE;MACzB,CAAC;IACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}