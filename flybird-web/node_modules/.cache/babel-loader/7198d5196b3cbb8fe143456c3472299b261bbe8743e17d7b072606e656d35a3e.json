{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { UserIcon, UserCircleIcon, DocumentTextIcon, BriefcaseIcon, StarIcon, CameraIcon, PhotoIcon } from '@heroicons/vue/24/outline';\nimport profile from '@/api/profile';\nimport { uploadImage } from '@/api/upload';\nexport default {\n  __name: 'UserHome',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n\n    // 用户信息状态\n    const userInfo = ref({\n      nickname: '',\n      avatar: '',\n      coverImage: '',\n      gender: '',\n      isVip: false,\n      bio: ''\n    });\n\n    // 获取用户基本信息\n    const fetchUserInfo = async () => {\n      try {\n        const response = await profile.getBasicInfo();\n        if (response.data?.code === 200 && response.data?.data) {\n          const data = response.data.data;\n          userInfo.value = {\n            nickname: data.nickname,\n            avatar: data.avatar,\n            coverImage: data.cover_image,\n            gender: data.gender,\n            isVip: data.is_vip,\n            bio: data.bio\n          };\n        }\n      } catch (error) {\n        console.error('获取用户信息失败:', error);\n        ElMessage.error('获取用户信息失败');\n      }\n    };\n\n    // 处理头像上传\n    const handleAvatarUpload = async event => {\n      const file = event.target.files[0];\n      if (!file) return;\n      try {\n        const formData = new FormData();\n        formData.append('file', file);\n        const response = await uploadImage(formData);\n        if (response.data?.code === 200 && response.data?.data?.url) {\n          await profile.updateBasicInfo({\n            avatar: response.data.data.url\n          });\n          userInfo.value.avatar = response.data.data.url;\n          ElMessage.success('头像更新成功');\n        }\n      } catch (error) {\n        console.error('头像上传失败:', error);\n        ElMessage.error('头像上传失败');\n      }\n    };\n\n    // 处理背景图上传\n    const handleCoverUpload = async event => {\n      const file = event.target.files[0];\n      if (!file) return;\n      try {\n        const formData = new FormData();\n        formData.append('file', file);\n        const response = await uploadImage(formData);\n        if (response.data?.code === 200 && response.data?.data?.url) {\n          await profile.updateBasicInfo({\n            cover_image: response.data.data.url\n          });\n          userInfo.value.coverImage = response.data.data.url;\n          ElMessage.success('背景图更新成功');\n        }\n      } catch (error) {\n        console.error('背景图上传失败:', error);\n        ElMessage.error('背景图上传失败');\n      }\n    };\n\n    // 在组件挂载时获取用户信息\n    onMounted(async () => {\n      await fetchUserInfo();\n    });\n\n    // 快捷操作\n    const quickActions = [{\n      title: '我的简历',\n      icon: DocumentTextIcon,\n      action: () => router.push('/user/center?tab=resumes')\n    }, {\n      title: '作品集',\n      icon: PhotoIcon,\n      action: () => router.push('/user/center?tab=portfolio')\n    }, {\n      title: '收藏夹',\n      icon: StarIcon,\n      action: () => router.push('/user/center?tab=favorites')\n    }, {\n      title: '我的创作',\n      icon: BriefcaseIcon,\n      action: () => router.push('/user/center?tab=creations')\n    }];\n\n    // 统计数据\n    const statistics = [{\n      label: '简历数',\n      value: '2'\n    }, {\n      label: '作品',\n      value: '8'\n    }, {\n      label: '收藏',\n      value: '16'\n    }, {\n      label: '获赞',\n      value: '32'\n    }];\n    const __returned__ = {\n      router,\n      userInfo,\n      fetchUserInfo,\n      handleAvatarUpload,\n      handleCoverUpload,\n      quickActions,\n      statistics,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get UserIcon() {\n        return UserIcon;\n      },\n      get UserCircleIcon() {\n        return UserCircleIcon;\n      },\n      get DocumentTextIcon() {\n        return DocumentTextIcon;\n      },\n      get BriefcaseIcon() {\n        return BriefcaseIcon;\n      },\n      get StarIcon() {\n        return StarIcon;\n      },\n      get CameraIcon() {\n        return CameraIcon;\n      },\n      get PhotoIcon() {\n        return PhotoIcon;\n      },\n      get profile() {\n        return profile;\n      },\n      get uploadImage() {\n        return uploadImage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","ElMessage","UserIcon","UserCircleIcon","DocumentTextIcon","BriefcaseIcon","StarIcon","CameraIcon","PhotoIcon","profile","uploadImage","router","userInfo","nickname","avatar","coverImage","gender","isVip","bio","fetchUserInfo","response","getBasicInfo","data","code","value","cover_image","is_vip","error","console","handleAvatarUpload","event","file","target","files","formData","FormData","append","url","updateBasicInfo","success","handleCoverUpload","quickActions","title","icon","action","push","statistics","label"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/UserHome.vue"],"sourcesContent":["<template>\n  <div class=\"user-home\">\n    <!-- 顶部背景和用户信息 -->\n    <div class=\"relative\">\n      <!-- 背景图 -->\n      <div class=\"h-48 bg-gradient-to-r from-blue-500 to-indigo-600 relative group\">\n        <img\n          v-if=\"userInfo.coverImage\"\n          :src=\"userInfo.coverImage\"\n          class=\"w-full h-full object-cover\"\n          alt=\"背景图\"\n        />\n        <!-- 背景图上传按钮 -->\n        <div class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity\">\n          <label class=\"cursor-pointer bg-white bg-opacity-90 rounded-full p-2 hover:bg-opacity-100\">\n            <CameraIcon class=\"w-6 h-6 text-gray-600\" />\n            <input \n              type=\"file\" \n              class=\"hidden\" \n              accept=\"image/*\"\n              @change=\"handleCoverUpload\"\n            />\n          </label>\n        </div>\n      </div>\n      \n      <!-- 用户信息卡片 -->\n      <div class=\"absolute bottom-0 left-0 right-0 transform translate-y-1/2 px-4\">\n        <div class=\"bg-white rounded-lg shadow-md p-4\">\n          <div class=\"flex items-center\">\n            <!-- 头像上传区域 -->\n            <div class=\"relative group\">\n              <img\n                :src=\"userInfo.avatar || '/default-avatar.png'\"\n                class=\"w-20 h-20 rounded-full border-4 border-white object-cover\"\n                alt=\"头像\"\n              />\n              <div class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\">\n                <label class=\"cursor-pointer\">\n                  <CameraIcon class=\"w-6 h-6 text-white\" />\n                  <input \n                    type=\"file\" \n                    class=\"hidden\" \n                    accept=\"image/*\"\n                    @change=\"handleAvatarUpload\"\n                  />\n                </label>\n              </div>\n              <span \n                v-if=\"userInfo.gender\" \n                class=\"absolute bottom-0 right-0 w-6 h-6 bg-white rounded-full flex items-center justify-center\"\n              >\n                <component\n                  :is=\"userInfo.gender === 'male' ? 'UserIcon' : 'UserCircleIcon'\"\n                  class=\"w-4 h-4\"\n                  :class=\"userInfo.gender === 'male' ? 'text-blue-500' : 'text-pink-500'\"\n                />\n              </span>\n            </div>\n            \n            <!-- 用户基本信息 -->\n            <div class=\"ml-4 flex-1\">\n              <div class=\"flex items-center\">\n                <h2 class=\"text-xl font-bold text-gray-900\">{{ userInfo.nickname }}</h2>\n                <span v-if=\"userInfo.isVip\" class=\"ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full\">\n                  VIP会员\n                </span>\n              </div>\n              <p class=\"text-gray-500 text-sm mt-1\">{{ userInfo.bio || '这个人很懒，还没有写简介' }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 功能入口区域 -->\n    <div class=\"mt-32 px-4\">\n      <div class=\"grid grid-cols-4 gap-4\">\n        <div \n          v-for=\"(item, index) in quickActions\" \n          :key=\"index\"\n          class=\"flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer\"\n          @click=\"item.action\"\n        >\n          <component\n            :is=\"item.icon\"\n            class=\"w-8 h-8 text-indigo-600\"\n          />\n          <span class=\"mt-2 text-sm text-gray-600\">{{ item.title }}</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 数据统计 -->\n    <div class=\"mt-6 px-4\">\n      <div class=\"bg-white rounded-lg shadow-sm p-4\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">我的数据</h3>\n        <div class=\"grid grid-cols-4 gap-4\">\n          <div v-for=\"(stat, index) in statistics\" :key=\"index\" class=\"text-center\">\n            <div class=\"text-xl font-bold text-indigo-600\">{{ stat.value }}</div>\n            <div class=\"text-sm text-gray-500\">{{ stat.label }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport {\n  UserIcon,\n  UserCircleIcon,\n  DocumentTextIcon,\n  BriefcaseIcon,\n  StarIcon,\n  CameraIcon,\n  PhotoIcon\n} from '@heroicons/vue/24/outline'\nimport profile from '@/api/profile'\nimport { uploadImage } from '@/api/upload'\n\nconst router = useRouter()\n\n// 用户信息状态\nconst userInfo = ref({\n  nickname: '',\n  avatar: '',\n  coverImage: '',\n  gender: '',\n  isVip: false,\n  bio: ''\n})\n\n// 获取用户基本信息\nconst fetchUserInfo = async () => {\n  try {\n    const response = await profile.getBasicInfo()\n    if (response.data?.code === 200 && response.data?.data) {\n      const data = response.data.data\n      userInfo.value = {\n        nickname: data.nickname,\n        avatar: data.avatar,\n        coverImage: data.cover_image,\n        gender: data.gender,\n        isVip: data.is_vip,\n        bio: data.bio\n      }\n    }\n  } catch (error) {\n    console.error('获取用户信息失败:', error)\n    ElMessage.error('获取用户信息失败')\n  }\n}\n\n// 处理头像上传\nconst handleAvatarUpload = async (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n  \n  try {\n    const formData = new FormData()\n    formData.append('file', file)\n    \n    const response = await uploadImage(formData)\n    if (response.data?.code === 200 && response.data?.data?.url) {\n      await profile.updateBasicInfo({\n        avatar: response.data.data.url\n      })\n      userInfo.value.avatar = response.data.data.url\n      ElMessage.success('头像更新成功')\n    }\n  } catch (error) {\n    console.error('头像上传失败:', error)\n    ElMessage.error('头像上传失败')\n  }\n}\n\n// 处理背景图上传\nconst handleCoverUpload = async (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n  \n  try {\n    const formData = new FormData()\n    formData.append('file', file)\n    \n    const response = await uploadImage(formData)\n    if (response.data?.code === 200 && response.data?.data?.url) {\n      await profile.updateBasicInfo({\n        cover_image: response.data.data.url\n      })\n      userInfo.value.coverImage = response.data.data.url\n      ElMessage.success('背景图更新成功')\n    }\n  } catch (error) {\n    console.error('背景图上传失败:', error)\n    ElMessage.error('背景图上传失败')\n  }\n}\n\n// 在组件挂载时获取用户信息\nonMounted(async () => {\n  await fetchUserInfo()\n})\n\n// 快捷操作\nconst quickActions = [\n  {\n    title: '我的简历',\n    icon: DocumentTextIcon,\n    action: () => router.push('/user/center?tab=resumes')\n  },\n  {\n    title: '作品集',\n    icon: PhotoIcon,\n    action: () => router.push('/user/center?tab=portfolio')\n  },\n  {\n    title: '收藏夹',\n    icon: StarIcon,\n    action: () => router.push('/user/center?tab=favorites')\n  },\n  {\n    title: '我的创作',\n    icon: BriefcaseIcon,\n    action: () => router.push('/user/center?tab=creations')\n  }\n]\n\n// 统计数据\nconst statistics = [\n  { label: '简历数', value: '2' },\n  { label: '作品', value: '8' },\n  { label: '收藏', value: '16' },\n  { label: '获赞', value: '32' }\n]\n</script>\n\n<style scoped>\n.user-home {\n  min-height: calc(100vh - 64px);\n  background-color: #f9fafb;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}