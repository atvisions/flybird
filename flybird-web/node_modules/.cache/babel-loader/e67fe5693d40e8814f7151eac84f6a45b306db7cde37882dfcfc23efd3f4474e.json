{"ast":null,"code":"import { ref, watch, onMounted } from 'vue';\nimport { CheckIcon, XMarkIcon } from '@heroicons/vue/24/outline';\nimport { useRouter } from 'vue-router';\nimport { getProPlans } from '@/api/payment';\nexport default {\n  __name: 'ProDialog',\n  props: {\n    modelValue: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const router = useRouter();\n    const dialogVisible = ref(false);\n    const plans = ref([]);\n\n    // 获取套餐数据\n    const fetchPlans = async () => {\n      try {\n        const response = await getProPlans();\n        plans.value = response.data;\n      } catch (error) {\n        console.error('获取套餐数据失败:', error);\n      }\n    };\n\n    // 组件挂载时获取套餐数据\n    onMounted(() => {\n      fetchPlans();\n    });\n\n    // 监听 modelValue 变化\n    watch(() => props.modelValue, val => {\n      dialogVisible.value = val;\n      if (val && plans.value.length === 0) {\n        fetchPlans();\n      }\n    });\n\n    // 监听对话框状态变化\n    watch(() => dialogVisible.value, val => {\n      emit('update:modelValue', val);\n    });\n\n    // 选择套餐\n    const selectPlan = plan => {\n      router.push({\n        path: '/payment',\n        query: {\n          plan_id: plan.id,\n          price: plan.price,\n          duration: plan.duration\n        }\n      });\n    };\n    const __returned__ = {\n      props,\n      emit,\n      router,\n      dialogVisible,\n      plans,\n      fetchPlans,\n      selectPlan,\n      ref,\n      watch,\n      onMounted,\n      get CheckIcon() {\n        return CheckIcon;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get getProPlans() {\n        return getProPlans;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","CheckIcon","XMarkIcon","useRouter","getProPlans","props","__props","emit","__emit","router","dialogVisible","plans","fetchPlans","response","value","data","error","console","modelValue","val","length","selectPlan","plan","push","path","query","plan_id","id","price","duration"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/components/ProDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    v-model=\"dialogVisible\"\n    title=\"开通会员\"\n    width=\"800px\"\n    :close-on-click-modal=\"false\"\n    class=\"pro-dialog\"\n  >\n    <div class=\"p-6\">\n      <!-- 标题区域 -->\n      <div class=\"text-center mb-8\">\n        <h2 class=\"text-2xl font-bold text-gray-900\">选择适合您的会员套餐</h2>\n        <p class=\"mt-2 text-gray-600\">解锁全部高级功能，让您的求职之路更加顺畅</p>\n      </div>\n\n      <!-- 套餐卡片区域 -->\n      <div class=\"grid md:grid-cols-3 gap-6\">\n        <div \n          v-for=\"plan in plans\" \n          :key=\"plan.id\"\n          :class=\"[\n            'bg-white rounded-xl border-2 p-6 transition-all duration-300',\n            plan.recommended \n              ? 'border-blue-500 shadow-lg relative transform hover:scale-105'\n              : 'border-gray-200 hover:border-blue-500 hover:shadow-lg'\n          ]\"\n        >\n          <!-- 推荐标签 -->\n          <div v-if=\"plan.recommended\" class=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n            <span class=\"bg-blue-500 text-white px-4 py-1 rounded-full text-sm\">最受欢迎</span>\n          </div>\n          \n          <div class=\"text-center\">\n            <h3 class=\"text-lg font-semibold text-gray-900\">{{ plan.name }}</h3>\n            <div class=\"mt-4\">\n              <span class=\"text-3xl font-bold\">¥{{ plan.price }}</span>\n              <span class=\"text-gray-500\">/{{ plan.duration_label }}</span>\n            </div>\n            <div class=\"mt-2 text-sm text-gray-500\">{{ plan.description }}</div>\n          </div>\n          \n          <div class=\"mt-6 space-y-4\">\n            <div v-for=\"(feature, index) in plan.features\" :key=\"index\" class=\"flex items-center\">\n              <CheckIcon class=\"w-5 h-5 text-green-500\" />\n              <span class=\"ml-2 text-gray-600\">{{ feature }}</span>\n            </div>\n          </div>\n          \n          <button \n            :class=\"[\n              'mt-6 w-full py-2 px-4 rounded-lg transition-colors',\n              plan.recommended\n                ? 'bg-blue-600 text-white hover:bg-blue-700'\n                : 'border border-blue-600 text-blue-600 hover:bg-blue-50'\n            ]\"\n            @click=\"selectPlan(plan)\"\n          >\n            选择套餐\n          </button>\n        </div>\n      </div>\n\n      <!-- 功能对比 -->\n      <div class=\"mt-12\">\n        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">会员功能对比</h3>\n        <div class=\"overflow-x-auto\">\n          <table class=\"w-full\">\n            <thead>\n              <tr class=\"border-b\">\n                <th class=\"py-3 text-left text-gray-600\">功能</th>\n                <th class=\"py-3 text-center text-gray-600\">普通用户</th>\n                <th class=\"py-3 text-center text-gray-600\">会员用户</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr class=\"border-b\">\n                <td class=\"py-3 text-gray-900\">简历导入解析</td>\n                <td class=\"py-3 text-center\"><XMarkIcon class=\"w-5 h-5 text-gray-400 mx-auto\" /></td>\n                <td class=\"py-3 text-center\"><CheckIcon class=\"w-5 h-5 text-green-500 mx-auto\" /></td>\n              </tr>\n              <tr class=\"border-b\">\n                <td class=\"py-3 text-gray-900\">AI优化建议</td>\n                <td class=\"py-3 text-center\"><XMarkIcon class=\"w-5 h-5 text-gray-400 mx-auto\" /></td>\n                <td class=\"py-3 text-center\"><CheckIcon class=\"w-5 h-5 text-green-500 mx-auto\" /></td>\n              </tr>\n              <tr class=\"border-b\">\n                <td class=\"py-3 text-gray-900\">简历导出次数</td>\n                <td class=\"py-3 text-center text-gray-600\">3次/月</td>\n                <td class=\"py-3 text-center text-gray-600\">无限制</td>\n              </tr>\n              <tr class=\"border-b\">\n                <td class=\"py-3 text-gray-900\">模板使用数量</td>\n                <td class=\"py-3 text-center text-gray-600\">3个</td>\n                <td class=\"py-3 text-center text-gray-600\">无限制</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport { CheckIcon, XMarkIcon } from '@heroicons/vue/24/outline'\nimport { useRouter } from 'vue-router'\nimport { getProPlans } from '@/api/payment'\n\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\nconst router = useRouter()\nconst dialogVisible = ref(false)\nconst plans = ref([])\n\n// 获取套餐数据\nconst fetchPlans = async () => {\n  try {\n    const response = await getProPlans()\n    plans.value = response.data\n  } catch (error) {\n    console.error('获取套餐数据失败:', error)\n  }\n}\n\n// 组件挂载时获取套餐数据\nonMounted(() => {\n  fetchPlans()\n})\n\n// 监听 modelValue 变化\nwatch(() => props.modelValue, (val) => {\n  dialogVisible.value = val\n  if (val && plans.value.length === 0) {\n    fetchPlans()\n  }\n})\n\n// 监听对话框状态变化\nwatch(() => dialogVisible.value, (val) => {\n  emit('update:modelValue', val)\n})\n\n// 选择套餐\nconst selectPlan = (plan) => {\n  router.push({\n    path: '/payment',\n    query: { \n      plan_id: plan.id,\n      price: plan.price,\n      duration: plan.duration\n    }\n  })\n}\n</script>\n\n<style scoped>\n.pro-dialog :deep(.el-dialog) {\n  border-radius: 1rem;\n}\n\n.pro-dialog :deep(.el-dialog__header) {\n  padding: 1rem 1.5rem;\n  margin: 0;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.pro-dialog :deep(.el-dialog__body) {\n  padding: 0;\n}\n\n.pro-dialog :deep(.el-dialog__title) {\n  font-weight: 600;\n}\n</style> "],"mappings":"AAwGA,SAASA,GAAG,EAAEC,KAAK,EAAEC,SAAS,QAAQ,KAAI;AAC1C,SAASC,SAAS,EAAEC,SAAS,QAAQ,2BAA0B;AAC/D,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,WAAW,QAAQ,eAAc;;;;;;;;;;;;;;;IAE1C,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;IACb,MAAMC,MAAM,GAAGN,SAAS,CAAC;IACzB,MAAMO,aAAa,GAAGZ,GAAG,CAAC,KAAK;IAC/B,MAAMa,KAAK,GAAGb,GAAG,CAAC,EAAE;;IAEpB;IACA,MAAMc,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMT,WAAW,CAAC;QACnCO,KAAK,CAACG,KAAK,GAAGD,QAAQ,CAACE,IAAG;MAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK;MAClC;IACF;;IAEA;IACAhB,SAAS,CAAC,MAAM;MACdY,UAAU,CAAC;IACb,CAAC;;IAED;IACAb,KAAK,CAAC,MAAMM,KAAK,CAACa,UAAU,EAAGC,GAAG,IAAK;MACrCT,aAAa,CAACI,KAAK,GAAGK,GAAE;MACxB,IAAIA,GAAG,IAAIR,KAAK,CAACG,KAAK,CAACM,MAAM,KAAK,CAAC,EAAE;QACnCR,UAAU,CAAC;MACb;IACF,CAAC;;IAED;IACAb,KAAK,CAAC,MAAMW,aAAa,CAACI,KAAK,EAAGK,GAAG,IAAK;MACxCZ,IAAI,CAAC,mBAAmB,EAAEY,GAAG;IAC/B,CAAC;;IAED;IACA,MAAME,UAAU,GAAIC,IAAI,IAAK;MAC3Bb,MAAM,CAACc,IAAI,CAAC;QACVC,IAAI,EAAE,UAAU;QAChBC,KAAK,EAAE;UACLC,OAAO,EAAEJ,IAAI,CAACK,EAAE;UAChBC,KAAK,EAAEN,IAAI,CAACM,KAAK;UACjBC,QAAQ,EAAEP,IAAI,CAACO;QACjB;MACF,CAAC;IACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}