{"ast":null,"code":"import _objectSpread from \"/Users/liuzhao/Documents/Projects/flybird/flybird-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { ref, watch, computed } from 'vue';\nimport { Dialog, DialogPanel, DialogTitle, Listbox, ListboxButton, ListboxOptions, ListboxOption, TransitionRoot, TransitionChild } from '@headlessui/vue';\nimport { XMarkIcon, ChevronUpDownIcon, CheckIcon } from '@heroicons/vue/24/outline';\n\n// 选项常量\n\nexport default {\n  __name: 'EditJobIntentionDialog',\n  props: {\n    modelValue: {\n      type: Boolean,\n      default: false\n    },\n    initialData: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'submit'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const JOB_TYPE_OPTIONS = [{\n      value: 'full_time',\n      label: '全职'\n    }, {\n      value: 'part_time',\n      label: '兼职'\n    }, {\n      value: 'internship',\n      label: '实习'\n    }, {\n      value: 'freelance',\n      label: '自由职业'\n    }];\n    const JOB_STATUS_OPTIONS = [{\n      value: 'actively_looking',\n      label: '积极找工作'\n    }, {\n      value: 'open_to_offers',\n      label: '考虑机会'\n    }, {\n      value: 'not_looking',\n      label: '暂不找工作'\n    }];\n    const SALARY_OPTIONS = [{\n      value: '0-5',\n      label: '5K以下'\n    }, {\n      value: '5-10',\n      label: '5-10K'\n    }, {\n      value: '10-15',\n      label: '10-15K'\n    }, {\n      value: '15-20',\n      label: '15-20K'\n    }, {\n      value: '20-30',\n      label: '20-30K'\n    }, {\n      value: '30-50',\n      label: '30-50K'\n    }, {\n      value: '50-100',\n      label: '50-100K'\n    }, {\n      value: '100+',\n      label: '100K以上'\n    }];\n\n    // 添加热门城市选项\n    const CITY_OPTIONS = [{\n      value: '北京',\n      label: '北京'\n    }, {\n      value: '上海',\n      label: '上海'\n    }, {\n      value: '广州',\n      label: '广州'\n    }, {\n      value: '深圳',\n      label: '深圳'\n    }, {\n      value: '杭州',\n      label: '杭州'\n    }, {\n      value: '成都',\n      label: '成都'\n    }, {\n      value: '武汉',\n      label: '武汉'\n    }, {\n      value: '西安',\n      label: '西安'\n    }, {\n      value: '南京',\n      label: '南京'\n    }, {\n      value: '苏州',\n      label: '苏州'\n    }];\n    const props = __props;\n    const emit = __emit;\n\n    // 表单数据\n    const form = ref({\n      job_type: '',\n      job_status: '',\n      expected_salary: '',\n      expected_city: '',\n      // 改为单选\n      industries: ''\n    });\n\n    // 修改 watch 逻辑\n    watch(() => props.initialData, newVal => {\n      if (newVal) {\n        // 处理 industries 数据,确保是字符串格式\n        const industries = Array.isArray(newVal.industries) ? newVal.industries.join(',') : newVal.industries || '';\n\n        // 处理 expected_city 数据,确保是字符串格式  \n        const expected_city = Array.isArray(newVal.expected_city) ? newVal.expected_city.join(',') : newVal.expected_city || '';\n        form.value = _objectSpread(_objectSpread({}, newVal), {}, {\n          industries,\n          expected_city,\n          // 确保所有必需字段都有默认值\n          job_type: newVal.job_type || '',\n          job_status: newVal.job_status || '',\n          expected_salary: newVal.expected_salary || ''\n        });\n      }\n    }, {\n      immediate: true,\n      deep: true\n    });\n    const handleClose = () => {\n      emit('update:modelValue', false);\n    };\n    const handleSubmit = () => {\n      // 提交前处理数据格式\n      const formData = _objectSpread(_objectSpread({}, form.value), {}, {\n        // 确保 industries 和 expected_city 是字符串格式\n        industries: form.value.industries?.split(',').filter(Boolean).join(',') || '',\n        expected_city: form.value.expected_city?.split(',').filter(Boolean).join(',') || ''\n      });\n      emit('submit', formData);\n    };\n\n    // 标签获取方法\n    const getJobTypeLabel = value => {\n      const option = JOB_TYPE_OPTIONS.find(opt => opt.value === value);\n      return option ? option.label : '请选择工作类型';\n    };\n    const getJobStatusLabel = value => {\n      const option = JOB_STATUS_OPTIONS.find(opt => opt.value === value);\n      return option ? option.label : '请选择求职状态';\n    };\n    const getSalaryLabel = value => {\n      const option = SALARY_OPTIONS.find(opt => opt.value === value);\n      return option ? option.label : '请选择期望薪资';\n    };\n\n    // 添加热门行业选项\n    const HOT_INDUSTRIES = ['互联网', '人工智能', '大数据', '云计算', '金融科技', '电子商务', '教育科技', '医疗健康', '新能源', '物联网'];\n\n    // 计算已选择的行业\n    const selectedIndustries = computed(() => {\n      return form.value.industries?.split(',').filter(Boolean) || [];\n    });\n\n    // 计算可选的热门行业（排除已选择的）\n    const availableIndustries = computed(() => {\n      return HOT_INDUSTRIES.filter(industry => !selectedIndustries.value.includes(industry));\n    });\n\n    // 添加行业\n    const addIndustry = industry => {\n      const industries = selectedIndustries.value;\n      if (!industries.includes(industry) && industries.length < 5) {\n        form.value.industries = [...industries, industry].join(',');\n      }\n    };\n\n    // 移除行业\n    const removeIndustry = industry => {\n      const industries = selectedIndustries.value;\n      form.value.industries = industries.filter(i => i !== industry).join(',');\n    };\n\n    // 修改输入框的 change 事件处理\n    const handleIndustriesInput = event => {\n      const value = event.target.value;\n      const industries = value.split(',').filter(Boolean);\n      if (industries.length > 5) {\n        // 只保留前5个行业\n        form.value.industries = industries.slice(0, 5).join(',');\n      }\n    };\n    const __returned__ = {\n      JOB_TYPE_OPTIONS,\n      JOB_STATUS_OPTIONS,\n      SALARY_OPTIONS,\n      CITY_OPTIONS,\n      props,\n      emit,\n      form,\n      handleClose,\n      handleSubmit,\n      getJobTypeLabel,\n      getJobStatusLabel,\n      getSalaryLabel,\n      HOT_INDUSTRIES,\n      selectedIndustries,\n      availableIndustries,\n      addIndustry,\n      removeIndustry,\n      handleIndustriesInput,\n      ref,\n      watch,\n      computed,\n      get Dialog() {\n        return Dialog;\n      },\n      get DialogPanel() {\n        return DialogPanel;\n      },\n      get DialogTitle() {\n        return DialogTitle;\n      },\n      get Listbox() {\n        return Listbox;\n      },\n      get ListboxButton() {\n        return ListboxButton;\n      },\n      get ListboxOptions() {\n        return ListboxOptions;\n      },\n      get ListboxOption() {\n        return ListboxOption;\n      },\n      get TransitionRoot() {\n        return TransitionRoot;\n      },\n      get TransitionChild() {\n        return TransitionChild;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get ChevronUpDownIcon() {\n        return ChevronUpDownIcon;\n      },\n      get CheckIcon() {\n        return CheckIcon;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","computed","Dialog","DialogPanel","DialogTitle","Listbox","ListboxButton","ListboxOptions","ListboxOption","TransitionRoot","TransitionChild","XMarkIcon","ChevronUpDownIcon","CheckIcon","JOB_TYPE_OPTIONS","value","label","JOB_STATUS_OPTIONS","SALARY_OPTIONS","CITY_OPTIONS","props","__props","emit","__emit","form","job_type","job_status","expected_salary","expected_city","industries","initialData","newVal","Array","isArray","join","_objectSpread","immediate","deep","handleClose","handleSubmit","formData","split","filter","Boolean","getJobTypeLabel","option","find","opt","getJobStatusLabel","getSalaryLabel","HOT_INDUSTRIES","selectedIndustries","availableIndustries","industry","includes","addIndustry","length","removeIndustry","i","handleIndustriesInput","event","target","slice"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/dialogs/EditJobIntentionDialog.vue"],"sourcesContent":["<template>\n  <TransitionRoot appear :show=\"modelValue\" as=\"div\">\n    <Dialog as=\"div\" class=\"relative z-50\" @close=\"handleClose\">\n      <!-- 背景遮罩 -->\n      <TransitionChild\n        as=\"div\"\n        :show=\"true\"\n        enter=\"duration-300 ease-out\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"duration-200 ease-in\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div class=\"fixed inset-0 bg-black/25\" />\n      </TransitionChild>\n\n      <!-- 对话框 -->\n      <div class=\"fixed inset-0 overflow-y-auto\">\n        <div class=\"flex min-h-full items-center justify-center p-4 text-center\">\n          <TransitionChild\n            as=\"div\"\n            :show=\"true\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0 scale-95\"\n            enter-to=\"opacity-100 scale-100\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100 scale-100\"\n            leave-to=\"opacity-0 scale-95\"\n          >\n            <DialogPanel class=\"w-full max-w-2xl transform overflow-hidden rounded-xl bg-white text-left align-middle shadow-xl transition-all\">\n              <!-- 表单内容 -->\n              <form @submit.prevent=\"handleSubmit\" class=\"flex flex-col max-h-[calc(100vh-8rem)]\">\n                <!-- 头部 -->\n                <DialogTitle \n                  as=\"div\" \n                  class=\"flex items-center justify-between border-b border-gray-200 px-6 py-4\"\n                >\n                  <h3 class=\"text-lg font-medium text-gray-900\">编辑求职意向</h3>\n                  <button\n                    @click=\"handleClose\"\n                    class=\"rounded-full p-1 hover:bg-gray-100 transition-colors\"\n                  >\n                    <XMarkIcon class=\"w-5 h-5 text-gray-400\" />\n                  </button>\n                </DialogTitle>\n\n                <!-- 表单字段区域 - 添加滚动容器 -->\n                <div class=\"flex-1 overflow-y-auto\">\n                  <div class=\"p-6 space-y-6 w-full\">\n                    <!-- 第一行：工作类型和求职状态 -->\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n                      <!-- 工作类型 -->\n                      <div class=\"space-y-1\">\n                        <label class=\"block text-sm font-medium text-gray-700\">\n                          工作类型\n                        </label>\n                        <Listbox v-model=\"form.job_type\">\n                          <div class=\"relative\">\n                            <ListboxButton\n                              class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-4 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500\"\n                            >\n                              <span class=\"block truncate text-sm\">\n                                {{ getJobTypeLabel(form.job_type) }}\n                              </span>\n                              <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\n                                <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" />\n                              </span>\n                            </ListboxButton>\n\n                            <ListboxOptions\n                              class=\"absolute z-10 mt-1 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                              style=\"min-width: 100%; max-width: none; width: max-content;\"\n                            >\n                              <ListboxOption\n                                v-for=\"option in JOB_TYPE_OPTIONS\"\n                                :key=\"option.value\"\n                                :value=\"option.value\"\n                                v-slot=\"{ active, selected }\"\n                              >\n                                <li\n                                  :class=\"[\n                                    active ? 'bg-blue-50 text-blue-600' : 'text-gray-900',\n                                    'relative cursor-pointer select-none py-2.5 pl-4 pr-9'\n                                  ]\"\n                                >\n                                  <span :class=\"[selected ? 'font-medium' : 'font-normal', 'block truncate']\">\n                                    {{ option.label }}\n                                  </span>\n                                  <span\n                                    v-if=\"selected\"\n                                    :class=\"[\n                                      active ? 'text-blue-600' : 'text-blue-500',\n                                      'absolute inset-y-0 right-0 flex items-center pr-3'\n                                    ]\"\n                                  >\n                                    <CheckIcon class=\"h-5 w-5\" />\n                                  </span>\n                                </li>\n                              </ListboxOption>\n                            </ListboxOptions>\n                          </div>\n                        </Listbox>\n                      </div>\n\n                      <!-- 求职状态 -->\n                      <div class=\"space-y-1\">\n                        <label class=\"block text-sm font-medium text-gray-700\">\n                          求职状态\n                        </label>\n                        <Listbox v-model=\"form.job_status\">\n                          <div class=\"relative\">\n                            <ListboxButton\n                              class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-4 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500\"\n                            >\n                              <span class=\"block truncate text-sm\">\n                                {{ getJobStatusLabel(form.job_status) }}\n                              </span>\n                              <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\n                                <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" />\n                              </span>\n                            </ListboxButton>\n\n                            <ListboxOptions\n                              class=\"absolute z-10 mt-1 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                              style=\"min-width: 100%; max-width: none; width: max-content;\"\n                            >\n                              <ListboxOption\n                                v-for=\"option in JOB_STATUS_OPTIONS\"\n                                :key=\"option.value\"\n                                :value=\"option.value\"\n                                v-slot=\"{ active, selected }\"\n                              >\n                                <li\n                                  :class=\"[\n                                    active ? 'bg-blue-50 text-blue-600' : 'text-gray-900',\n                                    'relative cursor-pointer select-none py-2.5 pl-4 pr-9'\n                                  ]\"\n                                >\n                                  <span :class=\"[selected ? 'font-medium' : 'font-normal', 'block truncate']\">\n                                    {{ option.label }}\n                                  </span>\n                                  <span\n                                    v-if=\"selected\"\n                                    :class=\"[\n                                      active ? 'text-blue-600' : 'text-blue-500',\n                                      'absolute inset-y-0 right-0 flex items-center pr-3'\n                                    ]\"\n                                  >\n                                    <CheckIcon class=\"h-5 w-5\" />\n                                  </span>\n                                </li>\n                              </ListboxOption>\n                            </ListboxOptions>\n                          </div>\n                        </Listbox>\n                      </div>\n                    </div>\n\n                    <!-- 第二行：期望薪资和期望城市 -->\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n                      <!-- 期望薪资 -->\n                      <div class=\"space-y-1\">\n                        <label class=\"block text-sm font-medium text-gray-700\">\n                          期望薪资\n                        </label>\n                        <Listbox v-model=\"form.expected_salary\">\n                          <div class=\"relative\">\n                            <ListboxButton\n                              class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-4 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500\"\n                            >\n                              <span class=\"block truncate text-sm\">\n                                {{ getSalaryLabel(form.expected_salary) }}\n                              </span>\n                              <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\n                                <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" />\n                              </span>\n                            </ListboxButton>\n\n                            <ListboxOptions\n                              class=\"absolute z-10 mt-1 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                              style=\"min-width: 100%; max-width: none; width: max-content;\"\n                            >\n                              <ListboxOption\n                                v-for=\"option in SALARY_OPTIONS\"\n                                :key=\"option.value\"\n                                :value=\"option.value\"\n                                v-slot=\"{ active, selected }\"\n                              >\n                                <li\n                                  :class=\"[\n                                    active ? 'bg-blue-50 text-blue-600' : 'text-gray-900',\n                                    'relative cursor-pointer select-none py-2.5 pl-4 pr-9'\n                                  ]\"\n                                >\n                                  <span :class=\"[selected ? 'font-medium' : 'font-normal', 'block truncate']\">\n                                    {{ option.label }}\n                                  </span>\n                                  <span\n                                    v-if=\"selected\"\n                                    :class=\"[\n                                      active ? 'text-blue-600' : 'text-blue-500',\n                                      'absolute inset-y-0 right-0 flex items-center pr-3'\n                                    ]\"\n                                  >\n                                    <CheckIcon class=\"h-5 w-5\" />\n                                  </span>\n                                </li>\n                              </ListboxOption>\n                            </ListboxOptions>\n                          </div>\n                        </Listbox>\n                      </div>\n\n                      <!-- 期望城市 -->\n                      <div class=\"space-y-1\">\n                        <label class=\"block text-sm font-medium text-gray-700\">\n                          期望城市\n                        </label>\n                        <Listbox v-model=\"form.expected_city\">\n                          <div class=\"relative\">\n                            <ListboxButton\n                              class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-4 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500\"\n                            >\n                              <span class=\"block truncate text-sm\">\n                                {{ form.expected_city || '请选择期望城市' }}\n                              </span>\n                              <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\n                                <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" />\n                              </span>\n                            </ListboxButton>\n\n                            <ListboxOptions\n                              class=\"absolute z-10 mt-1 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                              style=\"min-width: 100%; max-width: none; width: max-content;\"\n                            >\n                              <ListboxOption\n                                v-for=\"city in CITY_OPTIONS\"\n                                :key=\"city.value\"\n                                :value=\"city.value\"\n                                v-slot=\"{ active, selected }\"\n                              >\n                                <li\n                                  :class=\"[\n                                    active ? 'bg-blue-50 text-blue-600' : 'text-gray-900',\n                                    'relative cursor-pointer select-none py-2.5 pl-4 pr-9'\n                                  ]\"\n                                >\n                                  <span :class=\"[selected ? 'font-medium' : 'font-normal', 'block truncate']\">\n                                    {{ city.label }}\n                                  </span>\n                                  <span\n                                    v-if=\"selected\"\n                                    :class=\"[\n                                      active ? 'text-blue-600' : 'text-blue-500',\n                                      'absolute inset-y-0 right-0 flex items-center pr-3'\n                                    ]\"\n                                  >\n                                    <CheckIcon class=\"h-5 w-5\" />\n                                  </span>\n                                </li>\n                              </ListboxOption>\n                            </ListboxOptions>\n                          </div>\n                        </Listbox>\n                      </div>\n                    </div>\n\n                    <!-- 第三行：期望行业 -->\n                    <div class=\"space-y-1\">\n                      <label class=\"block text-sm font-medium text-gray-700\">\n                        期望行业\n                      </label>\n                      <div class=\"relative w-full\">\n                        <input\n                          type=\"text\"\n                          v-model=\"form.industries\"\n                          placeholder=\"请输入期望行业，多个行业用逗号分隔\"\n                          class=\"w-full rounded-lg border border-gray-300 py-2.5 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500\"\n                          @change=\"handleIndustriesInput\"\n                        />\n                        <!-- 已选行业标签 -->\n                        <div class=\"mt-2 flex flex-wrap gap-2 w-full\">\n                          <div\n                            v-for=\"industry in selectedIndustries\"\n                            :key=\"industry\"\n                            class=\"inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-50 text-blue-600 space-x-1 whitespace-nowrap\"\n                          >\n                            <span>{{ industry }}</span>\n                            <XMarkIcon \n                              class=\"w-3 h-3 cursor-pointer hover:text-blue-800 shrink-0\" \n                              @click=\"removeIndustry(industry)\"\n                            />\n                          </div>\n                        </div>\n                        <!-- 热门行业推荐 -->\n                        <div class=\"mt-3 w-full\">\n                          <div class=\"flex justify-between items-center mb-2\">\n                            <div class=\"text-xs text-gray-500\">热门行业：</div>\n                            <div class=\"text-xs text-gray-400\">{{ selectedIndustries.length }}/5</div>\n                          </div>\n                          <div class=\"flex flex-wrap gap-2 w-full\">\n                            <button\n                              v-for=\"industry in availableIndustries\"\n                              :key=\"industry\"\n                              type=\"button\"\n                              @click=\"addIndustry(industry)\"\n                              :disabled=\"selectedIndustries.length >= 5\"\n                              :class=\"[\n                                'inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors whitespace-nowrap',\n                                selectedIndustries.length >= 5 \n                                  ? 'border-gray-100 text-gray-300 cursor-not-allowed' \n                                  : 'border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300'\n                              ]\"\n                            >\n                              {{ industry }}\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- 底部按钮 - 固定在底部 -->\n                <div class=\"flex justify-end space-x-3 px-6 py-4 bg-gray-50 border-t border-gray-200\">\n                  <button\n                    type=\"button\"\n                    @click=\"handleClose\"\n                    class=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                  >\n                    取消\n                  </button>\n                  <button\n                    type=\"submit\"\n                    :disabled=\"loading\"\n                    class=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {{ loading ? '保存中...' : '确认' }}\n                  </button>\n                </div>\n              </form>\n            </DialogPanel>\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup>\nimport { ref, watch, computed } from 'vue'\nimport {\n  Dialog,\n  DialogPanel,\n  DialogTitle,\n  Listbox,\n  ListboxButton,\n  ListboxOptions,\n  ListboxOption,\n  TransitionRoot,\n  TransitionChild\n} from '@headlessui/vue'\nimport {\n  XMarkIcon,\n  ChevronUpDownIcon,\n  CheckIcon\n} from '@heroicons/vue/24/outline'\n\n// 选项常量\nconst JOB_TYPE_OPTIONS = [\n  { value: 'full_time', label: '全职' },\n  { value: 'part_time', label: '兼职' },\n  { value: 'internship', label: '实习' },\n  { value: 'freelance', label: '自由职业' }\n]\n\nconst JOB_STATUS_OPTIONS = [\n  { value: 'actively_looking', label: '积极找工作' },\n  { value: 'open_to_offers', label: '考虑机会' },\n  { value: 'not_looking', label: '暂不找工作' }\n]\n\nconst SALARY_OPTIONS = [\n  { value: '0-5', label: '5K以下' },\n  { value: '5-10', label: '5-10K' },\n  { value: '10-15', label: '10-15K' },\n  { value: '15-20', label: '15-20K' },\n  { value: '20-30', label: '20-30K' },\n  { value: '30-50', label: '30-50K' },\n  { value: '50-100', label: '50-100K' },\n  { value: '100+', label: '100K以上' }\n]\n\n// 添加热门城市选项\nconst CITY_OPTIONS = [\n  { value: '北京', label: '北京' },\n  { value: '上海', label: '上海' },\n  { value: '广州', label: '广州' },\n  { value: '深圳', label: '深圳' },\n  { value: '杭州', label: '杭州' },\n  { value: '成都', label: '成都' },\n  { value: '武汉', label: '武汉' },\n  { value: '西安', label: '西安' },\n  { value: '南京', label: '南京' },\n  { value: '苏州', label: '苏州' }\n]\n\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    default: false\n  },\n  initialData: {\n    type: Object,\n    default: () => ({})\n  },\n  loading: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'submit'])\n\n// 表单数据\nconst form = ref({\n  job_type: '',           \n  job_status: '',         \n  expected_salary: '',    \n  expected_city: '',      // 改为单选\n  industries: ''\n})\n\n// 修改 watch 逻辑\nwatch(() => props.initialData, (newVal) => {\n\n  \n  if (newVal) {\n    // 处理 industries 数据,确保是字符串格式\n    const industries = Array.isArray(newVal.industries) \n      ? newVal.industries.join(',')\n      : newVal.industries || ''\n\n    // 处理 expected_city 数据,确保是字符串格式  \n    const expected_city = Array.isArray(newVal.expected_city)\n      ? newVal.expected_city.join(',')\n      : newVal.expected_city || ''\n\n\n    form.value = {\n      ...newVal,\n      industries,\n      expected_city,\n      // 确保所有必需字段都有默认值\n      job_type: newVal.job_type || '',\n      job_status: newVal.job_status || '',\n      expected_salary: newVal.expected_salary || ''\n    }\n\n   \n  }\n}, { immediate: true, deep: true })\n\nconst handleClose = () => {\n  emit('update:modelValue', false)\n}\n\nconst handleSubmit = () => {\n  \n  \n  // 提交前处理数据格式\n  const formData = {\n    ...form.value,\n    // 确保 industries 和 expected_city 是字符串格式\n    industries: form.value.industries?.split(',').filter(Boolean).join(',') || '',\n    expected_city: form.value.expected_city?.split(',').filter(Boolean).join(',') || ''\n  }\n  \n \n  emit('submit', formData)\n}\n\n// 标签获取方法\nconst getJobTypeLabel = (value) => {\n  const option = JOB_TYPE_OPTIONS.find(opt => opt.value === value)\n  return option ? option.label : '请选择工作类型'\n}\n\nconst getJobStatusLabel = (value) => {\n  const option = JOB_STATUS_OPTIONS.find(opt => opt.value === value)\n  return option ? option.label : '请选择求职状态'\n}\n\nconst getSalaryLabel = (value) => {\n  const option = SALARY_OPTIONS.find(opt => opt.value === value)\n  return option ? option.label : '请选择期望薪资'\n}\n\n// 添加热门行业选项\nconst HOT_INDUSTRIES = [\n  '互联网',\n  '人工智能',\n  '大数据',\n  '云计算',\n  '金融科技',\n  '电子商务',\n  '教育科技',\n  '医疗健康',\n  '新能源',\n  '物联网'\n]\n\n// 计算已选择的行业\nconst selectedIndustries = computed(() => {\n  return form.value.industries?.split(',').filter(Boolean) || []\n})\n\n// 计算可选的热门行业（排除已选择的）\nconst availableIndustries = computed(() => {\n  return HOT_INDUSTRIES.filter(industry => !selectedIndustries.value.includes(industry))\n})\n\n// 添加行业\nconst addIndustry = (industry) => {\n  const industries = selectedIndustries.value\n  if (!industries.includes(industry) && industries.length < 5) {\n    form.value.industries = [...industries, industry].join(',')\n  }\n}\n\n// 移除行业\nconst removeIndustry = (industry) => {\n  const industries = selectedIndustries.value\n  form.value.industries = industries.filter(i => i !== industry).join(',')\n}\n\n// 修改输入框的 change 事件处理\nconst handleIndustriesInput = (event) => {\n  const value = event.target.value\n  const industries = value.split(',').filter(Boolean)\n  if (industries.length > 5) {\n    // 只保留前5个行业\n    form.value.industries = industries.slice(0, 5).join(',')\n  }\n}\n</script>\n\n<style scoped>\n/* PC 端固定宽度 */\n.max-w-2xl {\n  max-width: 42rem !important;\n  width: 42rem !important;\n}\n\n/* 移动端适配 */\n@media (max-width: 640px) {\n  .max-w-2xl {\n    max-width: 100% !important;\n    width: 100% !important;\n  }\n  \n  .grid {\n    @apply grid-cols-1 gap-4;\n  }\n}\n\n/* 输入框聚焦效果 */\ninput:focus, select:focus {\n  @apply ring-2 ring-blue-500/10 border-blue-500;\n}\n\n/* 下拉选项悬停效果 */\n.hover\\:bg-blue-50:hover {\n  @apply bg-blue-50 text-blue-600;\n}\n\n/* 过渡动画 */\n.transition-all {\n  @apply duration-200;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}