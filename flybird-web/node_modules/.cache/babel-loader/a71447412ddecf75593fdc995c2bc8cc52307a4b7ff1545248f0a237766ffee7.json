{"ast":null,"code":"import request from '@/utils/request';\nexport const account = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/');\n  },\n  // 更新密码\n  updatePassword: data => {\n    return request({\n      url: '/api/v1/users/account/password/',\n      method: 'post',\n      data: {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_password: data.confirm_password\n      }\n    });\n  },\n  // 更换手机号\n  changePhone: data => {\n    // 确保数据格式正确\n    const requestData = {\n      phone: data.phone.trim(),\n      // 去除可能的空格\n      verify_code: data.code.trim(),\n      // 修改字段名为 verify_code\n      old_phone: data.oldPhone?.trim() || null // 添加原手机号字段\n    };\n    console.log('Sending change phone request:', {\n      url: '/api/v1/users/account/phone/',\n      data: requestData\n    });\n    return request({\n      url: '/api/v1/users/account/phone/',\n      method: 'post',\n      data: requestData,\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    });\n  },\n  // 绑定邮箱\n  bindEmail: data => {\n    return request.post('/api/v1/users/account/bind-email/', {\n      email: data.email,\n      code: data.code\n    });\n  },\n  // 更换邮箱\n  changeEmail: data => {\n    return request.post('/api/v1/users/account/change-email/', {\n      email: data.email,\n      code: data.code,\n      password: data.password\n    });\n  },\n  // 解绑邮箱\n  unbindEmail: data => {\n    return request.post('/api/v1/users/account/unbind-email/', {\n      password: data.password\n    });\n  },\n  // 发送邮箱验证码\n  sendEmailCode: data => {\n    return request.post('/api/v1/users/account/send-email-code/', {\n      email: data.email\n    });\n  },\n  // 注销账号\n  deleteAccount: data => {\n    return request({\n      url: '/api/v1/users/account/delete/',\n      method: 'post',\n      data\n    });\n  },\n  // 发送验证码 (用于更换手机号和邮箱)\n  sendVerifyCode: data => {\n    const requestData = {\n      phone: data.phone.trim(),\n      scene: data.scene,\n      type: 'sms'\n    };\n    console.log('Sending verify code request:', {\n      url: '/api/v1/users/auth/sms/send/',\n      data: requestData\n    });\n    return request({\n      url: '/api/v1/users/auth/sms/send/',\n      method: 'post',\n      data: requestData,\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    });\n  }\n};\nexport default account;","map":{"version":3,"names":["request","account","getUserInfo","get","updatePassword","data","url","method","old_password","new_password","confirm_password","changePhone","requestData","phone","trim","verify_code","code","old_phone","oldPhone","console","log","headers","bindEmail","post","email","changeEmail","password","unbindEmail","sendEmailCode","deleteAccount","sendVerifyCode","scene","type"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/api/account.js"],"sourcesContent":["import request from '@/utils/request'\n\nexport const account = {\n  // 获取用户信息\n  getUserInfo: () => {\n    return request.get('/api/v1/users/userInfo/')\n  },\n\n  // 更新密码\n  updatePassword: (data) => {\n    return request({\n      url: '/api/v1/users/account/password/',\n      method: 'post',\n      data: {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_password: data.confirm_password\n      }\n    })\n  },\n\n  // 更换手机号\n  changePhone: (data) => {\n    // 确保数据格式正确\n    const requestData = {\n      phone: data.phone.trim(),  // 去除可能的空格\n      verify_code: data.code.trim(),  // 修改字段名为 verify_code\n      old_phone: data.oldPhone?.trim() || null  // 添加原手机号字段\n    }\n\n    console.log('Sending change phone request:', {\n      url: '/api/v1/users/account/phone/',\n      data: requestData\n    })\n\n    return request({\n      url: '/api/v1/users/account/phone/',\n      method: 'post',\n      data: requestData,\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    })\n  },\n\n  // 绑定邮箱\n  bindEmail: (data) => {\n    return request.post('/api/v1/users/account/bind-email/', {\n      email: data.email,\n      code: data.code\n    })\n  },\n\n  // 更换邮箱\n  changeEmail: (data) => {\n    return request.post('/api/v1/users/account/change-email/', {\n      email: data.email,\n      code: data.code,\n      password: data.password\n    })\n  },\n\n  // 解绑邮箱\n  unbindEmail: (data) => {\n    return request.post('/api/v1/users/account/unbind-email/', {\n      password: data.password\n    })\n  },\n\n  // 发送邮箱验证码\n  sendEmailCode: (data) => {\n    return request.post('/api/v1/users/account/send-email-code/', {\n      email: data.email\n    })\n  },\n\n  // 注销账号\n  deleteAccount: (data) => {\n    return request({\n      url: '/api/v1/users/account/delete/',\n      method: 'post',\n      data\n    })\n  },\n\n  // 发送验证码 (用于更换手机号和邮箱)\n  sendVerifyCode: (data) => {\n    const requestData = {\n      phone: data.phone.trim(),\n      scene: data.scene,\n      type: 'sms'\n    }\n\n    console.log('Sending verify code request:', {\n      url: '/api/v1/users/auth/sms/send/',\n      data: requestData\n    })\n\n    return request({\n      url: '/api/v1/users/auth/sms/send/',\n      method: 'post',\n      data: requestData,\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    })\n  },\n}\n\nexport default account "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}