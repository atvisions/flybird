{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport { ref, watch } from 'vue';\nimport { Dialog, DialogPanel, DialogTitle, TransitionRoot, TransitionChild, Listbox, ListboxButton, ListboxOptions, ListboxOption } from '@headlessui/vue';\nimport { XMarkIcon, ChevronUpDownIcon, CheckIcon } from '@heroicons/vue/24/outline';\nexport default {\n  __name: 'EditSkillDialog',\n  props: {\n    modelValue: Boolean,\n    initialData: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: Boolean\n  },\n  emits: ['update:modelValue', 'submit'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // 表单数据\n    const form = ref({\n      id: null,\n      // ID\n      name: '',\n      // 技能名称\n      level: '',\n      // 熟练度\n      description: '' // 技能描述\n    });\n\n    // 错误状态\n    const errors = ref({\n      name: '',\n      level: '',\n      description: ''\n    });\n\n    // 技能等级选项\n    const levelOptions = [{\n      value: '初级',\n      label: '初级'\n    }, {\n      value: '中级',\n      label: '中级'\n    }, {\n      value: '高级',\n      label: '高级'\n    }, {\n      value: '专家',\n      label: '专家'\n    }];\n\n    // 监听初始数据变化\n    watch(() => props.initialData, newVal => {\n      if (newVal) {\n        form.value = {\n          id: newVal.id || null,\n          name: newVal.name || '',\n          level: newVal.level || '',\n          description: newVal.description || ''\n        };\n      }\n    }, {\n      immediate: true,\n      deep: true\n    });\n    const handleClose = () => {\n      emit('update:modelValue', false);\n    };\n\n    // 验证表单\n    const validateForm = () => {\n      const errors = {};\n      if (!form.value.name?.trim()) {\n        errors.name = '技能名称不能为空';\n      }\n      if (form.value.name?.length > 50) {\n        errors.name = '技能名称不能超过50个字符';\n      }\n      if (!['初级', '中级', '高级', '专家'].includes(form.value.level)) {\n        errors.level = '请选择有效的技能等级';\n      }\n      return Object.keys(errors).length === 0 ? null : errors;\n    };\n\n    // 提交处理\n    const handleSubmit = async () => {\n      const errors = validateForm();\n      if (errors) {\n        Object.entries(errors).forEach(([field, message]) => {\n          ElMessage.error(message);\n        });\n        return;\n      }\n      emit('submit', {\n        id: props.initialData?.id,\n        name: form.value.name?.trim(),\n        level: form.value.level,\n        description: form.value.description?.trim(),\n        projects: form.value.projects?.trim(),\n        order: form.value.order || 0\n      });\n    };\n    const __returned__ = {\n      props,\n      emit,\n      form,\n      errors,\n      levelOptions,\n      handleClose,\n      validateForm,\n      handleSubmit,\n      ref,\n      watch,\n      get Dialog() {\n        return Dialog;\n      },\n      get DialogPanel() {\n        return DialogPanel;\n      },\n      get DialogTitle() {\n        return DialogTitle;\n      },\n      get TransitionRoot() {\n        return TransitionRoot;\n      },\n      get TransitionChild() {\n        return TransitionChild;\n      },\n      get Listbox() {\n        return Listbox;\n      },\n      get ListboxButton() {\n        return ListboxButton;\n      },\n      get ListboxOptions() {\n        return ListboxOptions;\n      },\n      get ListboxOption() {\n        return ListboxOption;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get ChevronUpDownIcon() {\n        return ChevronUpDownIcon;\n      },\n      get CheckIcon() {\n        return CheckIcon;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","Dialog","DialogPanel","DialogTitle","TransitionRoot","TransitionChild","Listbox","ListboxButton","ListboxOptions","ListboxOption","XMarkIcon","ChevronUpDownIcon","CheckIcon","props","__props","emit","__emit","form","id","name","level","description","errors","levelOptions","value","label","initialData","newVal","immediate","deep","handleClose","validateForm","trim","length","includes","Object","keys","handleSubmit","entries","forEach","field","message","ElMessage","error","projects","order"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/dialogs/EditSkillDialog.vue"],"sourcesContent":["<template>\n  <TransitionRoot appear :show=\"modelValue\" as=\"template\">\n    <Dialog as=\"div\" class=\"relative z-50\" @close=\"handleClose\">\n      <!-- 背景遮罩 -->\n      <TransitionChild\n        as=\"template\"\n        enter=\"duration-300 ease-out\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"duration-200 ease-in\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div class=\"fixed inset-0 bg-black/25\" />\n      </TransitionChild>\n\n      <!-- 对话框 -->\n      <div class=\"fixed inset-0 overflow-y-auto\">\n        <div class=\"flex min-h-full items-center justify-center p-4 text-center\">\n          <TransitionChild\n            as=\"template\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0 scale-95\"\n            enter-to=\"opacity-100 scale-100\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100 scale-100\"\n            leave-to=\"opacity-0 scale-95\"\n          >\n            <DialogPanel class=\"w-full max-w-2xl transform overflow-hidden rounded-xl bg-white text-left align-middle shadow-xl transition-all\">\n              <!-- 头部 -->\n              <DialogTitle \n                as=\"div\" \n                class=\"flex items-center justify-between border-b border-gray-200 px-6 py-4\"\n              >\n                <h3 class=\"text-lg font-medium text-gray-900\">\n                  {{ initialData?.id ? '编辑专业技能' : '添加专业技能' }}\n                </h3>\n                <button\n                  @click=\"handleClose\"\n                  class=\"rounded-full p-1 hover:bg-gray-100 transition-colors\"\n                >\n                  <XMarkIcon class=\"w-5 h-5 text-gray-400\" />\n                </button>\n              </DialogTitle>\n\n              <!-- 表单内容 -->\n              <form @submit.prevent=\"handleSubmit\" class=\"p-6\">\n                <div class=\"space-y-6\">\n                  <!-- 技能名称 -->\n                  <div class=\"space-y-1\">\n                    <label class=\"block text-sm font-medium text-gray-700\">\n                      技能名称 <span class=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      v-model=\"form.name\"\n                      required\n                      :class=\"[\n                        'w-full rounded-lg border py-2.5 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/10',\n                        errors.name ? 'border-red-300 focus:border-red-500' : 'border-gray-300 focus:border-blue-500'\n                      ]\"\n                      placeholder=\"请输入技能名称\"\n                    />\n                    <p v-if=\"errors.name\" class=\"text-sm text-red-500 mt-1\">{{ errors.name }}</p>\n                  </div>\n\n                  <!-- 熟练度 -->\n                  <div class=\"space-y-1\">\n                    <label class=\"block text-sm font-medium text-gray-700\">\n                      熟练度 <span class=\"text-red-500\">*</span>\n                    </label>\n                    <Listbox\n                      v-model=\"form.level\"\n                    >\n                      <div class=\"relative\">\n                        <ListboxButton class=\"relative w-full cursor-pointer rounded-lg bg-white py-2 pl-3 pr-10 text-left border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\">\n                          <span class=\"block truncate\">{{ form.level || '请选择熟练度' }}</span>\n                          <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\">\n                            <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                          </span>\n                        </ListboxButton>\n                        <transition\n                          leave-active-class=\"transition duration-100 ease-in\"\n                          leave-from-class=\"opacity-100\"\n                          leave-to-class=\"opacity-0\"\n                        >\n                          <ListboxOptions class=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                            <ListboxOption\n                              v-for=\"option in levelOptions\"\n                              :key=\"option.value\"\n                              :value=\"option.value\"\n                              v-slot=\"{ active, selected }\"\n                              as=\"template\"\n                            >\n                              <li :class=\"[\n                                active ? 'bg-blue-50' : 'text-gray-900',\n                                'relative cursor-pointer select-none py-2 pl-3 pr-9'\n                              ]\">\n                                <span :class=\"[selected ? 'font-semibold' : 'font-normal', 'block truncate']\">\n                                  {{ option.label }}\n                                </span>\n                                <span v-if=\"selected\" :class=\"[\n                                  'text-blue-600',\n                                  'absolute inset-y-0 right-0 flex items-center pr-4'\n                                ]\">\n                                  <CheckIcon class=\"h-5 w-5\" aria-hidden=\"true\" />\n                                </span>\n                              </li>\n                            </ListboxOption>\n                          </ListboxOptions>\n                        </transition>\n                      </div>\n                    </Listbox>\n                    <p v-if=\"errors.level\" class=\"text-sm text-red-500 mt-1\">{{ errors.level }}</p>\n                  </div>\n\n                  <!-- 技能描述 -->\n                  <div class=\"space-y-1\">\n                    <label class=\"block text-sm font-medium text-gray-700\">\n                      技能描述\n                    </label>\n                    <el-input\n                      v-model=\"form.description\"\n                      type=\"textarea\"\n                      :rows=\"4\"\n                      placeholder=\"请描述你的技能水平、应用场景和相关经验\"\n                      :class=\"[\n                        '!w-full',\n                        errors.description ? 'is-error' : ''\n                      ]\"\n                    />\n                    <p v-if=\"errors.description\" class=\"text-sm text-red-500 mt-1\">{{ errors.description }}</p>\n                  </div>\n\n                  <!-- 底部按钮 -->\n                  <div class=\"flex justify-end space-x-3 pt-6\">\n                    <button\n                      type=\"button\"\n                      @click=\"handleClose\"\n                      class=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\n                    >\n                      取消\n                    </button>\n                    <button\n                      type=\"submit\"\n                      :disabled=\"loading\"\n                      class=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {{ loading ? '保存中...' : '确认' }}\n                    </button>\n                  </div>\n                </div>\n              </form>\n            </DialogPanel>\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport {\n  Dialog,\n  DialogPanel,\n  DialogTitle,\n  TransitionRoot,\n  TransitionChild,\n  Listbox,\n  ListboxButton,\n  ListboxOptions,\n  ListboxOption\n} from '@headlessui/vue'\nimport { XMarkIcon, ChevronUpDownIcon, CheckIcon } from '@heroicons/vue/24/outline'\n\nconst props = defineProps({\n  modelValue: Boolean,\n  initialData: {\n    type: Object,\n    default: () => ({})\n  },\n  loading: Boolean\n})\n\nconst emit = defineEmits(['update:modelValue', 'submit'])\n\n// 表单数据\nconst form = ref({\n  id: null,          // ID\n  name: '',          // 技能名称\n  level: '',         // 熟练度\n  description: ''    // 技能描述\n})\n\n// 错误状态\nconst errors = ref({\n  name: '',\n  level: '',\n  description: ''\n})\n\n// 技能等级选项\nconst levelOptions = [\n  { value: '初级', label: '初级' },\n  { value: '中级', label: '中级' },\n  { value: '高级', label: '高级' },\n  { value: '专家', label: '专家' }\n]\n\n// 监听初始数据变化\nwatch(() => props.initialData, (newVal) => {\n  if (newVal) {\n    form.value = {\n      id: newVal.id || null,\n      name: newVal.name || '',\n      level: newVal.level || '',\n      description: newVal.description || ''\n    }\n  }\n}, { immediate: true, deep: true })\n\nconst handleClose = () => {\n  emit('update:modelValue', false)\n}\n\n// 验证表单\nconst validateForm = () => {\n  const errors = {}\n  \n  if (!form.value.name?.trim()) {\n    errors.name = '技能名称不能为空'\n  }\n  if (form.value.name?.length > 50) {\n    errors.name = '技能名称不能超过50个字符'\n  }\n  if (!['初级', '中级', '高级', '专家'].includes(form.value.level)) {\n    errors.level = '请选择有效的技能等级'\n  }\n  \n  return Object.keys(errors).length === 0 ? null : errors\n}\n\n// 提交处理\nconst handleSubmit = async () => {\n  const errors = validateForm()\n  if (errors) {\n    Object.entries(errors).forEach(([field, message]) => {\n      ElMessage.error(message)\n    })\n    return\n  }\n\n  emit('submit', {\n    id: props.initialData?.id,\n    name: form.value.name?.trim(),\n    level: form.value.level,\n    description: form.value.description?.trim(),\n    projects: form.value.projects?.trim(),\n    order: form.value.order || 0\n  })\n}\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}