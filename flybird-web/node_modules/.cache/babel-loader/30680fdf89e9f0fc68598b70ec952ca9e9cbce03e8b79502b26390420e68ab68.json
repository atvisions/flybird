{"ast":null,"code":"//这里是\nimport request from '@/utils/request';\n\n// 档案数据管理\nconst profile = {\n  // 获取完整档案数据\n  getData() {\n    return request.get('/api/v1/users/profile/data/');\n  },\n  // 获取档案完整度（仅在档案页面使用）\n  getCompleteness() {\n    return request.get('/api/v1/users/profile/completeness/');\n  },\n  // 更新模块数据\n  updateModule(type, data) {\n    // 确保技能模块使用正确的类型名\n    const moduleType = type === 'skill' ? 'skills' : type;\n    const id = data.id;\n    if (id) {\n      // 编辑现有数据\n      return request({\n        url: `/api/v1/users/profile/${moduleType}/${id}/`,\n        method: 'put',\n        data\n      });\n    } else {\n      // 对于 basic_info，使用不同的处理方式，因为它是一对一关系\n      if (moduleType === 'basic_info') {\n        return request({\n          url: `/api/v1/users/profile/${moduleType}/`,\n          method: 'put',\n          data\n        });\n      }\n      // 其他模块的新增\n      return request({\n        url: `/api/v1/users/profile/${moduleType}/`,\n        method: 'post',\n        data\n      });\n    }\n  },\n  // 删除模块项目\n  deleteModuleItem(type, id) {\n    // 处理特殊的模块类型名称\n    const moduleTypeMap = {\n      'skill': 'skills',\n      'certificate': 'certificates'\n      // 添加其他需要映射的类型...\n    };\n    // 确保技能模块使用正确的类型名\n    const moduleType = type === 'skill' ? 'skills' : type;\n    return request({\n      url: `/api/v1/users/profile/${moduleType}/${id}/`,\n      method: 'delete'\n    });\n  },\n  uploadBackground(formData) {\n    return request({\n      url: '/api/v1/users/profile/background/upload/',\n      method: 'post',\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      data: formData\n    });\n  },\n  // 获取布局配置（保留特殊接口）\n  getLayout() {\n    return request.get('/api/v1/users/profile/layout/');\n  },\n  // 更新布局配置（保留特殊接口）\n  updateLayout(data) {\n    return request({\n      url: '/api/v1/users/profile/layout/',\n      method: 'put',\n      data\n    });\n  },\n  // 上传头像\n  uploadAvatar: file => {\n    console.log('上传的文件:', file);\n    const formData = new FormData();\n    formData.append('avatar', file);\n    console.log('FormData 内容:', [...formData.entries()]);\n    return request({\n      url: '/api/v1/users/profile/avatar/upload/',\n      method: 'post',\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        'Accept': 'application/json'\n      },\n      transformRequest: [(data, headers) => {\n        // 防止 axios 处理 FormData\n        return data;\n      }],\n      data: formData\n    });\n  }\n};\nexport default profile;","map":{"version":3,"names":["request","profile","getData","get","getCompleteness","updateModule","type","data","moduleType","id","url","method","deleteModuleItem","moduleTypeMap","uploadBackground","formData","headers","getLayout","updateLayout","uploadAvatar","file","console","log","FormData","append","entries","transformRequest"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/api/profile.js"],"sourcesContent":["//这里是\nimport request from '@/utils/request'\n\n// 档案数据管理\nconst profile = {\n  // 获取完整档案数据\n  getData() {\n    return request.get('/api/v1/users/profile/data/')\n  },\n\n  // 获取档案完整度（仅在档案页面使用）\n  getCompleteness() {\n    return request.get('/api/v1/users/profile/completeness/')\n  },\n\n  // 更新模块数据\n  updateModule(type, data) {\n    // 确保技能模块使用正确的类型名\n    const moduleType = type === 'skill' ? 'skills' : type\n    const id = data.id\n    \n    if (id) {\n      // 编辑现有数据\n      return request({\n        url: `/api/v1/users/profile/${moduleType}/${id}/`,\n        method: 'put',\n        data\n      })\n    } else {\n      // 对于 basic_info，使用不同的处理方式，因为它是一对一关系\n      if (moduleType === 'basic_info') {\n        return request({\n          url: `/api/v1/users/profile/${moduleType}/`,\n          method: 'put',\n          data\n        })\n      }\n      // 其他模块的新增\n      return request({\n        url: `/api/v1/users/profile/${moduleType}/`,\n        method: 'post',\n        data\n      })\n    }\n  },\n\n  // 删除模块项目\n  deleteModuleItem(type, id) {\n    // 处理特殊的模块类型名称\n    const moduleTypeMap = {\n      'skill': 'skills',\n      'certificate': 'certificates',\n      // 添加其他需要映射的类型...\n    }\n    // 确保技能模块使用正确的类型名\n    const moduleType = type === 'skill' ? 'skills' : type\n    return request({\n      url: `/api/v1/users/profile/${moduleType}/${id}/`,\n      method: 'delete'\n    })\n  },\n\n  uploadBackground(formData) {\n    return request({\n      url: '/api/v1/users/profile/background/upload/',\n      method: 'post',\n      headers: { 'Content-Type': 'multipart/form-data' },\n      data: formData\n    })\n  },\n\n  // 获取布局配置（保留特殊接口）\n  getLayout() {\n    return request.get('/api/v1/users/profile/layout/')\n  },\n\n  // 更新布局配置（保留特殊接口）\n  updateLayout(data) {\n    return request({\n      url: '/api/v1/users/profile/layout/',\n      method: 'put',\n      data\n    })\n  },\n\n  // 上传头像\n  uploadAvatar: (file) => {\n    console.log('上传的文件:', file)\n    const formData = new FormData()\n    formData.append('avatar', file)\n    console.log('FormData 内容:', [...formData.entries()])\n    return request({\n      url: '/api/v1/users/profile/avatar/upload/',\n      method: 'post',\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        'Accept': 'application/json'\n      },\n      transformRequest: [(data, headers) => {\n        // 防止 axios 处理 FormData\n        return data;\n      }],\n      data: formData\n    })\n  },\n\n}\n\nexport default profile "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}