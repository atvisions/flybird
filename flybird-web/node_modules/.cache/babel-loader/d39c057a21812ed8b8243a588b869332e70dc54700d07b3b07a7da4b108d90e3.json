{"ast":null,"code":"import { ref, computed } from 'vue';\nimport draggable from 'vuedraggable';\nimport SingleLayout from '../layouts/SingleLayout.vue';\nimport DoubleLayout from '../layouts/DoubleLayout.vue';\nimport TripleLayout from '../layouts/TripleLayout.vue';\nexport default {\n  __name: 'Canvas',\n  props: {\n    scale: {\n      type: Number,\n      default: 1\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const layouts = ref([]);\n    const handleChange = event => {\n      if (event.added) {\n        console.log('添加布局:', event.added.element);\n      }\n    };\n    const getLayoutComponent = layout => {\n      console.log('获取布局组件:', layout);\n      const layoutMap = {\n        'single': SingleLayout,\n        'double': DoubleLayout,\n        'triple': TripleLayout\n      };\n      const layoutType = layout.config?.type || layout.type;\n      return layoutMap[layoutType] || null;\n    };\n    const __returned__ = {\n      props,\n      layouts,\n      handleChange,\n      getLayoutComponent,\n      ref,\n      computed,\n      get draggable() {\n        return draggable;\n      },\n      SingleLayout,\n      DoubleLayout,\n      TripleLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","draggable","SingleLayout","DoubleLayout","TripleLayout","props","__props","layouts","handleChange","event","added","console","log","element","getLayoutComponent","layout","layoutMap","layoutType","config","type"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/components/Canvas.vue"],"sourcesContent":["<template>\n  <div class=\"canvas-container\">\n    <div class=\"canvas-wrapper\">\n      <div class=\"canvas-content\" :style=\"{ transform: `scale(${scale})` }\">\n        <draggable \n          v-model=\"layouts\"\n          :group=\"{ name: 'layouts', pull: false, put: true }\"\n          item-key=\"id\"\n          class=\"canvas-drop-area\"\n          :animation=\"200\"\n          @change=\"handleChange\">\n          <template #item=\"{ element }\">\n            <div class=\"layout-wrapper\">\n              <component \n                :is=\"getLayoutComponent(element)\"\n                :config=\"element.config\" />\n            </div>\n          </template>\n          <template #default>\n            <div v-if=\"!layouts.length\" class=\"canvas-placeholder\">\n              <v-icon size=\"48\" color=\"rgba(0,0,0,0.2)\">mdi-file-document-plus</v-icon>\n              <div class=\"text-subtitle-1 text-medium-emphasis mt-4\">\n                从左侧拖拽布局到此处开始编辑\n              </div>\n            </div>\n          </template>\n        </draggable>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport draggable from 'vuedraggable'\nimport SingleLayout from '../layouts/SingleLayout.vue'\nimport DoubleLayout from '../layouts/DoubleLayout.vue'\nimport TripleLayout from '../layouts/TripleLayout.vue'\n\nconst props = defineProps({\n  scale: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst layouts = ref([])\n\nconst handleChange = (event) => {\n  if (event.added) {\n    console.log('添加布局:', event.added.element)\n  }\n}\n\nconst getLayoutComponent = (layout) => {\n  console.log('获取布局组件:', layout)\n  const layoutMap = {\n    'single': SingleLayout,\n    'double': DoubleLayout,\n    'triple': TripleLayout\n  }\n  const layoutType = layout.config?.type || layout.type\n  return layoutMap[layoutType] || null\n}\n</script>\n\n<style scoped>\n.canvas-container {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  border-radius: 4px;\n}\n\n.canvas-wrapper {\n  padding: 40px;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.canvas-content {\n  width: 595px;\n  height: 842px;\n  background: white;\n  box-shadow: 0 0 24px rgba(0, 0, 0, 0.1);\n  transform-origin: center center;\n  position: relative;\n}\n\n.canvas-drop-area {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.layout-wrapper {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.canvas-placeholder {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.02);\n  border: 2px dashed rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n\n.sortable-ghost {\n  opacity: 0.5;\n  background: #ecf5ff;\n  border: 2px dashed #409eff;\n  border-radius: 8px;\n}\n\n.sortable-chosen {\n  background: #ecf5ff;\n}\n</style> "],"mappings":"AAiCA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,OAAOC,SAAS,MAAM,cAAa;AACnC,OAAOC,YAAY,MAAM,6BAA4B;AACrD,OAAOC,YAAY,MAAM,6BAA4B;AACrD,OAAOC,YAAY,MAAM,6BAA4B;;;;;;;;;;;;;IAErD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,OAAO,GAAGR,GAAG,CAAC,EAAE;IAEtB,MAAMS,YAAY,GAAIC,KAAK,IAAK;MAC9B,IAAIA,KAAK,CAACC,KAAK,EAAE;QACfC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEH,KAAK,CAACC,KAAK,CAACG,OAAO;MAC1C;IACF;IAEA,MAAMC,kBAAkB,GAAIC,MAAM,IAAK;MACrCJ,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEG,MAAM;MAC7B,MAAMC,SAAS,GAAG;QAChB,QAAQ,EAAEd,YAAY;QACtB,QAAQ,EAAEC,YAAY;QACtB,QAAQ,EAAEC;MACZ;MACA,MAAMa,UAAU,GAAGF,MAAM,CAACG,MAAM,EAAEC,IAAI,IAAIJ,MAAM,CAACI,IAAG;MACpD,OAAOH,SAAS,CAACC,UAAU,CAAC,IAAI,IAAG;IACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}