{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = {\n  class: \"double-layout\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"column-placeholder\"\n};\nconst _hoisted_3 = {\n  class: \"component-header\"\n};\nconst _hoisted_4 = {\n  class: \"component-name\"\n};\nconst _hoisted_5 = {\n  class: \"component-actions\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"column-placeholder\"\n};\nconst _hoisted_7 = {\n  class: \"component-header\"\n};\nconst _hoisted_8 = {\n  class: \"component-name\"\n};\nconst _hoisted_9 = {\n  class: \"component-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"layout-columns\",\n    style: _normalizeStyle($setup.layoutStyles)\n  }, [_createCommentVNode(\" 左列 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"layout-column\", {\n      'drag-over': $setup.isDragOverLeft\n    }]),\n    onDragenter: _cache[0] || (_cache[0] = $event => $setup.handleDragEnter($event, 'left')),\n    onDragleave: _cache[1] || (_cache[1] = $event => $setup.handleDragLeave($event, 'left')),\n    onDragover: $setup.handleDragOver,\n    onDrop: _cache[2] || (_cache[2] = e => $setup.handleDrop(e, 'left'))\n  }, [!$setup.leftComponents.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_v_icon, {\n    size: \"32\",\n    color: \"rgba(0,0,0,0.2)\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"mdi-plus\")])),\n    _: 1 /* STABLE */\n  }), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"text-body-2 text-medium-emphasis mt-2\"\n  }, \"拖拽组件到此处\", -1 /* HOISTED */))])) : (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 1\n  }, _renderList($setup.leftComponents, component => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: component.id,\n      class: \"component-item\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(component.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_v_btn, {\n      icon: \"mdi-delete\",\n      size: \"small\",\n      color: \"error\",\n      variant: \"text\",\n      onClick: $event => $setup.removeComponent(component, 'left')\n    }, null, 8 /* PROPS */, [\"onClick\"])])]), (_openBlock(), _createBlock(_resolveDynamicComponent($setup.getComponentByType(component.type)), {\n      config: component.config,\n      \"onUpdate:config\": config => $setup.updateComponentConfig(component.id, config, 'left')\n    }, null, 40 /* PROPS, NEED_HYDRATION */, [\"config\", \"onUpdate:config\"]))]);\n  }), 128 /* KEYED_FRAGMENT */))], 34 /* CLASS, NEED_HYDRATION */), _createCommentVNode(\" 右列 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"layout-column\", {\n      'drag-over': $setup.isDragOverRight\n    }]),\n    onDragenter: _cache[3] || (_cache[3] = $event => $setup.handleDragEnter($event, 'right')),\n    onDragleave: _cache[4] || (_cache[4] = $event => $setup.handleDragLeave($event, 'right')),\n    onDragover: $setup.handleDragOver,\n    onDrop: _cache[5] || (_cache[5] = e => $setup.handleDrop(e, 'right'))\n  }, [!$setup.rightComponents.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_v_icon, {\n    size: \"32\",\n    color: \"rgba(0,0,0,0.2)\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"mdi-plus\")])),\n    _: 1 /* STABLE */\n  }), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"text-body-2 text-medium-emphasis mt-2\"\n  }, \"拖拽组件到此处\", -1 /* HOISTED */))])) : (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 1\n  }, _renderList($setup.rightComponents, component => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: component.id,\n      class: \"component-item\"\n    }, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, _toDisplayString(component.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_v_btn, {\n      icon: \"mdi-delete\",\n      size: \"small\",\n      color: \"error\",\n      variant: \"text\",\n      onClick: $event => $setup.removeComponent(component, 'right')\n    }, null, 8 /* PROPS */, [\"onClick\"])])]), (_openBlock(), _createBlock(_resolveDynamicComponent($setup.getComponentByType(component.type)), {\n      config: component.config,\n      \"onUpdate:config\": config => $setup.updateComponentConfig(component.id, config, 'right')\n    }, null, 40 /* PROPS, NEED_HYDRATION */, [\"config\", \"onUpdate:config\"]))]);\n  }), 128 /* KEYED_FRAGMENT */))], 34 /* CLASS, NEED_HYDRATION */)], 4 /* STYLE */)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","style","_normalizeStyle","$setup","layoutStyles","_createCommentVNode","_normalizeClass","isDragOverLeft","onDragenter","_cache","$event","handleDragEnter","onDragleave","handleDragLeave","onDragover","handleDragOver","onDrop","e","handleDrop","leftComponents","length","_hoisted_2","_createVNode","_component_v_icon","size","color","default","_withCtx","_createTextVNode","_","_Fragment","_renderList","component","id","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","_component_v_btn","icon","variant","onClick","removeComponent","_createBlock","_resolveDynamicComponent","getComponentByType","type","config","updateComponentConfig","isDragOverRight","rightComponents","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/resume-editor/layouts/DoubleLayout.vue"],"sourcesContent":["<template>\n  <div class=\"double-layout\">\n    <div class=\"layout-columns\" :style=\"layoutStyles\">\n      <!-- 左列 -->\n      <div class=\"layout-column\"\n        :class=\"{ 'drag-over': isDragOverLeft }\"\n        @dragenter=\"handleDragEnter($event, 'left')\"\n        @dragleave=\"handleDragLeave($event, 'left')\"\n        @dragover=\"handleDragOver\"\n        @drop=\"e => handleDrop(e, 'left')\">\n        <div v-if=\"!leftComponents.length\" class=\"column-placeholder\">\n          <v-icon size=\"32\" color=\"rgba(0,0,0,0.2)\">mdi-plus</v-icon>\n          <div class=\"text-body-2 text-medium-emphasis mt-2\">拖拽组件到此处</div>\n        </div>\n        <template v-else>\n          <div v-for=\"component in leftComponents\" \n            :key=\"component.id\"\n            class=\"component-item\">\n            <div class=\"component-header\">\n              <span class=\"component-name\">{{ component.name }}</span>\n              <div class=\"component-actions\">\n                <v-btn\n                  icon=\"mdi-delete\"\n                  size=\"small\"\n                  color=\"error\"\n                  variant=\"text\"\n                  @click=\"removeComponent(component, 'left')\"\n                ></v-btn>\n              </div>\n            </div>\n            <component\n              :is=\"getComponentByType(component.type)\"\n              :config=\"component.config\"\n              @update:config=\"config => updateComponentConfig(component.id, config, 'left')\"\n            ></component>\n          </div>\n        </template>\n      </div>\n\n      <!-- 右列 -->\n      <div class=\"layout-column\"\n        :class=\"{ 'drag-over': isDragOverRight }\"\n        @dragenter=\"handleDragEnter($event, 'right')\"\n        @dragleave=\"handleDragLeave($event, 'right')\"\n        @dragover=\"handleDragOver\"\n        @drop=\"e => handleDrop(e, 'right')\">\n        <div v-if=\"!rightComponents.length\" class=\"column-placeholder\">\n          <v-icon size=\"32\" color=\"rgba(0,0,0,0.2)\">mdi-plus</v-icon>\n          <div class=\"text-body-2 text-medium-emphasis mt-2\">拖拽组件到此处</div>\n        </div>\n        <template v-else>\n          <div v-for=\"component in rightComponents\" \n            :key=\"component.id\"\n            class=\"component-item\">\n            <div class=\"component-header\">\n              <span class=\"component-name\">{{ component.name }}</span>\n              <div class=\"component-actions\">\n                <v-btn\n                  icon=\"mdi-delete\"\n                  size=\"small\"\n                  color=\"error\"\n                  variant=\"text\"\n                  @click=\"removeComponent(component, 'right')\"\n                ></v-btn>\n              </div>\n            </div>\n            <component\n              :is=\"getComponentByType(component.type)\"\n              :config=\"component.config\"\n              @update:config=\"config => updateComponentConfig(component.id, config, 'right')\"\n            ></component>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useComponents } from '../composables/useComponents'\n\nconst props = defineProps({\n  config: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:config'])\n\nconst leftComponents = ref(props.config.leftComponents || [])\nconst rightComponents = ref(props.config.rightComponents || [])\nconst isDragOverLeft = ref(false)\nconst isDragOverRight = ref(false)\n\nconst { getComponentByType } = useComponents()\n\n// 计算布局样式\nconst layoutStyles = computed(() => ({\n  backgroundColor: props.config.styles?.backgroundColor || '#f5f7fa',\n  borderColor: props.config.styles?.borderColor || '#e4e7ed',\n  padding: props.config.styles?.padding || '16px',\n  borderRadius: props.config.styles?.borderRadius || '8px',\n  ...props.config.styles\n}))\n\n// 监听配置变化\nwatch(() => props.config, (newConfig) => {\n  leftComponents.value = newConfig.leftComponents || []\n  rightComponents.value = newConfig.rightComponents || []\n}, { deep: true })\n\n// 处理拖拽进入\nconst handleDragEnter = (event, column) => {\n  event.preventDefault()\n  if (column === 'left') {\n    isDragOverLeft.value = true\n  } else {\n    isDragOverRight.value = true\n  }\n}\n\n// 处理拖拽离开\nconst handleDragLeave = (event, column) => {\n  event.preventDefault()\n  if (column === 'left') {\n    isDragOverLeft.value = false\n  } else {\n    isDragOverRight.value = false\n  }\n}\n\n// 处理拖拽悬停\nconst handleDragOver = (event) => {\n  event.preventDefault()\n}\n\n// 处理组件放置\nconst handleDrop = (event, column) => {\n  event.preventDefault()\n  if (column === 'left') {\n    isDragOverLeft.value = false\n  } else {\n    isDragOverRight.value = false\n  }\n  \n  const componentData = event.dataTransfer.getData('application/json')\n  if (componentData) {\n    try {\n      const component = JSON.parse(componentData)\n      if (component.type !== 'layout') {\n        addComponent(component, column)\n      }\n    } catch (error) {\n      console.error('解析组件数据失败:', error)\n    }\n  }\n}\n\n// 添加组件\nconst addComponent = (component, column) => {\n  const newComponent = {\n    id: Date.now(),\n    type: component.type,\n    name: component.name,\n    config: component.config || {}\n  }\n  if (column === 'left') {\n    leftComponents.value.push(newComponent)\n  } else {\n    rightComponents.value.push(newComponent)\n  }\n  updateConfig()\n}\n\n// 移除组件\nconst removeComponent = (component, column) => {\n  const components = column === 'left' ? leftComponents : rightComponents\n  const index = components.value.findIndex(c => c.id === component.id)\n  if (index > -1) {\n    components.value.splice(index, 1)\n    updateConfig()\n  }\n}\n\n// 更新组件配置\nconst updateComponentConfig = (componentId, config, column) => {\n  const components = column === 'left' ? leftComponents : rightComponents\n  const component = components.value.find(c => c.id === componentId)\n  if (component) {\n    component.config = config\n    updateConfig()\n  }\n}\n\n// 更新配置\nconst updateConfig = () => {\n  emit('update:config', {\n    ...props.config,\n    leftComponents: leftComponents.value,\n    rightComponents: rightComponents.value\n  })\n}\n</script>\n\n<style scoped>\n.double-layout {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n}\n\n.layout-columns {\n  display: flex;\n  gap: 20px;\n  height: 100%;\n  border: 2px dashed;\n  transition: all 0.3s;\n}\n\n.layout-column {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding: 16px;\n  transition: all 0.3s;\n}\n\n.layout-column.drag-over {\n  background-color: #ecf5ff !important;\n  border-color: #409eff !important;\n}\n\n.column-placeholder {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 120px;\n  background-color: #ffffff;\n  border-radius: 6px;\n  color: rgba(0, 0, 0, 0.4);\n  transition: all 0.3s;\n}\n\n.component-item {\n  background-color: #ffffff;\n  border: 1px solid #e4e7ed;\n  border-radius: 6px;\n  overflow: hidden;\n  transition: all 0.3s;\n}\n\n.component-item:hover {\n  border-color: #409eff;\n  box-shadow: 0 2px 12px rgba(64, 158, 255, 0.1);\n}\n\n.component-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 12px;\n  background-color: #f5f7fa;\n  border-bottom: 1px solid #e4e7ed;\n}\n\n.component-name {\n  font-size: 14px;\n  color: #606266;\n}\n\n.component-actions {\n  display: flex;\n  gap: 4px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}