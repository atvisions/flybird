{"ast":null,"code":"import { defineStore } from 'pinia';\nimport request from '@/utils/request';\nimport { showToast } from '@/components/ToastMessage';\nexport const useUserStore = defineStore('user', {\n  state: () => ({\n    userInfo: null,\n    loading: false,\n    error: null\n  }),\n  getters: {\n    userBasicInfo: state => state.userInfo,\n    username: state => state.userInfo?.username,\n    avatar: state => state.userInfo?.avatar,\n    isLoading: state => state.loading,\n    hasError: state => state.error !== null\n  },\n  actions: {\n    async getUserInfo() {\n      try {\n        this.loading = true;\n        this.error = null;\n        const response = await request.get('/api/v1/users/userInfo/');\n        if (response?.data?.code === 200) {\n          this.userInfo = response.data.data;\n          return this.userInfo;\n        }\n        throw new Error(response?.data?.message || '获取用户信息失败');\n      } catch (error) {\n        console.error('获取用户信息失败:', error);\n        this.error = error.message;\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n    clearUserInfo() {\n      this.userInfo = null;\n      this.loading = false;\n      this.error = null;\n    },\n    setUserInfo(info) {\n      this.userInfo = info;\n    }\n  }\n});","map":{"version":3,"names":["defineStore","request","showToast","useUserStore","state","userInfo","loading","error","getters","userBasicInfo","username","avatar","isLoading","hasError","actions","getUserInfo","response","get","data","code","Error","message","console","clearUserInfo","setUserInfo","info"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/user.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport request from '@/utils/request'\nimport { showToast } from '@/components/ToastMessage'\n\nexport const useUserStore = defineStore('user', {\n  state: () => ({\n    userInfo: null,\n    loading: false,\n    error: null\n  }),\n\n  getters: {\n    userBasicInfo: (state) => state.userInfo,\n    username: (state) => state.userInfo?.username,\n    avatar: (state) => state.userInfo?.avatar,\n    isLoading: (state) => state.loading,\n    hasError: (state) => state.error !== null\n  },\n\n  actions: {\n    async getUserInfo() {\n      try {\n        this.loading = true\n        this.error = null\n        \n        const response = await request.get('/api/v1/users/userInfo/')\n        \n        if (response?.data?.code === 200) {\n          this.userInfo = response.data.data\n          return this.userInfo\n        }\n        \n        throw new Error(response?.data?.message || '获取用户信息失败')\n      } catch (error) {\n        console.error('获取用户信息失败:', error)\n        this.error = error.message\n        throw error\n      } finally {\n        this.loading = false\n      }\n    },\n\n    clearUserInfo() {\n      this.userInfo = null\n      this.loading = false\n      this.error = null\n    },\n\n    setUserInfo(info) {\n      this.userInfo = info\n    }\n  }\n}) "],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,SAAS,QAAQ,2BAA2B;AAErD,OAAO,MAAMC,YAAY,GAAGH,WAAW,CAAC,MAAM,EAAE;EAC9CI,KAAK,EAAEA,CAAA,MAAO;IACZC,QAAQ,EAAE,IAAI;IACdC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;EACT,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,aAAa,EAAGL,KAAK,IAAKA,KAAK,CAACC,QAAQ;IACxCK,QAAQ,EAAGN,KAAK,IAAKA,KAAK,CAACC,QAAQ,EAAEK,QAAQ;IAC7CC,MAAM,EAAGP,KAAK,IAAKA,KAAK,CAACC,QAAQ,EAAEM,MAAM;IACzCC,SAAS,EAAGR,KAAK,IAAKA,KAAK,CAACE,OAAO;IACnCO,QAAQ,EAAGT,KAAK,IAAKA,KAAK,CAACG,KAAK,KAAK;EACvC,CAAC;EAEDO,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,IAAI,CAACT,OAAO,GAAG,IAAI;QACnB,IAAI,CAACC,KAAK,GAAG,IAAI;QAEjB,MAAMS,QAAQ,GAAG,MAAMf,OAAO,CAACgB,GAAG,CAAC,yBAAyB,CAAC;QAE7D,IAAID,QAAQ,EAAEE,IAAI,EAAEC,IAAI,KAAK,GAAG,EAAE;UAChC,IAAI,CAACd,QAAQ,GAAGW,QAAQ,CAACE,IAAI,CAACA,IAAI;UAClC,OAAO,IAAI,CAACb,QAAQ;QACtB;QAEA,MAAM,IAAIe,KAAK,CAACJ,QAAQ,EAAEE,IAAI,EAAEG,OAAO,IAAI,UAAU,CAAC;MACxD,CAAC,CAAC,OAAOd,KAAK,EAAE;QACde,OAAO,CAACf,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjC,IAAI,CAACA,KAAK,GAAGA,KAAK,CAACc,OAAO;QAC1B,MAAMd,KAAK;MACb,CAAC,SAAS;QACR,IAAI,CAACD,OAAO,GAAG,KAAK;MACtB;IACF,CAAC;IAEDiB,aAAaA,CAAA,EAAG;MACd,IAAI,CAAClB,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACC,OAAO,GAAG,KAAK;MACpB,IAAI,CAACC,KAAK,GAAG,IAAI;IACnB,CAAC;IAEDiB,WAAWA,CAACC,IAAI,EAAE;MAChB,IAAI,CAACpB,QAAQ,GAAGoB,IAAI;IACtB;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}