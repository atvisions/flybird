{"ast":null,"code":"import { ref, computed, nextTick, watch, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport defaultAvatarImage from '@/assets/images/default-avatar.png';\nimport { useStore } from 'vuex';\nimport { MEDIA_URL } from '@/config';\nimport { showToast } from '@/components/ToastMessage';\nimport { PhoneIcon, EnvelopeIcon, MapPinIcon, CameraIcon, UserIcon, CakeIcon, PencilSquareIcon } from '@heroicons/vue/24/outline';\nimport profile from '@/api/profile';\nimport ProfileAvatarUpload from '@/components/ProfileAvatarUpload.vue';\nimport { useProfileStore } from '@/stores/profile';\n\n// 1. 首先声明 props\n\nexport default {\n  __name: 'BasicInfo',\n  props: {\n    resumeData: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    bioExpanded: {\n      type: Boolean,\n      default: false\n    },\n    showBioExpandButton: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update', 'edit', 'toggleBioExpand'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n\n    // 2. 声明 emits\n    const emit = __emit;\n\n    // 3. 导入和初始化其他变量\n    const store = useStore();\n    const profileStore = useProfileStore();\n    const pageLoading = ref(true);\n    const basicInfo = ref({});\n\n    // 4. 计算属性\n    const formatBasicInfo = computed(() => {\n      // 优先使用父组件传入的 resumeData\n      const info = props.resumeData || {};\n      return {\n        name: info.name || info.username || '未填写',\n        // 添加 username 作为备选\n        gender: formatGender(info.gender),\n        phone: info.phone || '未填写',\n        email: info.email || '未填写',\n        location: info.location || '未填写',\n        age: calculateAge(info.birth_date) || '未填写',\n        personal_summary: info.personal_summary || '未填写'\n      };\n    });\n    const userAvatar = computed(() => {\n      const avatar = props.resumeData?.avatar;\n      if (!avatar) return defaultAvatarImage;\n      return avatar.startsWith('http') || avatar.startsWith('data:') ? avatar : `${MEDIA_URL}${avatar}`;\n    });\n    const currentGender = computed(() => {\n      return props.resumeData?.gender;\n    });\n\n    // 5. 监听器\n    watch(() => props.resumeData, newVal => {\n      if (newVal && Object.keys(newVal).length > 0) {\n        pageLoading.value = false;\n      }\n    }, {\n      immediate: true\n    });\n\n    // 6. 生命周期钩子\n    onMounted(async () => {\n      try {\n        pageLoading.value = true;\n        // 不需要在这里获取数据，因为父组件会处理\n      } catch (error) {\n        console.error('初始化失败:', error);\n      } finally {\n        pageLoading.value = false;\n      }\n    });\n    onMounted(async () => {\n      try {\n        await store.dispatch('fetchCompleteness');\n      } catch (error) {\n        console.error('Failed to fetch completeness:', error);\n      }\n    });\n\n    // 7. 方法定义\n    const handleFileChange = async event => {\n      const file = event.target.files[0];\n      if (!file) return;\n\n      // 验证文件\n      if (!validateFile(file)) {\n        return;\n      }\n      await handleAvatarUpload(file);\n\n      // 清空文件选择器，以便能够选择同一个文件\n      event.target.value = '';\n    };\n    const handleEdit = () => {\n      console.log('BasicInfo handleEdit - 当前数据:', props.resumeData);\n      // 确保传递正确的数据结构\n      const editData = {\n        name: props.resumeData.name,\n        gender: props.resumeData.gender,\n        birth_date: props.resumeData.birth_date,\n        phone: props.resumeData.phone,\n        email: props.resumeData.email,\n        location: props.resumeData.location,\n        personal_summary: props.resumeData.personal_summary\n      };\n      emit('edit', 'basic_info', editData);\n    };\n    const toggleBioExpand = () => {\n      emit('toggleBioExpand');\n    };\n\n    // 8. 工具函数\n    const calculateAge = birthDate => {\n      if (!birthDate) return '';\n      const birth = new Date(birthDate);\n      const today = new Date();\n      let age = today.getFullYear() - birth.getFullYear();\n      const monthDiff = today.getMonth() - birth.getMonth();\n      if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birth.getDate()) {\n        age--;\n      }\n      return `${age}岁`;\n    };\n    const formatGender = gender => {\n      const genderMap = {\n        male: '男',\n        female: '女',\n        other: '其他'\n      };\n      return genderMap[gender] || '未填写';\n    };\n    const formatDate = dateString => {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    };\n\n    // 调试辅助函数\n    const logResumeData = () => {\n      const plainData = {\n        name: props.resumeData.name,\n        gender: props.resumeData.gender,\n        phone: props.resumeData.phone,\n        email: props.resumeData.email,\n        location: props.resumeData.location,\n        birth_date: props.resumeData.birth_date,\n        personal_summary: props.resumeData.personal_summary,\n        created_at: props.resumeData.created_at,\n        updated_at: props.resumeData.updated_at\n      };\n      console.log('BasicInfo data:', plainData);\n    };\n\n    // 修改头像上传处理函数\n    const handleAvatarUpload = async file => {\n      try {\n        loading.value = true;\n        console.log('开始上传职业头像:', {\n          file,\n          size: file.size,\n          type: file.type\n        });\n\n        // 使用 profileStore 上传头像\n        const response = await profileStore.updateAvatar(file);\n        console.log('职业头像上传响应:', response);\n        if (response?.data?.code === 200) {\n          showToast('职业头像上传成功', 'success');\n\n          // 更新本地数据\n          if (props.resumeData) {\n            props.resumeData.avatar = response.data.data.avatar;\n\n            // 触发父组件更新\n            emit('update', {\n              type: 'avatar',\n              value: response.data.data.avatar\n            });\n          }\n        } else {\n          throw new Error(response.data?.message || '上传失败');\n        }\n      } catch (error) {\n        console.error('职业头像上传失败:', error);\n        showToast(error.message || '职业头像上传失败，请稍后重试', 'error');\n      } finally {\n        loading.value = false;\n        showAvatarCropper.value = false;\n      }\n    };\n\n    // 添加图片加载错误处理\n    const handleImageError = e => {\n      e.target.src = defaultAvatarImage;\n    };\n\n    // 添加文件验证\n    const validateFile = file => {\n      // 验证文件类型\n      if (!file.type.startsWith('image/')) {\n        showToast('请选择图片文件', 'error');\n        return false;\n      }\n\n      // 验证文件大小（例如限制为 2MB）\n      const maxSize = 20 * 1024 * 1024; // 2MB\n      if (file.size > maxSize) {\n        showToast('图片大小不能超过 2MB', 'error');\n        return false;\n      }\n      return true;\n    };\n\n    // 添加状态\n    const showAvatarCropper = ref(false);\n    const avatarUploadRef = ref(null);\n    const loading = ref(false);\n\n    // 监听 resumeData 变化\n    watch(() => props.resumeData, newVal => {\n      if (newVal) {\n        // 强制更新组件\n        nextTick(() => {\n          if (props.resumeData?.avatar) {\n            const img = new Image();\n            img.src = userAvatar.value;\n          }\n        });\n      }\n    }, {\n      deep: true\n    });\n    const __returned__ = {\n      props,\n      emit,\n      store,\n      profileStore,\n      pageLoading,\n      basicInfo,\n      formatBasicInfo,\n      userAvatar,\n      currentGender,\n      handleFileChange,\n      handleEdit,\n      toggleBioExpand,\n      calculateAge,\n      formatGender,\n      formatDate,\n      logResumeData,\n      handleAvatarUpload,\n      handleImageError,\n      validateFile,\n      showAvatarCropper,\n      avatarUploadRef,\n      loading,\n      ref,\n      computed,\n      nextTick,\n      watch,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get defaultAvatarImage() {\n        return defaultAvatarImage;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get MEDIA_URL() {\n        return MEDIA_URL;\n      },\n      get showToast() {\n        return showToast;\n      },\n      get PhoneIcon() {\n        return PhoneIcon;\n      },\n      get EnvelopeIcon() {\n        return EnvelopeIcon;\n      },\n      get MapPinIcon() {\n        return MapPinIcon;\n      },\n      get CameraIcon() {\n        return CameraIcon;\n      },\n      get UserIcon() {\n        return UserIcon;\n      },\n      get CakeIcon() {\n        return CakeIcon;\n      },\n      get PencilSquareIcon() {\n        return PencilSquareIcon;\n      },\n      get profile() {\n        return profile;\n      },\n      ProfileAvatarUpload,\n      get useProfileStore() {\n        return useProfileStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","nextTick","watch","onMounted","ElMessage","defaultAvatarImage","useStore","MEDIA_URL","showToast","PhoneIcon","EnvelopeIcon","MapPinIcon","CameraIcon","UserIcon","CakeIcon","PencilSquareIcon","profile","ProfileAvatarUpload","useProfileStore","props","__props","emit","__emit","store","profileStore","pageLoading","basicInfo","formatBasicInfo","info","resumeData","name","username","gender","formatGender","phone","email","location","age","calculateAge","birth_date","personal_summary","userAvatar","avatar","startsWith","currentGender","newVal","Object","keys","length","value","immediate","error","console","dispatch","handleFileChange","event","file","target","files","validateFile","handleAvatarUpload","handleEdit","log","editData","toggleBioExpand","birthDate","birth","Date","today","getFullYear","monthDiff","getMonth","getDate","genderMap","male","female","other","formatDate","dateString","date","toLocaleDateString","year","month","day","logResumeData","plainData","created_at","updated_at","loading","size","type","response","updateAvatar","data","code","Error","message","showAvatarCropper","handleImageError","e","src","maxSize","avatarUploadRef","img","Image","deep"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/BasicInfo.vue"],"sourcesContent":["<!-- src/views/user/MyProfile/components/BasicInfo.vue -->\n<template>\n  <div class=\"bg-white rounded-lg shadow\">\n    <!-- 个人信息卡片 -->\n    <div class=\"px-6 py-6\">\n      <!-- 标题 -->\n      <div class=\"flex items-center mb-6\">\n        <UserIcon class=\"w-5 h-5 text-gray-900 mr-2\" />\n        <h2 class=\"text-base font-medium text-gray-900\">基本信息</h2>\n      </div>\n\n      <!-- 头像和基本信息 -->\n      <div class=\"flex items-start space-x-6 mb-8\">\n        <!-- 头像部分 -->\n        <div class=\"relative group\">\n          <img \n            :src=\"userAvatar\" \n            class=\"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg user-avatar\"\n            alt=\"用户头像\"\n            @error=\"handleImageError\"\n          />\n          <div \n            @click=\"showAvatarCropper = true\"\n            class=\"absolute inset-0 flex items-center justify-center rounded-full bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity duration-200\"\n          >\n            <CameraIcon class=\"w-8 h-8 text-white\" />\n          </div>\n          <!-- 性别标识 -->\n          <div class=\"absolute bottom-0 right-0 bg-white rounded-full p-1.5 shadow\">\n            <!-- 男性图标 -->\n            <svg \n              v-if=\"currentGender === 'male'\" \n              class=\"w-5 h-5 text-blue-500\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              stroke=\"currentColor\"\n            >\n              <circle cx=\"12\" cy=\"12\" r=\"5\" stroke-width=\"2\"/>\n              <path d=\"M16 8L21 3\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n              <path d=\"M21 3H16M21 3V8\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n            </svg>\n            <!-- 女性图标 -->\n            <svg \n              v-else-if=\"currentGender === 'female'\" \n              class=\"w-5 h-5 text-pink-500\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              stroke=\"currentColor\"\n            >\n              <circle cx=\"12\" cy=\"10\" r=\"5\" stroke-width=\"2\"/>\n              <path d=\"M12 15V21\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n              <path d=\"M9 18H15\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n            </svg>\n          </div>\n        </div>\n\n        <!-- 名字和简介 -->\n        <div class=\"flex-1\">\n          <div class=\"flex items-center justify-between\">\n            <h1 class=\"text-xl font-bold text-gray-900\">{{ formatBasicInfo.name }}</h1>\n            <button\n              @click=\"handleEdit\"\n              class=\"p-1.5 rounded-full hover:bg-gray-100 transition-colors\"\n            >\n              <PencilSquareIcon class=\"w-4 h-4 text-gray-500\" />\n            </button>\n          </div>\n          <p class=\"mt-2 text-sm text-gray-600\">{{ formatBasicInfo.personal_summary || '这个人很懒，还没有填写个人简介' }}</p>\n        </div>\n      </div>\n\n      <!-- 基本信息部分 -->\n      <div>\n        <!-- 信息网格 -->\n        <div class=\"grid grid-cols-2 gap-x-12 gap-y-4 border-t border-gray-100 pt-6\">\n          <!-- 联系方式 -->\n          <div>\n            <h2 class=\"text-xs font-medium text-gray-500 mb-3\">联系方式</h2>\n            <div class=\"flex items-center space-x-2\">\n              <PhoneIcon class=\"w-4 h-4 text-gray-400\" />\n              <span class=\"text-sm text-gray-900\">{{ formatBasicInfo.phone }}</span>\n            </div>\n            <div class=\"flex items-center space-x-2 mt-2\">\n              <EnvelopeIcon class=\"w-4 h-4 text-gray-400\" />\n              <span class=\"text-sm text-gray-900\">{{ formatBasicInfo.email }}</span>\n            </div>\n          </div>\n\n          <!-- 基本资料 -->\n          <div>\n            <h2 class=\"text-xs font-medium text-gray-500 mb-3\">基本资料</h2>\n            <div class=\"flex items-center space-x-2\">\n              <MapPinIcon class=\"w-4 h-4 text-gray-400\" />\n              <span class=\"text-sm text-gray-900\">{{ formatBasicInfo.location }}</span>\n            </div>\n            <div class=\"flex items-center space-x-2 mt-2\">\n              <CakeIcon class=\"w-4 h-4 text-gray-400\" />\n              <span class=\"text-sm text-gray-900\">{{ formatBasicInfo.age }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- 新的头像裁剪组件 -->\n  <ProfileAvatarUpload\n    ref=\"avatarUploadRef\"\n    v-model=\"showAvatarCropper\"\n    @upload=\"handleAvatarUpload\"\n  />\n\n  <div v-if=\"pageLoading\" class=\"loading-state\">\n    <!-- loading 内容 -->\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick, watch, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport defaultAvatarImage from '@/assets/images/default-avatar.png'\nimport { useStore } from 'vuex'\nimport { MEDIA_URL } from '@/config'\nimport { showToast } from '@/components/ToastMessage'\nimport {\n  PhoneIcon,\n  EnvelopeIcon,\n  MapPinIcon,\n  CameraIcon,\n  UserIcon,\n  CakeIcon,\n  PencilSquareIcon\n} from '@heroicons/vue/24/outline'\nimport profile from '@/api/profile'\nimport ProfileAvatarUpload from '@/components/ProfileAvatarUpload.vue'\nimport { useProfileStore } from '@/stores/profile'\n\n// 1. 首先声明 props\nconst props = defineProps({\n  resumeData: {\n    type: Object,\n    default: () => ({})\n  },\n  loading: {\n    type: Boolean,\n    default: false\n  },\n  bioExpanded: {\n    type: Boolean,\n    default: false\n  },\n  showBioExpandButton: {\n    type: Boolean,\n    default: false\n  }\n})\n\n// 2. 声明 emits\nconst emit = defineEmits(['update', 'edit', 'toggleBioExpand'])\n\n// 3. 导入和初始化其他变量\nconst store = useStore()\nconst profileStore = useProfileStore()\nconst pageLoading = ref(true)\nconst basicInfo = ref({})\n\n// 4. 计算属性\nconst formatBasicInfo = computed(() => {\n  // 优先使用父组件传入的 resumeData\n  const info = props.resumeData || {}\n  \n  return {\n    name: info.name || info.username || '未填写',  // 添加 username 作为备选\n    gender: formatGender(info.gender),\n    phone: info.phone || '未填写',\n    email: info.email || '未填写',\n    location: info.location || '未填写',\n    age: calculateAge(info.birth_date) || '未填写',\n    personal_summary: info.personal_summary || '未填写'\n  }\n})\n\nconst userAvatar = computed(() => {\n  const avatar = props.resumeData?.avatar\n  if (!avatar) return defaultAvatarImage\n  return avatar.startsWith('http') || avatar.startsWith('data:') ? avatar : `${MEDIA_URL}${avatar}`\n})\n\nconst currentGender = computed(() => {\n  return props.resumeData?.gender\n})\n\n// 5. 监听器\nwatch(\n  () => props.resumeData,\n  (newVal) => {\n    if (newVal && Object.keys(newVal).length > 0) {\n      pageLoading.value = false\n    }\n  },\n  { immediate: true }\n)\n\n// 6. 生命周期钩子\nonMounted(async () => {\n  try {\n    pageLoading.value = true\n    // 不需要在这里获取数据，因为父组件会处理\n  } catch (error) {\n    console.error('初始化失败:', error)\n  } finally {\n    pageLoading.value = false\n  }\n})\n\nonMounted(async () => {\n  try {\n    await store.dispatch('fetchCompleteness')\n  } catch (error) {\n    console.error('Failed to fetch completeness:', error)\n  }\n})\n\n// 7. 方法定义\nconst handleFileChange = async (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n\n  // 验证文件\n  if (!validateFile(file)) {\n    return\n  }\n\n  await handleAvatarUpload(file)\n  \n  // 清空文件选择器，以便能够选择同一个文件\n  event.target.value = ''\n}\n\nconst handleEdit = () => {\n  console.log('BasicInfo handleEdit - 当前数据:', props.resumeData)\n  // 确保传递正确的数据结构\n  const editData = {\n    name: props.resumeData.name,\n    gender: props.resumeData.gender,\n    birth_date: props.resumeData.birth_date,\n    phone: props.resumeData.phone,\n    email: props.resumeData.email,\n    location: props.resumeData.location,\n    personal_summary: props.resumeData.personal_summary\n  }\n  emit('edit', 'basic_info', editData)\n}\n\nconst toggleBioExpand = () => {\n  emit('toggleBioExpand')\n}\n\n// 8. 工具函数\nconst calculateAge = (birthDate) => {\n  if (!birthDate) return ''\n  \n  const birth = new Date(birthDate)\n  const today = new Date()\n  \n  let age = today.getFullYear() - birth.getFullYear()\n  const monthDiff = today.getMonth() - birth.getMonth()\n  \n  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n    age--\n  }\n  \n  return `${age}岁`\n}\n\nconst formatGender = (gender) => {\n  const genderMap = {\n    male: '男',\n    female: '女',\n    other: '其他'\n  }\n  return genderMap[gender] || '未填写'\n}\n\nconst formatDate = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  return date.toLocaleDateString('zh-CN', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n\n// 调试辅助函数\nconst logResumeData = () => {\n  const plainData = {\n    name: props.resumeData.name,\n    gender: props.resumeData.gender,\n    phone: props.resumeData.phone,\n    email: props.resumeData.email,\n    location: props.resumeData.location,\n    birth_date: props.resumeData.birth_date,\n    personal_summary: props.resumeData.personal_summary,\n    created_at: props.resumeData.created_at,\n    updated_at: props.resumeData.updated_at\n  }\n  console.log('BasicInfo data:', plainData)\n}\n\n// 修改头像上传处理函数\nconst handleAvatarUpload = async (file) => {\n  try {\n    loading.value = true\n    console.log('开始上传职业头像:', {\n      file,\n      size: file.size,\n      type: file.type\n    })\n\n    // 使用 profileStore 上传头像\n    const response = await profileStore.updateAvatar(file)\n    console.log('职业头像上传响应:', response)\n\n    if (response?.data?.code === 200) {\n      showToast('职业头像上传成功', 'success')\n      \n      // 更新本地数据\n      if (props.resumeData) {\n        props.resumeData.avatar = response.data.data.avatar\n        \n        // 触发父组件更新\n        emit('update', {\n          type: 'avatar',\n          value: response.data.data.avatar\n        })\n      }\n    } else {\n      throw new Error(response.data?.message || '上传失败')\n    }\n  } catch (error) {\n    console.error('职业头像上传失败:', error)\n    showToast(error.message || '职业头像上传失败，请稍后重试', 'error')\n  } finally {\n    loading.value = false\n    showAvatarCropper.value = false\n  }\n}\n\n// 添加图片加载错误处理\nconst handleImageError = (e) => {\n  e.target.src = defaultAvatarImage\n}\n\n// 添加文件验证\nconst validateFile = (file) => {\n  // 验证文件类型\n  if (!file.type.startsWith('image/')) {\n    showToast('请选择图片文件', 'error')\n    return false\n  }\n\n  // 验证文件大小（例如限制为 2MB）\n  const maxSize = 20 * 1024 * 1024 // 2MB\n  if (file.size > maxSize) {\n    showToast('图片大小不能超过 2MB', 'error')\n    return false\n  }\n\n  return true\n}\n\n// 添加状态\nconst showAvatarCropper = ref(false)\nconst avatarUploadRef = ref(null)\nconst loading = ref(false)\n\n// 监听 resumeData 变化\nwatch(\n  () => props.resumeData,\n  (newVal) => {\n    if (newVal) {\n      // 强制更新组件\n      nextTick(() => {\n        if (props.resumeData?.avatar) {\n          const img = new Image()\n          img.src = userAvatar.value\n        }\n      })\n    }\n  },\n  { deep: true }\n)\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}