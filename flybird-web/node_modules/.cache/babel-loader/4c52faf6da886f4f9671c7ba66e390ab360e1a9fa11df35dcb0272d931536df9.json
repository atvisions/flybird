{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { UserIcon, BriefcaseIcon, BuildingOfficeIcon, AcademicCapIcon, SparklesIcon, PhoneIcon, EnvelopeIcon, MapPinIcon } from '@heroicons/vue/24/outline';\nimport profile from '@/api/profile';\nimport defaultAvatarImage from '@/assets/images/default-avatar.png';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'ProfilePreview',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const completeness = ref(0);\n    const basicInfo = ref({});\n    const jobIntention = ref({});\n    const workExperiences = ref([]);\n    const educations = ref([]);\n    const skills = ref([]);\n\n    // 字段标签映射\n    const fieldLabels = {\n      // 基本信息\n      name: '姓名',\n      gender: '性别',\n      birth_date: '出生日期',\n      phone: '手机号',\n      email: '邮箱',\n      location: '所在地',\n      // 求职意向\n      job_type: '工作类型',\n      job_status: '求职状态',\n      expected_salary: '期望薪资',\n      expected_city: '期望城市',\n      industries: '期望行业'\n    };\n\n    // 获取字段标签\n    const getFieldLabel = key => {\n      return fieldLabels[key] || key;\n    };\n\n    // 格式化城市\n    const formatCity = city => {\n      if (!city) return '未设置';\n      return city.split('-').join('、');\n    };\n\n    // 格式化行业\n    const formatIndustries = industries => {\n      if (!industries) return '未设置';\n      return industries.split(',').join('、');\n    };\n\n    // 格式化求职意向的值\n    const formatJobIntentionValue = (key, value) => {\n      if (!value) return '未设置';\n      switch (key) {\n        case 'job_type':\n          const jobTypes = {\n            'full_time': '全职',\n            'part_time': '兼职',\n            'internship': '实习',\n            'freelance': '自由职业'\n          };\n          return jobTypes[value] || value;\n        case 'job_status':\n          const statusMap = {\n            'unemployed_looking': '离职-找工作',\n            'employed_not_looking': '在职-暂不考虑',\n            'employed_looking': '在职-看机会',\n            'student_internship': '在校-找实习',\n            'fresh_graduate': '应届生'\n          };\n          return statusMap[value] || value;\n        case 'expected_city':\n          return formatCity(value);\n        case 'industries':\n          return formatIndustries(value);\n        default:\n          return value || '未设置';\n      }\n    };\n\n    // 格式化日期范围\n    const formatDateRange = (startDate, endDate, isCurrent) => {\n      if (!startDate) return '';\n      const start = new Date(startDate).toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'numeric'\n      });\n      if (isCurrent) {\n        return `${start} - 至今`;\n      }\n      if (endDate) {\n        const end = new Date(endDate).toLocaleDateString('zh-CN', {\n          year: 'numeric',\n          month: 'numeric'\n        });\n        return `${start} - ${end}`;\n      }\n      return start;\n    };\n\n    // 获取档案数据\n    const fetchProfileData = async () => {\n      try {\n        const response = await profile.getComplete();\n        if (response.data?.code === 200) {\n          const data = response.data.data;\n          completeness.value = data.completeness || 0;\n          basicInfo.value = data.basic_info || {};\n          jobIntention.value = data.job_intention || {};\n          workExperiences.value = data.work_experiences || [];\n          educations.value = data.educations || [];\n          skills.value = data.skills || [];\n        }\n      } catch (error) {\n        console.error('获取档案数据失败:', error);\n      }\n    };\n\n    // 获取头像\n    const avatarUrl = computed(() => store.getters.getUserAvatar);\n\n    // 处理头像加载错误\n    const handleImageError = e => {\n      e.target.src = defaultAvatarImage;\n    };\n    onMounted(() => {\n      fetchProfileData();\n    });\n    const __returned__ = {\n      store,\n      completeness,\n      basicInfo,\n      jobIntention,\n      workExperiences,\n      educations,\n      skills,\n      fieldLabels,\n      getFieldLabel,\n      formatCity,\n      formatIndustries,\n      formatJobIntentionValue,\n      formatDateRange,\n      fetchProfileData,\n      avatarUrl,\n      handleImageError,\n      ref,\n      onMounted,\n      computed,\n      get UserIcon() {\n        return UserIcon;\n      },\n      get BriefcaseIcon() {\n        return BriefcaseIcon;\n      },\n      get BuildingOfficeIcon() {\n        return BuildingOfficeIcon;\n      },\n      get AcademicCapIcon() {\n        return AcademicCapIcon;\n      },\n      get SparklesIcon() {\n        return SparklesIcon;\n      },\n      get PhoneIcon() {\n        return PhoneIcon;\n      },\n      get EnvelopeIcon() {\n        return EnvelopeIcon;\n      },\n      get MapPinIcon() {\n        return MapPinIcon;\n      },\n      get profile() {\n        return profile;\n      },\n      get defaultAvatarImage() {\n        return defaultAvatarImage;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","UserIcon","BriefcaseIcon","BuildingOfficeIcon","AcademicCapIcon","SparklesIcon","PhoneIcon","EnvelopeIcon","MapPinIcon","profile","defaultAvatarImage","useStore","store","completeness","basicInfo","jobIntention","workExperiences","educations","skills","fieldLabels","name","gender","birth_date","phone","email","location","job_type","job_status","expected_salary","expected_city","industries","getFieldLabel","key","formatCity","city","split","join","formatIndustries","formatJobIntentionValue","value","jobTypes","statusMap","formatDateRange","startDate","endDate","isCurrent","start","Date","toLocaleDateString","year","month","end","fetchProfileData","response","getComplete","data","code","basic_info","job_intention","work_experiences","error","console","avatarUrl","getters","getUserAvatar","handleImageError","e","target","src"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/ProfilePreview.vue"],"sourcesContent":["<template>\n  <TransitionRoot appear :show=\"modelValue\" as=\"div\">\n    <Dialog as=\"div\" class=\"relative z-50\" @close=\"handleClose\">\n      <TransitionChild\n        as=\"div\"\n        :show=\"true\"\n        enter=\"duration-300 ease-out\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"duration-200 ease-in\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div class=\"fixed inset-0 bg-black/25\" />\n      </TransitionChild>\n\n      <div class=\"fixed inset-0 overflow-y-auto\">\n        <div class=\"flex min-h-full items-center justify-center p-4 text-center\">\n          <TransitionChild\n            as=\"div\"\n            :show=\"true\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0 scale-95\"\n            enter-to=\"opacity-100 scale-100\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100 scale-100\"\n            leave-to=\"opacity-0 scale-95\"\n          >\n            <!-- 预览内容保持不变 -->\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { \n  UserIcon,\n  BriefcaseIcon,\n  BuildingOfficeIcon,\n  AcademicCapIcon,\n  SparklesIcon,\n  PhoneIcon, \n  EnvelopeIcon, \n  MapPinIcon \n} from '@heroicons/vue/24/outline'\nimport profile from '@/api/profile'\nimport defaultAvatarImage from '@/assets/images/default-avatar.png'\nimport { useStore } from 'vuex'\n\nconst store = useStore()\n\nconst completeness = ref(0)\nconst basicInfo = ref({})\nconst jobIntention = ref({})\nconst workExperiences = ref([])\nconst educations = ref([])\nconst skills = ref([])\n\n// 字段标签映射\nconst fieldLabels = {\n  // 基本信息\n  name: '姓名',\n  gender: '性别',\n  birth_date: '出生日期',\n  phone: '手机号',\n  email: '邮箱',\n  location: '所在地',\n  \n  // 求职意向\n  job_type: '工作类型',\n  job_status: '求职状态',\n  expected_salary: '期望薪资',\n  expected_city: '期望城市',\n  industries: '期望行业'\n}\n\n// 获取字段标签\nconst getFieldLabel = (key) => {\n  return fieldLabels[key] || key\n}\n\n// 格式化城市\nconst formatCity = (city) => {\n  if (!city) return '未设置'\n  return city.split('-').join('、')\n}\n\n// 格式化行业\nconst formatIndustries = (industries) => {\n  if (!industries) return '未设置'\n  return industries.split(',').join('、')\n}\n\n// 格式化求职意向的值\nconst formatJobIntentionValue = (key, value) => {\n  if (!value) return '未设置'\n  \n  switch (key) {\n    case 'job_type':\n      const jobTypes = {\n        'full_time': '全职',\n        'part_time': '兼职',\n        'internship': '实习',\n        'freelance': '自由职业'\n      }\n      return jobTypes[value] || value\n      \n    case 'job_status':\n      const statusMap = {\n        'unemployed_looking': '离职-找工作',\n        'employed_not_looking': '在职-暂不考虑',\n        'employed_looking': '在职-看机会',\n        'student_internship': '在校-找实习',\n        'fresh_graduate': '应届生'\n      }\n      return statusMap[value] || value\n      \n    case 'expected_city':\n      return formatCity(value)\n      \n    case 'industries':\n      return formatIndustries(value)\n      \n    default:\n      return value || '未设置'\n  }\n}\n\n// 格式化日期范围\nconst formatDateRange = (startDate, endDate, isCurrent) => {\n  if (!startDate) return ''\n  \n  const start = new Date(startDate).toLocaleDateString('zh-CN', {\n    year: 'numeric',\n    month: 'numeric'\n  })\n  \n  if (isCurrent) {\n    return `${start} - 至今`\n  }\n  \n  if (endDate) {\n    const end = new Date(endDate).toLocaleDateString('zh-CN', {\n      year: 'numeric',\n      month: 'numeric'\n    })\n    return `${start} - ${end}`\n  }\n  \n  return start\n}\n\n// 获取档案数据\nconst fetchProfileData = async () => {\n  try {\n    const response = await profile.getComplete()\n    if (response.data?.code === 200) {\n      const data = response.data.data\n      completeness.value = data.completeness || 0\n      basicInfo.value = data.basic_info || {}\n      jobIntention.value = data.job_intention || {}\n      workExperiences.value = data.work_experiences || []\n      educations.value = data.educations || []\n      skills.value = data.skills || []\n    }\n  } catch (error) {\n    console.error('获取档案数据失败:', error)\n  }\n}\n\n// 获取头像\nconst avatarUrl = computed(() => store.getters.getUserAvatar)\n\n// 处理头像加载错误\nconst handleImageError = (e) => {\n  e.target.src = defaultAvatarImage\n}\n\nonMounted(() => {\n  fetchProfileData()\n})\n</script>\n\n<style scoped>\n/* 移动端适配 */\n@media (max-width: 640px) {\n  /* 调整头部区域 */\n  .max-w-4xl {\n    padding: 0 1rem;\n  }\n\n  .px-8 {\n    padding-left: 1rem;\n    padding-right: 1rem;\n  }\n\n  /* 调整联系信息在移动端的布局 */\n  .flex.justify-center.gap-6 {\n    @apply flex-col gap-3;\n  }\n\n  /* 调整头像大小 */\n  .w-32.h-32 {\n    width: 6rem;\n    height: 6rem;\n  }\n\n  /* 调整文字大小 */\n  .text-2xl {\n    font-size: 1.25rem;\n  }\n\n  /* 调整简介宽度 */\n  .max-w-xl {\n    max-width: 100%;\n  }\n\n  /* 调整内边距 */\n  .py-12 {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n  }\n\n  .mb-6 {\n    margin-bottom: 1rem;\n  }\n\n  .mt-6 {\n    margin-top: 1rem;\n  }\n}\n\n/* 打印样式 */\n@media print {\n  .bg-gray-50 {\n    background-color: white !important;\n  }\n  \n  .shadow-md {\n    box-shadow: none !important;\n  }\n  \n  .border-b {\n    border-color: #e5e7eb !important;\n  }\n}\n\n/* 添加一些动画效果 */\n.rounded-xl {\n  transition: all 0.3s ease;\n}\n\n.hover\\:shadow-md:hover {\n  transform: translateY(-1px);\n}\n\n/* 技能标签悬浮效果 */\n.rounded-full {\n  transition: all 0.2s ease;\n}\n\n.rounded-full:hover {\n  transform: scale(1.05);\n}\n\n/* 渐变文字效果 */\n.bg-gradient-to-r {\n  background-size: 200% auto;\n  animation: gradient 8s ease infinite;\n}\n\n@keyframes gradient {\n  0% { background-position: 0% center; }\n  50% { background-position: 100% center; }\n  100% { background-position: 0% center; }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}