{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white rounded-lg shadow overflow-hidden\"\n};\nconst _hoisted_3 = {\n  class: \"px-6 py-8 bg-gradient-to-br from-[#1A56DB] via-blue-600 to-blue-500 relative overflow-hidden\"\n};\nconst _hoisted_4 = {\n  class: \"flex flex-col lg:flex-row items-start lg:items-center justify-between relative space-y-4 lg:space-y-0\"\n};\nconst _hoisted_5 = {\n  class: \"text-white\"\n};\nconst _hoisted_6 = {\n  class: \"text-2xl font-bold tracking-tight\"\n};\nconst _hoisted_7 = {\n  class: \"mt-2 text-white/80 font-medium\"\n};\nconst _hoisted_8 = {\n  class: \"px-6 py-4\"\n};\nconst _hoisted_9 = {\n  class: \"grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-6\"\n};\nconst _hoisted_10 = {\n  class: \"w-10 lg:w-12 h-10 lg:h-12 rounded-full bg-gradient-to-br from-blue-50 to-blue-100/50 flex items-center justify-center\"\n};\nconst _hoisted_11 = {\n  class: \"ml-3 lg:ml-0 lg:mt-3\"\n};\nconst _hoisted_12 = {\n  class: \"text-sm font-medium text-gray-900\"\n};\nconst _hoisted_13 = {\n  class: \"text-xs text-gray-600 mt-1\"\n};\nconst _hoisted_14 = {\n  class: \"mt-8 border-b border-gray-200\"\n};\nconst _hoisted_15 = {\n  class: \"-mb-px flex space-x-8\",\n  \"aria-label\": \"Tabs\"\n};\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n  class: \"mt-6\"\n};\nconst _hoisted_18 = {\n  key: 0,\n  class: \"space-y-6\"\n};\nconst _hoisted_19 = {\n  class: \"bg-white rounded-lg shadow\"\n};\nconst _hoisted_20 = {\n  class: \"px-6 py-5\"\n};\nconst _hoisted_21 = {\n  class: \"grid grid-cols-1 gap-5 sm:grid-cols-4\"\n};\nconst _hoisted_22 = {\n  class: \"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\"\n};\nconst _hoisted_23 = {\n  class: \"mt-1 text-3xl font-semibold text-gray-900\"\n};\nconst _hoisted_24 = {\n  class: \"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\"\n};\nconst _hoisted_25 = {\n  class: \"mt-1 text-3xl font-semibold text-gray-900\"\n};\nconst _hoisted_26 = {\n  class: \"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\"\n};\nconst _hoisted_27 = {\n  class: \"mt-1 text-3xl font-semibold text-gray-900\"\n};\nconst _hoisted_28 = {\n  class: \"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\"\n};\nconst _hoisted_29 = {\n  class: \"mt-1 text-xl font-semibold text-gray-900\"\n};\nconst _hoisted_30 = {\n  key: 1,\n  class: \"bg-white rounded-lg shadow p-6\"\n};\nconst _hoisted_31 = {\n  key: 2,\n  class: \"bg-white rounded-lg shadow overflow-hidden\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 会员状态卡片 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" 装饰背景 \"), _cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"absolute inset-0\"\n  }, [_createElementVNode(\"div\", {\n    class: \"absolute right-0 top-0 w-64 h-64 bg-white/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2\"\n  }), _createElementVNode(\"div\", {\n    class: \"absolute left-0 bottom-0 w-32 h-32 bg-white/5 rounded-full blur-2xl\"\n  })], -1 /* HOISTED */)), _createCommentVNode(\" 内容 \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h3\", _hoisted_6, _toDisplayString($setup.vipTypeText), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($setup.vipExpireText), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: $setup.handleVipButton,\n    class: \"w-full lg:w-auto px-6 py-2.5 bg-white/10 backdrop-blur-sm text-white border border-white/20 rounded-full text-sm font-medium hover:bg-white/20 transition-all duration-300\"\n  }, _toDisplayString($setup.vipButtonText), 1 /* TEXT */)])]), _createCommentVNode(\" 会员权益 \"), _createElementVNode(\"div\", _hoisted_8, [_cache[1] || (_cache[1] = _createElementVNode(\"h4\", {\n    class: \"text-base font-medium text-gray-900 mb-4\"\n  }, \"专属会员权益\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.memberBenefits, benefit => {\n    return _createElementVNode(\"div\", {\n      key: benefit.key,\n      class: \"flex lg:flex-col items-center lg:text-center p-3 lg:p-0 bg-gray-50/50 lg:bg-transparent rounded-lg lg:rounded-none\"\n    }, [_createElementVNode(\"div\", _hoisted_10, [(_openBlock(), _createBlock(_resolveDynamicComponent(benefit.icon), {\n      class: \"w-6 h-6 text-[#1A56DB]\"\n    }))]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, _toDisplayString(benefit.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_13, _toDisplayString(benefit.desc), 1 /* TEXT */)])]);\n  }), 64 /* STABLE_FRAGMENT */))])])]), _createCommentVNode(\" Tab 导航 \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"nav\", _hoisted_15, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.tabs, tab => {\n    return _createElementVNode(\"button\", {\n      key: tab.key,\n      onClick: $event => $setup.currentTab = tab.key,\n      class: _normalizeClass([$setup.currentTab === tab.key ? 'border-primary-500 text-primary-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300', 'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm'])\n    }, _toDisplayString(tab.name), 11 /* TEXT, CLASS, PROPS */, _hoisted_16);\n  }), 64 /* STABLE_FRAGMENT */))])]), _createCommentVNode(\" Tab 内容 \"), _createElementVNode(\"div\", _hoisted_17, [_createCommentVNode(\" 积分规则 \"), $setup.currentTab === 'points' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createCommentVNode(\" 积分概览卡片 \"), _createElementVNode(\"div\", _hoisted_19, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"px-6 py-5 border-b border-gray-200\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"text-lg font-medium text-gray-900\"\n  }, \"我的积分\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"dl\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_cache[2] || (_cache[2] = _createElementVNode(\"dt\", {\n    class: \"text-sm font-medium text-gray-500 truncate\"\n  }, \"当前积分\", -1 /* HOISTED */)), _createElementVNode(\"dd\", _hoisted_23, _toDisplayString($setup.pointsInfo.balance), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_24, [_cache[3] || (_cache[3] = _createElementVNode(\"dt\", {\n    class: \"text-sm font-medium text-gray-500 truncate\"\n  }, \"累计获得\", -1 /* HOISTED */)), _createElementVNode(\"dd\", _hoisted_25, _toDisplayString($setup.pointsInfo.total_earned), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_26, [_cache[4] || (_cache[4] = _createElementVNode(\"dt\", {\n    class: \"text-sm font-medium text-gray-500 truncate\"\n  }, \"当前等级\", -1 /* HOISTED */)), _createElementVNode(\"dd\", _hoisted_27, \"Lv.\" + _toDisplayString($setup.pointsInfo.level), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_28, [_cache[5] || (_cache[5] = _createElementVNode(\"dt\", {\n    class: \"text-sm font-medium text-gray-500 truncate\"\n  }, \"等级称号\", -1 /* HOISTED */)), _createElementVNode(\"dd\", _hoisted_29, _toDisplayString($setup.getLevelTitle($setup.pointsInfo.level)), 1 /* TEXT */)])])])]), _createCommentVNode(\" 积分记录 \"), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"bg-white rounded-lg shadow\"\n  }, [_createCommentVNode(\" ... 保持原有的积分记录内容 ... \")], -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 等级权益 \"), $setup.currentTab === 'privileges' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, _cache[8] || (_cache[8] = [_createElementVNode(\"h3\", {\n    class: \"text-lg font-medium text-gray-900 mb-4\"\n  }, \"等级权益\", -1 /* HOISTED */), _createElementVNode(\"div\", {\n    class: \"space-y-6\"\n  }, [_createCommentVNode(\" ... 等级权益内容 ... \")], -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 订单记录 \"), $setup.currentTab === 'orders' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createCommentVNode(\" ... 保持原有的订单记录表格内容 ... \")])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","$setup","vipTypeText","_hoisted_7","vipExpireText","onClick","handleVipButton","vipButtonText","_hoisted_8","_hoisted_9","_Fragment","_renderList","memberBenefits","benefit","_hoisted_10","_createBlock","_resolveDynamicComponent","icon","_hoisted_11","_hoisted_12","name","_hoisted_13","desc","_hoisted_14","_hoisted_15","tabs","tab","$event","currentTab","_normalizeClass","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","pointsInfo","balance","_hoisted_24","_hoisted_25","total_earned","_hoisted_26","_hoisted_27","level","_hoisted_28","_hoisted_29","getLevelTitle","_hoisted_30","_cache","_hoisted_31"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/Membership/index.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n    <!-- 会员状态卡片 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div class=\"px-6 py-8 bg-gradient-to-br from-[#1A56DB] via-blue-600 to-blue-500 relative overflow-hidden\">\n        <!-- 装饰背景 -->\n        <div class=\"absolute inset-0\">\n          <div class=\"absolute right-0 top-0 w-64 h-64 bg-white/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2\"></div>\n          <div class=\"absolute left-0 bottom-0 w-32 h-32 bg-white/5 rounded-full blur-2xl\"></div>\n        </div>\n        <!-- 内容 -->\n        <div class=\"flex flex-col lg:flex-row items-start lg:items-center justify-between relative space-y-4 lg:space-y-0\">\n          <div class=\"text-white\">\n            <h3 class=\"text-2xl font-bold tracking-tight\">{{ vipTypeText }}</h3>\n            <p class=\"mt-2 text-white/80 font-medium\">{{ vipExpireText }}</p>\n          </div>\n          <button \n            @click=\"handleVipButton\"\n            class=\"w-full lg:w-auto px-6 py-2.5 bg-white/10 backdrop-blur-sm text-white border border-white/20 rounded-full text-sm font-medium hover:bg-white/20 transition-all duration-300\"\n          >\n            {{ vipButtonText }}\n          </button>\n        </div>\n      </div>\n      \n      <!-- 会员权益 -->\n      <div class=\"px-6 py-4\">\n        <h4 class=\"text-base font-medium text-gray-900 mb-4\">专属会员权益</h4>\n        <div class=\"grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-6\">\n          <div v-for=\"benefit in memberBenefits\" :key=\"benefit.key\" \n            class=\"flex lg:flex-col items-center lg:text-center p-3 lg:p-0 bg-gray-50/50 lg:bg-transparent rounded-lg lg:rounded-none\"\n          >\n            <div class=\"w-10 lg:w-12 h-10 lg:h-12 rounded-full bg-gradient-to-br from-blue-50 to-blue-100/50 flex items-center justify-center\">\n              <component :is=\"benefit.icon\" class=\"w-6 h-6 text-[#1A56DB]\" />\n            </div>\n            <div class=\"ml-3 lg:ml-0 lg:mt-3\">\n              <div class=\"text-sm font-medium text-gray-900\">{{ benefit.name }}</div>\n              <div class=\"text-xs text-gray-600 mt-1\">{{ benefit.desc }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Tab 导航 -->\n    <div class=\"mt-8 border-b border-gray-200\">\n      <nav class=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n        <button\n          v-for=\"tab in tabs\"\n          :key=\"tab.key\"\n          @click=\"currentTab = tab.key\"\n          :class=\"[\n            currentTab === tab.key\n              ? 'border-primary-500 text-primary-600'\n              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\n            'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm'\n          ]\"\n        >\n          {{ tab.name }}\n        </button>\n      </nav>\n    </div>\n\n    <!-- Tab 内容 -->\n    <div class=\"mt-6\">\n      <!-- 积分规则 -->\n      <div v-if=\"currentTab === 'points'\" class=\"space-y-6\">\n        <!-- 积分概览卡片 -->\n        <div class=\"bg-white rounded-lg shadow\">\n          <div class=\"px-6 py-5 border-b border-gray-200\">\n            <h3 class=\"text-lg font-medium text-gray-900\">我的积分</h3>\n          </div>\n          <div class=\"px-6 py-5\">\n            <dl class=\"grid grid-cols-1 gap-5 sm:grid-cols-4\">\n              <div class=\"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\">\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">当前积分</dt>\n                <dd class=\"mt-1 text-3xl font-semibold text-gray-900\">{{ pointsInfo.balance }}</dd>\n              </div>\n              <div class=\"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\">\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">累计获得</dt>\n                <dd class=\"mt-1 text-3xl font-semibold text-gray-900\">{{ pointsInfo.total_earned }}</dd>\n              </div>\n              <div class=\"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\">\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">当前等级</dt>\n                <dd class=\"mt-1 text-3xl font-semibold text-gray-900\">Lv.{{ pointsInfo.level }}</dd>\n              </div>\n              <div class=\"px-4 py-5 bg-gray-50 rounded-lg overflow-hidden sm:p-6\">\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">等级称号</dt>\n                <dd class=\"mt-1 text-xl font-semibold text-gray-900\">{{ getLevelTitle(pointsInfo.level) }}</dd>\n              </div>\n            </dl>\n          </div>\n        </div>\n\n        <!-- 积分记录 -->\n        <div class=\"bg-white rounded-lg shadow\">\n          <!-- ... 保持原有的积分记录内容 ... -->\n        </div>\n      </div>\n\n      <!-- 等级权益 -->\n      <div v-if=\"currentTab === 'privileges'\" class=\"bg-white rounded-lg shadow p-6\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">等级权益</h3>\n        <div class=\"space-y-6\">\n          <!-- ... 等级权益内容 ... -->\n        </div>\n      </div>\n\n      <!-- 订单记录 -->\n      <div v-if=\"currentTab === 'orders'\" class=\"bg-white rounded-lg shadow overflow-hidden\">\n        <!-- ... 保持原有的订单记录表格内容 ... -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch, onUnmounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAccountStore } from '@/stores/account'\nimport { membership } from '@/api/membership'\nimport { \n  SparklesIcon, CloudArrowUpIcon, \n  ChatBubbleLeftRightIcon, QuestionMarkCircleIcon, CheckCircleIcon, \n  GiftIcon, ClipboardDocumentListIcon, StarIcon, PencilSquareIcon, \n  CalendarDaysIcon,\n  DocumentTextIcon,\n  CloudIcon,\n  DocumentChartBarIcon,\n  UserGroupIcon,\n  CheckIcon,\n  DocumentIcon,\n  BoltIcon,\n  HeartIcon\n} from '@heroicons/vue/24/outline'\n\nconst router = useRouter()\nconst accountStore = useAccountStore()\n\n// 会员权益\nconst memberBenefits = [\n  { \n    key: 'template', \n    name: '会员模板', \n    desc: '进阶模板无限用',\n    icon: DocumentIcon\n  },\n  { \n    key: 'points', \n    name: '双倍积分', \n    desc: '所有活动双倍奖',\n    icon: StarIcon\n  },\n  { \n    key: 'ai', \n    name: 'AI助手', \n    desc: '智能档案优化',\n    icon: BoltIcon\n  },\n  { \n    key: 'storage', \n    name: '超大空间', \n    desc: '100G专属云盘',\n    icon: CloudIcon\n  },\n  {\n    key: 'support',\n    name: '专属客服',\n    desc: '7×24小时服务',\n    icon: HeartIcon\n  }\n]\n\n// 积分信息\nconst pointsInfo = ref({\n  balance: 0,\n  total_earned: 0,\n  total_spent: 0,\n  level: 1\n})\n\n// 订单记录\nconst orders = ref([])\n\n// 积分记录相关\nconst currentFilter = ref('all')\nconst pointsRecords = ref([])\nconst currentPage = ref(1)\nconst hasMore = ref(true)\nconst loading = ref(false)\n\nconst pointsFilters = [\n  { label: '全部', value: 'all' },\n  { label: '获得', value: 'earned' },\n  { label: '使用', value: 'spent' }\n]\n\n// 过滤后的记录\nconst filteredRecords = computed(() => {\n  if (currentFilter.value === 'all') return pointsRecords.value\n  \n  return pointsRecords.value.filter(record => \n    currentFilter.value === 'earned' \n      ? record.points > 0 \n      : record.points < 0\n  )\n})\n\n// 获取积分信息\nconst fetchPointsInfo = async () => {\n  try {\n    const response = await membership.getPointsInfo()\n    if (response?.data?.code === 200) {\n      pointsInfo.value = response.data.data\n    }\n  } catch (error) {\n    console.error('获取积分信息失败:', error)\n  }\n}\n\n// 获取订单记录\nconst fetchOrders = async () => {\n  try {\n    const response = await membership.getOrders()\n    if (response?.data?.code === 200) {\n      orders.value = response.data.data || []\n    }\n  } catch (error) {\n    console.error('获取订单列表失败:', error)\n  }\n}\n\n// 获取积分记录\nconst fetchPointsRecords = async (page = 1) => {\n  if (loading.value) return\n  \n  loading.value = true\n  try {\n    const response = await membership.getPointsRecords({ \n      page,\n      page_size: 10\n    })\n    if (response?.data?.code === 200) {\n      const { records, has_more } = response.data.data\n      if (page === 1) {\n        pointsRecords.value = records\n      } else {\n        pointsRecords.value.push(...records)\n      }\n      hasMore.value = has_more\n      currentPage.value = page\n    }\n  } catch (error) {\n    console.error('获取积分记录失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 加载更多\nconst loadMore = () => {\n  fetchPointsRecords(currentPage.value + 1)\n}\n\n// 监听筛选变化\nwatch(currentFilter, () => {\n  // 切换筛选时重置到第一页\n  currentPage.value = 1\n  fetchPointsRecords(1)\n})\n\n// 会员类型文本\nconst vipTypeText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '普通用户'\n  return userInfo.vip_status\n})\n\n// 会员到期文本\nconst vipExpireText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '开通会员享专属权益'\n  if (userInfo.vip_type === 'lifetime') return '终身会员'\n  if (userInfo.vip_expire_time) {\n    const expireDate = new Date(userInfo.vip_expire_time)\n    const now = new Date()\n    const diffDays = Math.floor((expireDate - now) / (1000 * 60 * 60 * 24))\n    return diffDays > 0 ? `剩余 ${diffDays} 天` : '已过期'\n  }\n  return ''\n})\n\n// 会员按钮文本和处理\nconst vipButtonText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '立即开通'\n  if (userInfo.vip_type === 'lifetime') return '查看权益'\n  return '立即续费'\n})\n\nconst handleVipButton = () => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) {\n    router.push('/pro')\n  } else if (userInfo.vip_type === 'lifetime') {\n    // 显示会员权益详情\n  } else {\n    router.push('/pro')\n  }\n}\n\n// 获取等级称号\nconst getLevelTitle = (level) => {\n  const levelConfig = {\n    1: { title: '初级会员', range: '0-1000积分' },\n    2: { title: '进阶会员', range: '1001-3000积分' },\n    3: { title: '高级会员', range: '3001-8000积分' },\n    4: { title: '精英会员', range: '8001-15000积分' },\n    5: { title: '至尊会员', range: '15000+积分' }\n  }\n  return levelConfig[level]?.title || '普通会员'\n}\n\nconst showTooltip = ref(false)\n\n// 提示框位置\nconst tooltipPosition = ref({ x: 0, y: 0 })\n\n// 计算提示框位置\nconst calculateTooltipPosition = (event) => {\n  const iconRect = event.target.getBoundingClientRect()\n  const tooltipWidth = 320 // w-80 = 20rem = 320px\n  const tooltipHeight = 480 // 预估高度\n  \n  // 水平居中于图标\n  const x = iconRect.left + (iconRect.width / 2) - (tooltipWidth / 2)\n  // 位于图标上方，留出足够空间\n  const y = iconRect.top - tooltipHeight - 10\n  \n  // 确保不超出视窗边界\n  const adjustedX = Math.max(16, Math.min(x, window.innerWidth - tooltipWidth - 16))\n  const adjustedY = Math.max(16, y)\n  \n  tooltipPosition.value = {\n    x: adjustedX,\n    y: adjustedY\n  }\n}\n\n// 修改鼠标进入事件处理\nconst handleMouseEnter = (event) => {\n  calculateTooltipPosition(event)\n  showTooltip.value = true\n}\n\n// 获取下一等级所需积分\nconst getNextLevelPoints = (currentLevel, currentPoints) => {\n  const levelThresholds = {\n    1: 1000,\n    2: 3000,\n    3: 8000,\n    4: 15000,\n    5: Infinity\n  }\n  \n  if (currentLevel >= 5) return 0\n  \n  const nextLevelThreshold = levelThresholds[currentLevel + 1]\n  return nextLevelThreshold - currentPoints\n}\n\n// 获取当前等级进度\nconst getLevelProgress = (currentLevel, currentPoints) => {\n  const levelRanges = {\n    1: { min: 0, max: 1000 },\n    2: { min: 1001, max: 3000 },\n    3: { min: 3001, max: 8000 },\n    4: { min: 8001, max: 15000 },\n    5: { min: 15001, max: 15001 } // 最高等级\n  }\n  \n  const range = levelRanges[currentLevel]\n  if (!range) return 0\n  \n  const total = range.max - range.min\n  const current = currentPoints - range.min\n  return Math.min(100, Math.max(0, (current / total) * 100))\n}\n\n// 是否可以签到\nconst canSignIn = computed(() => !pointsInfo.value.signed_today)\n\n// 处理签到\nconst handleSignIn = async () => {\n  if (!canSignIn.value) return\n  \n  try {\n    const response = await membership.signIn()\n    if (response?.data?.code === 200) {\n      await fetchPointsInfo() // 刷新积分信息\n      showToast('签到成功', 'success')\n    }\n  } catch (error) {\n    console.error('签到失败:', error)\n    showToast('签到失败，请重试', 'error')\n  }\n}\n\n// 获取等级阈值\nconst getLevelThreshold = (level) => {\n  const thresholds = {\n    1: 1000,\n    2: 3000,\n    3: 8000,\n    4: 15000,\n    5: Infinity\n  }\n  return thresholds[level] || 1000\n}\n\n// 获取签到提示\nconst getSignInTip = () => {\n  if (!pointsInfo.value.signed_today) {\n    return '今日签到可获得3积分'\n  }\n  if (pointsInfo.value.sign_in_days % 7 === 6) {\n    return '明日签到可获得额外10积分奖励'\n  }\n  if (pointsInfo.value.sign_in_days % 30 === 29) {\n    return '明日签到可获得额外50积分奖励'\n  }\n  return `已连续签到 ${pointsInfo.value.sign_in_days} 天`\n}\n\n// 获取等级范围说明\nconst getLevelRange = (level) => {\n  const ranges = {\n    1: '0-1,000积分',\n    2: '1,001-3,000积分',\n    3: '3,001-8,000积分',\n    4: '8,001-15,000积分',\n    5: '15,000+积分'\n  }\n  return ranges[level] || ''\n}\n\n// 获取等级特权说明\nconst getLevelPrivileges = (level) => {\n  const privileges = {\n    1: [\n      '发布简历动态',\n      '参与社区讨论',\n      '基础积分奖励',\n      '个人主页展示'\n    ],\n    2: [\n      '简历曝光加成',\n      '简历动态置顶',\n      '积分加速成长',\n      '社区徽章展示'\n    ],\n    3: [\n      '专属等级标识',\n      '简历优先推荐',\n      '开通打赏功能',\n      '高级积分特权'\n    ],\n    4: [\n      '内容免审发布',\n      '简历优先投递',\n      '打赏特权加成',\n      '社区荣誉称号'\n    ],\n    5: [\n      '资深用户认证',\n      '内容审核特权',\n      '打赏收益加成',\n      '专属成就徽章'\n    ]\n  }\n  return privileges[level] || []\n}\n\n// 格式化订单状态\nconst formatOrderStatus = (status) => {\n  const statusMap = {\n    'pending': '待支付',\n    'paid': '已支付',\n    'cancelled': '已取消',\n    'refunded': '已退款'\n  }\n  return statusMap[status] || status\n}\n\n// 格式化支付方式\nconst formatPaymentMethod = (method) => {\n  const methodMap = {\n    'alipay': '支付宝',\n    'wechat': '微信支付'\n  }\n  return methodMap[method] || method\n}\n\n// 格式化时间\nconst formatDate = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  return date.toLocaleString('zh-CN', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\n// 格式化会员时长\nconst formatDuration = (days) => {\n  if (!days) return '-'\n  if (days >= 365) {\n    const years = Math.floor(days / 365)\n    return `${years}年会员`\n  }\n  if (days >= 90) {\n    const quarters = Math.floor(days / 90)\n    return `${quarters}季会员`\n  }\n  if (days >= 30) {\n    const months = Math.floor(days / 30)\n    return `${months}月会员`\n  }\n  return `${days}天会员`\n}\n\n// 格式化会员类型\nconst formatMembershipType = (order) => {\n  // 优先使用 tier_name\n  if (order.tier_name) return order.tier_name\n  \n  // 然后尝试使用 tier.name\n  if (order.tier?.name) return order.tier.name\n  \n  // 最后根据天数判断会员类型\n  const days = order.days\n  if (!days) return '-'\n  \n  if (days === 365) return '年度会员'\n  if (days === 90) return '季度会员'\n  if (days === 30) return '月度会员'\n  \n  // 如果是其他天数，显示具体天数\n  return `${days}天会员`\n}\n\n// Tab 配置\nconst tabs = [\n  { key: 'points', name: '积分规则' },\n  { key: 'privileges', name: '等级权益' },\n  { key: 'orders', name: '订单记录' }\n]\n\n// 当前选中的 tab\nconst currentTab = ref('points')\n\nonMounted(async () => {\n  await Promise.all([\n    fetchPointsInfo(),\n    fetchOrders(),\n    fetchPointsRecords()\n  ])\n  \n  // 添加窗口大小变化监听\n  window.addEventListener('resize', () => {\n    if (showTooltip.value) {\n      showTooltip.value = false\n    }\n  })\n})\n\n// 在 onUnmounted 中清理\nonUnmounted(() => {\n  window.removeEventListener('resize', () => {\n    if (showTooltip.value) {\n      showTooltip.value = false\n    }\n  })\n})\n</script> \n\n<style scoped>\n/* 添加表格响应式滚动 */\n.overflow-x-auto {\n  -webkit-overflow-scrolling: touch;\n}\n\n/* 确保表格内容不会被截断 */\ntable {\n  table-layout: fixed;\n  width: 100%;\n}\n\n/* 添加工具提示样式 */\n[title] {\n  position: relative;\n  cursor: help;\n}\n\n/* 优化表格单元格样式 */\ntd, th {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* 设置合适的列宽 */\nth:nth-child(1), td:nth-child(1) { width: 25%; } /* 订单号 */\nth:nth-child(2), td:nth-child(2) { width: 15%; } /* 类型 */\nth:nth-child(3), td:nth-child(3) { width: 10%; } /* 金额 */\nth:nth-child(4), td:nth-child(4) { width: 15%; } /* 支付方式 */\nth:nth-child(5), td:nth-child(5) { width: 15%; } /* 状态 */\nth:nth-child(6), td:nth-child(6) { width: 20%; } /* 时间 */\n\n/* 添加 Tab 过渡动画 */\n.tab-enter-active,\n.tab-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.tab-enter-from,\n.tab-leave-to {\n  opacity: 0;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}