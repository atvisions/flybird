{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { CalendarDaysIcon, StarIcon, TrophyIcon, CheckCircleIcon, ChevronDownIcon, SparklesIcon } from '@heroicons/vue/24/outline';\nimport { useRouter } from 'vue-router';\nimport membershipApi from '@/api/membership';\nimport { formatDate } from '@/utils/date';\nimport { useAccountStore } from '@/stores/account';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const accountStore = useAccountStore();\n\n    // 会员状态数据\n    const vipTypeText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '免费用户';\n      return userInfo.vip_status;\n    });\n    const vipExpireText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '开通会员享受更多权益';\n      if (userInfo.vip_type === 'lifetime') return '终身会员';\n      if (userInfo.vip_expire_time) {\n        const expireDate = new Date(userInfo.vip_expire_time);\n        const now = new Date();\n        const diffDays = Math.floor((expireDate - now) / (1000 * 60 * 60 * 24));\n        if (diffDays > 0) {\n          return `剩余 ${diffDays} 天 (${formatDate(userInfo.vip_expire_time, 'YYYY-MM-DD')})`;\n        } else {\n          return '会员已过期';\n        }\n      }\n      return '开通会员享受更多权益';\n    });\n    const vipButtonText = computed(() => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) return '开通会员';\n      if (userInfo.vip_type === 'lifetime') return '查看权益';\n      return '续费会员';\n    });\n\n    // 积分相关数据\n    const pointsInfo = ref({\n      balance: 0,\n      level: 1,\n      sign_in_days: 0,\n      total_earned: 0\n    });\n\n    // 签到相关数据\n    const signInInfo = ref({\n      can_sign_in: false,\n      sign_in_days: 0,\n      next_reward: null\n    });\n    const loading = ref(false);\n    const currentFilter = ref('all');\n    const currentTab = ref('points');\n    const pointsRecords = ref([]);\n    const hasMore = ref(false);\n    const page = ref(1);\n    const expandedOrders = ref([]);\n\n    // 会员权益列表\n    const memberBenefits = [{\n      key: 'unlimited',\n      name: '无限使用',\n      desc: '无限制使用所有功能',\n      icon: SparklesIcon\n    }\n    // ... 其他权益配置\n    ];\n\n    // 积分筛选选项\n    const pointsFilters = [{\n      label: '全部',\n      value: 'all'\n    }, {\n      label: '获得',\n      value: 'earned'\n    }, {\n      label: '使用',\n      value: 'used'\n    }];\n\n    // tabs配置\n    const tabs = [{\n      key: 'points',\n      name: '积分规则'\n    }, {\n      key: 'privileges',\n      name: '等级权益'\n    }, {\n      key: 'orders',\n      name: '订单记录'\n    }];\n\n    // 积分规则\n    const pointRules = [{\n      action: '每日签到',\n      points: '+1~10',\n      description: '连续签到可获得更多积分奖励',\n      icon: CalendarDaysIcon,\n      bgColor: 'bg-blue-50',\n      iconColor: 'text-blue-500',\n      borderColor: 'border-blue-100',\n      textColor: 'text-blue-600'\n    }\n    // ... 其他规则配置\n    ];\n\n    // 计算属性\n    const filteredRecords = computed(() => {\n      if (!pointsRecords.value) return [];\n      if (currentFilter.value === 'all') return pointsRecords.value;\n      return pointsRecords.value.filter(record => currentFilter.value === 'earned' ? record.points > 0 : record.points < 0);\n    });\n\n    // 添加会员信息的响应式数据\n    const membershipInfo = ref({\n      is_active: false,\n      tier: null,\n      expire_at: null\n    });\n\n    // 修改 handleVipButton 方法\n    const handleVipButton = () => {\n      const userInfo = accountStore.userInfo;\n      if (!userInfo?.is_vip) {\n        router.push('/pro');\n      } else if (userInfo.vip_type === 'lifetime') {\n        // 显示会员权益详情\n        currentTab.value = 'privileges';\n      } else {\n        router.push('/pro');\n      }\n    };\n\n    // 获取签到状态\n    const fetchSignInStatus = async () => {\n      try {\n        const response = await membershipApi.getSignInStatus();\n        if (response?.data?.code === 200) {\n          signInInfo.value = response.data.data;\n        }\n      } catch (error) {\n        console.error('获取签到状态失败:', error);\n      }\n    };\n\n    // 处理签到\n    const handleSignIn = async () => {\n      if (!signInInfo.value.can_sign_in) return;\n      try {\n        const response = await membershipApi.signIn();\n        if (response?.data?.code === 200) {\n          ElMessage.success('签到成功');\n          await Promise.all([fetchSignInStatus(), fetchPointsInfo()]);\n        }\n      } catch (error) {\n        console.error('签到失败:', error);\n        ElMessage.error('签到失败，请稍后重试');\n      }\n    };\n    const fetchPointsInfo = async () => {\n      try {\n        const response = await membershipApi.getPointsInfo();\n        if (response?.data?.code === 200) {\n          pointsInfo.value = response.data.data;\n        } else {\n          console.log('获取积分信息失败:', response);\n        }\n      } catch (error) {\n        console.error('获取积分信息失败:', error);\n      }\n    };\n    const fetchPointsRecords = async () => {\n      if (loading.value) return;\n      loading.value = true;\n      try {\n        const response = await membershipApi.getPointsRecords({\n          page: page.value\n        });\n        if (response?.data?.code === 200) {\n          const records = response.data.data?.records || [];\n          const has_more = response.data.data?.has_more || false;\n          if (page.value === 1) {\n            pointsRecords.value = records;\n          } else {\n            pointsRecords.value.push(...records);\n          }\n          hasMore.value = has_more;\n        }\n      } catch (error) {\n        console.error('获取积分记录失败:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const loadMore = () => {\n      page.value++;\n      fetchPointsRecords();\n    };\n    const getLevelTitle = level => {\n      const titles = ['初级用户', '普通用户', '高级用户', '资深用户', '专家用户'];\n      return titles[level - 1] || titles[0];\n    };\n    const getLevelRange = level => {\n      const ranges = {\n        1: '0-100积分',\n        2: '101-500积分',\n        3: '501-2000积分',\n        4: '2001-10000积分',\n        5: '10000积分以上'\n      };\n      return ranges[level];\n    };\n    const getLevelProgress = (level, balance) => {\n      const thresholds = [0, 100, 500, 2000, 10000];\n      const currentThreshold = thresholds[level - 1] || 0;\n      const nextThreshold = thresholds[level] || thresholds[thresholds.length - 1];\n      return Math.min((balance - currentThreshold) / (nextThreshold - currentThreshold) * 100, 100);\n    };\n    const getNextLevelPoints = (level, balance) => {\n      const thresholds = [0, 100, 500, 2000, 10000];\n      if (level >= thresholds.length) return 0;\n      return Math.max(thresholds[level] - balance, 0);\n    };\n    const toggleOrderDetail = orderNo => {\n      const index = expandedOrders.value.indexOf(orderNo);\n      if (index > -1) {\n        expandedOrders.value.splice(index, 1);\n      } else {\n        expandedOrders.value.push(orderNo);\n      }\n    };\n    const getLevelThreshold = level => {\n      const thresholds = [0, 100, 500, 2000, 10000];\n      return thresholds[level] || thresholds[thresholds.length - 1];\n    };\n\n    // 获取签到提示\n    const getSignInTip = () => {\n      const nextReward = signInInfo.value.next_reward;\n      if (!nextReward) return '';\n      if (nextReward.days === 1) {\n        return `明日签到可获得 ${nextReward.points} 积分奖励`;\n      }\n      return `再签到 ${nextReward.days} 天可获得 ${nextReward.points} 积分奖励`;\n    };\n\n    // 获取等级特权\n    const getLevelPrivileges = level => {\n      const privileges = {\n        1: [{\n          title: '基础功能',\n          description: '可使用所有基础功能'\n        }, {\n          title: '每日签到',\n          description: '每日签到获取积分'\n        }],\n        2: [{\n          title: '高级功能',\n          description: '解锁部分高级功能'\n        }, {\n          title: '积分加速',\n          description: '签到积分1.2倍'\n        }],\n        3: [{\n          title: '专业功能',\n          description: '解锁全部高级功能'\n        }, {\n          title: '积分加速',\n          description: '签到积分1.5倍'\n        }],\n        4: [{\n          title: '特权服务',\n          description: '享受专属客服服务'\n        }, {\n          title: '积分加速',\n          description: '签到积分2倍'\n        }],\n        5: [{\n          title: 'VIP特权',\n          description: '享受最高级别服务'\n        }, {\n          title: '积分加速',\n          description: '签到积分3倍'\n        }]\n      };\n      return privileges[level] || privileges[1];\n    };\n\n    // 格式化订单状态\n    const formatOrderStatus = status => {\n      const statusMap = {\n        pending: '待支付',\n        paid: '已支付',\n        cancelled: '已取消',\n        refunded: '已退款'\n      };\n      return statusMap[status] || status;\n    };\n\n    // 格式化支付方式\n    const formatPaymentMethod = method => {\n      const methodMap = {\n        alipay: '支付宝',\n        wechat: '微信支付',\n        balance: '余额支付'\n      };\n      return methodMap[method] || method;\n    };\n\n    // 格式化会员类型\n    const formatMembershipType = order => {\n      return `${order.tier_name || '普通会员'} (${order.duration}个月)`;\n    };\n\n    // 处理支付\n    const handlePayment = order => {\n      // 处理支付逻辑\n      console.log('处理支付:', order);\n    };\n\n    // 显示订单详情\n    const showOrderDetail = order => {\n      // 显示订单详情逻辑\n      console.log('显示订单详情:', order);\n    };\n\n    // 添加 orders 数据\n    const orders = ref([]);\n\n    // 添加窗口宽度的响应式引用\n    const windowWidth = ref(window?.innerWidth || 1024);\n\n    // 添加窗口大小变化的处理函数\n    const handleResize = () => {\n      windowWidth.value = window.innerWidth;\n    };\n\n    // 在组件挂载时添加事件监听和获取数据\n    onMounted(async () => {\n      window.addEventListener('resize', handleResize);\n      try {\n        await Promise.all([fetchPointsInfo(), fetchPointsRecords(), fetchSignInStatus()]);\n      } catch (error) {\n        console.error('初始化数据失败:', error);\n        pointsRecords.value = [];\n      }\n    });\n\n    // 在组件卸载时移除事件监听\n    onUnmounted(() => {\n      window.removeEventListener('resize', handleResize);\n    });\n\n    // 添加格式化日期的计算属性\n    const dateFormat = computed(() => windowWidth.value < 640 ? 'MM-DD HH:mm' : 'YYYY-MM-DD HH:mm');\n\n    // 计算属性：是否可以签到\n    const canSignIn = computed(() => signInInfo.value.can_sign_in);\n    const __returned__ = {\n      router,\n      accountStore,\n      vipTypeText,\n      vipExpireText,\n      vipButtonText,\n      pointsInfo,\n      signInInfo,\n      loading,\n      currentFilter,\n      currentTab,\n      pointsRecords,\n      hasMore,\n      page,\n      expandedOrders,\n      memberBenefits,\n      pointsFilters,\n      tabs,\n      pointRules,\n      filteredRecords,\n      membershipInfo,\n      handleVipButton,\n      fetchSignInStatus,\n      handleSignIn,\n      fetchPointsInfo,\n      fetchPointsRecords,\n      loadMore,\n      getLevelTitle,\n      getLevelRange,\n      getLevelProgress,\n      getNextLevelPoints,\n      toggleOrderDetail,\n      getLevelThreshold,\n      getSignInTip,\n      getLevelPrivileges,\n      formatOrderStatus,\n      formatPaymentMethod,\n      formatMembershipType,\n      handlePayment,\n      showOrderDetail,\n      orders,\n      windowWidth,\n      handleResize,\n      dateFormat,\n      canSignIn,\n      ref,\n      computed,\n      onMounted,\n      onUnmounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get CalendarDaysIcon() {\n        return CalendarDaysIcon;\n      },\n      get StarIcon() {\n        return StarIcon;\n      },\n      get TrophyIcon() {\n        return TrophyIcon;\n      },\n      get CheckCircleIcon() {\n        return CheckCircleIcon;\n      },\n      get ChevronDownIcon() {\n        return ChevronDownIcon;\n      },\n      get SparklesIcon() {\n        return SparklesIcon;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get membershipApi() {\n        return membershipApi;\n      },\n      get formatDate() {\n        return formatDate;\n      },\n      get useAccountStore() {\n        return useAccountStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","ElMessage","CalendarDaysIcon","StarIcon","TrophyIcon","CheckCircleIcon","ChevronDownIcon","SparklesIcon","useRouter","membershipApi","formatDate","useAccountStore","router","accountStore","vipTypeText","userInfo","is_vip","vip_status","vipExpireText","vip_type","vip_expire_time","expireDate","Date","now","diffDays","Math","floor","vipButtonText","pointsInfo","balance","level","sign_in_days","total_earned","signInInfo","can_sign_in","next_reward","loading","currentFilter","currentTab","pointsRecords","hasMore","page","expandedOrders","memberBenefits","key","name","desc","icon","pointsFilters","label","value","tabs","pointRules","action","points","description","bgColor","iconColor","borderColor","textColor","filteredRecords","filter","record","membershipInfo","is_active","tier","expire_at","handleVipButton","push","fetchSignInStatus","response","getSignInStatus","data","code","error","console","handleSignIn","signIn","success","Promise","all","fetchPointsInfo","getPointsInfo","log","fetchPointsRecords","getPointsRecords","records","has_more","loadMore","getLevelTitle","titles","getLevelRange","ranges","getLevelProgress","thresholds","currentThreshold","nextThreshold","length","min","getNextLevelPoints","max","toggleOrderDetail","orderNo","index","indexOf","splice","getLevelThreshold","getSignInTip","nextReward","days","getLevelPrivileges","privileges","title","formatOrderStatus","status","statusMap","pending","paid","cancelled","refunded","formatPaymentMethod","method","methodMap","alipay","wechat","formatMembershipType","order","tier_name","duration","handlePayment","showOrderDetail","orders","windowWidth","window","innerWidth","handleResize","addEventListener","removeEventListener","dateFormat","canSignIn"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/Membership/index.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-8\">\n    <!-- 会员状态卡片 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div class=\"px-6 py-8 bg-gradient-to-br from-[#1A56DB] via-blue-600 to-blue-500 relative overflow-hidden\">\n        <!-- 装饰背景 -->\n        <div class=\"absolute inset-0\">\n          <div class=\"absolute right-0 top-0 w-64 h-64 bg-white bg-opacity-10 rounded-full blur-3xl transform -translate-y-1/2 translate-x-1/2\"></div>\n          <div class=\"absolute left-0 bottom-0 w-32 h-32 bg-white bg-opacity-5 rounded-full blur-2xl\"></div>\n        </div>\n        <!-- 内容 -->\n        <div class=\"flex flex-col lg:flex-row items-start lg:items-center justify-between relative space-y-4 lg:space-y-0\">\n          <div class=\"text-white\">\n            <h3 class=\"text-2xl font-bold tracking-tight\">{{ vipTypeText }}</h3>\n            <p class=\"mt-2 text-white text-opacity-80 font-medium\">{{ vipExpireText }}</p>\n          </div>\n          <button \n            @click=\"handleVipButton\"\n            class=\"w-full lg:w-auto px-6 py-2.5 bg-white bg-opacity-10 backdrop-blur-sm text-white border border-white border-opacity-20 rounded-full text-sm font-medium hover:bg-opacity-20 transition-all duration-300\"\n          >\n            {{ vipButtonText }}\n          </button>\n        </div>\n      </div>\n      \n      <!-- 会员权益 -->\n      <div class=\"px-6 py-4\">\n        <h4 class=\"text-base font-medium text-gray-900 mb-4\">专属会员权益</h4>\n        <div class=\"grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-6\">\n          <div v-for=\"benefit in memberBenefits\" :key=\"benefit.key\" \n            class=\"flex lg:flex-col items-center lg:text-center p-3 lg:p-0 bg-gray-50 bg-opacity-50 lg:bg-transparent rounded-lg lg:rounded-none\"\n          >\n            <div class=\"w-10 lg:w-12 h-10 lg:h-12 rounded-full bg-gradient-to-br from-blue-50 to-blue-100 bg-opacity-50 flex items-center justify-center\">\n              <component :is=\"benefit.icon\" class=\"w-6 h-6 text-[#1A56DB]\" />\n            </div>\n            <div class=\"ml-3 lg:ml-0 lg:mt-3\">\n              <div class=\"text-sm font-medium text-gray-900\">{{ benefit.name }}</div>\n              <div class=\"text-xs text-gray-600 mt-1\">{{ benefit.desc }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 积分信息 -->\n    <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div class=\"px-6 py-8 relative\">\n        <!-- 装饰背景 -->\n        <div class=\"absolute inset-0 opacity-10\">\n          <div class=\"absolute right-0 top-0 w-64 h-64 bg-gradient-to-br from-violet-100 to-purple-100 bg-opacity-20 rounded-full transform -translate-y-1/3 translate-x-1/3\"></div>\n        </div>\n        \n        <!-- 积分和等级概览 -->\n        <div class=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\n          <div>\n            <h3 class=\"text-lg lg:text-xl font-semibold text-gray-900\">我的积分</h3>\n            <div class=\"mt-3\">\n              <span class=\"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-[#1A56DB] to-blue-500 bg-clip-text text-transparent\">{{ pointsInfo.balance || 0 }}</span>\n              <span class=\"text-sm text-gray-600 ml-1\">积分</span>\n            </div>\n          </div>\n          \n          <!-- 等级展示 -->\n          <div class=\"text-right\">\n            <div class=\"inline-flex items-center px-4 py-2 rounded-full bg-blue-50 border border-blue-100\">\n              <StarIcon class=\"w-5 h-5 text-[#1A56DB] mr-2\" />\n              <span class=\"text-base font-semibold text-[#1A56DB]\">Lv.{{ pointsInfo.level || 1 }}</span>\n            </div>\n            <div class=\"mt-2 text-sm font-medium text-gray-600\">{{ getLevelTitle(pointsInfo.level) }}</div>\n          </div>\n        </div>\n        \n        <!-- 等级进度条 -->\n        <div class=\"mt-6\">\n          <div class=\"flex items-center justify-between mb-2\">\n            <div class=\"text-sm text-gray-700\">\n              距离 Lv.{{ Math.min((pointsInfo.level || 1) + 1, 5) }} 还需 \n              <span class=\"font-medium text-violet-600\">{{ getNextLevelPoints(pointsInfo.level, pointsInfo.balance) }}</span> 分\n            </div>\n            <div class=\"text-sm text-gray-600\">\n              {{ pointsInfo.balance || 0 }}/{{ getLevelThreshold(pointsInfo.level) }}\n            </div>\n          </div>\n          <div class=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\n            <div \n              class=\"h-full bg-gradient-to-r from-[#1A56DB] to-blue-500 transition-all duration-500\"\n              :style=\"{ width: `${getLevelProgress(pointsInfo.level, pointsInfo.balance)}%` }\"\n            ></div>\n          </div>\n        </div>\n\n        <!-- 签到信息 -->\n        <div class=\"mt-6 flex items-center\">\n          <div class=\"flex flex-wrap lg:flex-nowrap items-center space-x-2 lg:space-x-3 px-3 lg:px-4 py-2 bg-blue-50 rounded-lg border border-blue-100\">\n            <CalendarDaysIcon class=\"w-5 h-5 text-[#1A56DB]\" />\n            <div>\n              <div class=\"text-sm font-medium text-blue-900\">连续签到</div>\n              <div class=\"flex items-baseline space-x-1\">\n                <span class=\"text-xl font-bold text-[#1A56DB]\">{{ signInInfo.sign_in_days || 0 }}</span>\n                <span class=\"text-sm text-[#1A56DB]\">天</span>\n              </div>\n            </div>\n            <button \n              v-if=\"canSignIn\"\n              @click=\"handleSignIn\"\n              class=\"mt-2 lg:mt-0 w-full lg:w-auto lg:ml-4 px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-[#1A56DB] text-sm font-medium rounded-full transition-colors\"\n            >\n              立即签到\n            </button>\n            <div v-else class=\"mt-2 lg:mt-0 w-full lg:w-auto lg:ml-4 text-center lg:text-left text-sm text-violet-600\">\n              今日已签到\n            </div>\n          </div>\n          \n          <div class=\"hidden lg:block ml-auto text-sm text-gray-500\">\n            {{ getSignInTip() }}\n          </div>\n        </div>\n      </div>\n\n      <!-- 积分明细 -->\n      <div class=\"px-4 lg:px-6 py-4\">\n        <div class=\"flex items-center justify-between mb-3\">\n          <h4 class=\"text-base font-medium text-gray-900\">积分明细</h4>\n          <div class=\"flex space-x-1 lg:space-x-2\">\n            <button \n              v-for=\"filter in pointsFilters\" \n              :key=\"filter.value\"\n              @click=\"currentFilter = filter.value\"\n              class=\"px-1.5 lg:px-2 py-1 text-xs rounded-full transition-colors whitespace-nowrap\"\n              :class=\"[\n                currentFilter === filter.value \n                  ? 'bg-gray-100 text-gray-800' \n                  : 'text-gray-500 hover:text-gray-700'\n              ]\"\n            >\n              {{ filter.label }}\n            </button>\n          </div>\n        </div>\n        <div class=\"divide-y divide-gray-100 max-h-[400px] overflow-y-auto\">\n          <div v-if=\"!pointsRecords?.length\" class=\"py-8 text-center text-gray-500\">\n            暂无积分记录\n          </div>\n          <div \n            v-else\n            v-for=\"record in filteredRecords\" \n            :key=\"record.id\" \n            class=\"py-3 lg:py-3.5 flex items-center justify-between hover:bg-gray-50 transition-colors px-2\"\n          >\n            <div>\n              <div class=\"text-xs lg:text-sm font-medium text-gray-900\">{{ record.description }}</div>\n              <div class=\"text-[10px] lg:text-xs text-gray-500 mt-0.5\">\n                {{ formatDate(record.created_at, dateFormat) }}\n              </div>\n            </div>\n            <div :class=\"[\n              'text-xs lg:text-sm font-medium ml-2 lg:ml-4',\n              record.points > 0 ? 'text-gray-800' : 'text-red-600'\n            ]\">\n              {{ record.points > 0 ? '+' : '' }}{{ record.points }}\n            </div>\n          </div>\n        </div>\n        <!-- 加载更多按钮 -->\n        <div v-if=\"hasMore\" class=\"mt-4 text-center\">\n          <button \n            @click=\"loadMore\"\n            class=\"text-xs lg:text-sm text-gray-500 hover:text-gray-700 px-3 lg:px-4 py-1.5 lg:py-2 rounded-full hover:bg-gray-100 transition-colors\"\n            :disabled=\"loading\"\n          >\n            {{ loading ? '加载中...' : '加载更多' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Tab 导航 -->\n    <div class=\"bg-white rounded-lg shadow\">\n      <!-- Tab 头部 -->\n      <div class=\"border-b border-gray-200\">\n        <nav class=\"-mb-px flex\" aria-label=\"Tabs\">\n          <button\n            v-for=\"tab in tabs\"\n            :key=\"tab.key\"\n            @click=\"currentTab = tab.key\"\n            :class=\"[\n              currentTab === tab.key\n                ? 'border-primary-500 text-primary-600'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\n              'w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors duration-200'\n            ]\"\n          >\n            {{ tab.name }}\n          </button>\n        </nav>\n      </div>\n\n      <!-- Tab 内容 -->\n      <div class=\"p-6\">\n        <!-- 积分规则 -->\n        <div v-if=\"currentTab === 'points'\" class=\"space-y-6\">\n          <h3 class=\"text-lg font-medium text-gray-900\">积分获取规则</h3>\n          <div class=\"space-y-3\">\n            <div class=\"flex items-center p-4 bg-white border rounded-lg transition-all hover:shadow-sm border-blue-100\">\n              <div class=\"w-10 h-10 rounded-lg flex items-center justify-center bg-blue-50\">\n                <CalendarDaysIcon class=\"w-5 h-5 text-blue-500\" />\n              </div>\n              <div class=\"ml-4 flex-1\">\n                <div class=\"flex items-center justify-between\">\n                  <div class=\"font-medium text-gray-900\">每日签到</div>\n                  <button\n                    @click=\"handleSignIn\"\n                    :disabled=\"!canSignIn\"\n                    class=\"px-4 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer\"\n                    :class=\"[\n                      canSignIn \n                        ? 'bg-primary-600 text-white hover:bg-primary-700 hover:shadow-sm active:bg-primary-800' \n                        : 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                    ]\"\n                  >\n                    {{ canSignIn ? '立即签到' : '今日已签到' }}\n                  </button>\n                </div>\n                <div class=\"mt-1 text-sm text-gray-500\">\n                  已连续签到 {{ signInInfo.sign_in_days || 0 }} 天\n                  <template v-if=\"signInInfo.nextReward\">\n                    <span class=\"ml-2\">\n                      再签到 {{ signInInfo.nextReward.days }} 天可获得 \n                      {{ signInInfo.nextReward.points }} 积分奖励\n                    </span>\n                  </template>\n                </div>\n              </div>\n            </div>\n            <div v-for=\"rule in pointRules.slice(1)\" :key=\"rule.action\" \n              class=\"flex items-center p-4 bg-white border rounded-lg transition-all hover:shadow-sm\"\n              :class=\"rule.borderColor\"\n            >\n              <div :class=\"[\n                'w-10 h-10 rounded-lg flex items-center justify-center',\n                rule.bgColor\n              ]\">\n                <component :is=\"rule.icon\" class=\"w-5 h-5\" :class=\"rule.iconColor\" />\n              </div>\n              <div class=\"ml-4 flex-1\">\n                <div class=\"flex items-center justify-between\">\n                  <div class=\"font-medium text-gray-900\">{{ rule.action }}</div>\n                  <div class=\"text-sm font-medium\" :class=\"rule.textColor\">{{ rule.points }}</div>\n                </div>\n                <div class=\"mt-1 text-sm text-gray-500\">{{ rule.description }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 等级权益 -->\n        <div v-if=\"currentTab === 'privileges'\" class=\"space-y-6\">\n          <h3 class=\"text-lg font-medium text-gray-900\">等级特权</h3>\n          <div class=\"space-y-6\">\n            <div v-for=\"level in 5\" :key=\"level\" \n              class=\"bg-white border rounded-lg overflow-hidden transition-all hover:shadow-sm\"\n              :class=\"[\n                level === pointsInfo.level ? 'border-primary-500' : 'border-gray-100',\n              ]\"\n            >\n              <!-- 等级头部 -->\n              <div class=\"px-6 py-4 flex items-center justify-between border-b border-gray-100\"\n                :class=\"level === pointsInfo.level ? 'bg-primary-50' : 'bg-gray-50'\"\n              >\n                <div class=\"flex items-center space-x-3\">\n                  <div class=\"w-10 h-10 rounded-lg flex items-center justify-center\"\n                    :class=\"level === pointsInfo.level ? 'bg-primary-100' : 'bg-white'\"\n                  >\n                    <TrophyIcon \n                      class=\"w-6 h-6\"\n                      :class=\"level === pointsInfo.level ? 'text-primary-500' : 'text-gray-400'\"\n                    />\n                  </div>\n                  <div>\n                    <div class=\"flex items-center\">\n                      <span class=\"text-lg font-semibold text-gray-900\">\n                        Lv.{{ level }} {{ getLevelTitle(level) }}\n                      </span>\n                      <span v-if=\"level === pointsInfo.level\"\n                        class=\"ml-2 px-2 py-0.5 text-xs font-medium text-primary-600 bg-primary-100 rounded-full\"\n                      >\n                        当前等级\n                      </span>\n                    </div>\n                    <div class=\"text-sm text-gray-500 mt-0.5\">{{ getLevelRange(level) }}</div>\n                  </div>\n                </div>\n                <div class=\"text-sm text-gray-500\">\n                  {{ level < 5 ? `距离下一级还需 ${getNextLevelPoints(level, pointsInfo.total_earned)} 积分` : '已达到最高等级' }}\n                </div>\n              </div>\n\n              <!-- 等级特权列表 -->\n              <div class=\"p-6\">\n                <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div v-for=\"(privilege, index) in getLevelPrivileges(level)\" \n                    :key=\"index\"\n                    class=\"flex items-start space-x-3 p-3 rounded-lg\"\n                    :class=\"level === pointsInfo.level ? 'bg-primary-50' : 'bg-gray-50'\"\n                  >\n                    <div class=\"flex-shrink-0\">\n                      <CheckCircleIcon \n                        class=\"w-5 h-5\"\n                        :class=\"level === pointsInfo.level ? 'text-primary-500' : 'text-gray-400'\"\n                      />\n                    </div>\n                    <div>\n                      <div class=\"text-sm font-medium text-gray-900\">{{ privilege.title }}</div>\n                      <div class=\"text-xs text-gray-500 mt-0.5\">{{ privilege.description }}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 订单记录 -->\n        <div v-if=\"currentTab === 'orders'\" class=\"space-y-4\">\n          <div v-if=\"orders.length === 0\" class=\"text-center py-8 text-gray-500\">\n            暂无订单记录\n          </div>\n          \n          <!-- 订单列表 -->\n          <div v-else class=\"space-y-4\">\n            <div v-for=\"order in orders\" :key=\"order.order_no\" \n              class=\"bg-white border rounded-lg overflow-hidden transition-all hover:border-gray-300\"\n            >\n              <!-- 订单基本信息 -->\n              <div class=\"px-4 py-3 flex items-center justify-between border-b border-gray-100\">\n                <div class=\"flex items-center space-x-4\">\n                  <div class=\"text-sm text-gray-500\">订单号：{{ order.order_no }}</div>\n                  <div :class=\"[\n                    'px-2 py-1 text-xs font-medium rounded-full',\n                    {\n                      'bg-yellow-100 text-yellow-800': order.status === 'pending',\n                      'bg-green-100 text-green-800': order.status === 'paid',\n                      'bg-gray-100 text-gray-800': order.status === 'cancelled',\n                      'bg-red-100 text-red-800': order.status === 'refunded'\n                    }\n                  ]\">\n                    {{ formatOrderStatus(order.status) }}\n                  </div>\n                </div>\n                <button \n                  class=\"text-sm text-gray-500 hover:text-gray-700\"\n                  @click=\"toggleOrderDetail(order.order_no)\"\n                >\n                  {{ expandedOrders.includes(order.order_no) ? '收起' : '展开' }}\n                  <ChevronDownIcon \n                    class=\"w-4 h-4 inline-block ml-1 transition-transform\"\n                    :class=\"{ 'rotate-180': expandedOrders.includes(order.order_no) }\"\n                  />\n                </button>\n              </div>\n              \n              <!-- 订单主要信息 -->\n              <div class=\"px-4 py-3 flex items-center justify-between bg-gray-50\">\n                <div class=\"flex items-center space-x-3\">\n                  <div class=\"w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center\">\n                    <SparklesIcon class=\"w-5 h-5 text-violet-600\" />\n                  </div>\n                  <div>\n                    <div class=\"font-medium\">{{ formatMembershipType(order) }}</div>\n                    <div class=\"text-sm text-gray-500\">{{ formatDate(order.created_at) }}</div>\n                  </div>\n                </div>\n                <div class=\"text-lg font-medium text-gray-900\">\n                  ¥{{ order.amount }}\n                </div>\n              </div>\n              \n              <!-- 展开的详细信息 -->\n              <div v-show=\"expandedOrders.includes(order.order_no)\"\n                class=\"px-4 py-3 space-y-3 bg-gray-50 border-t border-gray-100\"\n              >\n                <div class=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <div class=\"text-gray-500\">支付方式</div>\n                    <div class=\"mt-1\">{{ formatPaymentMethod(order.payment_method) }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-gray-500\">支付时间</div>\n                    <div class=\"mt-1\">{{ order.paid_at ? formatDate(order.paid_at) : '-' }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-gray-500\">订单创建时间</div>\n                    <div class=\"mt-1\">{{ formatDate(order.created_at) }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-gray-500\">订单更新时间</div>\n                    <div class=\"mt-1\">{{ formatDate(order.updated_at) }}</div>\n                  </div>\n                </div>\n                \n                <!-- 如果有备注信息 -->\n                <div v-if=\"order.remarks\" class=\"text-sm\">\n                  <div class=\"text-gray-500\">备注信息</div>\n                  <div class=\"mt-1 text-gray-700\">{{ order.remarks }}</div>\n                </div>\n                \n                <!-- 订单操作按钮 -->\n                <div class=\"flex justify-end space-x-3 pt-2\">\n                  <button v-if=\"order.status === 'pending'\"\n                    class=\"px-3 py-1 text-sm text-violet-600 hover:text-violet-700 border border-violet-200 rounded-md hover:bg-violet-50\"\n                    @click=\"handlePayment(order)\"\n                  >\n                    立即支付\n                  </button>\n                  <button v-if=\"['pending', 'paid'].includes(order.status)\"\n                    class=\"px-3 py-1 text-sm text-gray-600 hover:text-gray-700 border border-gray-200 rounded-md hover:bg-gray-50\"\n                    @click=\"showOrderDetail(order)\"\n                  >\n                    查看详情\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { \n  CalendarDaysIcon, \n  StarIcon,\n  TrophyIcon,\n  CheckCircleIcon,\n  ChevronDownIcon,\n  SparklesIcon\n} from '@heroicons/vue/24/outline'\nimport { useRouter } from 'vue-router'\nimport membershipApi from '@/api/membership'\nimport { formatDate } from '@/utils/date'\nimport { useAccountStore } from '@/stores/account'\n\nconst router = useRouter()\n\nconst accountStore = useAccountStore()\n\n// 会员状态数据\nconst vipTypeText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '免费用户'\n  return userInfo.vip_status\n})\n\nconst vipExpireText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '开通会员享受更多权益'\n  if (userInfo.vip_type === 'lifetime') return '终身会员'\n  if (userInfo.vip_expire_time) {\n    const expireDate = new Date(userInfo.vip_expire_time)\n    const now = new Date()\n    const diffDays = Math.floor((expireDate - now) / (1000 * 60 * 60 * 24))\n    if (diffDays > 0) {\n      return `剩余 ${diffDays} 天 (${formatDate(userInfo.vip_expire_time, 'YYYY-MM-DD')})`\n    } else {\n      return '会员已过期'\n    }\n  }\n  return '开通会员享受更多权益'\n})\n\nconst vipButtonText = computed(() => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) return '开通会员'\n  if (userInfo.vip_type === 'lifetime') return '查看权益'\n  return '续费会员'\n})\n\n// 积分相关数据\nconst pointsInfo = ref({\n  balance: 0,\n  level: 1,\n  sign_in_days: 0,\n  total_earned: 0\n})\n\n// 签到相关数据\nconst signInInfo = ref({\n  can_sign_in: false,\n  sign_in_days: 0,\n  next_reward: null\n})\n\nconst loading = ref(false)\nconst currentFilter = ref('all')\nconst currentTab = ref('points')\nconst pointsRecords = ref([])\nconst hasMore = ref(false)\nconst page = ref(1)\nconst expandedOrders = ref([])\n\n// 会员权益列表\nconst memberBenefits = [\n  {\n    key: 'unlimited',\n    name: '无限使用',\n    desc: '无限制使用所有功能',\n    icon: SparklesIcon\n  },\n  // ... 其他权益配置\n]\n\n// 积分筛选选项\nconst pointsFilters = [\n  { label: '全部', value: 'all' },\n  { label: '获得', value: 'earned' },\n  { label: '使用', value: 'used' }\n]\n\n// tabs配置\nconst tabs = [\n  { key: 'points', name: '积分规则' },\n  { key: 'privileges', name: '等级权益' },\n  { key: 'orders', name: '订单记录' }\n]\n\n// 积分规则\nconst pointRules = [\n  {\n    action: '每日签到',\n    points: '+1~10',\n    description: '连续签到可获得更多积分奖励',\n    icon: CalendarDaysIcon,\n    bgColor: 'bg-blue-50',\n    iconColor: 'text-blue-500',\n    borderColor: 'border-blue-100',\n    textColor: 'text-blue-600'\n  },\n  // ... 其他规则配置\n]\n\n// 计算属性\nconst filteredRecords = computed(() => {\n  if (!pointsRecords.value) return []\n  if (currentFilter.value === 'all') return pointsRecords.value\n  return pointsRecords.value.filter(record => \n    currentFilter.value === 'earned' ? record.points > 0 : record.points < 0\n  )\n})\n\n// 添加会员信息的响应式数据\nconst membershipInfo = ref({\n  is_active: false,\n  tier: null,\n  expire_at: null\n})\n\n// 修改 handleVipButton 方法\nconst handleVipButton = () => {\n  const userInfo = accountStore.userInfo\n  if (!userInfo?.is_vip) {\n    router.push('/pro')\n  } else if (userInfo.vip_type === 'lifetime') {\n    // 显示会员权益详情\n    currentTab.value = 'privileges'\n  } else {\n    router.push('/pro')\n  }\n}\n\n// 获取签到状态\nconst fetchSignInStatus = async () => {\n  try {\n    const response = await membershipApi.getSignInStatus()\n    if (response?.data?.code === 200) {\n      signInInfo.value = response.data.data\n    }\n  } catch (error) {\n    console.error('获取签到状态失败:', error)\n  }\n}\n\n// 处理签到\nconst handleSignIn = async () => {\n  if (!signInInfo.value.can_sign_in) return\n  \n  try {\n    const response = await membershipApi.signIn()\n    if (response?.data?.code === 200) {\n      ElMessage.success('签到成功')\n      await Promise.all([\n        fetchSignInStatus(),\n        fetchPointsInfo()\n      ])\n    }\n  } catch (error) {\n    console.error('签到失败:', error)\n    ElMessage.error('签到失败，请稍后重试')\n  }\n}\n\nconst fetchPointsInfo = async () => {\n  try {\n    const response = await membershipApi.getPointsInfo()\n    if (response?.data?.code === 200) {\n      pointsInfo.value = response.data.data\n    } else {\n      console.log('获取积分信息失败:', response)\n    }\n  } catch (error) {\n    console.error('获取积分信息失败:', error)\n  }\n}\n\nconst fetchPointsRecords = async () => {\n  if (loading.value) return\n  \n  loading.value = true\n  try {\n    const response = await membershipApi.getPointsRecords({ page: page.value })\n    if (response?.data?.code === 200) {\n      const records = response.data.data?.records || []\n      const has_more = response.data.data?.has_more || false\n      \n      if (page.value === 1) {\n        pointsRecords.value = records\n      } else {\n        pointsRecords.value.push(...records)\n      }\n      hasMore.value = has_more\n    }\n  } catch (error) {\n    console.error('获取积分记录失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst loadMore = () => {\n  page.value++\n  fetchPointsRecords()\n}\n\nconst getLevelTitle = (level) => {\n  const titles = ['初级用户', '普通用户', '高级用户', '资深用户', '专家用户']\n  return titles[level - 1] || titles[0]\n}\n\nconst getLevelRange = (level) => {\n  const ranges = {\n    1: '0-100积分',\n    2: '101-500积分',\n    3: '501-2000积分',\n    4: '2001-10000积分',\n    5: '10000积分以上'\n  }\n  return ranges[level]\n}\n\nconst getLevelProgress = (level, balance) => {\n  const thresholds = [0, 100, 500, 2000, 10000]\n  const currentThreshold = thresholds[level - 1] || 0\n  const nextThreshold = thresholds[level] || thresholds[thresholds.length - 1]\n  return Math.min(((balance - currentThreshold) / (nextThreshold - currentThreshold)) * 100, 100)\n}\n\nconst getNextLevelPoints = (level, balance) => {\n  const thresholds = [0, 100, 500, 2000, 10000]\n  if (level >= thresholds.length) return 0\n  return Math.max(thresholds[level] - balance, 0)\n}\n\nconst toggleOrderDetail = (orderNo) => {\n  const index = expandedOrders.value.indexOf(orderNo)\n  if (index > -1) {\n    expandedOrders.value.splice(index, 1)\n  } else {\n    expandedOrders.value.push(orderNo)\n  }\n}\n\nconst getLevelThreshold = (level) => {\n  const thresholds = [0, 100, 500, 2000, 10000]\n  return thresholds[level] || thresholds[thresholds.length - 1]\n}\n\n// 获取签到提示\nconst getSignInTip = () => {\n  const nextReward = signInInfo.value.next_reward\n  if (!nextReward) return ''\n  \n  if (nextReward.days === 1) {\n    return `明日签到可获得 ${nextReward.points} 积分奖励`\n  }\n  return `再签到 ${nextReward.days} 天可获得 ${nextReward.points} 积分奖励`\n}\n\n// 获取等级特权\nconst getLevelPrivileges = (level) => {\n  const privileges = {\n    1: [\n      { title: '基础功能', description: '可使用所有基础功能' },\n      { title: '每日签到', description: '每日签到获取积分' }\n    ],\n    2: [\n      { title: '高级功能', description: '解锁部分高级功能' },\n      { title: '积分加速', description: '签到积分1.2倍' }\n    ],\n    3: [\n      { title: '专业功能', description: '解锁全部高级功能' },\n      { title: '积分加速', description: '签到积分1.5倍' }\n    ],\n    4: [\n      { title: '特权服务', description: '享受专属客服服务' },\n      { title: '积分加速', description: '签到积分2倍' }\n    ],\n    5: [\n      { title: 'VIP特权', description: '享受最高级别服务' },\n      { title: '积分加速', description: '签到积分3倍' }\n    ]\n  }\n  return privileges[level] || privileges[1]\n}\n\n// 格式化订单状态\nconst formatOrderStatus = (status) => {\n  const statusMap = {\n    pending: '待支付',\n    paid: '已支付',\n    cancelled: '已取消',\n    refunded: '已退款'\n  }\n  return statusMap[status] || status\n}\n\n// 格式化支付方式\nconst formatPaymentMethod = (method) => {\n  const methodMap = {\n    alipay: '支付宝',\n    wechat: '微信支付',\n    balance: '余额支付'\n  }\n  return methodMap[method] || method\n}\n\n// 格式化会员类型\nconst formatMembershipType = (order) => {\n  return `${order.tier_name || '普通会员'} (${order.duration}个月)`\n}\n\n// 处理支付\nconst handlePayment = (order) => {\n  // 处理支付逻辑\n  console.log('处理支付:', order)\n}\n\n// 显示订单详情\nconst showOrderDetail = (order) => {\n  // 显示订单详情逻辑\n  console.log('显示订单详情:', order)\n}\n\n// 添加 orders 数据\nconst orders = ref([])\n\n// 添加窗口宽度的响应式引用\nconst windowWidth = ref(window?.innerWidth || 1024)\n\n// 添加窗口大小变化的处理函数\nconst handleResize = () => {\n  windowWidth.value = window.innerWidth\n}\n\n// 在组件挂载时添加事件监听和获取数据\nonMounted(async () => {\n  window.addEventListener('resize', handleResize)\n  try {\n    await Promise.all([\n      fetchPointsInfo(),\n      fetchPointsRecords(),\n      fetchSignInStatus()\n    ])\n  } catch (error) {\n    console.error('初始化数据失败:', error)\n    pointsRecords.value = []\n  }\n})\n\n// 在组件卸载时移除事件监听\nonUnmounted(() => {\n  window.removeEventListener('resize', handleResize)\n})\n\n// 添加格式化日期的计算属性\nconst dateFormat = computed(() => windowWidth.value < 640 ? 'MM-DD HH:mm' : 'YYYY-MM-DD HH:mm')\n\n// 计算属性：是否可以签到\nconst canSignIn = computed(() => signInInfo.value.can_sign_in)\n</script>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}