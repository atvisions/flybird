{"ast":null,"code":"import { ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { Bars3Icon, XMarkIcon, UsersIcon, EnvelopeIcon, UserCircleIcon, PhotoIcon } from '@heroicons/vue/24/outline';\nexport default {\n  __name: 'MobileTabBar',\n  props: {\n    menuGroups: {\n      type: Array,\n      required: true\n    },\n    unreadMessages: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const route = useRoute();\n    const router = useRouter();\n    const isMobileMenuOpen = ref(false);\n\n    // 底部导航按钮\n    const mobileActions = [{\n      key: 'more',\n      label: '更多',\n      icon: Bars3Icon,\n      handler: () => {\n        isMobileMenuOpen.value = true;\n      }\n    }, {\n      key: 'community',\n      label: '社区',\n      icon: UsersIcon,\n      handler: () => router.push('/community')\n    }, {\n      key: 'portfolio',\n      label: '创作集',\n      icon: PhotoIcon,\n      handler: () => router.push('/portfolio')\n    }, {\n      key: 'messages',\n      label: '消息',\n      icon: EnvelopeIcon,\n      handler: () => router.push('/user?tab=messages'),\n      badge: props.unreadMessages\n    }, {\n      key: 'profile',\n      label: '我的',\n      icon: UserCircleIcon,\n      handler: () => router.push('/user?tab=profile')\n    }];\n    const isActiveAction = key => {\n      if (key === 'more') return false;\n      if (key === 'community') return route.path.startsWith('/community');\n      if (key === 'portfolio') return route.path.startsWith('/portfolio');\n      if (key === 'messages') return route.path.includes('/user') && route.query.tab === 'messages';\n      if (key === 'profile') return route.path.includes('/user') && route.query.tab === 'profile';\n      return false;\n    };\n    const closeMenu = () => {\n      isMobileMenuOpen.value = false;\n    };\n    const __returned__ = {\n      props,\n      route,\n      router,\n      isMobileMenuOpen,\n      mobileActions,\n      isActiveAction,\n      closeMenu,\n      ref,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get Bars3Icon() {\n        return Bars3Icon;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get UsersIcon() {\n        return UsersIcon;\n      },\n      get EnvelopeIcon() {\n        return EnvelopeIcon;\n      },\n      get UserCircleIcon() {\n        return UserCircleIcon;\n      },\n      get PhotoIcon() {\n        return PhotoIcon;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRoute","useRouter","Bars3Icon","XMarkIcon","UsersIcon","EnvelopeIcon","UserCircleIcon","PhotoIcon","props","__props","route","router","isMobileMenuOpen","mobileActions","key","label","icon","handler","value","push","badge","unreadMessages","isActiveAction","path","startsWith","includes","query","tab","closeMenu"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/components/MobileTabBar.vue"],"sourcesContent":["<template>\n  <div class=\"fixed bottom-0 left-0 right-0 bg-white border-t lg:hidden safe-area-inset-bottom z-50\">\n    <div class=\"grid grid-cols-5 gap-1\">\n      <button\n        v-for=\"action in mobileActions\"\n        :key=\"action.key\"\n        @click=\"action.handler\"\n        class=\"flex flex-col items-center py-2 px-1 relative\"\n        :class=\"[\n          isActiveAction(action.key)\n            ? 'text-blue-600'\n            : 'text-gray-500'\n        ]\"\n      >\n        <component \n          :is=\"action.icon\" \n          class=\"w-6 h-6\"\n          :class=\"isActiveAction(action.key) ? 'text-blue-600' : 'text-gray-500'\"\n        />\n        <span class=\"text-xs mt-1 truncate\">{{ action.label }}</span>\n        <span \n          v-if=\"action.badge\" \n          class=\"absolute -top-1 right-1/4 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\"\n        >\n          {{ action.badge }}\n        </span>\n      </button>\n    </div>\n  </div>\n\n  <!-- 移动端更多菜单抽屉的遮罩层 -->\n  <div \n    v-if=\"isMobileMenuOpen\" \n    class=\"fixed inset-0 bg-black bg-opacity-25 z-[60] lg:hidden\"\n    @click=\"closeMenu\"\n  />\n  \n  <!-- 移动端更多菜单抽屉 -->\n  <div \n    :class=\"[\n      'fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-[70] transform transition-transform duration-300 ease-in-out lg:hidden',\n      isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full'\n    ]\"\n  >\n    <div class=\"h-full flex flex-col\">\n      <div class=\"p-4 border-b border-gray-200\">\n        <div class=\"flex items-center justify-between\">\n          <h2 class=\"text-lg font-medium text-gray-900\">更多功能</h2>\n          <button \n            @click=\"closeMenu\"\n            class=\"text-gray-500\"\n          >\n            <XMarkIcon class=\"w-6 h-6\" />\n          </button>\n        </div>\n      </div>\n      \n      <div class=\"flex-1 overflow-y-auto\">\n        <div class=\"px-3 py-4\">\n          <div v-for=\"group in menuGroups\" :key=\"group.title\" class=\"mb-6\">\n            <h3 class=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">\n              {{ group.title }}\n            </h3>\n            <div class=\"space-y-1\">\n              <router-link\n                v-for=\"item in group.items\"\n                :key=\"item.path\"\n                :to=\"item.path\"\n                class=\"group flex items-center w-full px-3 py-2 text-sm font-medium rounded-md\"\n                :class=\"[\n                  route.path === item.path\n                    ? 'bg-blue-50 text-blue-600'\n                    : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\n                ]\"\n                @click=\"closeMenu\"\n              >\n                <component\n                  :is=\"item.icon\"\n                  class=\"mr-3 h-6 w-6\"\n                  :class=\"route.path === item.path ? 'text-blue-600' : 'text-gray-400'\"\n                />\n                {{ item.name }}\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport {\n  Bars3Icon,\n  XMarkIcon,\n  UsersIcon,\n  EnvelopeIcon,\n  UserCircleIcon,\n  PhotoIcon\n} from '@heroicons/vue/24/outline'\n\nconst props = defineProps({\n  menuGroups: {\n    type: Array,\n    required: true\n  },\n  unreadMessages: {\n    type: Number,\n    default: 0\n  }\n})\n\nconst route = useRoute()\nconst router = useRouter()\nconst isMobileMenuOpen = ref(false)\n\n// 底部导航按钮\nconst mobileActions = [\n  {\n    key: 'more',\n    label: '更多',\n    icon: Bars3Icon,\n    handler: () => { \n      isMobileMenuOpen.value = true \n    }\n  },\n  {\n    key: 'community',\n    label: '社区',\n    icon: UsersIcon,\n    handler: () => router.push('/community')\n  },\n  {\n    key: 'portfolio',\n    label: '创作集',\n    icon: PhotoIcon,\n    handler: () => router.push('/portfolio')\n  },\n  {\n    key: 'messages',\n    label: '消息',\n    icon: EnvelopeIcon,\n    handler: () => router.push('/user?tab=messages'),\n    badge: props.unreadMessages\n  },\n  {\n    key: 'profile',\n    label: '我的',\n    icon: UserCircleIcon,\n    handler: () => router.push('/user?tab=profile')\n  }\n]\n\nconst isActiveAction = (key) => {\n  if (key === 'more') return false\n  if (key === 'community') return route.path.startsWith('/community')\n  if (key === 'portfolio') return route.path.startsWith('/portfolio')\n  if (key === 'messages') return route.path.includes('/user') && route.query.tab === 'messages'\n  if (key === 'profile') return route.path.includes('/user') && route.query.tab === 'profile'\n  return false\n}\n\nconst closeMenu = () => {\n  isMobileMenuOpen.value = false\n}\n</script>\n\n<style scoped>\n.safe-area-inset-bottom {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n</style> "],"mappings":"AA4FA,SAASA,GAAG,QAAQ,KAAI;AACxB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAW;AAC/C,SACEC,SAAS,EACTC,SAAS,EACTC,SAAS,EACTC,YAAY,EACZC,cAAc,EACdC,SAAQ,QACH,2BAA0B;;;;;;;;;;;;;;;;;IAEjC,MAAMC,KAAK,GAAGC,OAAA;IAWd,MAAMC,KAAK,GAAGV,QAAQ,CAAC;IACvB,MAAMW,MAAM,GAAGV,SAAS,CAAC;IACzB,MAAMW,gBAAgB,GAAGb,GAAG,CAAC,KAAK;;IAElC;IACA,MAAMc,aAAa,GAAG,CACpB;MACEC,GAAG,EAAE,MAAM;MACXC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEd,SAAS;MACfe,OAAO,EAAEA,CAAA,KAAM;QACbL,gBAAgB,CAACM,KAAK,GAAG,IAAI;MAC/B;IACF,CAAC,EACD;MACEJ,GAAG,EAAE,WAAW;MAChBC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEZ,SAAS;MACfa,OAAO,EAAEA,CAAA,KAAMN,MAAM,CAACQ,IAAI,CAAC,YAAY;IACzC,CAAC,EACD;MACEL,GAAG,EAAE,WAAW;MAChBC,KAAK,EAAE,KAAK;MACZC,IAAI,EAAET,SAAS;MACfU,OAAO,EAAEA,CAAA,KAAMN,MAAM,CAACQ,IAAI,CAAC,YAAY;IACzC,CAAC,EACD;MACEL,GAAG,EAAE,UAAU;MACfC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEX,YAAY;MAClBY,OAAO,EAAEA,CAAA,KAAMN,MAAM,CAACQ,IAAI,CAAC,oBAAoB,CAAC;MAChDC,KAAK,EAAEZ,KAAK,CAACa;IACf,CAAC,EACD;MACEP,GAAG,EAAE,SAAS;MACdC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEV,cAAc;MACpBW,OAAO,EAAEA,CAAA,KAAMN,MAAM,CAACQ,IAAI,CAAC,mBAAmB;IAChD,EACF;IAEA,MAAMG,cAAc,GAAIR,GAAG,IAAK;MAC9B,IAAIA,GAAG,KAAK,MAAM,EAAE,OAAO,KAAI;MAC/B,IAAIA,GAAG,KAAK,WAAW,EAAE,OAAOJ,KAAK,CAACa,IAAI,CAACC,UAAU,CAAC,YAAY;MAClE,IAAIV,GAAG,KAAK,WAAW,EAAE,OAAOJ,KAAK,CAACa,IAAI,CAACC,UAAU,CAAC,YAAY;MAClE,IAAIV,GAAG,KAAK,UAAU,EAAE,OAAOJ,KAAK,CAACa,IAAI,CAACE,QAAQ,CAAC,OAAO,CAAC,IAAIf,KAAK,CAACgB,KAAK,CAACC,GAAG,KAAK,UAAS;MAC5F,IAAIb,GAAG,KAAK,SAAS,EAAE,OAAOJ,KAAK,CAACa,IAAI,CAACE,QAAQ,CAAC,OAAO,CAAC,IAAIf,KAAK,CAACgB,KAAK,CAACC,GAAG,KAAK,SAAQ;MAC1F,OAAO,KAAI;IACb;IAEA,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBhB,gBAAgB,CAACM,KAAK,GAAG,KAAI;IAC/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}