{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport * as templateApi from '@/api/template';\nexport const useTemplateStore = defineStore('template', () => {\n  // 状态\n  const categories = ref([]);\n  const templates = ref([]);\n  const currentTemplate = ref(null);\n  const loading = ref(false);\n\n  // 获取模板分类\n  const getCategories = async () => {\n    try {\n      const response = await templateApi.getCategories();\n      return response;\n    } catch (error) {\n      console.error('获取分类失败:', error);\n      throw error;\n    }\n  };\n\n  // 获取模板列表\n  const getTemplates = async params => {\n    loading.value = true;\n    try {\n      const response = await templateApi.getTemplates(params);\n      templates.value = response.data;\n      return templates.value;\n    } catch (error) {\n      console.error('获取模板列表失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  // 获取模板详情\n  const getTemplateDetail = async id => {\n    loading.value = true;\n    try {\n      const response = await templateApi.getTemplateDetail(id);\n      currentTemplate.value = response.data;\n      return currentTemplate.value;\n    } catch (error) {\n      console.error('获取模板详情失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  // 保存模板\n  const saveTemplate = async templateData => {\n    loading.value = true;\n    try {\n      const response = await templateApi.saveTemplate(templateData);\n      return response.data;\n    } catch (error) {\n      console.error('保存模板失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  // 更新模板\n  const updateTemplate = async (id, templateData) => {\n    loading.value = true;\n    try {\n      const response = await templateApi.updateTemplate(id, templateData);\n      return response.data;\n    } catch (error) {\n      console.error('更新模板失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  // 删除模板\n  const deleteTemplate = async id => {\n    loading.value = true;\n    try {\n      await templateApi.deleteTemplate(id);\n      templates.value = templates.value.filter(template => template.id !== id);\n    } catch (error) {\n      console.error('删除模板失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  // 提交模板审核\n  const submitForReview = async id => {\n    loading.value = true;\n    try {\n      const response = await templateApi.submitForReview(id);\n      return response.data;\n    } catch (error) {\n      console.error('提交模板审核失败:', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  };\n  return {\n    // 状态\n    categories,\n    templates,\n    currentTemplate,\n    loading,\n    // 方法\n    getCategories,\n    getTemplates,\n    getTemplateDetail,\n    saveTemplate,\n    updateTemplate,\n    deleteTemplate,\n    submitForReview\n  };\n});","map":{"version":3,"names":["defineStore","ref","templateApi","useTemplateStore","categories","templates","currentTemplate","loading","getCategories","response","error","console","getTemplates","params","value","data","getTemplateDetail","id","saveTemplate","templateData","updateTemplate","deleteTemplate","filter","template","submitForReview"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/stores/template.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport * as templateApi from '@/api/template'\n\nexport const useTemplateStore = defineStore('template', () => {\n  // 状态\n  const categories = ref([])\n  const templates = ref([])\n  const currentTemplate = ref(null)\n  const loading = ref(false)\n\n  // 获取模板分类\n  const getCategories = async () => {\n    try {\n      const response = await templateApi.getCategories()\n      return response\n    } catch (error) {\n      console.error('获取分类失败:', error)\n      throw error\n    }\n  }\n\n  // 获取模板列表\n  const getTemplates = async (params) => {\n    loading.value = true\n    try {\n      const response = await templateApi.getTemplates(params)\n      templates.value = response.data\n      return templates.value\n    } catch (error) {\n      console.error('获取模板列表失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // 获取模板详情\n  const getTemplateDetail = async (id) => {\n    loading.value = true\n    try {\n      const response = await templateApi.getTemplateDetail(id)\n      currentTemplate.value = response.data\n      return currentTemplate.value\n    } catch (error) {\n      console.error('获取模板详情失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // 保存模板\n  const saveTemplate = async (templateData) => {\n    loading.value = true\n    try {\n      const response = await templateApi.saveTemplate(templateData)\n      return response.data\n    } catch (error) {\n      console.error('保存模板失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // 更新模板\n  const updateTemplate = async (id, templateData) => {\n    loading.value = true\n    try {\n      const response = await templateApi.updateTemplate(id, templateData)\n      return response.data\n    } catch (error) {\n      console.error('更新模板失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // 删除模板\n  const deleteTemplate = async (id) => {\n    loading.value = true\n    try {\n      await templateApi.deleteTemplate(id)\n      templates.value = templates.value.filter(template => template.id !== id)\n    } catch (error) {\n      console.error('删除模板失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // 提交模板审核\n  const submitForReview = async (id) => {\n    loading.value = true\n    try {\n      const response = await templateApi.submitForReview(id)\n      return response.data\n    } catch (error) {\n      console.error('提交模板审核失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  return {\n    // 状态\n    categories,\n    templates,\n    currentTemplate,\n    loading,\n\n    // 方法\n    getCategories,\n    getTemplates,\n    getTemplateDetail,\n    saveTemplate,\n    updateTemplate,\n    deleteTemplate,\n    submitForReview\n  }\n}) "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}