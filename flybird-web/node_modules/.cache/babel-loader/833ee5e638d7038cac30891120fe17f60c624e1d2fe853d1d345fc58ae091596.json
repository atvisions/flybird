{"ast":null,"code":"export const vDraggable = {\n  mounted(el, binding) {\n    const options = binding.value || {};\n    let isDragging = false;\n    let startX = 0;\n    let startY = 0;\n    const handleMouseDown = e => {\n      if (e.button !== 0) return; // 只处理左键点击\n\n      isDragging = true;\n      startX = e.clientX;\n      startY = e.clientY;\n\n      // 添加全局事件监听\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n\n      // 阻止默认行为和冒泡\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const handleMouseMove = e => {\n      if (!isDragging) return;\n      const deltaX = e.clientX - startX;\n      const deltaY = e.clientY - startY;\n\n      // 调用回调函数\n      if (options.onDrag) {\n        options.onDrag(e, {\n          deltaX,\n          deltaY\n        });\n      }\n      startX = e.clientX;\n      startY = e.clientY;\n    };\n    const handleMouseUp = e => {\n      isDragging = false;\n\n      // 移除全局事件监听\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n\n      // 调用回调函数\n      if (options.onDragEnd) {\n        options.onDragEnd(e);\n      }\n    };\n\n    // 设置样式和事件监听\n    el.style.cursor = 'move';\n    el.addEventListener('mousedown', handleMouseDown);\n\n    // 保存清理函数\n    el._draggableCleanup = () => {\n      el.removeEventListener('mousedown', handleMouseDown);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  },\n  unmounted(el) {\n    // 清理事件监听\n    if (el._draggableCleanup) {\n      el._draggableCleanup();\n      delete el._draggableCleanup;\n    }\n  }\n};","map":{"version":3,"names":["vDraggable","mounted","el","binding","options","value","isDragging","startX","startY","handleMouseDown","e","button","clientX","clientY","document","addEventListener","handleMouseMove","handleMouseUp","preventDefault","stopPropagation","deltaX","deltaY","onDrag","removeEventListener","onDragEnd","style","cursor","_draggableCleanup","unmounted"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/directives/draggable.js"],"sourcesContent":["export const vDraggable = {\n  mounted(el, binding) {\n    const options = binding.value || {}\n    let isDragging = false\n    let startX = 0\n    let startY = 0\n\n    const handleMouseDown = (e) => {\n      if (e.button !== 0) return // 只处理左键点击\n      \n      isDragging = true\n      startX = e.clientX\n      startY = e.clientY\n      \n      // 添加全局事件监听\n      document.addEventListener('mousemove', handleMouseMove)\n      document.addEventListener('mouseup', handleMouseUp)\n      \n      // 阻止默认行为和冒泡\n      e.preventDefault()\n      e.stopPropagation()\n    }\n\n    const handleMouseMove = (e) => {\n      if (!isDragging) return\n      \n      const deltaX = e.clientX - startX\n      const deltaY = e.clientY - startY\n      \n      // 调用回调函数\n      if (options.onDrag) {\n        options.onDrag(e, { deltaX, deltaY })\n      }\n      \n      startX = e.clientX\n      startY = e.clientY\n    }\n\n    const handleMouseUp = (e) => {\n      isDragging = false\n      \n      // 移除全局事件监听\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n      \n      // 调用回调函数\n      if (options.onDragEnd) {\n        options.onDragEnd(e)\n      }\n    }\n\n    // 设置样式和事件监听\n    el.style.cursor = 'move'\n    el.addEventListener('mousedown', handleMouseDown)\n\n    // 保存清理函数\n    el._draggableCleanup = () => {\n      el.removeEventListener('mousedown', handleMouseDown)\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n    }\n  },\n\n  unmounted(el) {\n    // 清理事件监听\n    if (el._draggableCleanup) {\n      el._draggableCleanup()\n      delete el._draggableCleanup\n    }\n  }\n} "],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG;EACxBC,OAAOA,CAACC,EAAE,EAAEC,OAAO,EAAE;IACnB,MAAMC,OAAO,GAAGD,OAAO,CAACE,KAAK,IAAI,CAAC,CAAC;IACnC,IAAIC,UAAU,GAAG,KAAK;IACtB,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,MAAM,GAAG,CAAC;IAEd,MAAMC,eAAe,GAAIC,CAAC,IAAK;MAC7B,IAAIA,CAAC,CAACC,MAAM,KAAK,CAAC,EAAE,OAAM,CAAC;;MAE3BL,UAAU,GAAG,IAAI;MACjBC,MAAM,GAAGG,CAAC,CAACE,OAAO;MAClBJ,MAAM,GAAGE,CAAC,CAACG,OAAO;;MAElB;MACAC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEC,eAAe,CAAC;MACvDF,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEE,aAAa,CAAC;;MAEnD;MACAP,CAAC,CAACQ,cAAc,CAAC,CAAC;MAClBR,CAAC,CAACS,eAAe,CAAC,CAAC;IACrB,CAAC;IAED,MAAMH,eAAe,GAAIN,CAAC,IAAK;MAC7B,IAAI,CAACJ,UAAU,EAAE;MAEjB,MAAMc,MAAM,GAAGV,CAAC,CAACE,OAAO,GAAGL,MAAM;MACjC,MAAMc,MAAM,GAAGX,CAAC,CAACG,OAAO,GAAGL,MAAM;;MAEjC;MACA,IAAIJ,OAAO,CAACkB,MAAM,EAAE;QAClBlB,OAAO,CAACkB,MAAM,CAACZ,CAAC,EAAE;UAAEU,MAAM;UAAEC;QAAO,CAAC,CAAC;MACvC;MAEAd,MAAM,GAAGG,CAAC,CAACE,OAAO;MAClBJ,MAAM,GAAGE,CAAC,CAACG,OAAO;IACpB,CAAC;IAED,MAAMI,aAAa,GAAIP,CAAC,IAAK;MAC3BJ,UAAU,GAAG,KAAK;;MAElB;MACAQ,QAAQ,CAACS,mBAAmB,CAAC,WAAW,EAAEP,eAAe,CAAC;MAC1DF,QAAQ,CAACS,mBAAmB,CAAC,SAAS,EAAEN,aAAa,CAAC;;MAEtD;MACA,IAAIb,OAAO,CAACoB,SAAS,EAAE;QACrBpB,OAAO,CAACoB,SAAS,CAACd,CAAC,CAAC;MACtB;IACF,CAAC;;IAED;IACAR,EAAE,CAACuB,KAAK,CAACC,MAAM,GAAG,MAAM;IACxBxB,EAAE,CAACa,gBAAgB,CAAC,WAAW,EAAEN,eAAe,CAAC;;IAEjD;IACAP,EAAE,CAACyB,iBAAiB,GAAG,MAAM;MAC3BzB,EAAE,CAACqB,mBAAmB,CAAC,WAAW,EAAEd,eAAe,CAAC;MACpDK,QAAQ,CAACS,mBAAmB,CAAC,WAAW,EAAEP,eAAe,CAAC;MAC1DF,QAAQ,CAACS,mBAAmB,CAAC,SAAS,EAAEN,aAAa,CAAC;IACxD,CAAC;EACH,CAAC;EAEDW,SAASA,CAAC1B,EAAE,EAAE;IACZ;IACA,IAAIA,EAAE,CAACyB,iBAAiB,EAAE;MACxBzB,EAAE,CAACyB,iBAAiB,CAAC,CAAC;MACtB,OAAOzB,EAAE,CAACyB,iBAAiB;IAC7B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}