{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { DocumentTextIcon, QuestionMarkCircleIcon, HashtagIcon, XMarkIcon, ChevronUpDownIcon, CheckIcon } from '@heroicons/vue/24/outline';\nimport { showToast } from '@/components/ToastMessage';\nimport ArticleForm from './components/ArticleForm.vue';\nexport default {\n  __name: 'CreateContent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n\n    // 内容类型\n    const contentTypes = [{\n      id: 'article',\n      name: '发布文章',\n      icon: DocumentTextIcon\n    }, {\n      id: 'question',\n      name: '发布问题',\n      icon: QuestionMarkCircleIcon\n    }, {\n      id: 'topic',\n      name: '发起话题',\n      icon: HashtagIcon\n    }];\n\n    // 根据来源页面设置默认类型\n    const getDefaultType = () => {\n      // 从查询参数获取类型\n      const type = route.query.type;\n      // 检查是否是有效的类型\n      if (contentTypes.some(t => t.id === type)) {\n        return type;\n      }\n      // 默认返回文章类型\n      return 'article';\n    };\n    const selectedType = ref(getDefaultType());\n\n    // 问答表单数据\n    const questionForm = ref({\n      title: '',\n      category: '',\n      bounty: '',\n      bountyDays: '7',\n      content: '',\n      tags: []\n    });\n\n    // 标签相关\n    const newTag = ref('');\n    const addTag = () => {\n      const tag = newTag.value.trim();\n      if (tag && !questionForm.value.tags.includes(tag) && questionForm.value.tags.length < 5) {\n        questionForm.value.tags.push(tag);\n        newTag.value = '';\n      }\n    };\n    const removeTag = tag => {\n      questionForm.value.tags = questionForm.value.tags.filter(t => t !== tag);\n    };\n\n    // 提交问题\n    const submitQuestion = () => {\n      // 表单验证\n      if (!questionForm.value.title) {\n        showToast('请输入问题标题', 'warning');\n        return;\n      }\n      if (!questionForm.value.category) {\n        showToast('请选择问题分类', 'warning');\n        return;\n      }\n      if (!questionForm.value.content) {\n        showToast('请输入问题描述', 'warning');\n        return;\n      }\n\n      // TODO: 调用接口提交问题\n      console.log('提交问题:', questionForm.value);\n      showToast('发布成功', 'success');\n      router.push('/community/questions');\n    };\n    const __returned__ = {\n      router,\n      route,\n      contentTypes,\n      getDefaultType,\n      selectedType,\n      questionForm,\n      newTag,\n      addTag,\n      removeTag,\n      submitQuestion,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get DocumentTextIcon() {\n        return DocumentTextIcon;\n      },\n      get QuestionMarkCircleIcon() {\n        return QuestionMarkCircleIcon;\n      },\n      get HashtagIcon() {\n        return HashtagIcon;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get ChevronUpDownIcon() {\n        return ChevronUpDownIcon;\n      },\n      get CheckIcon() {\n        return CheckIcon;\n      },\n      get showToast() {\n        return showToast;\n      },\n      ArticleForm\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","useRoute","DocumentTextIcon","QuestionMarkCircleIcon","HashtagIcon","XMarkIcon","ChevronUpDownIcon","CheckIcon","showToast","ArticleForm","router","route","contentTypes","id","name","icon","getDefaultType","type","query","some","t","selectedType","questionForm","title","category","bounty","bountyDays","content","tags","newTag","addTag","tag","value","trim","includes","length","push","removeTag","filter","submitQuestion","console","log"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/community/CreateContent.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen py-4 pb-24 lg:py-6 mt-[72px]\">\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n      <!-- 内容类型选择 -->\n      <div class=\"bg-white rounded-xl border border-gray-100 p-4 lg:p-6 mb-6\">\n        <div class=\"flex items-center gap-4\">\n          <button\n            v-for=\"type in contentTypes\"\n            :key=\"type.id\"\n            class=\"flex-1 h-20 rounded-lg border-2 transition-colors flex flex-col items-center justify-center gap-2\"\n            :class=\"[\n              selectedType === type.id \n                ? 'border-violet-600 bg-violet-50 text-violet-600' \n                : 'border-gray-200 hover:border-violet-200'\n            ]\"\n            @click=\"selectedType = type.id\"\n          >\n            <component :is=\"type.icon\" class=\"w-6 h-6\" />\n            <span class=\"text-sm font-medium\">{{ type.name }}</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- 问答发布表单 -->\n      <div v-if=\"selectedType === 'question'\" class=\"bg-white rounded-xl border border-gray-100\">\n        <div class=\"space-y-6 p-4 lg:p-6\">\n          <!-- 标题 -->\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">问题标题</label>\n            <input\n              type=\"text\"\n              v-model=\"questionForm.title\"\n              class=\"block w-full rounded-lg border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500\"\n              placeholder=\"一句话描述你的问题\"\n            >\n          </div>\n\n          <!-- 问题类型和分类 -->\n          <div class=\"grid grid-cols-2 gap-4\">\n            <!-- 问题类型 -->\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">问题类型</label>\n              <Listbox v-model=\"questionForm.type\">\n                <div class=\"relative\">\n                  <ListboxButton\n                    class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-3 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-violet-500 sm:text-sm\"\n                  >\n                    <span class=\"flex items-center\">\n                      <component \n                        :is=\"questionTypes[questionForm.type].icon\" \n                        class=\"h-5 w-5 flex-shrink-0 text-gray-400\"\n                        aria-hidden=\"true\"\n                      />\n                      <span class=\"ml-3 block truncate\">{{ questionTypes[questionForm.type].name }}</span>\n                    </span>\n                    <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\">\n                      <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                    </span>\n                  </ListboxButton>\n\n                  <Transition\n                    leave-active-class=\"transition duration-100 ease-in\"\n                    leave-from-class=\"opacity-100\"\n                    leave-to-class=\"opacity-0\"\n                  >\n                    <ListboxOptions\n                      class=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\"\n                    >\n                      <ListboxOption\n                        v-for=\"(type, key) in questionTypes\"\n                        :key=\"key\"\n                        :value=\"key\"\n                        v-slot=\"{ active, selected }\"\n                        as=\"template\"\n                      >\n                        <li\n                          :class=\"[\n                            active ? 'bg-violet-600 text-white' : 'text-gray-900',\n                            'relative cursor-pointer select-none py-2 pl-3 pr-9'\n                          ]\"\n                        >\n                          <div class=\"flex items-center\">\n                            <component \n                              :is=\"type.icon\" \n                              :class=\"[\n                                active ? 'text-white' : 'text-gray-400',\n                                'h-5 w-5 flex-shrink-0'\n                              ]\"\n                              aria-hidden=\"true\"\n                            />\n                            <span\n                              :class=\"[\n                                selected ? 'font-semibold' : 'font-normal',\n                                'ml-3 block truncate'\n                              ]\"\n                            >\n                              {{ type.name }}\n                            </span>\n                          </div>\n\n                          <span\n                            v-if=\"selected\"\n                            :class=\"[\n                              active ? 'text-white' : 'text-violet-600',\n                              'absolute inset-y-0 right-0 flex items-center pr-4'\n                            ]\"\n                          >\n                            <CheckIcon class=\"h-5 w-5\" aria-hidden=\"true\" />\n                          </span>\n                        </li>\n                      </ListboxOption>\n                    </ListboxOptions>\n                  </Transition>\n                </div>\n              </Listbox>\n            </div>\n\n            <!-- 问题分类 -->\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">问题分类</label>\n              <Listbox v-model=\"selectedCategory\">\n                <div class=\"relative\">\n                  <ListboxButton\n                    class=\"relative w-full cursor-pointer rounded-lg bg-white py-2.5 pl-3 pr-10 text-left border border-gray-300 focus:outline-none focus:ring-2 focus:ring-violet-500 sm:text-sm\"\n                  >\n                    <span class=\"flex items-center\">\n                      <component \n                        :is=\"selectedCategory.icon\" \n                        class=\"h-5 w-5 flex-shrink-0 text-gray-400\"\n                        aria-hidden=\"true\"\n                      />\n                      <span class=\"ml-3 block truncate\">{{ selectedCategory.name }}</span>\n                    </span>\n                    <span class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2\">\n                      <ChevronUpDownIcon class=\"h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                    </span>\n                  </ListboxButton>\n\n                  <Transition\n                    leave-active-class=\"transition duration-100 ease-in\"\n                    leave-from-class=\"opacity-100\"\n                    leave-to-class=\"opacity-0\"\n                  >\n                    <ListboxOptions\n                      class=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\"\n                    >\n                      <ListboxOption\n                        v-for=\"category in categories\"\n                        :key=\"category.id\"\n                        :value=\"category\"\n                        v-slot=\"{ active, selected }\"\n                        as=\"template\"\n                      >\n                        <li\n                          :class=\"[\n                            active ? 'bg-violet-600 text-white' : 'text-gray-900',\n                            'relative cursor-pointer select-none py-2 pl-3 pr-9'\n                          ]\"\n                        >\n                          <div class=\"flex items-center\">\n                            <component \n                              :is=\"category.icon\" \n                              :class=\"[\n                                active ? 'text-white' : 'text-gray-400',\n                                'h-5 w-5 flex-shrink-0'\n                              ]\"\n                              aria-hidden=\"true\"\n                            />\n                            <span\n                              :class=\"[\n                                selected ? 'font-semibold' : 'font-normal',\n                                'ml-3 block truncate'\n                              ]\"\n                            >\n                              {{ category.name }}\n                            </span>\n                          </div>\n\n                          <span\n                            v-if=\"selected\"\n                            :class=\"[\n                              active ? 'text-white' : 'text-violet-600',\n                              'absolute inset-y-0 right-0 flex items-center pr-4'\n                            ]\"\n                          >\n                            <CheckIcon class=\"h-5 w-5\" aria-hidden=\"true\" />\n                          </span>\n                        </li>\n                      </ListboxOption>\n                    </ListboxOptions>\n                  </Transition>\n                </div>\n              </Listbox>\n            </div>\n          </div>\n\n          <!-- 悬赏设置 -->\n          <div v-if=\"questionForm.type === 'bounty'\" class=\"space-y-4\">\n            <label class=\"block text-sm font-medium text-gray-700\">悬赏设置</label>\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"block text-xs text-gray-500 mb-1.5\">悬赏金额</label>\n                <div class=\"relative\">\n                  <input\n                    type=\"number\"\n                    v-model=\"questionForm.bounty\"\n                    class=\"block w-full rounded-lg border-gray-300 pl-6 shadow-sm focus:border-violet-500 focus:ring-violet-500\"\n                    placeholder=\"输入金额\"\n                    min=\"1\"\n                  >\n                  <span class=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\">¥</span>\n                </div>\n              </div>\n              <div>\n                <label class=\"block text-xs text-gray-500 mb-1.5\">悬赏时间</label>\n                <select\n                  v-model=\"questionForm.bountyDays\"\n                  class=\"block w-full rounded-lg border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500\"\n                >\n                  <option value=\"3\">3天</option>\n                  <option value=\"7\">7天</option>\n                  <option value=\"15\">15天</option>\n                  <option value=\"30\">30天</option>\n                </select>\n              </div>\n            </div>\n            <p class=\"text-xs text-gray-500\">\n              悬赏问题会获得更多关注，悬赏金额将在采纳答案后支付给回答者\n            </p>\n          </div>\n\n          <!-- 问题描述 -->\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">问题描述</label>\n            <textarea\n              v-model=\"questionForm.content\"\n              rows=\"6\"\n              class=\"block w-full rounded-lg border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500\"\n              placeholder=\"详细描述你的问题，以便他人更好地帮助你\"\n            ></textarea>\n          </div>\n\n          <!-- 标签 -->\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">添加标签</label>\n            <div class=\"flex flex-wrap gap-2\">\n              <div\n                v-for=\"tag in questionForm.tags\"\n                :key=\"tag\"\n                class=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm flex items-center group\"\n              >\n                <span>{{ tag }}</span>\n                <XMarkIcon \n                  class=\"w-4 h-4 ml-1 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity\"\n                  @click=\"removeTag(tag)\"\n                />\n              </div>\n              <input\n                v-if=\"questionForm.tags.length < 5\"\n                type=\"text\"\n                v-model=\"newTag\"\n                @keydown.enter=\"addTag\"\n                class=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-violet-500\"\n                placeholder=\"按回车添加标签\"\n              >\n            </div>\n            <p class=\"mt-1 text-xs text-gray-500\">最多添加 5 个标签</p>\n          </div>\n\n          <!-- 发布按钮 -->\n          <div class=\"flex justify-end gap-4\">\n            <button \n              class=\"px-6 h-10 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\n              @click=\"$router.back()\"\n            >\n              取消\n            </button>\n            <button \n              class=\"px-6 h-10 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors\"\n              @click=\"submitQuestion\"\n            >\n              发布问题\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 文章发布表单 -->\n      <div v-if=\"selectedType === 'article'\" class=\"relative bg-white rounded-xl border border-gray-100\">\n        <ArticleForm />\n      </div>\n      <!-- 话题发布表单 -->\n      <div v-else-if=\"selectedType === 'topic'\" class=\"bg-white rounded-xl border border-gray-100 p-4 lg:p-6 text-center text-gray-500\">\n        话题发布功能开发中...\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { \n  DocumentTextIcon,\n  QuestionMarkCircleIcon,\n  HashtagIcon,\n  XMarkIcon,\n  ChevronUpDownIcon,\n  CheckIcon\n} from '@heroicons/vue/24/outline'\nimport { showToast } from '@/components/ToastMessage'\nimport ArticleForm from './components/ArticleForm.vue'\n\nconst router = useRouter()\nconst route = useRoute()\n\n// 内容类型\nconst contentTypes = [\n  { id: 'article', name: '发布文章', icon: DocumentTextIcon },\n  { id: 'question', name: '发布问题', icon: QuestionMarkCircleIcon },\n  { id: 'topic', name: '发起话题', icon: HashtagIcon }\n]\n\n// 根据来源页面设置默认类型\nconst getDefaultType = () => {\n  // 从查询参数获取类型\n  const type = route.query.type\n  // 检查是否是有效的类型\n  if (contentTypes.some(t => t.id === type)) {\n    return type\n  }\n  // 默认返回文章类型\n  return 'article'\n}\n\nconst selectedType = ref(getDefaultType())\n\n// 问答表单数据\nconst questionForm = ref({\n  title: '',\n  category: '',\n  bounty: '',\n  bountyDays: '7',\n  content: '',\n  tags: []\n})\n\n// 标签相关\nconst newTag = ref('')\n\nconst addTag = () => {\n  const tag = newTag.value.trim()\n  if (tag && !questionForm.value.tags.includes(tag) && questionForm.value.tags.length < 5) {\n    questionForm.value.tags.push(tag)\n    newTag.value = ''\n  }\n}\n\nconst removeTag = (tag) => {\n  questionForm.value.tags = questionForm.value.tags.filter(t => t !== tag)\n}\n\n// 提交问题\nconst submitQuestion = () => {\n  // 表单验证\n  if (!questionForm.value.title) {\n    showToast('请输入问题标题', 'warning')\n    return\n  }\n  if (!questionForm.value.category) {\n    showToast('请选择问题分类', 'warning')\n    return\n  }\n  if (!questionForm.value.content) {\n    showToast('请输入问题描述', 'warning')\n    return\n  }\n\n  // TODO: 调用接口提交问题\n  console.log('提交问题:', questionForm.value)\n  showToast('发布成功', 'success')\n  router.push('/community/questions')\n}\n</script> "],"mappings":";;;AA4SA,SAASA,GAAG,QAAQ,KAAI;AACxB,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAW;AAC/C,SACEC,gBAAgB,EAChBC,sBAAsB,EACtBC,WAAW,EACXC,SAAS,EACTC,iBAAiB,EACjBC,SAAQ,QACH,2BAA0B;AACjC,SAASC,SAAS,QAAQ,2BAA0B;AACpD,OAAOC,WAAW,MAAM,8BAA6B;;;;;;;IAErD,MAAMC,MAAM,GAAGV,SAAS,CAAC;IACzB,MAAMW,KAAK,GAAGV,QAAQ,CAAC;;IAEvB;IACA,MAAMW,YAAY,GAAG,CACnB;MAAEC,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,MAAM;MAAEC,IAAI,EAAEb;IAAiB,CAAC,EACvD;MAAEW,EAAE,EAAE,UAAU;MAAEC,IAAI,EAAE,MAAM;MAAEC,IAAI,EAAEZ;IAAuB,CAAC,EAC9D;MAAEU,EAAE,EAAE,OAAO;MAAEC,IAAI,EAAE,MAAM;MAAEC,IAAI,EAAEX;IAAY,EACjD;;IAEA;IACA,MAAMY,cAAc,GAAGA,CAAA,KAAM;MAC3B;MACA,MAAMC,IAAI,GAAGN,KAAK,CAACO,KAAK,CAACD,IAAG;MAC5B;MACA,IAAIL,YAAY,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACP,EAAE,KAAKI,IAAI,CAAC,EAAE;QACzC,OAAOA,IAAG;MACZ;MACA;MACA,OAAO,SAAQ;IACjB;IAEA,MAAMI,YAAY,GAAGtB,GAAG,CAACiB,cAAc,CAAC,CAAC;;IAEzC;IACA,MAAMM,YAAY,GAAGvB,GAAG,CAAC;MACvBwB,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,UAAU,EAAE,GAAG;MACfC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE;IACR,CAAC;;IAED;IACA,MAAMC,MAAM,GAAG9B,GAAG,CAAC,EAAE;IAErB,MAAM+B,MAAM,GAAGA,CAAA,KAAM;MACnB,MAAMC,GAAG,GAAGF,MAAM,CAACG,KAAK,CAACC,IAAI,CAAC;MAC9B,IAAIF,GAAG,IAAI,CAACT,YAAY,CAACU,KAAK,CAACJ,IAAI,CAACM,QAAQ,CAACH,GAAG,CAAC,IAAIT,YAAY,CAACU,KAAK,CAACJ,IAAI,CAACO,MAAM,GAAG,CAAC,EAAE;QACvFb,YAAY,CAACU,KAAK,CAACJ,IAAI,CAACQ,IAAI,CAACL,GAAG;QAChCF,MAAM,CAACG,KAAK,GAAG,EAAC;MAClB;IACF;IAEA,MAAMK,SAAS,GAAIN,GAAG,IAAK;MACzBT,YAAY,CAACU,KAAK,CAACJ,IAAI,GAAGN,YAAY,CAACU,KAAK,CAACJ,IAAI,CAACU,MAAM,CAAClB,CAAC,IAAIA,CAAC,KAAKW,GAAG;IACzE;;IAEA;IACA,MAAMQ,cAAc,GAAGA,CAAA,KAAM;MAC3B;MACA,IAAI,CAACjB,YAAY,CAACU,KAAK,CAACT,KAAK,EAAE;QAC7Bf,SAAS,CAAC,SAAS,EAAE,SAAS;QAC9B;MACF;MACA,IAAI,CAACc,YAAY,CAACU,KAAK,CAACR,QAAQ,EAAE;QAChChB,SAAS,CAAC,SAAS,EAAE,SAAS;QAC9B;MACF;MACA,IAAI,CAACc,YAAY,CAACU,KAAK,CAACL,OAAO,EAAE;QAC/BnB,SAAS,CAAC,SAAS,EAAE,SAAS;QAC9B;MACF;;MAEA;MACAgC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEnB,YAAY,CAACU,KAAK;MACvCxB,SAAS,CAAC,MAAM,EAAE,SAAS;MAC3BE,MAAM,CAAC0B,IAAI,CAAC,sBAAsB;IACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}