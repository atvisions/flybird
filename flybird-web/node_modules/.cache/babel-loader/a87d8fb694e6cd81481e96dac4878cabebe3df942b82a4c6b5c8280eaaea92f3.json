{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport { computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ChevronLeftIcon, XMarkIcon } from '@heroicons/vue/24/outline';\nimport { mainCategories, portfolioCategories } from '@/config/portfolioCategories';\nexport default {\n  __name: 'CategoryMenu',\n  props: {\n    show: Boolean,\n    currentLevel: String,\n    currentMainCategory: String,\n    currentSubCategory: String,\n    currentThirdCategory: String,\n    type: String\n  },\n  emits: ['update:show', 'update:currentLevel', 'update:currentMainCategory', 'update:currentSubCategory', 'update:currentThirdCategory', 'category-change'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const router = useRouter();\n    const props = __props;\n    const emit = __emit;\n\n    // 获取菜单标题\n    const getMenuTitle = computed(() => {\n      if (props.currentLevel === 'main') return '选择分类';\n      if (props.currentLevel === 'sub') return portfolioCategories[props.type]?.title || '选择分类';\n      if (props.currentLevel === 'third') {\n        const mainCategory = currentTypeCategories.value.find(c => c.id === props.currentMainCategory);\n        return mainCategory?.name || '';\n      }\n      return '';\n    });\n\n    // 获取当前类型的分类数据\n    const currentTypeCategories = computed(() => {\n      return portfolioCategories[props.type]?.categories || [];\n    });\n\n    // 获取当前子分类\n    const currentSubCategories = computed(() => {\n      const mainCategory = currentTypeCategories.value.find(c => c.id === props.currentMainCategory);\n      return mainCategory?.children || [];\n    });\n\n    // 处理主分类点击\n    const handleMainCategoryClick = category => {\n      router.push(category.path);\n      emit('update:show', false);\n    };\n\n    // 处理页面内分类点击\n    const handleSubCategoryClick = category => {\n      emit('update:currentMainCategory', category.id);\n      if (category.children?.length) {\n        emit('update:currentLevel', 'third');\n      } else {\n        emit('update:show', false);\n      }\n    };\n\n    // 处理子分类点击\n    const handleThirdCategoryClick = category => {\n      emit('update:currentSubCategory', category.id);\n      emit('update:show', false);\n    };\n    const handleBack = () => {\n      if (props.currentLevel === 'third') {\n        emit('update:currentLevel', 'sub');\n        emit('update:currentSubCategory', '');\n      } else if (props.currentLevel === 'sub') {\n        emit('update:currentLevel', 'main');\n        emit('update:currentMainCategory', 'all');\n      }\n    };\n    const __returned__ = {\n      router,\n      props,\n      emit,\n      getMenuTitle,\n      currentTypeCategories,\n      currentSubCategories,\n      handleMainCategoryClick,\n      handleSubCategoryClick,\n      handleThirdCategoryClick,\n      handleBack,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get ChevronLeftIcon() {\n        return ChevronLeftIcon;\n      },\n      get XMarkIcon() {\n        return XMarkIcon;\n      },\n      get mainCategories() {\n        return mainCategories;\n      },\n      get portfolioCategories() {\n        return portfolioCategories;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","useRouter","ChevronLeftIcon","XMarkIcon","mainCategories","portfolioCategories","router","props","__props","emit","__emit","getMenuTitle","currentLevel","type","title","mainCategory","currentTypeCategories","value","find","c","id","currentMainCategory","name","categories","currentSubCategories","children","handleMainCategoryClick","category","push","path","handleSubCategoryClick","length","handleThirdCategoryClick","handleBack"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/components/portfolio/CategoryMenu.vue"],"sourcesContent":["<template>\n  <div v-if=\"show\" class=\"fixed inset-0 bg-black/50 z-[100] sm:hidden flex items-end\">\n    <div class=\"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-6 max-h-[85vh] overflow-y-auto\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <div class=\"flex items-center space-x-2\">\n          <button \n            v-if=\"currentLevel !== 'main'\"\n            @click=\"handleBack\"\n            class=\"text-gray-400 hover:text-gray-500\"\n          >\n            <ChevronLeftIcon class=\"w-5 h-5\" />\n          </button>\n          <h3 class=\"text-lg font-medium text-gray-900\">\n            {{ getMenuTitle }}\n          </h3>\n        </div>\n        <button @click=\"$emit('update:show', false)\" class=\"text-gray-400 hover:text-gray-500\">\n          <XMarkIcon class=\"w-5 h-5\" />\n        </button>\n      </div>\n      <div class=\"grid grid-cols-2 gap-3 pb-6\">\n        <!-- 主分类导航 -->\n        <template v-if=\"currentLevel === 'main'\">\n          <button\n            v-for=\"category in mainCategories\"\n            :key=\"category.path\"\n            @click=\"handleMainCategoryClick(category)\"\n            class=\"flex items-center justify-center px-4 py-4 rounded-xl text-sm font-medium transition-colors\"\n            :class=\"[\n              $route.path === category.path\n                ? 'bg-blue-50 text-blue-600'\n                : 'bg-gray-50 text-gray-600 hover:bg-gray-100'\n            ]\"\n          >\n            <component :is=\"category.icon\" class=\"w-4 h-4 mr-2\" />\n            {{ category.name }}\n          </button>\n        </template>\n\n        <!-- 页面内分类 -->\n        <template v-else-if=\"currentLevel === 'sub'\">\n          <button\n            v-for=\"category in currentTypeCategories\"\n            :key=\"category.id\"\n            @click=\"handleSubCategoryClick(category)\"\n            class=\"flex items-center justify-center px-4 py-4 rounded-xl text-sm font-medium transition-colors\"\n            :class=\"[\n              currentMainCategory === category.id\n                ? 'bg-blue-50 text-blue-600'\n                : 'bg-gray-50 text-gray-600 hover:bg-gray-100'\n            ]\"\n          >\n            <component :is=\"category.icon\" class=\"w-4 h-4 mr-2\" />\n            {{ category.name }}\n          </button>\n        </template>\n\n        <!-- 子分类 -->\n        <template v-else-if=\"currentLevel === 'third'\">\n          <button\n            v-for=\"category in currentSubCategories\"\n            :key=\"category.id\"\n            @click=\"handleThirdCategoryClick(category)\"\n            class=\"flex items-center justify-center px-4 py-4 rounded-xl text-sm font-medium transition-colors\"\n            :class=\"[\n              currentSubCategory === category.id\n                ? 'bg-blue-50 text-blue-600'\n                : 'bg-gray-50 text-gray-600 hover:bg-gray-100'\n            ]\"\n          >\n            {{ category.name }}\n          </button>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ChevronLeftIcon, XMarkIcon } from '@heroicons/vue/24/outline'\nimport { mainCategories, portfolioCategories } from '@/config/portfolioCategories'\n\nconst router = useRouter()\nconst props = defineProps({\n  show: Boolean,\n  currentLevel: String,\n  currentMainCategory: String,\n  currentSubCategory: String,\n  currentThirdCategory: String,\n  type: String\n})\n\nconst emit = defineEmits([\n  'update:show',\n  'update:currentLevel',\n  'update:currentMainCategory',\n  'update:currentSubCategory',\n  'update:currentThirdCategory',\n  'category-change'\n])\n\n// 获取菜单标题\nconst getMenuTitle = computed(() => {\n  if (props.currentLevel === 'main') return '选择分类'\n  if (props.currentLevel === 'sub') return portfolioCategories[props.type]?.title || '选择分类'\n  if (props.currentLevel === 'third') {\n    const mainCategory = currentTypeCategories.value.find(c => c.id === props.currentMainCategory)\n    return mainCategory?.name || ''\n  }\n  return ''\n})\n\n// 获取当前类型的分类数据\nconst currentTypeCategories = computed(() => {\n  return portfolioCategories[props.type]?.categories || []\n})\n\n// 获取当前子分类\nconst currentSubCategories = computed(() => {\n  const mainCategory = currentTypeCategories.value.find(c => c.id === props.currentMainCategory)\n  return mainCategory?.children || []\n})\n\n// 处理主分类点击\nconst handleMainCategoryClick = (category) => {\n  router.push(category.path)\n  emit('update:show', false)\n}\n\n// 处理页面内分类点击\nconst handleSubCategoryClick = (category) => {\n  emit('update:currentMainCategory', category.id)\n  if (category.children?.length) {\n    emit('update:currentLevel', 'third')\n  } else {\n    emit('update:show', false)\n  }\n}\n\n// 处理子分类点击\nconst handleThirdCategoryClick = (category) => {\n  emit('update:currentSubCategory', category.id)\n  emit('update:show', false)\n}\n\nconst handleBack = () => {\n  if (props.currentLevel === 'third') {\n    emit('update:currentLevel', 'sub')\n    emit('update:currentSubCategory', '')\n  } else if (props.currentLevel === 'sub') {\n    emit('update:currentLevel', 'main')\n    emit('update:currentMainCategory', 'all')\n  }\n}\n</script> "],"mappings":";;AA+EA,SAASA,QAAQ,QAAQ,KAAI;AAC7B,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,eAAe,EAAEC,SAAS,QAAQ,2BAA0B;AACrE,SAASC,cAAc,EAAEC,mBAAmB,QAAQ,8BAA6B;;;;;;;;;;;;;;;;;IAEjF,MAAMC,MAAM,GAAGL,SAAS,CAAC;IACzB,MAAMM,KAAK,GAAGC,OAAA;IASd,MAAMC,IAAI,GAAGC,MAAA;;IASb;IACA,MAAMC,YAAY,GAAGX,QAAQ,CAAC,MAAM;MAClC,IAAIO,KAAK,CAACK,YAAY,KAAK,MAAM,EAAE,OAAO,MAAK;MAC/C,IAAIL,KAAK,CAACK,YAAY,KAAK,KAAK,EAAE,OAAOP,mBAAmB,CAACE,KAAK,CAACM,IAAI,CAAC,EAAEC,KAAK,IAAI,MAAK;MACxF,IAAIP,KAAK,CAACK,YAAY,KAAK,OAAO,EAAE;QAClC,MAAMG,YAAY,GAAGC,qBAAqB,CAACC,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKb,KAAK,CAACc,mBAAmB;QAC7F,OAAON,YAAY,EAAEO,IAAI,IAAI,EAAC;MAChC;MACA,OAAO,EAAC;IACV,CAAC;;IAED;IACA,MAAMN,qBAAqB,GAAGhB,QAAQ,CAAC,MAAM;MAC3C,OAAOK,mBAAmB,CAACE,KAAK,CAACM,IAAI,CAAC,EAAEU,UAAU,IAAI,EAAC;IACzD,CAAC;;IAED;IACA,MAAMC,oBAAoB,GAAGxB,QAAQ,CAAC,MAAM;MAC1C,MAAMe,YAAY,GAAGC,qBAAqB,CAACC,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKb,KAAK,CAACc,mBAAmB;MAC7F,OAAON,YAAY,EAAEU,QAAQ,IAAI,EAAC;IACpC,CAAC;;IAED;IACA,MAAMC,uBAAuB,GAAIC,QAAQ,IAAK;MAC5CrB,MAAM,CAACsB,IAAI,CAACD,QAAQ,CAACE,IAAI;MACzBpB,IAAI,CAAC,aAAa,EAAE,KAAK;IAC3B;;IAEA;IACA,MAAMqB,sBAAsB,GAAIH,QAAQ,IAAK;MAC3ClB,IAAI,CAAC,4BAA4B,EAAEkB,QAAQ,CAACP,EAAE;MAC9C,IAAIO,QAAQ,CAACF,QAAQ,EAAEM,MAAM,EAAE;QAC7BtB,IAAI,CAAC,qBAAqB,EAAE,OAAO;MACrC,CAAC,MAAM;QACLA,IAAI,CAAC,aAAa,EAAE,KAAK;MAC3B;IACF;;IAEA;IACA,MAAMuB,wBAAwB,GAAIL,QAAQ,IAAK;MAC7ClB,IAAI,CAAC,2BAA2B,EAAEkB,QAAQ,CAACP,EAAE;MAC7CX,IAAI,CAAC,aAAa,EAAE,KAAK;IAC3B;IAEA,MAAMwB,UAAU,GAAGA,CAAA,KAAM;MACvB,IAAI1B,KAAK,CAACK,YAAY,KAAK,OAAO,EAAE;QAClCH,IAAI,CAAC,qBAAqB,EAAE,KAAK;QACjCA,IAAI,CAAC,2BAA2B,EAAE,EAAE;MACtC,CAAC,MAAM,IAAIF,KAAK,CAACK,YAAY,KAAK,KAAK,EAAE;QACvCH,IAAI,CAAC,qBAAqB,EAAE,MAAM;QAClCA,IAAI,CAAC,4BAA4B,EAAE,KAAK;MAC1C;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}