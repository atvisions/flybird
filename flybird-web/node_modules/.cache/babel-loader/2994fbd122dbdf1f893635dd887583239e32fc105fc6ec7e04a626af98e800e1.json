{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { useStore } from 'vuex';\nimport { useNickname } from '@/composables/useNickname';\nimport { MEDIA_URL } from '@/config';\nimport defaultAvatarImage from '@/assets/images/default-avatar.png';\nimport defaultBackground from '@/assets/images/default-background.jpg';\nimport { showToast } from '@/components/ToastMessage';\nimport { UserIcon, UserCircleIcon, DocumentTextIcon, BriefcaseIcon, StarIcon, CameraIcon, PhotoIcon, FolderIcon, Cog6ToothIcon, IdentificationIcon, HomeIcon, MapPinIcon, QuoteIcon, PencilSquareIcon, CrownIcon, PhoneIcon, EnvelopeIcon, SparklesIcon, PencilIcon, DocumentIcon, ChevronRightIcon, PlusIcon, TrashIcon, ChatBubbleLeftRightIcon, QuestionMarkCircleIcon, InboxArrowDownIcon, EyeIcon, BookmarkIcon, ArrowTopRightOnSquareIcon, GlobeAltIcon } from '@heroicons/vue/24/outline';\nimport profile from '@/api/profile';\nimport { eventBus } from '@/utils/eventBus';\nimport EditBasicDialog from '../dialogs/EditBasicDialog.vue';\nimport AvatarUploadDialog from '../dialogs/AvatarUploadDialog.vue';\nexport default {\n  __name: 'UserHome',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const store = useStore();\n    const nickname = useNickname();\n\n    // No changes to userInfo section\n\n    const handleNicknameUpdate = async () => {\n      const success = await nickname.handleUpdate();\n      if (success) {\n        closeNicknameModal();\n        // 重新获取用户信息\n        const response = await profile.getUserInfo();\n        if (response.data?.code === 200) {\n          store.commit('SET_USER_INFO', response.data);\n        }\n        // 触发全局事件，通知其他组件更新\n        eventBus.emit('user-info-updated');\n      }\n    };\n\n    // 实时验证昵称\n    const validateNickname = () => {\n      nickname.state.error = nickname.validateNickname(nickname.state.value);\n    };\n    const openNicknameModal = () => {\n      nickname.state.value = store.state.userInfo?.data?.user?.username || '';\n      showNicknameModal.value = true;\n    };\n\n    // No changes to rest of the script section\n\n    const __returned__ = {\n      router,\n      store,\n      nickname,\n      handleNicknameUpdate,\n      validateNickname,\n      openNicknameModal,\n      ref,\n      onMounted,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get useNickname() {\n        return useNickname;\n      },\n      get MEDIA_URL() {\n        return MEDIA_URL;\n      },\n      get defaultAvatarImage() {\n        return defaultAvatarImage;\n      },\n      get defaultBackground() {\n        return defaultBackground;\n      },\n      get showToast() {\n        return showToast;\n      },\n      get UserIcon() {\n        return UserIcon;\n      },\n      get UserCircleIcon() {\n        return UserCircleIcon;\n      },\n      get DocumentTextIcon() {\n        return DocumentTextIcon;\n      },\n      get BriefcaseIcon() {\n        return BriefcaseIcon;\n      },\n      get StarIcon() {\n        return StarIcon;\n      },\n      get CameraIcon() {\n        return CameraIcon;\n      },\n      get PhotoIcon() {\n        return PhotoIcon;\n      },\n      get FolderIcon() {\n        return FolderIcon;\n      },\n      get Cog6ToothIcon() {\n        return Cog6ToothIcon;\n      },\n      get IdentificationIcon() {\n        return IdentificationIcon;\n      },\n      get HomeIcon() {\n        return HomeIcon;\n      },\n      get MapPinIcon() {\n        return MapPinIcon;\n      },\n      get QuoteIcon() {\n        return QuoteIcon;\n      },\n      get PencilSquareIcon() {\n        return PencilSquareIcon;\n      },\n      get CrownIcon() {\n        return CrownIcon;\n      },\n      get PhoneIcon() {\n        return PhoneIcon;\n      },\n      get EnvelopeIcon() {\n        return EnvelopeIcon;\n      },\n      get SparklesIcon() {\n        return SparklesIcon;\n      },\n      get PencilIcon() {\n        return PencilIcon;\n      },\n      get DocumentIcon() {\n        return DocumentIcon;\n      },\n      get ChevronRightIcon() {\n        return ChevronRightIcon;\n      },\n      get PlusIcon() {\n        return PlusIcon;\n      },\n      get TrashIcon() {\n        return TrashIcon;\n      },\n      get ChatBubbleLeftRightIcon() {\n        return ChatBubbleLeftRightIcon;\n      },\n      get QuestionMarkCircleIcon() {\n        return QuestionMarkCircleIcon;\n      },\n      get InboxArrowDownIcon() {\n        return InboxArrowDownIcon;\n      },\n      get EyeIcon() {\n        return EyeIcon;\n      },\n      get BookmarkIcon() {\n        return BookmarkIcon;\n      },\n      get ArrowTopRightOnSquareIcon() {\n        return ArrowTopRightOnSquareIcon;\n      },\n      get GlobeAltIcon() {\n        return GlobeAltIcon;\n      },\n      get profile() {\n        return profile;\n      },\n      get eventBus() {\n        return eventBus;\n      },\n      EditBasicDialog,\n      AvatarUploadDialog\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRouter","ElMessage","useStore","useNickname","MEDIA_URL","defaultAvatarImage","defaultBackground","showToast","UserIcon","UserCircleIcon","DocumentTextIcon","BriefcaseIcon","StarIcon","CameraIcon","PhotoIcon","FolderIcon","Cog6ToothIcon","IdentificationIcon","HomeIcon","MapPinIcon","QuoteIcon","PencilSquareIcon","CrownIcon","PhoneIcon","EnvelopeIcon","SparklesIcon","PencilIcon","DocumentIcon","ChevronRightIcon","PlusIcon","TrashIcon","ChatBubbleLeftRightIcon","QuestionMarkCircleIcon","InboxArrowDownIcon","EyeIcon","BookmarkIcon","ArrowTopRightOnSquareIcon","GlobeAltIcon","profile","eventBus","EditBasicDialog","AvatarUploadDialog","router","store","nickname","handleNicknameUpdate","success","handleUpdate","closeNicknameModal","response","getUserInfo","data","code","commit","emit","validateNickname","state","error","value","openNicknameModal","userInfo","user","username","showNicknameModal"],"sources":["/Users/liuzhao/Documents/Projects/flybird/flybird-web/src/views/user/MyProfile/components/UserHome.vue"],"sourcesContent":["<template>\n  <!-- No changes to template section -->\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { useStore } from 'vuex'\nimport { useNickname } from '@/composables/useNickname'\nimport { MEDIA_URL } from '@/config'\nimport defaultAvatarImage from '@/assets/images/default-avatar.png'\nimport defaultBackground from '@/assets/images/default-background.jpg'\nimport { showToast } from '@/components/ToastMessage'\nimport {\n  UserIcon,\n  UserCircleIcon,\n  DocumentTextIcon,\n  BriefcaseIcon,\n  StarIcon,\n  CameraIcon,\n  PhotoIcon,\n  FolderIcon,\n  Cog6ToothIcon,\n  IdentificationIcon,\n  HomeIcon,\n  MapPinIcon,\n  QuoteIcon,\n  PencilSquareIcon,\n  CrownIcon,\n  PhoneIcon,\n  EnvelopeIcon,\n  SparklesIcon,\n  PencilIcon,\n  DocumentIcon,\n  ChevronRightIcon,\n  PlusIcon,\n  TrashIcon,\n  ChatBubbleLeftRightIcon,\n  QuestionMarkCircleIcon,\n  InboxArrowDownIcon,\n  EyeIcon,\n  BookmarkIcon,\n  ArrowTopRightOnSquareIcon,\n  GlobeAltIcon\n} from '@heroicons/vue/24/outline'\nimport profile from '@/api/profile'\nimport { eventBus } from '@/utils/eventBus'\nimport EditBasicDialog from '../dialogs/EditBasicDialog.vue'\nimport AvatarUploadDialog from '../dialogs/AvatarUploadDialog.vue'\n\nconst router = useRouter()\nconst store = useStore()\nconst nickname = useNickname()\n\n// No changes to userInfo section\n\nconst handleNicknameUpdate = async () => {\n  const success = await nickname.handleUpdate()\n  if (success) {\n    closeNicknameModal()\n    // 重新获取用户信息\n    const response = await profile.getUserInfo()\n    if (response.data?.code === 200) {\n      store.commit('SET_USER_INFO', response.data)\n    }\n    // 触发全局事件，通知其他组件更新\n    eventBus.emit('user-info-updated')\n  }\n}\n\n// 实时验证昵称\nconst validateNickname = () => {\n  nickname.state.error = nickname.validateNickname(nickname.state.value)\n}\n\nconst openNicknameModal = () => {\n  nickname.state.value = store.state.userInfo?.data?.user?.username || ''\n  showNicknameModal.value = true\n}\n\n// No changes to rest of the script section\n</script>\n\n<style scoped>\n/* No changes to style section */\n</style> "],"mappings":"AAKA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAI;AAC7C,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,SAAS,QAAQ,cAAa;AACvC,SAASC,QAAQ,QAAQ,MAAK;AAC9B,SAASC,WAAW,QAAQ,2BAA0B;AACtD,SAASC,SAAS,QAAQ,UAAS;AACnC,OAAOC,kBAAkB,MAAM,oCAAmC;AAClE,OAAOC,iBAAiB,MAAM,wCAAuC;AACrE,SAASC,SAAS,QAAQ,2BAA0B;AACpD,SACEC,QAAQ,EACRC,cAAc,EACdC,gBAAgB,EAChBC,aAAa,EACbC,QAAQ,EACRC,UAAU,EACVC,SAAS,EACTC,UAAU,EACVC,aAAa,EACbC,kBAAkB,EAClBC,QAAQ,EACRC,UAAU,EACVC,SAAS,EACTC,gBAAgB,EAChBC,SAAS,EACTC,SAAS,EACTC,YAAY,EACZC,YAAY,EACZC,UAAU,EACVC,YAAY,EACZC,gBAAgB,EAChBC,QAAQ,EACRC,SAAS,EACTC,uBAAuB,EACvBC,sBAAsB,EACtBC,kBAAkB,EAClBC,OAAO,EACPC,YAAY,EACZC,yBAAyB,EACzBC,YAAW,QACN,2BAA0B;AACjC,OAAOC,OAAO,MAAM,eAAc;AAClC,SAASC,QAAQ,QAAQ,kBAAiB;AAC1C,OAAOC,eAAe,MAAM,gCAA+B;AAC3D,OAAOC,kBAAkB,MAAM,mCAAkC;;;;;;;IAEjE,MAAMC,MAAM,GAAG1C,SAAS,CAAC;IACzB,MAAM2C,KAAK,GAAGzC,QAAQ,CAAC;IACvB,MAAM0C,QAAQ,GAAGzC,WAAW,CAAC;;IAE7B;;IAEA,MAAM0C,oBAAoB,GAAG,MAAAA,CAAA,KAAY;MACvC,MAAMC,OAAO,GAAG,MAAMF,QAAQ,CAACG,YAAY,CAAC;MAC5C,IAAID,OAAO,EAAE;QACXE,kBAAkB,CAAC;QACnB;QACA,MAAMC,QAAQ,GAAG,MAAMX,OAAO,CAACY,WAAW,CAAC;QAC3C,IAAID,QAAQ,CAACE,IAAI,EAAEC,IAAI,KAAK,GAAG,EAAE;UAC/BT,KAAK,CAACU,MAAM,CAAC,eAAe,EAAEJ,QAAQ,CAACE,IAAI;QAC7C;QACA;QACAZ,QAAQ,CAACe,IAAI,CAAC,mBAAmB;MACnC;IACF;;IAEA;IACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;MAC7BX,QAAQ,CAACY,KAAK,CAACC,KAAK,GAAGb,QAAQ,CAACW,gBAAgB,CAACX,QAAQ,CAACY,KAAK,CAACE,KAAK;IACvE;IAEA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;MAC9Bf,QAAQ,CAACY,KAAK,CAACE,KAAK,GAAGf,KAAK,CAACa,KAAK,CAACI,QAAQ,EAAET,IAAI,EAAEU,IAAI,EAAEC,QAAQ,IAAI,EAAC;MACtEC,iBAAiB,CAACL,KAAK,GAAG,IAAG;IAC/B;;IAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}